var shadow$provide = {};
(function(){
shadow$provide[0]=function(qa,Oa,kb,F){function Ma(E){Ma="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(C){return typeof C}:function(C){return C&&"function"===typeof Symbol&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C};return Ma(E)}function Na(E,C){if(C&&("object"===Ma(C)||"function"===typeof C))return C;if(void 0===E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}function Ba(E,C,G){Ba="undefined"!==typeof Reflect&&
Reflect.get?Reflect.get:function(Q,U,ba){for(;!Object.prototype.hasOwnProperty.call(Q,U)&&(Q=Pa(Q),null!==Q););if(Q)return U=Object.getOwnPropertyDescriptor(Q,U),U.get?U.get.call(ba):U.value};return Ba(E,C,G||E)}function Pa(E){Pa=Object.setPrototypeOf?Object.getPrototypeOf:function(C){return C.__proto__||Object.getPrototypeOf(C)};return Pa(E)}function Fa(E,C){if("function"!==typeof C&&null!==C)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(C&&C.prototype,
{constructor:{value:E,writable:!0,configurable:!0}});C&&sa(E,C)}function sa(E,C){sa=Object.setPrototypeOf||function(G,Q){G.__proto__=Q;return G};return sa(E,C)}function xa(E,C){if(!(E instanceof C))throw new TypeError("Cannot call a class as a function");}function Qa(E,C){for(var G=0;G<C.length;G++){var Q=C[G];Q.enumerable=Q.enumerable||!1;Q.configurable=!0;"value"in Q&&(Q.writable=!0);Object.defineProperty(E,Q.key,Q)}}function na(E,C,G){C&&Qa(E.prototype,C);G&&Qa(E,G);return E}function Sa(E){return 127462<=
E&&127487>=E}function ta(E,C){if(C==E.length)return C;var G;if(G=C)G=E.charCodeAt(C),G=56320<=G&&57344>G;G&&(G=E.charCodeAt(C-1),G=55296<=G&&56320>G);G&&C--;G=Ga(E,C);for(C+=fa(G);C<E.length;){var Q=Ga(E,C),U;if(!(U=G==t||Q==t))a:{for(U=1;U<y.length;U+=2)if(y[U]>Q){U=y[U-1]<=Q;break a}U=!1}if(U)C+=fa(Q),G=Q;else if(Sa(Q)){Q=0;for(U=C-2;0<=U&&Sa(Ga(E,U));)Q++,U-=2;if(0==Q%2)break;else C+=2}else break}return C}function ya(E,C){for(;0<C;){var G=ta(E,C-2);if(G<C)return G;C--}return 0}function Ga(E,C){var G=
E.charCodeAt(C);if(!(55296<=G&&56320>G)||C+1==E.length)return G;E=E.charCodeAt(C+1);return 56320<=E&&57344>E?(G-55296<<10)+(E-56320)+65536:G}function fa(E){return 65536>E?1:2}function ca(E){return J[R=(R+1)%I]=E}function la(E){var C=-1,G=!0,Q=!1,U=void 0;try{for(var ba=E[Symbol.iterator](),ha;!(G=(ha=ba.next()).done);G=!0)C+=ha.value.length+1}catch(ua){Q=!0,U=ua}finally{try{if(!G&&null!=ba["return"])ba["return"]()}finally{if(Q)throw U;}}return C}function ka(E,C){for(var G=2<arguments.length&&void 0!==
arguments[2]?arguments[2]:0,Q=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1E9,U=0,ba=0,ha=!0;ba<E.length&&U<=Q;ba++){var ua=E[ba],La=U+ua.length;La>=G&&(La>Q&&(ua=ua.slice(0,Q-U)),U<G&&(ua=ua.slice(G-U)),ha?(C[C.length-1]+=ua,ha=!1):C.push(ua));U=La+1}return C}function H(E,C){if(E.length!=C.length||E.lines!=C.lines)return!1;E=new p(E);C=new p(C);for(var G=0,Q=0;;){if(E.lineBreak!=C.lineBreak||E.done!=C.done)return!1;if(E.done)return!0;if(E.lineBreak)E.next(),C.next(),G=Q=0;else{var U=E.value.slice(G),
ba=C.value.slice(Q);if(U.length==ba.length){if(U!=ba)return!1;E.next();C.next();G=Q=0}else if(U.length>ba.length){if(U.slice(0,ba.length)!=ba)return!1;G+=ba.length;C.next();Q=0}else{if(ba.slice(0,U.length)!=U)return!1;Q+=U.length;E.next();G=0}}}}Object.defineProperty(F,"__esModule",{value:!0});F.codePointAt=Ga;F.codePointSize=fa;F.countColumn=function(E,C,G){for(var Q=0;Q<E.length;)9==E.charCodeAt(Q)?(C+=G-C%G,Q++):(C++,Q=ta(E,Q));return C};F.findColumn=function(E,C,G,Q){for(var U=0;U<E.length;){if(C>=
G)return{offset:U,leftOver:0};C+=9==E.charCodeAt(U)?Q-C%Q:1;U=ta(E,U)}return{offset:E.length,leftOver:G-C}};F.fromCodePoint=function(E){if(65535>=E)return String.fromCharCode(E);E-=65536;return String.fromCharCode((E>>10)+55296,(E&1023)+56320)};F.nextClusterBreak=ta;F.prevClusterBreak=ya;F.Text=F.Line=void 0;var y="lc 34 7n 7 7b 19    2  2   20 b 1c l g  2t 7 2 6 2 2  4 z  u r 2j b 1m 9 9  o 4  9  3  5 17 3 3b f  w 1j    4 8 4  3 7 a 2 t  1m    2 4 8  9  a 2 q  2 2 1l  4 2 4 2 2 3 3  u 2 3  b 2 1l  4 5  2 4  k 2 m 6   1m   2  4 8  7 3 a 2 u  1n    c  9  14  3  1l 3 5 3  4 7 2 b 2 t  1m  2  2  3  5 2 7 2 b 2 s 2 1l 2   2 4 8  9  a 2 t  20  4  2 3   8  29  2 7 c 8 2q  2 9 b 6 22 2 r      1j e  5  2 5 b  10 9  2u 4  6  2 2 2 p 2 4 3 g 4 d  2 2 6  f  jj 3 qa 3 t 3 t 2 u 2 1s 2  7 8  2 b 9  19 3 3b 2 y  3a 3 4 2 9  6 3 63 2 2  1m   7     2 8 6 a 2  1c h 1r 4 1c 7   5  14 9 c 2 w 4 2 2  3 1k   2 3   3 1m 8 2 2 48 3  d  7 4  6  3 2 5i 1m  5 ek  5f x 2da 3 3x  2o w fe 6 2x 2 n9w 4  a w 2 28 2 7k  3  4  p 2 5  47 2 q i d  12 8 p b 1a 3 1c  2 4 2 2 13  1v 6 2 2 2 2 c  8  1b  1f   3 2 2 5 2   16 2 8  6m  2  4  fn4  kh g g g a6 2 gt  6a  45 5 1ae 3  2 5 4 14 3 4  4l 2 fx 4 ar 2 49 b 4w  1i f 1k 3 1d 4 2 2 1x 3 10 5  8 1q  c 2 1g 9 a 4 2  2n 3 2   2 6  4g  3 8 l 2 1l 2     m  e 7 3 5 5f 8 2 3   n  29  2 6   2   2  2 6j  2 4 6 2  2 r 2 2d 8 2   2 2y    2 6   2t 3 2 4  5 77 9  2 6t  a 2   4  40 4 2 2 4  w a 14 6 2 4 8  9 6 2 3 1a d  2 ba 7  6   2a m 2 7  2  2 3e 6 3   2  7   20 2 3    9n 2 f0b 5 1n 7 t4  1r 4 29  f5k 2 43q   3 4 5 8 8 2 7 u 4 44 3 1iz 1j 4 1e 8  e  m 5  f 11s 7  h 2 7  2  5 79 7 c5 4 15s 7 31 7 240 5 gx7k 2o 3k 6o".split(" ").map(function(E){return E?
parseInt(E,36):1});for(qa=1;qa<y.length;qa++)y[qa]+=y[qa-1];var t=8205,z=function(){function E(){xa(this,E)}na(E,[{key:"lineAt",value:function(C){if(0>C||C>this.length)throw new RangeError("Invalid position ".concat(C," in document of length ").concat(this.length));var G=!0,Q=!1,U=void 0;try{for(var ba=J[Symbol.iterator](),ha;!(G=(ha=ba.next()).done);G=!0){var ua=ha.value;if(ua.doc==this&&ua.from<=C&&ua.to>=C)return ua}}catch(La){Q=!0,U=La}finally{try{if(!G&&null!=ba["return"])ba["return"]()}finally{if(Q)throw U;
}}return ca(this.lineInner(C,!1,1,0).finish(this))}},{key:"line",value:function(C){if(1>C||C>this.lines)throw new RangeError("Invalid line number ".concat(C," in ").concat(this.lines,"-line document"));var G=!0,Q=!1,U=void 0;try{for(var ba=J[Symbol.iterator](),ha;!(G=(ha=ba.next()).done);G=!0){var ua=ha.value;if(ua.doc==this&&ua.number==C)return ua}}catch(La){Q=!0,U=La}finally{try{if(!G&&null!=ba["return"])ba["return"]()}finally{if(Q)throw U;}}return ca(this.lineInner(C,!0,1,0).finish(this))}},{key:"replace",
value:function(C,G,Q){var U=[];this.decompose(0,C,U);U.push(Q);this.decompose(G,this.length,U);return v.from(U,this.length-(G-C)+Q.length)}},{key:"append",value:function(C){return 0==this.length?C:0==C.length?this:v.from([this,C],this.length+C.length)}},{key:"slice",value:function(C){var G=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length,Q=[];this.decompose(C,G,Q);return v.from(Q,G-C)}},{key:"eq",value:function(C){return this==C||H(this,C)}},{key:"iter",value:function(){return new p(this,
0<arguments.length&&void 0!==arguments[0]?arguments[0]:1)}},{key:"iterRange",value:function(C){return new h(this,C,1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length)}},{key:"iterLines",value:function(){return new q(this,0<arguments.length&&void 0!==arguments[0]?arguments[0]:0)}},{key:"toString",value:function(){return this.sliceString(0)}},{key:"toJSON",value:function(){for(var C=[],G=this.iterLines();!G.next().done;)C.push(G.value);return C}}],[{key:"of",value:function(C){if(0==
C.length)throw new RangeError("A document must have at least one line");if(1==C.length&&!C[0]&&E.empty)return E.empty;var G=la(C);return 1024>G?new r(C,G):v.from(r.split(C,[]),G)}}]);return E}();F.Text=z;"undefined"!=typeof Symbol&&(z.prototype[Symbol.iterator]=function(){return this.iter()});var J=[],R=-1,I=10,r=function(E){function C(G){var Q=1<arguments.length&&void 0!==arguments[1]?arguments[1]:la(G);xa(this,C);var U=Na(this,Pa(C).call(this));U.text=G;U.length=Q;return U}Fa(C,E);na(C,[{key:"lineInner",
value:function(G,Q,U,ba){for(var ha=0;;ha++){var ua=this.text[ha],La=ba+ua.length;if((Q?U:La)>=G)return new u(ba,La,U,ua);ba=La+1;U++}}},{key:"decompose",value:function(G,Q,U){U.push(new C(ka(this.text,[""],G,Q),Math.min(Q,this.length)-Math.max(0,G)))}},{key:"lastLineLength",value:function(){return this.text[this.text.length-1].length}},{key:"firstLineLength",value:function(){return this.text[0].length}},{key:"replace",value:function(G,Q,U){var ba=this.length+U.length-(Q-G);return 1024<=ba||!(U instanceof
C)?Ba(Pa(C.prototype),"replace",this).call(this,G,Q,U):new C(ka(this.text,ka(U.text,ka(this.text,[""],0,G)),Q),ba)}},{key:"sliceString",value:function(G){for(var Q=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length,U=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"\n",ba="",ha=0,ua=0;ha<=Q&&ua<this.text.length;ua++){var La=this.text[ua],Ra=ha+La.length;ha>G&&ua&&(ba+=U);G<Ra&&Q>ha&&(ba+=La.slice(Math.max(0,G-ha),Q-ha));ha=Ra+1}return ba}},{key:"flatten",value:function(G){G[G.length-
1]+=this.text[0];for(var Q=1;Q<this.text.length;Q++)G.push(this.text[Q])}},{key:"lines",get:function(){return this.text.length}},{key:"children",get:function(){return null}}],[{key:"split",value:function(G,Q){var U=[],ba=-1,ha=!0,ua=!1,La=void 0;try{for(var Ra=G[Symbol.iterator](),gb;!(ha=(gb=Ra.next()).done);ha=!0)for(var cb=gb.value;;){var sb=ba+cb.length+1;if(512>sb){ba=sb;U.push(cb);break}G=512-ba-1;var zb=cb.charCodeAt(G);56320<=zb&&57344>zb&&G++;U.push(cb.slice(0,G));Q.push(new C(U,512));cb=
cb.slice(G);ba=-1;U=[]}}catch(pb){ua=!0,La=pb}finally{try{if(!ha&&null!=Ra["return"])Ra["return"]()}finally{if(ua)throw La;}}-1!=ba&&Q.push(new C(U,ba));return Q}}]);return C}(z),v=function(E){function C(G,Q){xa(this,C);var U=Na(this,Pa(C).call(this));U.children=G;U.length=Q;U.lines=1;Q=!0;var ba=!1,ha=void 0;try{for(var ua=G[Symbol.iterator](),La;!(Q=(La=ua.next()).done);Q=!0)U.lines+=La.value.lines-1}catch(Ra){ba=!0,ha=Ra}finally{try{if(!Q&&null!=ua["return"])ua["return"]()}finally{if(ba)throw ha;
}}return U}Fa(C,E);na(C,[{key:"lineInner",value:function(G,Q,U,ba){for(var ha=0;;ha++){var ua=this.children[ha],La=ba+ua.length,Ra=U+ua.lines-1;if((Q?Ra:La)>=G)return G=ua.lineInner(G,Q,U,ba),Q=void 0,G.from==ba&&(Q=this.lineLengthTo(ha))&&(G.from-=Q,G.content=null),G.to==La&&(Q=this.lineLengthFrom(ha+1))&&(G.to+=Q,G.content=null),G;ba=La;U=Ra}}},{key:"decompose",value:function(G,Q,U){for(var ba=0,ha=0;ha<Q&&ba<this.children.length;ba++){var ua=this.children[ba],La=ha+ua.length;G<La&&Q>ha&&(ha>=G&&
La<=Q?U.push(ua):ua.decompose(G-ha,Q-ha,U));ha=La}}},{key:"lineLengthTo",value:function(G){var Q=0;for(--G;0<=G;G--){var U=this.children[G];if(1<U.lines)return Q+U.lastLineLength();Q+=U.length}return Q}},{key:"lastLineLength",value:function(){return this.lineLengthTo(this.children.length)}},{key:"lineLengthFrom",value:function(G){for(var Q=0;G<this.children.length;G++){var U=this.children[G];if(1<U.lines)return Q+U.firstLineLength();Q+=U.length}return Q}},{key:"firstLineLength",value:function(){return this.lineLengthFrom(0)}},
{key:"replace",value:function(G,Q,U){if(512>U.length&&512>Q-G)for(var ba=U.length-(Q-G),ha=0,ua=0;ha<this.children.length;ha++){var La=this.children[ha],Ra=ua+La.length;if(G>=ua&&Q<=Ra&&La.length+ba<this.length+ba>>2&&0<La.length+ba)return Ra=this.children.slice(),Ra[ha]=La.replace(G-ua,Q-ua,U),new C(Ra,this.length+ba);ua=Ra}return Ba(Pa(C.prototype),"replace",this).call(this,G,Q,U)}},{key:"sliceString",value:function(G){for(var Q=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length,
U=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"\n",ba="",ha=0,ua=0;ua<Q&&ha<this.children.length;ha++){var La=this.children[ha],Ra=ua+La.length;if(G<Ra&&Q>ua){La=La.sliceString(G-ua,Q-ua,U);if(G>=ua&&Q<=Ra)return La;ba+=La}ua=Ra}return ba}},{key:"flatten",value:function(G){var Q=!0,U=!1,ba=void 0;try{for(var ha=this.children[Symbol.iterator](),ua;!(Q=(ua=ha.next()).done);Q=!0)ua.value.flatten(G)}catch(La){U=!0,ba=La}finally{try{if(!Q&&null!=ha["return"])ha["return"]()}finally{if(U)throw ba;
}}}}],[{key:"from",value:function(G,Q){function U(tb){var vb=tb.length;if(vb)if(vb>zb&&tb instanceof C){vb=!0;var Mb=!1;var Ab=void 0;try{for(var wb=tb.children[Symbol.iterator](),Nb;!(vb=(Nb=wb.next()).done);vb=!0)U(Nb.value)}catch(oc){Mb=!0,Ab=oc}finally{try{if(!vb&&null!=wb["return"])wb["return"]()}finally{if(Mb)throw Ab;}}}else vb>pb&&(Bb>pb||0==Bb)?(ba(),Ib.push(tb)):tb instanceof r&&0<Bb&&(Mb=xb[xb.length-1])instanceof r&&512>=tb.length+Mb.length?(Bb+=vb,xb[xb.length-1]=new r(ka(tb.text,Mb.text.slice()),
tb.length+Mb.length)):(Bb+vb>sb&&ba(),Bb+=vb,xb.push(tb))}function ba(){0!=Bb&&(Ib.push(1==xb.length?xb[0]:C.from(xb,Bb)),Bb=0,xb.length=0)}if(!G.every(function(tb){return tb instanceof z}))throw Error("NOP");if(1024>Q){var ha=[""],ua=!0,La=!1,Ra=void 0;try{for(var gb=G[Symbol.iterator](),cb;!(ua=(cb=gb.next()).done);ua=!0)cb.value.flatten(ha)}catch(tb){La=!0,Ra=tb}finally{try{if(!ua&&null!=gb["return"])gb["return"]()}finally{if(La)throw Ra;}}return new r(ha,Q)}var sb=Math.max(512,Q>>3),zb=sb<<1,
pb=sb>>1,Ib=[],Bb=0,xb=[];gb=!0;cb=!1;La=void 0;try{for(ha=G[Symbol.iterator]();!(gb=(ua=ha.next()).done);gb=!0)U(ua.value)}catch(tb){cb=!0,La=tb}finally{try{if(!gb&&null!=ha["return"])ha["return"]()}finally{if(cb)throw La;}}ba();return 1==Ib.length?Ib[0]:new C(Ib,Q)}}]);return C}(z);z.empty=z.of([""]);var p=function(){function E(C){var G=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;xa(this,E);this.dir=G;this.lineBreak=this.done=!1;this.value="";this.nodes=[C];this.offsets=[0<G?0:C instanceof
r?C.text.length:C.children.length]}na(E,[{key:"next",value:function(){for(var C=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;;){var G=this.nodes.length-1;if(0>G)return this.done=!0,this.value="",this.lineBreak=!1,this;var Q=this.nodes[G],U=this.offsets[G];if(Q instanceof r)if(U==(0<this.dir?0:Q.text.length)||this.lineBreak){var ba=Q.text[U-(0>this.dir?1:0)];this.offsets[G]=U+=this.dir;U==(0<this.dir?Q.text.length:0)&&(this.nodes.pop(),this.offsets.pop());this.lineBreak=!1;if(ba.length>
Math.max(0,C))return this.value=0==C?ba:0<this.dir?ba.slice(C):ba.slice(0,ba.length-C),this;C-=ba.length}else{this.lineBreak=!0;if(0==C)return this.value="\n",this;C--}else U==(0<this.dir?Q.children.length:0)?(this.nodes.pop(),this.offsets.pop()):(Q=Q.children[0<this.dir?U:U-1],ba=Q.length,this.offsets[G]=U+this.dir,C>ba?C-=ba:(this.nodes.push(Q),this.offsets.push(0<this.dir?0:Q instanceof r?Q.text.length:Q.children.length)))}}}]);return E}(),h=function(){function E(C,G,Q){xa(this,E);this.value="";
this.cursor=new p(C,G>Q?-1:1);G>Q?(this.skip=C.length-G,this.limit=G-Q):(this.skip=G,this.limit=Q-G)}na(E,[{key:"next",value:function(){if(0>=this.limit)this.limit=-1;else{var C=this.cursor.next(this.skip),G=C.value,Q=C.lineBreak;C=C.done;this.skip=0;this.value=G;Q=Q?1:G.length;Q>this.limit&&(this.value=0<this.cursor.dir?G.slice(0,this.limit):G.slice(Q-this.limit));this.limit=C||0==this.value.length?-1:this.limit-this.value.length}return this}},{key:"lineBreak",get:function(){return this.cursor.lineBreak}},
{key:"done",get:function(){return 0>this.limit}}]);return E}(),q=function(){function E(C){var G=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;xa(this,E);this.value="";this.done=!1;this.cursor=C.iter();this.skip=G}na(E,[{key:"next",value:function(){if(this.cursor.done)return this.done=!0,this.value="",this;for(this.value="";;){var C=this.cursor.next(this.skip),G=C.value,Q=C.lineBreak;C=C.done;this.skip=0;if(C||Q)return this;this.value+=G}}},{key:"lineBreak",get:function(){return!1}}]);return E}(),
u=function(){function E(C,G,Q,U){xa(this,E);this.from=C;this.to=G;this.number=Q;this.content=U}na(E,[{key:"slice",value:function(){var C=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,G=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length;if(C==G)return"";if("string"==typeof this.content)return this.content.slice(C,G);this.content||(this.content=new L(this.doc,this.from));var Q=this.content.slice(C,G);0==C&&G==this.length&&(this.content=Q);return Q}},{key:"finish",value:function(C){this.doc=
C;return this}},{key:"findClusterBreak",value:function(C,G){if(0>C||C>this.length)throw new RangeError("Invalid position given to Line.findClusterBreak");if("string"==this.content){var Q=this.from;var U=this.content}else Q=Math.max(0,C-256),U=this.slice(Q,Math.min(this.length,Q+512));return(G?ta:ya)(U,C-Q)+Q}},{key:"length",get:function(){return this.to-this.from}}]);return E}();F.Line=u;var L=function(){function E(C,G){xa(this,E);this.doc=C;this.start=G;this.strings=this.cursor=null}na(E,[{key:"slice",
value:function(C,G){this.cursor||(this.cursor=this.doc.iter(),this.strings=[this.cursor.next(this.start).value]);for(var Q="",U=0,ba=0;;ba++){if(ba==this.strings.length){var ha=this.cursor.next().value;if(!ha)return Q;this.strings.push(ha)}ha=this.strings[ba];var ua=U;U+=ha.length;if(!(U<=C)&&(Q+=ha.slice(Math.max(0,C-ua),Math.min(ha.length,G-ua)),U>=G))return Q}}}]);return E}()};
shadow$provide[1]=function(qa,Oa,kb,F){function Ma(H,y,t,z){H=H.cursor;var J=[];if(!H.firstChild())return J;if(null!=t)for(;!H.type.is(t);)if(!H.nextSibling())return J;for(;;){if(null!=z&&H.type.is(z))return J;H.type.is(y)&&J.push(H.node);if(!H.nextSibling())return null==z?J:[]}}function Na(H){return H.children.some(function(y){return!y.type.isRepeated||y instanceof ta||Na(y)})}function Ba(H){function y(u,L,E,C,G){for(var Q=h.id,U=h.start,ba=h.end,ha=h.size;Q==G;)h.next(),Q=h.id,U=h.start,ba=h.end,
ha=h.size;var ua=U-u;if(0>ha)E.push(v[Q]),C.push(ua),h.next();else{var La=q[Q],Ra;if(Ra=ba-U<=r){var gb=h.pos-L;L=h.fork();var cb=Ra=0,sb=0,zb=L.end-r,pb={size:0,start:0,skip:0},Ib=L.pos-gb;a:for(;L.pos>Ib;)if(L.id==G)pb.size=Ra,pb.start=cb,pb.skip=sb,sb+=4,Ra+=4,L.next();else{var Bb=L.size,xb=L.pos-Bb;if(0>Bb||xb<Ib||L.start<zb)break;var tb=L.id>=p?4:0,vb=L.start;for(L.next();L.pos>xb;){if(0>L.size)break a;L.id>=p&&(tb+=4);L.next()}cb=vb;Ra+=Bb;sb+=tb}if(0>G||Ra==gb)pb.size=Ra,pb.start=cb,pb.skip=
sb;Ra=gb=4<pb.size?pb:void 0}if(Ra){ua=new Uint16Array(gb.size-gb.skip);ha=h.pos-gb.size;for(U=ua.length;h.pos>ha;)U=t(gb.start,ua,U,G);ba=new ta(ua,ba-gb.start,J,0>G?na.none:q[G]);ua=gb.start-u}else{ha=h.pos-ha;h.next();u=[];G=[];for(Q=Q>=p?Q:-1;h.pos>ha;)y(U,ha,u,G,Q);u.reverse();G.reverse();ba=-1<Q&&u.length>ka?Pa(La,La,u,G,0,u.length,0,r,ba-U):new Sa(La,u,G,ba-U)}E.push(ba);C.push(ua)}}function t(u,L,E,C){var G=h.id,Q=h.start,U=h.end,ba=h.size;h.next();if(G==C)return E;var ha=E;if(4<ba)for(ba=
h.pos-(ba-4);h.pos>ba;)E=t(u,L,E,C);G<p&&(L[--E]=ha,L[--E]=U-u,L[--E]=Q-u,L[--E]=G);return E}var z=H.buffer,J=H.group,R=H.topID;R=void 0===R?0:R;var I=H.maxBufferLength,r=void 0===I?1024:I;I=H.reused;var v=void 0===I?[]:I;H=H.minRepeatType;var p=void 0===H?J.types.length:H,h=Array.isArray(z)?new la(z,z.length):z,q=J.types;z=[];for(H=[];0<h.pos;)y(0,0,z,H,-1);I=z.length?H[0]+z[0].length:0;return new Sa(J.types[R],z.reverse(),H.reverse(),I)}function Pa(H,y,t,z,J,R,I,r,v){var p=[],h=[];if(v<=r)for(;J<
R;J++)p.push(t[J]),h.push(z[J]-I);else for(var q=Math.max(r,Math.ceil(1.5*v/ka));J<R;){var u=J,L=z[J];for(J++;J<R&&!(z[J]+t[J].length-L>q);J++);if(J==u+1){u=t[u];if(u instanceof Sa&&u.type==y&&u.length>q<<1){for(var E=0;E<u.children.length;E++)p.push(u.children[E]),h.push(u.positions[E]+L-I);continue}p.push(u)}else if(J==u+1)p.push(t[u]);else{u=Pa(y,y,t,z,u,J,L,r,z[J-1]+t[J-1].length-L);if(E=y!=na.none){a:{E=0;for(var C=u.children;E<C.length;E++)if(C[E].type==y){E=!0;break a}E=!1}E=!E}E&&(u=new Sa(na.none,
u.children,u.positions,u.length));p.push(u)}h.push(L-I)}return new Sa(H,p,h,v)}Object.defineProperty(F,"__esModule",{value:!0});var Fa=0,sa=new WeakMap,xa=function(){function H(y){y=(void 0===y?{}:y).deserialize;this.id=Fa++;this.deserialize=y||function(){throw Error("This node type doesn't define a deserialize function");}}H.string=function(){return new H({deserialize:function(y){return y}})};H.number=function(){return new H({deserialize:Number})};H.flag=function(){return new H({deserialize:function(){return!0}})};
H.prototype.set=function(y,t){y[this.id]=t;return y};H.prototype.add=function(y){return new Qa(this,"function"==typeof y?y:na.match(y))};H.closedBy=new H({deserialize:function(y){return y.split(" ")}});H.openedBy=new H({deserialize:function(y){return y.split(" ")}});H.group=new H({deserialize:function(y){return y.split(" ")}});return H}(),Qa=function(){return function(H,y){this.prop=H;this.f=y}}(),na=function(){function H(y,t,z,J){void 0===J&&(J=0);this.name=y;this.props=t;this.id=z;this.flags=J}
H.prototype.prop=function(y){return this.props[y.id]};Object.defineProperty(H.prototype,"isTop",{get:function(){return 0<(this.flags&1)},enumerable:!0,configurable:!0});Object.defineProperty(H.prototype,"isSkipped",{get:function(){return 0<(this.flags&2)},enumerable:!0,configurable:!0});Object.defineProperty(H.prototype,"isError",{get:function(){return 0<(this.flags&4)},enumerable:!0,configurable:!0});Object.defineProperty(H.prototype,"isRepeated",{get:function(){return 0<(this.flags&8)},enumerable:!0,
configurable:!0});H.prototype.is=function(y){if(this.name==y)return!0;var t=this.prop(xa.group);return t?-1<t.indexOf(y):!1};H.match=function(y){var t=Object.create(null),z;for(z in y)for(var J=0,R=z.split(" ");J<R.length;J++)t[R[J]]=y[z];return function(I){for(var r=I.prop(xa.group),v=-1;v<(r?r.length:0);v++){var p=t[0>v?I.name:r[v]];if(p)return p}}};H.none=new H("",Object.create(null),0);return H}();qa=function(){function H(y){this.types=y;for(var t=0;t<y.length;t++)if(y[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node group");
}H.prototype.extend=function(){for(var y=[],t=0;t<arguments.length;t++)y[t]=arguments[t];t=[];for(var z=0,J=this.types;z<J.length;z++){for(var R=J[z],I=null,r=0,v=y;r<v.length;r++){var p=v[r],h=p.f(R);if(void 0!==h){if(!I){I=Object.create(null);for(var q in R.props)I[q]=R.props[q]}I[p.prop.id]=h}}t.push(I?new na(R.name,I,R.id,R.flags):R)}return new H(t)};return H}();var Sa=function(){function H(y,t,z,J){this.type=y;this.children=t;this.positions=z;this.length=J}H.prototype.toString=function(){var y=
this.children.map(function(t){return t.toString()}).join();return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(y.length?"("+y+")":""):y};H.prototype.partial=function(y,t,z,J,R){for(var I=0;I<this.children.length;I++){var r=this.positions[I];if(r>t)break;var v=this.children[I],p=r+v.length;p<y||(y<=r&&t>=p?(J.push(v),R.push(r+z)):v instanceof H&&v.partial(y-r,t-r,z+r,J,R))}};H.prototype.applyChanges=function(y){function t(h,q,u){for(var L=
h.cursor(q,-u);;)if(!L.enter(u,q))for(;;){if((0>u?L.to<=q:L.from>=q)&&!L.type.isError)return 0>u?Math.min(q,L.to-1):Math.max(q,L.from+1);if(L.sibling(u))break;if(!L.parent())return 0>u?0:h.length}}if(0==y.length)return this;for(var z=[],J=[],R=0,I=0,r=0;;I++){var v=I==y.length?null:y[I],p=v?t(this,v.fromA,-1):this.length;p>r&&this.partial(r,p,R,z,J);if(!v)break;r=t(this,v.toA,1);R+=v.toB-v.fromB-(v.toA-v.fromA)}return new H(na.none,z,J,this.length+R)};H.prototype.cut=function(y){if(y>=this.length)return this;
for(var t=[],z=[],J=0;J<this.children.length;J++){var R=this.positions[J];if(R>=y)break;var I=this.children[J];t.push(R+I.length<=y?I:I.cut(y-R));z.push(R)}return new H(this.type,t,z,y)};H.prototype.cursor=function(y,t){void 0===t&&(t=0);var z=null!=y&&sa.get(this)||this.topNode;z=new ca(z);null!=y&&(z.moveTo(y,t),sa.set(this,z.tree));return z};Object.defineProperty(H.prototype,"topNode",{get:function(){return new ya(this,0,0,null)},enumerable:!0,configurable:!0});H.prototype.resolve=function(y,t){void 0===
t&&(t=0);return this.cursor(y,t).node};H.prototype.iterate=function(y){var t=y.enter,z=y.leave,J=y.from;J=void 0===J?0:J;y=y.to;y=void 0===y?this.length:y;for(var R=this.cursor();;){var I=!1;if(R.from<=y&&R.to>=J&&(R.type.isRepeated||!1!==t(R.type,R.from,R.to))){if(R.firstChild())continue;I=!0}for(;;){I&&z&&z(R.type,R.from,R.to);if(R.nextSibling())break;if(!R.parent())return;I=!0}}};H.prototype.append=function(y){if(!y.children.length)return this;if(y.positions[0]<this.length)throw Error("Can't append overlapping trees");
return new H(this.type,this.children.concat(y.children),this.positions.concat(y.positions),y.length)};H.prototype.balance=function(y){void 0===y&&(y=1024);return this.children.length<=ka?this:Pa(this.type,na.none,this.children,this.positions,0,this.children.length,0,y,this.length)};H.build=function(y){return Ba(y)};H.empty=new H(na.none,[],[],0);return H}(),ta=function(){function H(y,t,z,J){void 0===J&&(J=na.none);this.buffer=y;this.length=t;this.group=z;this.type=J}H.prototype.toString=function(){for(var y=
[],t=0;t<this.buffer.length;)y.push(this.childString(t)),t=this.buffer[t+3];return y.join(",")};H.prototype.childString=function(y){var t=this.buffer[y+3],z=this.group.types[this.buffer[y]],J=z.name;/\W/.test(J)&&!z.isError&&(J=JSON.stringify(J));y+=4;if(t==y)return J;for(z=[];y<t;)z.push(this.childString(y)),y=this.buffer[y+3];return J+"("+z.join(",")+")"};H.prototype.cut=function(y){for(var t=0;t<this.buffer.length&&this.buffer[t+1]<y;)t+=4;for(var z=new Uint16Array(t),J=0;J<t;J+=4)z[J]=this.buffer[J],
z[J+1]=this.buffer[J+1],z[J+2]=Math.min(y,this.buffer[J+2]),z[J+3]=Math.min(this.buffer[J+3],t);return new H(z,Math.min(y,this.length),this.group)};H.prototype.findChild=function(y,t,z,J){for(var R=this.buffer,I=-1;y!=t;y=R[y+3])if(-1E8!=J){var r=R[y+1],v=R[y+2];if(0<z){if(v>J&&(I=y),v>J)break}else if(r<J&&(I=y),v>=J)break}else if(I=y,0<z)break;return I};return H}(),ya=function(){function H(y,t,z,J){this.node=y;this.from=t;this.index=z;this._parent=J}Object.defineProperty(H.prototype,"type",{get:function(){return this.node.type},
enumerable:!0,configurable:!0});Object.defineProperty(H.prototype,"name",{get:function(){return this.node.type.name},enumerable:!0,configurable:!0});Object.defineProperty(H.prototype,"to",{get:function(){return this.from+this.node.length},enumerable:!0,configurable:!0});H.prototype.nextChild=function(y,t,z){for(var J=this;;){for(var R=J.node,I=R.children,r=R.positions,v=0<t?I.length:-1;y!=v;y+=t){R=I[y];var p=r[y]+J.from;if(!(-1E8!=z&&(0>t?p>=z:p+R.length<=z)))if(R instanceof ta){var h=R.findChild(0,
R.buffer.length,t,-1E8==z?-1E8:z-p);if(-1<h)return new fa(new Ga(J,R,y,p),null,h)}else if(!R.type.isRepeated||Na(R))return y=new H(R,p,y,J),y.type.isRepeated?y.nextChild(0>t?R.children.length-1:0,t,z):y}if(!J.type.isRepeated)return null;y=J.index+t;J=J._parent}};Object.defineProperty(H.prototype,"firstChild",{get:function(){return this.nextChild(0,1,-1E8)},enumerable:!0,configurable:!0});Object.defineProperty(H.prototype,"lastChild",{get:function(){return this.nextChild(this.node.children.length-
1,-1,-1E8)},enumerable:!0,configurable:!0});H.prototype.childAfter=function(y){return this.nextChild(0,1,y)};H.prototype.childBefore=function(y){return this.nextChild(this.node.children.length-1,-1,y)};H.prototype.nextSignificant=function(){for(var y=this;y.type.isRepeated;)y=y._parent;return y};Object.defineProperty(H.prototype,"parent",{get:function(){return this._parent?this._parent.nextSignificant():null},enumerable:!0,configurable:!0});Object.defineProperty(H.prototype,"nextSibling",{get:function(){return this._parent?
this._parent.nextChild(this.index+1,1,-1):null},enumerable:!0,configurable:!0});Object.defineProperty(H.prototype,"prevSibling",{get:function(){return this._parent?this._parent.nextChild(this.index-1,-1,-1):null},enumerable:!0,configurable:!0});Object.defineProperty(H.prototype,"cursor",{get:function(){return new ca(this)},enumerable:!0,configurable:!0});H.prototype.resolve=function(y,t){void 0===t&&(t=0);return this.cursor.moveTo(y,t).node};H.prototype.getChild=function(y,t,z){void 0===t&&(t=null);
void 0===z&&(z=null);y=Ma(this,y,t,z);return y.length?y[0]:null};H.prototype.getChildren=function(y,t,z){void 0===t&&(t=null);void 0===z&&(z=null);return Ma(this,y,t,z)};H.prototype.toString=function(){return this.node.toString()};return H}(),Ga=function(){return function(H,y,t,z){this.parent=H;this.buffer=y;this.index=t;this.start=z}}(),fa=function(){function H(y,t,z){this.context=y;this._parent=t;this.index=z;this.type=y.buffer.group.types[y.buffer.buffer[z]]}Object.defineProperty(H.prototype,"name",
{get:function(){return this.type.name},enumerable:!0,configurable:!0});Object.defineProperty(H.prototype,"from",{get:function(){return this.context.start+this.context.buffer.buffer[this.index+1]},enumerable:!0,configurable:!0});Object.defineProperty(H.prototype,"to",{get:function(){return this.context.start+this.context.buffer.buffer[this.index+2]},enumerable:!0,configurable:!0});H.prototype.child=function(y,t){var z=this.context.buffer;y=z.findChild(this.index+4,z.buffer[this.index+3],y,-1E8==t?
-1E8:t-this.context.start);return 0>y?null:new H(this.context,this,y)};Object.defineProperty(H.prototype,"firstChild",{get:function(){return this.child(1,-1E8)},enumerable:!0,configurable:!0});Object.defineProperty(H.prototype,"lastChild",{get:function(){return this.child(-1,-1E8)},enumerable:!0,configurable:!0});H.prototype.childAfter=function(y){return this.child(1,y)};H.prototype.childBefore=function(y){return this.child(-1,y)};Object.defineProperty(H.prototype,"parent",{get:function(){return this._parent||
this.context.parent.nextSignificant()},enumerable:!0,configurable:!0});H.prototype.externalSibling=function(y){return this._parent?null:this.context.parent.nextChild(this.context.index+y,y,-1)};Object.defineProperty(H.prototype,"nextSibling",{get:function(){var y=this.context.buffer,t=y.buffer[this.index+3];return t<(this._parent?y.buffer[this._parent.index+3]:y.buffer.length)?new H(this.context,this._parent,t):this.externalSibling(1)},enumerable:!0,configurable:!0});Object.defineProperty(H.prototype,
"prevSibling",{get:function(){var y=this.context.buffer,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new H(this.context,this._parent,y.findChild(t,this.index,-1,-1))},enumerable:!0,configurable:!0});Object.defineProperty(H.prototype,"cursor",{get:function(){return new ca(this)},enumerable:!0,configurable:!0});H.prototype.resolve=function(y,t){void 0===t&&(t=0);return this.cursor.moveTo(y,t).node};H.prototype.toString=function(){return this.context.buffer.childString(this.index)};
H.prototype.getChild=function(y,t,z){void 0===t&&(t=null);void 0===z&&(z=null);y=Ma(this,y,t,z);return y.length?y[0]:null};H.prototype.getChildren=function(y,t,z){void 0===t&&(t=null);void 0===z&&(z=null);return Ma(this,y,t,z)};return H}(),ca=function(){function H(y){this.buffer=null;this.stack=[];this.index=0;this.bufferNode=null;if(y instanceof ya)this.yieldNode(y);else{this.tree=y.context.parent;this.buffer=y.context;for(var t=y._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=
y;this.yieldBuf(y.index)}}Object.defineProperty(H.prototype,"name",{get:function(){return this.type.name},enumerable:!0,configurable:!0});H.prototype.yieldNode=function(y){if(!y)return!1;this.tree=y;this.type=y.type;this.from=y.from;this.to=y.to;return!0};H.prototype.yieldBuf=function(y,t){this.index=y;var z=this.buffer,J=z.start;z=z.buffer;this.type=t||z.group.types[z.buffer[y]];this.from=J+z.buffer[y+1];this.to=J+z.buffer[y+2];return!0};H.prototype.yield=function(y){if(!y)return!1;if(y instanceof
ya)return this.buffer=null,this.yieldNode(y);this.buffer=y.context;return this.yieldBuf(y.index,y.type)};H.prototype.toString=function(){return this.buffer?this.buffer.buffer.childString(this.index):this.tree.toString()};H.prototype.enter=function(y,t){if(!this.buffer)return this.yield(this.tree.nextChild(0>y?this.tree.node.children.length-1:0,y,t));var z=this.buffer.buffer;y=z.findChild(this.index+4,z.buffer[this.index+3],y,-1E8==t?-1E8:t-this.buffer.start);if(0>y)return!1;this.stack.push(this.index);
return this.yieldBuf(y)};H.prototype.firstChild=function(){return this.enter(1,-1E8)};H.prototype.lastChild=function(){return this.enter(-1,-1E8)};H.prototype.childAfter=function(y){return this.enter(1,y)};H.prototype.childBefore=function(y){return this.enter(-1,y)};H.prototype.parent=function(){if(!this.buffer)return this.yieldNode(this.tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());var y=this.buffer.parent.nextSignificant();this.buffer=null;return this.yieldNode(y)};H.prototype.sibling=
function(y){if(!this.buffer)return this.tree._parent?this.yield(this.tree._parent.nextChild(this.tree.index+y,y,-1E8)):!1;var t=this.buffer.buffer,z=this.stack.length-1;if(0>y){var J=0>z?0:this.stack[z]+4;if(this.index!=J)return this.yieldBuf(t.findChild(J,this.index,-1,-1E8))}else if(J=t.buffer[this.index+3],J<(0>z?t.buffer.length:t.buffer[this.stack[z]+3]))return this.yieldBuf(J);return 0>z?this.yield(this.buffer.parent.nextChild(this.buffer.index+y,y,-1E8)):!1};H.prototype.nextSibling=function(){return this.sibling(1)};
H.prototype.prevSibling=function(){return this.sibling(-1)};H.prototype.atLastNode=function(y){var t,z,J;if(t=this.buffer){if(0<y){if(this.index<t.buffer.buffer.length)return!1}else for(J=0;J<this.index;J++)if(t.buffer.buffer[J+3]<this.index)return!1;J=t.index;t=t.parent}else t=this.tree,J=t.index,t=t._parent;for(;t;z=t,J=z.index,t=z._parent,z){J+=y;for(var R=0>y?-1:t.node.children.length;J!=R;J+=y){var I=t.node.children[J];if(!I.type.isRepeated||I instanceof ta||Na(I))return!1}}return!0};H.prototype.move=
function(y){if(this.enter(y,-1E8))return!0;for(;;){if(this.sibling(y))return!0;if(this.atLastNode(y)||!this.parent())return!1}};H.prototype.next=function(){return this.move(1)};H.prototype.prev=function(){return this.move(-1)};H.prototype.moveTo=function(y,t){for(void 0===t&&(t=0);(this.from==this.to||(1>t?this.from>=y:this.from>y)||(-1<t?this.to<=y:this.to<y))&&this.parent(););for(;0>t?this.childBefore(y):this.childAfter(y);)if(this.from==this.to||(1>t?this.from>=y:this.from>y)||(-1<t?this.to<=y:
this.to<y)){this.parent();break}return this};Object.defineProperty(H.prototype,"node",{get:function(){if(!this.buffer)return this.tree;var y=this.bufferNode,t=null,z=0;if(y&&y.context==this.buffer){var J=this.index,R=this.stack.length;a:for(;0<=R;){for(var I=y;I;I=I._parent)if(I.index==J){if(J==this.index)return I;t=I;z=R+1;break a}J=this.stack[--R]}}for(y=z;y<this.stack.length;y++)t=new fa(this.buffer,t,this.stack[y]);return this.bufferNode=new fa(this.buffer,t,this.index)},enumerable:!0,configurable:!0});
return H}(),la=function(){function H(y,t){this.buffer=y;this.index=t}Object.defineProperty(H.prototype,"id",{get:function(){return this.buffer[this.index-4]},enumerable:!0,configurable:!0});Object.defineProperty(H.prototype,"start",{get:function(){return this.buffer[this.index-3]},enumerable:!0,configurable:!0});Object.defineProperty(H.prototype,"end",{get:function(){return this.buffer[this.index-2]},enumerable:!0,configurable:!0});Object.defineProperty(H.prototype,"size",{get:function(){return this.buffer[this.index-
1]},enumerable:!0,configurable:!0});Object.defineProperty(H.prototype,"pos",{get:function(){return this.index},enumerable:!0,configurable:!0});H.prototype.next=function(){this.index-=4};H.prototype.fork=function(){return new H(this.buffer,this.index)};return H}(),ka=8;F.DefaultBufferLength=1024;F.NodeGroup=qa;F.NodeProp=xa;F.NodePropSource=Qa;F.NodeType=na;F.Tree=Sa;F.TreeBuffer=ta;F.TreeCursor=ca};
shadow$provide[2]=function(qa,Oa,kb,F){function Ma(aa){Ma="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(N){return typeof N}:function(N){return N&&"function"===typeof Symbol&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N};return Ma(aa)}function Na(aa){Na=Object.setPrototypeOf?Object.getPrototypeOf:function(N){return N.__proto__||Object.getPrototypeOf(N)};return Na(aa)}function Ba(aa,N){if("function"!==typeof N&&null!==N)throw new TypeError("Super expression must either be null or a function");
aa.prototype=Object.create(N&&N.prototype,{constructor:{value:aa,writable:!0,configurable:!0}});N&&Pa(aa,N)}function Pa(aa,N){Pa=Object.setPrototypeOf||function(M,D){M.__proto__=D;return M};return Pa(aa,N)}function Fa(aa,N){if(!(aa instanceof N))throw new TypeError("Cannot call a class as a function");}function sa(aa,N){for(var M=0;M<N.length;M++){var D=N[M];D.enumerable=D.enumerable||!1;D.configurable=!0;"value"in D&&(D.writable=!0);Object.defineProperty(aa,D.key,D)}}function xa(aa,N,M){N&&sa(aa.prototype,
N);M&&sa(aa,M);return aa}function Qa(aa,N,M){var D=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1;if(!(0==N&&0>=M)){var T=aa.length-2;0<=T&&0>=M&&M==aa[T+1]?aa[T]+=N:0==N&&0==aa[T]?aa[T+1]+=M:D?(aa[T]+=N,aa[T+1]+=M):aa.push(N,M)}}function na(aa,N,M){if(0!=M.length)if(N=N.length-2>>1,N<aa.length)aa[aa.length-1]=aa[aa.length-1].append(M);else{for(;aa.length<N;)aa.push(p.Text.empty);aa.push(M)}}function Sa(aa,N,M){for(var D=aa.inserted,T=0,W=0,da=0;da<aa.sections.length;){var ma=aa.sections[da++],
Ca=aa.sections[da++];if(0>Ca)T+=ma,W+=ma;else{for(var Ha=T,Ja=W,za=p.Text.empty;;){Ha+=ma;Ja+=Ca;Ca&&D&&(za=za.append(D[da-2>>1]));if(M||da==aa.sections.length||0>aa.sections[da+1])break;ma=aa.sections[da++];Ca=aa.sections[da++]}N(T,Ha,W,Ja,za);T=Ha;W=Ja}}}function ta(aa,N,M){for(var D=[],T=3<arguments.length&&void 0!==arguments[3]&&arguments[3]?[]:null,W=new C(aa),da=new C(N),ma=0,Ca=0;;)if(-1==W.ins)ma+=W.len,W.next();else if(-1==da.ins&&Ca<ma){var Ha=Math.min(da.len,ma-Ca);da.forward(Ha);Qa(D,
Ha,-1);Ca+=Ha}else if(0<=da.ins&&(W.done||Ca<ma||Ca==ma&&(da.len<W.len||da.len==W.len&&!M))){for(Qa(D,da.ins,-1);ma>Ca&&!W.done&&ma+W.len<Ca+da.len;)ma+=W.len,W.next();Ca+=da.len;da.next()}else if(0<=W.ins){Ha=0;for(var Ja=ma+W.len;;)if(0<=da.ins&&Ca>ma&&Ca+da.len<Ja)Ha+=da.ins,Ca+=da.len,da.next();else if(-1==da.ins&&Ca<Ja){var za=Math.min(da.len,Ja-Ca);Ha+=za;da.forward(za);Ca+=za}else break;Qa(D,Ha,W.ins);T&&na(T,D,W.text);ma=Ja;W.next()}else{if(W.done&&da.done)return T?new E(D,T):new L(D);throw Error("Mismatched change set lengths");
}}function ya(aa,N){for(var M=[],D=2<arguments.length&&void 0!==arguments[2]&&arguments[2]?[]:null,T=new C(aa),W=new C(N),da=!1;;){if(T.done&&W.done)return D?new E(M,D):new L(M);if(0==T.ins)Qa(M,T.len,0,da),T.next();else if(0!=W.len||W.done){if(T.done||W.done)throw Error("Mismatched change set lengths");var ma=Math.min(T.len2,W.len),Ca=M.length;if(-1==T.ins){var Ha=-1==W.ins?-1:W.off?0:W.ins;Qa(M,ma,Ha,da);D&&Ha&&na(D,M,W.text)}else-1==W.ins?(Qa(M,T.off?0:T.len,ma,da),D&&na(D,M,T.textBit(ma))):(Qa(M,
T.off?0:T.len,W.off?0:W.ins,da),D&&!W.off&&na(D,M,W.text));da=(T.ins>ma||0<=W.ins&&W.len>ma)&&(da||M.length>Ca);T.forward2(ma);W.forward(ma)}else Qa(M,0,W.ins,da),D&&na(D,M,W.text),W.next()}}function Ga(aa){var N=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;N=aa[N];aa.sort(function(da,ma){return da.from-ma.from});N=aa.indexOf(N);for(var M=1;M<aa.length;M++){var D=aa[M],T=aa[M-1];if(D.empty?D.from<=T.to:D.from<T.to){var W=T.from;T=Math.max(D.to,T.to);M<=N&&N--;aa.splice(--M,2,D.anchor>
D.head?Q.range(T,W):Q.range(W,T))}}return new Q(aa,N)}function fa(aa,N){var M=!0,D=!1,T=void 0;try{for(var W=aa.ranges[Symbol.iterator](),da;!(M=(da=W.next()).done);M=!0)if(da.value.to>N)throw new RangeError("Selection points outside of document");}catch(ma){D=!0,T=ma}finally{try{if(!M&&null!=W["return"])W["return"]()}finally{if(D)throw T;}}}function ca(aa,N){return aa==N||aa.length==N.length&&aa.every(function(M,D){return M===N[D]})}function la(aa,N,M){if(aa.length!=N.length)return!1;for(var D=0;D<
aa.length;D++)if(!M(aa[D],N[D]))return!1;return!0}function ka(aa,N,M){var D=M.map(function(ma){return aa[ma.id]}),T=M.map(function(ma){return ma.type}),W=D.filter(function(ma){return!(ma&1)}),da=aa[N.id]>>1;return function(ma,Ca){var Ha=Ca?Ca.reconfigure?Ca.startState.config.address[N.id]:da<<1:null,Ja=null==Ha,za=!0,Ta=!1,Va=void 0;try{for(var $a=W[Symbol.iterator](),eb;!(za=(eb=$a.next()).done);za=!0)J(ma,eb.value)&1&&(Ja=!0)}catch(lb){Ta=!0,Va=lb}finally{try{if(!za&&null!=$a["return"])$a["return"]()}finally{if(Ta)throw Va;
}}if(!Ja)return 0;Ja=[];for(za=0;za<D.length;za++)if(Ta=R(ma,D[za]),2==T[za]){Va=!0;$a=!1;eb=void 0;try{for(var ab=Ta[Symbol.iterator](),nb;!(Va=(nb=ab.next()).done);Va=!0)Ja.push(nb.value)}catch(lb){$a=!0,eb=lb}finally{try{if(!Va&&null!=ab["return"])ab["return"]()}finally{if($a)throw eb;}}}else Ja.push(Ta);ab=N.combine(Ja);if(null!=Ha&&N.compare(ab,R(Ca.startState,Ha)))return 0;ma.values[da]=ab;return 1}}function H(aa,N){if(!La.hasOwnProperty(N))throw new RangeError("Invalid precedence: ".concat(N));
return new Ra(aa,La[N])}function y(aa,N){return aa?H(N,aa):N}function t(aa){return(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(aa):[]).concat(Object.keys(aa))}function z(aa,N){function M(za,Ta){var Va=T.get(za);if(null!=Va){if(Va>=Ta)return;var $a=D[Va].indexOf(za);-1<$a&&D[Va].splice($a,1)}T.set(za,Ta);if(Array.isArray(za)){Va=!0;$a=!1;var eb=void 0;try{for(var ab=za[Symbol.iterator](),nb;!(Va=(nb=ab.next()).done);Va=!0)M(nb.value,Ta)}catch(lb){$a=!0,eb=lb}finally{try{if(!Va&&null!=
ab["return"])ab["return"]()}finally{if($a)throw eb;}}}else if(za instanceof gb){if(za.tag in W)throw new RangeError("Duplicate use of tag '".concat(String(za.tag),"' in extensions"));W[za.tag]=!0;M(N[za.tag]||za.extension,Ta)}else za.extension?M(za.extension,Ta):za instanceof Ra?M(za.e,za.prec):(D[Ta].push(za),za instanceof ua&&M(za.facets,Ta))}var D=[[],[],[],[]],T=new Map,W=Object.create(null);M(aa,La["default"]);aa=!0;var da=!1,ma=void 0;try{for(var Ca=t(N)[Symbol.iterator](),Ha;!(aa=(Ha=Ca.next()).done);aa=
!0){var Ja=Ha.value;Ja in W||"full"==Ja||!N[Ja]||(W[Ja]=!0,M(N[Ja],La["default"]))}}catch(za){da=!0,ma=za}finally{try{if(!aa&&null!=Ca["return"])Ca["return"]()}finally{if(da)throw ma;}}return D.reduce(function(za,Ta){return za.concat(Ta)})}function J(aa,N){if(N&1)return 2;N>>=1;var M=aa.status[N];if(4==M)throw Error("Cyclic dependency between fields and/or facets");if(M&2)return M;aa.status[N]=4;M=aa.config.dynamicSlots[N](aa,aa.applying);return aa.status[N]=2|M}function R(aa,N){return N&1?aa.config.staticValues[N>>
1]:aa.values[N>>1]}function I(aa,N,M){var D=N.reconfigure;if(D&&D.append){D=Object.assign({},D);var T="undefined"==typeof Symbol?"__append"+Math.floor(4294967295*Math.random()):Symbol("appendConf");D[T]=D.append;D.append=void 0}T=N.selection;return{changes:N.changes instanceof E?N.changes:E.of(N.changes||[],M,aa.facet(zb)),selection:T&&(T instanceof Q?T:Q.single(T.anchor,T.head)),effects:N.effects?Array.isArray(N.effects)?N.effects:[N.effects]:wb,annotations:N.annotations?Array.isArray(N.annotations)?
N.annotations:[N.annotations]:wb,scrollIntoView:!!N.scrollIntoView,reconfigure:D}}function r(aa,N,M){var D=I(aa,N.length?N[0]:{},aa.doc.length);N.length&&!1===N[0].filter&&(M=!1);for(var T=1;T<N.length;T++){!1===N[T].filter&&(M=!1);var W=!!N[T].sequential,da=void 0,ma=D;D=I(aa,N[T],W?D.changes.newLength:aa.doc.length);if(W){var Ca=D.changes;var Ha=E.empty(D.changes.length);W=ma.changes.compose(D.changes)}else Ca=D.changes.map(ma.changes),Ha=ma.changes.mapDesc(D.changes,!0),W=ma.changes.compose(Ca);
D={changes:W,selection:D.selection?D.selection.map(Ha):null===(da=ma.selection)||void 0===da?void 0:da.map(Ca),effects:vb.mapEffects(ma.effects,Ca).concat(vb.mapEffects(D.effects,Ha)),annotations:ma.annotations.length?ma.annotations.concat(D.annotations):D.annotations,scrollIntoView:ma.scrollIntoView||D.scrollIntoView,reconfigure:D.reconfigure?D.reconfigure.full||!ma.reconfigure?D.reconfigure:Object.assign({},ma.reconfigure,D.reconfigure):ma.reconfigure}}aa=new Ab(aa,D.changes,D.selection,D.effects,
D.annotations,D.reconfigure,D.scrollIntoView);if(M){M=aa.startState;T=N=!0;da=!1;ma=void 0;try{var Ja=M.facet(pb)[Symbol.iterator]();for(var za;!(T=(za=Ja.next()).done);T=!0){var Ta=za.value,Va=Ta(aa);if(!1===Va){N=!1;break}if(Array.isArray(Va)){if(!0===N)var $a=Va;else a:{D=N;W=Va;Ha=[];for(var eb=Ca=0;;){if(Ca<D.length&&(eb==W.length||W[eb]>=D[Ca])){var ab=D[Ca++];var nb=D[Ca++]}else if(eb<W.length)ab=W[eb++],nb=W[eb++];else{$a=Ha;break a}!Ha.length||Ha[Ha.length-1]<ab?Ha.push(ab,nb):Ha[Ha.length-
1]<nb&&(Ha[Ha.length-1]=nb)}}N=$a}}}catch(lb){da=!0,ma=lb}finally{try{if(!T&&null!=Ja["return"])Ja["return"]()}finally{if(da)throw ma;}}!0!==N&&(!1===N?(za=aa.changes.invertedDesc,Ja=E.empty(M.doc.length)):(za=aa.changes.filter(N),Ja=za.changes,za=za.filtered.invertedDesc),aa=new Ab(M,Ja,aa.selection&&aa.selection.map(za),vb.mapEffects(aa.effects,za),aa.annotations,aa.reconfigure,aa.scrollIntoView));Ja=M.facet(Ib);for(za=Ja.length-1;0<=za;za--)Ta=Ja[za](aa),aa=Ta instanceof Ab?Ta:Array.isArray(Ta)&&
1==Ta.length&&Ta[0]instanceof Ab?Ta[0]:r(M,Array.isArray(Ta)?Ta:[Ta],!1);Ja=aa}else Ja=aa;return Ja}function v(aa){return function(N){if(!/\S/.test(N))return Nb.Space;a:if(bc)var M=bc.test(N);else{for(M=0;M<N.length;M++){var D=N[M];if(/\w/.test(D)||"Â€"<D&&(D.toUpperCase()!=D.toLowerCase()||oc.test(D))){M=!0;break a}}M=!1}if(M)return Nb.Word;for(M=0;M<aa.length;M++)if(-1<N.indexOf(aa[M]))return Nb.Word;return Nb.Other}}Object.defineProperty(F,"__esModule",{value:!0});F.combineConfig=function(aa,N){var M=
2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},D={},T=!0,W=!1,da=void 0;try{for(var ma=aa[Symbol.iterator](),Ca;!(T=(Ca=ma.next()).done);T=!0)for(var Ha=Ca.value,Ja=0,za=Object.keys(Ha);Ja<za.length;Ja++){var Ta=za[Ja],Va=Ha[Ta],$a=D[Ta];if(void 0===$a)D[Ta]=Va;else if($a!==Va&&void 0!==Va)if(Object.hasOwnProperty.call(M,Ta))D[Ta]=M[Ta]($a,Va);else throw Error("Config merge conflict for field "+Ta);}}catch(ab){W=!0,da=ab}finally{try{if(!T&&null!=ma["return"])ma["return"]()}finally{if(W)throw da;
}}for(var eb in N)void 0===D[eb]&&(D[eb]=N[eb]);return D};F.precedence=H;F.tagExtension=function(aa,N){return new gb(aa,N)};Object.defineProperty(F,"Text",{enumerable:!0,get:function(){return p.Text}});F.languageDataProp=F.Transaction=F.StateField=F.StateEffectType=F.StateEffect=F.SelectionRange=F.MapMode=F.IndentContext=F.Facet=F.EditorState=F.EditorSelection=F.CharCategory=F.ChangeSet=F.ChangeDesc=F.AnnotationType=F.Annotation=void 0;var p=Oa(0),h=Oa(1),q=/\r\n?|\n/,u;F.MapMode=u;(function(aa){aa[aa.Simple=
0]="Simple";aa[aa.TrackDel=1]="TrackDel";aa[aa.TrackBefore=2]="TrackBefore";aa[aa.TrackAfter=3]="TrackAfter"})(u||(F.MapMode=u={}));var L=function(){function aa(N){Fa(this,aa);this.sections=N}xa(aa,[{key:"iterGaps",value:function(N){for(var M=0,D=0,T=0;M<this.sections.length;){var W=this.sections[M++],da=this.sections[M++];0>da?(N(D,T,W),T+=W):T+=da;D+=W}}},{key:"iterChangedRanges",value:function(N){Sa(this,N,1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1)}},{key:"composeDesc",value:function(N){return this.empty?
N:N.empty?this:ya(this,N)}},{key:"mapDesc",value:function(N){var M=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;return N.empty?this:ta(this,N,M)}},{key:"mapPos",value:function(N){for(var M=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1,D=2<arguments.length&&void 0!==arguments[2]?arguments[2]:u.Simple,T=0,W=0,da=0;da<this.sections.length;){var ma=this.sections[da++],Ca=this.sections[da++],Ha=T+ma;if(0>Ca){if(Ha>N)return W+(N-T);W+=ma}else{if(D!=u.Simple&&Ha>=N&&(D==u.TrackDel&&
T<N&&Ha>N||D==u.TrackBefore&&T<N||D==u.TrackAfter&&Ha>N))return null;if(Ha>N||Ha==N&&0>M&&!ma)return N==T||0>M?W:W+Ca;W+=Ca}T=Ha}if(N>T)throw new RangeError("Position ".concat(N," is out of range for changeset of length ").concat(T));return W}},{key:"touchesRange",value:function(N){for(var M=1<arguments.length&&void 0!==arguments[1]?arguments[1]:N,D=0,T=0;D<this.sections.length&&T<=M;){var W=this.sections[D++],da=this.sections[D++];W=T+W;if(0<=da&&T<=M&&W>=N)return T<N&&W>M?"cover":!0;T=W}return!1}},
{key:"toString",value:function(){for(var N="",M=0;M<this.sections.length;){var D=this.sections[M++],T=this.sections[M++];N+=(N?" ":"")+D+(0<=T?":"+T:"")}return N}},{key:"length",get:function(){for(var N=0,M=0;M<this.sections.length;M+=2)N+=this.sections[M];return N}},{key:"newLength",get:function(){for(var N=0,M=0;M<this.sections.length;M+=2){var D=this.sections[M+1];N+=0>D?this.sections[M]:D}return N}},{key:"empty",get:function(){return 0==this.sections.length||2==this.sections.length&&0>this.sections[1]}},
{key:"invertedDesc",get:function(){for(var N=[],M=0;M<this.sections.length;){var D=this.sections[M++],T=this.sections[M++];0>T?N.push(D,T):N.push(T,D)}return new aa(N)}}]);return aa}();F.ChangeDesc=L;var E=function(aa){function N(M,D){Fa(this,N);M=Na(N).call(this,M);if(!M||"object"!==Ma(M)&&"function"!==typeof M){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");M=this}M.inserted=D;return M}Ba(N,aa);xa(N,[{key:"apply",value:function(M){if(this.length!=
M.length)throw new RangeError("Applying change set to a document with the wrong length");Sa(this,function(D,T,W,da,ma){return M=M.replace(W,W+(T-D),ma)},!1);return M}},{key:"mapDesc",value:function(M){return ta(this,M,1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1,!0)}},{key:"invert",value:function(M){for(var D=this.sections.slice(),T=[],W=0,da=0;W<D.length;W+=2){var ma=D[W],Ca=D[W+1];if(0<=Ca){D[W]=Ca;D[W+1]=ma;for(Ca=W>>1;T.length<Ca;)T.push(p.Text.empty);T.push(ma?M.slice(da,da+ma):
p.Text.empty)}da+=ma}return new N(D,T)}},{key:"compose",value:function(M){return this.empty?M:M.empty?this:ya(this,M,!0)}},{key:"map",value:function(M){var D=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;return M.empty?this:ta(this,M,D,!0)}},{key:"iterChanges",value:function(M){Sa(this,M,1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1)}},{key:"filter",value:function(M){var D=[],T=[],W=[],da=new C(this),ma=0,Ca=0;a:for(;;){for(var Ha=ma==M.length?1E9:M[ma++];Ca<Ha||Ca==Ha&&0==
da.len;){if(da.done)break a;var Ja=Math.min(da.len,Ha-Ca);Qa(W,Ja,-1);var za=-1==da.ins?-1:0==da.off?da.ins:0;Qa(D,Ja,za);0<za&&na(T,D,da.text);da.forward(Ja);Ca+=Ja}for(Ha=M[ma++];Ca<Ha;){if(da.done)break a;Ja=Math.min(da.len,Ha-Ca);Qa(D,Ja,-1);Qa(W,Ja,-1==da.ins?-1:0==da.off?da.ins:0);da.forward(Ja);Ca+=Ja}}return{changes:new N(D,T),filtered:new L(W)}}},{key:"toJSON",value:function(){for(var M=[],D=0;D<this.sections.length;D+=2){var T=this.sections[D],W=this.sections[D+1];0>W?M.push(T):0==W?M.push([T]):
M.push([T,this.inserted[D>>1].toJSON()])}return M}},{key:"desc",get:function(){return new L(this.sections)}}],[{key:"of",value:function(M,D,T){function W(){if(0<arguments.length&&void 0!==arguments[0]&&arguments[0]||ma.length){Ha<D&&Qa(ma,D-Ha,-1);var za=new N(ma,Ca);Ja=Ja?Ja.compose(za.map(Ja)):za;ma=[];Ca=[];Ha=0}}function da(za){if(Array.isArray(za)){var Ta=!0,Va=!1,$a=void 0;try{for(var eb=za[Symbol.iterator](),ab;!(Ta=(ab=eb.next()).done);Ta=!0)da(ab.value)}catch(nb){Va=!0,$a=nb}finally{try{if(!Ta&&
null!=eb["return"])eb["return"]()}finally{if(Va)throw $a;}}}else if(za instanceof N){if(za.length!=D)throw new RangeError("Mismatched change set length (got ".concat(za.length,", expected ").concat(D,")"));W();Ja=Ja?Ja.compose(za.map(Ja)):za}else{Ta=za.from;Va=za.to;Va=void 0===Va?Ta:Va;za=za.insert;if(Ta>Va||0>Ta||Va>D)throw new RangeError("Invalid change range ".concat(Ta," to ").concat(Va," (in doc of length ").concat(D,")"));za=za?"string"==typeof za?p.Text.of(za.split(T||q)):za:p.Text.empty;
$a=za.length;if(Ta!=Va||0!=$a)Ta<Ha&&W(),Ta>Ha&&Qa(ma,Ta-Ha,-1),Qa(ma,Va-Ta,$a),na(Ca,ma,za),Ha=Va}}var ma=[],Ca=[],Ha=0,Ja=null;da(M);W(!Ja);return Ja}},{key:"empty",value:function(M){return new N(M?[M,-1]:[],[])}},{key:"fromJSON",value:function(M){for(var D=[],T=[],W=0;W<M.length;W++){var da=M[W];if("number"==typeof da)D.push(da,-1);else if(1==da.length)D.push(da[0],0);else{for(;T.length<W;)T.push(p.Text.empty);T[W]=p.Text.of(da[1]);D.push(da[0],T[W].length)}}return new N(D,T)}}]);return N}(L);
F.ChangeSet=E;var C=function(){function aa(N){Fa(this,aa);this.set=N;this.i=0;this.next()}xa(aa,[{key:"next",value:function(){var N=this.set.sections;this.i<N.length?(this.len=N[this.i++],this.ins=N[this.i++]):(this.len=0,this.ins=-2);this.off=0}},{key:"textBit",value:function(N){var M=this.set.inserted,D=this.i-2>>1;return D>=M.length&&!N?p.Text.empty:M[D].slice(this.off,null==N?void 0:this.off+N)}},{key:"forward",value:function(N){N==this.len?this.next():(this.len-=N,this.off+=N)}},{key:"forward2",
value:function(N){-1==this.ins?this.forward(N):N==this.ins?this.next():(this.ins-=N,this.off+=N)}},{key:"done",get:function(){return-2==this.ins}},{key:"len2",get:function(){return 0>this.ins?this.len:this.ins}},{key:"text",get:function(){var N=this.set.inserted,M=this.i-2>>1;return M>=N.length?p.Text.empty:N[M]}}]);return aa}(),G=function(){function aa(N,M,D){Fa(this,aa);this.from=N;this.to=M;this.flags=D}xa(aa,[{key:"map",value:function(N){var M=N.mapPos(this.from);N=N.mapPos(this.to);return M==
this.from&&N==this.to?this:new aa(M,N,this.flags)}},{key:"extend",value:function(N){var M=1<arguments.length&&void 0!==arguments[1]?arguments[1]:N;return N<=this.anchor&&M>=this.anchor?Q.range(N,M):Q.range(this.anchor,Math.abs(N-this.anchor)>Math.abs(M-this.anchor)?N:M)}},{key:"eq",value:function(N){return this.anchor==N.anchor&&this.head==N.head}},{key:"toJSON",value:function(){return{anchor:this.anchor,head:this.head}}},{key:"anchor",get:function(){return this.flags&16?this.to:this.from}},{key:"head",
get:function(){return this.flags&16?this.from:this.to}},{key:"empty",get:function(){return this.from==this.to}},{key:"assoc",get:function(){return this.flags&4?-1:this.flags&8?1:0}},{key:"bidiLevel",get:function(){var N=this.flags&3;return 3==N?null:N}},{key:"goalColumn",get:function(){var N=this.flags>>5;return 33554431==N?void 0:N}}],[{key:"fromJSON",value:function(N){if(!N||"number"!=typeof N.anchor||"number"!=typeof N.head)throw new RangeError("Invalid JSON representation for SelectionRange");
return Q.range(N.anchor,N.head)}}]);return aa}();F.SelectionRange=G;var Q=function(){function aa(N){var M=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;Fa(this,aa);this.ranges=N;this.primaryIndex=M}xa(aa,[{key:"map",value:function(N){return N.empty?this:aa.create(this.ranges.map(function(M){return M.map(N)}),this.primaryIndex)}},{key:"eq",value:function(N){if(this.ranges.length!=N.ranges.length||this.primaryIndex!=N.primaryIndex)return!1;for(var M=0;M<this.ranges.length;M++)if(!this.ranges[M].eq(N.ranges[M]))return!1;
return!0}},{key:"asSingle",value:function(){return 1==this.ranges.length?this:new aa([this.primary])}},{key:"addRange",value:function(N){var M=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;return aa.create([N].concat(this.ranges),M?0:this.primaryIndex+1)}},{key:"replaceRange",value:function(N){var M=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.primaryIndex,D=this.ranges.slice();D[M]=N;return aa.create(D,this.primaryIndex)}},{key:"toJSON",value:function(){return{ranges:this.ranges.map(function(N){return N.toJSON()}),
primaryIndex:this.primaryIndex}}},{key:"primary",get:function(){return this.ranges[this.primaryIndex]}}],[{key:"fromJSON",value:function(N){if(!N||!Array.isArray(N.ranges)||"number"!=typeof N.primaryIndex||N.primaryIndex>=N.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new aa(N.ranges.map(function(M){return G.fromJSON(M)}),N.primaryIndex)}},{key:"single",value:function(N){return new aa([aa.range(N,1<arguments.length&&void 0!==arguments[1]?arguments[1]:
N)],0)}},{key:"create",value:function(N){var M=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if(0==N.length)throw new RangeError("A selection needs at least one range");for(var D=0,T=0;T<N.length;T++){var W=N[T];if(W.empty?W.from<=D:W.from<D)return Ga(N.slice(),M);D=W.to}return new aa(N,M)}},{key:"cursor",value:function(N){var M=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,D=2<arguments.length?arguments[2]:void 0,T=3<arguments.length?arguments[3]:void 0;return new G(N,N,(0==
M?0:0>M?4:8)|(null==D?3:Math.min(2,D))|(null!==T&&void 0!==T?T:33554431)<<5)}},{key:"range",value:function(N,M,D){D=(null!==D&&void 0!==D?D:33554431)<<5;return M<N?new G(M,N,16|D):new G(N,M,D)}}]);return aa}();F.EditorSelection=Q;var U=0,ba=function(){function aa(N,M,D,T){Fa(this,aa);this.combine=N;this.compareInput=M;this.compare=D;this.isStatic=T;this.id=U++;this["default"]=N([])}xa(aa,[{key:"of",value:function(N){return new ha([],this,0,N)}},{key:"compute",value:function(N,M){if(this.isStatic)throw Error("Can't compute a static facet");
return new ha(N,this,1,M)}},{key:"computeN",value:function(N,M){if(this.isStatic)throw Error("Can't compute a static facet");return new ha(N,this,2,M)}},{key:"from",value:function(N,M){var D=this;return function(T){return y(M,D.compute([T],function(W){return N(W.field(T))}))}}},{key:"nFrom",value:function(N,M){var D=this;return function(T){return y(M,D.computeN([T],function(W){return N(W.field(T))}))}}}],[{key:"define",value:function(){var N=0<arguments.length&&void 0!==arguments[0]?arguments[0]:
{};return new aa(N.combine||function(M){return M},N.compareInput||function(M,D){return M===D},N.compare||(N.combine?function(M,D){return M===D}:ca),!!N["static"])}}]);return aa}();F.Facet=ba;var ha=function(){function aa(N,M,D,T){Fa(this,aa);this.dependencies=N;this.facet=M;this.type=D;this.value=T;this.id=U++}xa(aa,[{key:"dynamicSlot",value:function(N){var M=this.value,D=this.facet.compareInput,T=N[this.id]>>1,W=2==this.type,da=!1,ma=!1,Ca=[],Ha=!0,Ja=!1,za=void 0;try{for(var Ta=this.dependencies[Symbol.iterator](),
Va;!(Ha=(Va=Ta.next()).done);Ha=!0){var $a=Va.value;"doc"==$a?da=!0:"selection"==$a?ma=!0:0==(N[$a.id]&1)&&Ca.push(N[$a.id])}}catch(eb){Ja=!0,za=eb}finally{try{if(!Ha&&null!=Ta["return"])Ta["return"]()}finally{if(Ja)throw za;}}return function(eb,ab){if(!ab||ab.reconfigure)eb.values[T]=M(eb);else{if(!(da&&ab.docChanged||ma&&(ab.docChanged||ab.selection)||Ca.some(function(lb){return 0<(J(eb,lb)&1)})))return 0;var nb=M(eb);ab=ab.startState.values[T];if(W?la(nb,ab,D):D(nb,ab))return 0;eb.values[T]=nb}return 1}}}]);
return aa}(),ua=function(){function aa(N,M,D,T,W){Fa(this,aa);this.id=N;this.createF=M;this.updateF=D;this.compareF=T;this.facets=W}xa(aa,[{key:"slot",value:function(N){var M=this,D=N[this.id]>>1;return function(T,W){if(!W)return T.values[D]=M.createF(T),1;var da=0;if(W.reconfigure){var ma=W.startState.config.address[M.id];ma=null==ma?null:ma>>1;ma=null==ma?M.createF(W.startState):W.startState.values[ma];da=1}else ma=W.startState.values[D];W=M.updateF(ma,W);da||M.compareF(ma,W)||(da=1);da&&(T.values[D]=
W);return da}}}],[{key:"define",value:function(N){var M=[],D=new aa(U++,N.create,N.update,N.compare||function(Ja,za){return Ja===za},M);if(N.provide){var T=!0,W=!1,da=void 0;try{for(var ma=N.provide[Symbol.iterator](),Ca;!(T=(Ca=ma.next()).done);T=!0){var Ha=Ca.value;Ha instanceof ba?M.push(Ha.compute([D],function(Ja){return Ja.field(D)})):M.push(Ha(D))}}catch(Ja){W=!0,da=Ja}finally{try{if(!T&&null!=ma["return"])ma["return"]()}finally{if(W)throw da;}}}return D}}]);return aa}();F.StateField=ua;var La=
{fallback:3,"default":2,extend:1,override:0},Ra=function D(N,M){Fa(this,D);this.e=N;this.prec=M},gb=function T(M,D){Fa(this,T);this.tag=M;this.extension=D},cb=function(){function M(D,T,W,da,ma){Fa(this,M);this.source=D;this.replacements=T;this.dynamicSlots=W;this.address=da;this.staticValues=ma;for(this.statusTemplate=[];this.statusTemplate.length<ma.length;)this.statusTemplate.push(0)}xa(M,[{key:"staticFacet",value:function(D){var T=this.address[D.id];return null==T?D["default"]:this.staticValues[T>>
1]}}],[{key:"resolve",value:function(D){var T=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Object.create(null),W=2<arguments.length?arguments[2]:void 0,da=[],ma=Object.create(null),Ca=!0,Ha=!1,Ja=void 0;try{for(var za=z(D,T)[Symbol.iterator](),Ta;!(Ca=(Ta=za.next()).done);Ca=!0){var Va=Ta.value;Va instanceof ua?da.push(Va):(ma[Va.facet.id]||(ma[Va.facet.id]=[])).push(Va)}}catch(ub){Ha=!0,Ja=ub}finally{try{if(!Ca&&null!=za["return"])za["return"]()}finally{if(Ha)throw Ja;}}var $a=Object.create(null),
eb=[],ab=[];Ca=function(){var ub=lb[nb];$a[ub.id]=ab.length<<1;ab.push(function(hc){return ub.slot(hc)})};for(var nb=0,lb=da;nb<lb.length;nb++)Ca();da=function(ub){var hc=ma[ub],ic=hc[0].facet;if(hc.every(function(Y){return 0==Y.type})){$a[ic.id]=eb.length<<1|1;var cc=ic.combine(hc.map(function(Y){return Y.value}));ub=W?W.config.address[ic.id]:null;null!=ub&&(ub=R(W,ub),ic.compare(cc,ub)&&(cc=ub));eb.push(cc)}else{ub=!0;var wc=!1,xc=void 0;try{var lc=function(){var Y=A.value;0==Y.type?($a[Y.id]=eb.length<<
1|1,eb.push(Y.value)):($a[Y.id]=ab.length<<1,ab.push(function(wa){return Y.dynamicSlot(wa)}))};cc=hc[Symbol.iterator]();for(var A;!(ub=(A=cc.next()).done);ub=!0)lc()}catch(Y){wc=!0,xc=Y}finally{try{if(!ub&&null!=cc["return"])cc["return"]()}finally{if(wc)throw xc;}}$a[ic.id]=ab.length<<1;ab.push(function(Y){return ka(Y,ic,hc)})}};for(var Dc in ma)da(Dc);return new M(D,T,ab.map(function(ub){return ub($a)}),$a,eb)}}]);return M}(),sb=ba.define({combine:function(M){return M.some(function(D){return D})},
"static":!0}),zb=ba.define({combine:function(M){return M.length?M[0]:void 0},"static":!0}),pb=ba.define(),Ib=ba.define();qa=new h.NodeProp;F.languageDataProp=qa;var Bb=ba.define();qa=function(){function M(D){var T=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Fa(this,M);this.state=D;this.options=T}xa(M,[{key:"textAfterPos",value:function(D){var T,W,da=null===(T=this.options)||void 0===T?void 0:T.simulateBreak;return D==da&&(null===(W=this.options)||void 0===W?0:W.simulateDoubleBreak)?
"":this.state.sliceDoc(D,Math.min(D+100,null!=da&&da>D?da:1E9,this.state.doc.lineAt(D).to))}},{key:"countColumn",value:function(D,T){return(0,p.countColumn)(0>T?D:D.slice(0,T),0,this.state.tabSize)}},{key:"lineIndent",value:function(D){var T,W=null===(T=this.options)||void 0===T?void 0:T.overrideIndentation;if(W&&(T=W(D.from),-1<T))return T;D=D.slice(0,Math.min(100,D.length));return this.countColumn(D,D.search(/\S/))}},{key:"column",value:function(D){var T,W=this.state.doc.lineAt(D),da=W.slice(0,
D-W.from);D=this.countColumn(da,D-W.from);W=(null===(T=this.options)||void 0===T?0:T.overrideIndentation)?this.options.overrideIndentation(W.from):-1;-1<W&&(D+=W-this.countColumn(da,da.search(/\S/)));return D}},{key:"unit",get:function(){return this.state.indentUnit}}]);return M}();F.IndentContext=qa;var xb=function(){function M(D,T){Fa(this,M);this.type=D;this.value=T}xa(M,null,[{key:"define",value:function(){return new tb}}]);return M}();F.Annotation=xb;var tb=function(){function M(){Fa(this,M)}
xa(M,[{key:"of",value:function(D){return new xb(this,D)}}]);return M}();F.AnnotationType=tb;var vb=function(){function M(D,T){Fa(this,M);this.type=D;this.value=T}xa(M,[{key:"map",value:function(D){D=this.type.map(this.value,D);return void 0===D?void 0:D==this.value?this:new M(this.type,D)}},{key:"is",value:function(D){return this.type==D}}],[{key:"define",value:function(){return new Mb((0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).map||function(D){return D})}},{key:"mapEffects",value:function(D,
T){if(!D.length)return D;var W=[],da=!0,ma=!1,Ca=void 0;try{for(var Ha=D[Symbol.iterator](),Ja;!(da=(Ja=Ha.next()).done);da=!0){var za=Ja.value.map(T);za&&W.push(za)}}catch(Ta){ma=!0,Ca=Ta}finally{try{if(!da&&null!=Ha["return"])Ha["return"]()}finally{if(ma)throw Ca;}}return W}}]);return M}();F.StateEffect=vb;var Mb=function(){function M(D){Fa(this,M);this.map=D}xa(M,[{key:"of",value:function(D){return new vb(this,D)}}]);return M}();F.StateEffectType=Mb;var Ab=function(){function M(D,T,W,da,ma,Ca,
Ha){Fa(this,M);this.startState=D;this.changes=T;this.selection=W;this.effects=da;this.annotations=ma;this.reconfigure=Ca;this.scrollIntoView=Ha;this._state=this._doc=null;W&&fa(W,T.newLength);ma.some(function(Ja){return Ja.type==M.time})||(this.annotations=ma.concat(M.time.of(Date.now())))}xa(M,[{key:"annotation",value:function(D){var T=!0,W=!1,da=void 0;try{for(var ma=this.annotations[Symbol.iterator](),Ca;!(T=(Ca=ma.next()).done);T=!0){var Ha=Ca.value;if(Ha.type==D)return Ha.value}}catch(Ja){W=
!0,da=Ja}finally{try{if(!T&&null!=ma["return"])ma["return"]()}finally{if(W)throw da;}}}},{key:"newDoc",get:function(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}},{key:"newSelection",get:function(){return this.selection||this.startState.selection.map(this.changes)}},{key:"state",get:function(){this._state||this.startState.applyTransaction(this);return this._state}},{key:"docChanged",get:function(){return!this.changes.empty}}]);return M}();F.Transaction=Ab;Ab.time=xb.define();
Ab.userEvent=xb.define();Ab.addToHistory=xb.define();var wb=[],Nb;F.CharCategory=Nb;(function(M){M[M.Word=0]="Word";M[M.Space=1]="Space";M[M.Other=2]="Other"})(Nb||(F.CharCategory=Nb={}));var oc=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;try{var bc=RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(M){}qa=function(){function M(D,T,W){var da=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;Fa(this,M);this.config=D;this.doc=
T;this.selection=W;this.applying=null;this.status=D.statusTemplate.slice();if(da&&!da.reconfigure)this.values=da.startState.values.slice();else if(this.values=D.dynamicSlots.map(function(Ja){return null}),da)for(var ma in D.address){var Ca=D.address[ma],Ha=da.startState.config.address[ma];null!=Ha&&0==(Ca&1)&&(this.values[Ca>>1]=R(da.startState,Ha))}if(this.applying=da)da._state=this;for(da=0;da<this.config.dynamicSlots.length;da++)J(this,da<<1);this.applying=null}xa(M,[{key:"field",value:function(D){var T=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,W=this.config.address[D.id];if(null==W){if(T)throw new RangeError("Field is not present in this state");}else return J(this,W),R(this,W)}},{key:"update",value:function(){for(var D=arguments.length,T=Array(D),W=0;W<D;W++)T[W]=arguments[W];return r(this,T,!0)}},{key:"applyTransaction",value:function(D){var T=this.config;D.reconfigure&&(T=cb.resolve(D.reconfigure.full||T.source,Object.assign(T.replacements,D.reconfigure,{full:void 0}),this));
new M(T,D.newDoc,D.newSelection,D)}},{key:"replaceSelection",value:function(D){"string"==typeof D&&(D=this.toText(D));return this.changeByRange(function(T){return{changes:{from:T.from,to:T.to,insert:D},range:Q.cursor(T.from+D.length)}})}},{key:"changeByRange",value:function(D){var T=this.selection,W=D(T.ranges[0]),da=this.changes(W.changes);W=[W.range];for(var ma=1;ma<T.ranges.length;ma++){for(var Ca=D(T.ranges[ma]),Ha=this.changes(Ca.changes),Ja=Ha.map(da),za=0;za<ma;za++)W[za]=W[za].map(Ja);W.push(Ca.range.map(da.mapDesc(Ha,
!0)));da=da.compose(Ja)}return{changes:da,selection:Q.create(W,T.primaryIndex)}}},{key:"changes",value:function(){var D=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return D instanceof E?D:E.of(D,this.doc.length,this.facet(M.lineSeparator))}},{key:"toText",value:function(D){return p.Text.of(D.split(this.facet(M.lineSeparator)||q))}},{key:"sliceDoc",value:function(){return this.doc.sliceString(0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,1<arguments.length&&void 0!==arguments[1]?
arguments[1]:this.doc.length,this.lineBreak)}},{key:"facet",value:function(D){var T=this.config.address[D.id];if(null==T)return D["default"];J(this,T);return R(this,T)}},{key:"toJSON",value:function(){return{doc:this.sliceDoc(),selection:this.selection.toJSON()}}},{key:"indentString",value:function(D){var T="";if(9==this.facet(M.indentUnit).charCodeAt(0))for(;D>=this.tabSize;)T+="\t",D-=this.tabSize;for(var W=0;W<D;W++)T+=" ";return T}},{key:"phrase",value:function(D){var T=!0,W=!1,da=void 0;try{for(var ma=
this.facet(M.phrases)[Symbol.iterator](),Ca;!(T=(Ca=ma.next()).done);T=!0){var Ha=Ca.value;if(Object.prototype.hasOwnProperty.call(Ha,D))return Ha[D]}}catch(Ja){W=!0,da=Ja}finally{try{if(!T&&null!=ma["return"])ma["return"]()}finally{if(W)throw da;}}return D}},{key:"charCategorizer",value:function(D){return v(this.languageDataAt("wordChars",D).join(""))}},{key:"languageDataAt",value:function(D,T){for(var W=[],da=this.facet(M.syntax),ma=da.length?0:1;2>ma;ma++){var Ca=this.facet(ma?Bb:da[0].languageDataFacetAt(this,
T)),Ha=!0,Ja=!1,za=void 0;try{for(var Ta=Ca[Symbol.iterator](),Va;!(Ha=(Va=Ta.next()).done);Ha=!0){var $a=Va.value;Object.prototype.hasOwnProperty.call($a,D)&&W.push($a[D])}}catch(eb){Ja=!0,za=eb}finally{try{if(!Ha&&null!=Ta["return"])Ta["return"]()}finally{if(Ja)throw za;}}}return W}},{key:"tabSize",get:function(){return this.facet(M.tabSize)}},{key:"lineBreak",get:function(){return this.facet(M.lineSeparator)||"\n"}},{key:"indentUnit",get:function(){var D=this.facet(M.indentUnit);return 9==D.charCodeAt(0)?
this.tabSize*D.length:D.length}},{key:"tree",get:function(){var D=this.facet(M.syntax);return D.length?D[0].getTree(this):h.Tree.empty}}],[{key:"fromJSON",value:function(D){var T=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!D||"string"!=typeof D.doc)throw new RangeError("Invalid JSON representation for EditorState");return M.create({doc:D.doc,selection:Q.fromJSON(D.selection),extensions:T.extensions})}},{key:"create",value:function(){var D=0<arguments.length&&void 0!==arguments[0]?
arguments[0]:{},T=cb.resolve(D.extensions||[]),W=D.doc instanceof p.Text?D.doc:p.Text.of((D.doc||"").split(T.staticFacet(M.lineSeparator)||q));D=D.selection?D.selection instanceof Q?D.selection:Q.single(D.selection.anchor,D.selection.head):Q.single(0);fa(D,W.length);T.staticFacet(sb)||(D=D.asSingle());return new M(T,W,D)}}]);return M}();F.EditorState=qa;qa.allowMultipleSelections=sb;qa.indentation=ba.define();qa.tabSize=ba.define({combine:function(M){return M.length?M[0]:4}});qa.lineSeparator=zb;
qa.indentUnit=ba.define({combine:function(M){if(!M.length)return"  ";if(!/^(?: +|\t+)$/.test(M[0]))throw Error("Invalid indent unit: "+JSON.stringify(M[0]));return M[0]}});qa.phrases=ba.define();qa.syntax=ba.define();qa.globalLanguageData=Bb;qa.foldable=ba.define();qa.changeFilter=pb;qa.transactionFilter=Ib};
shadow$provide[3]=function(qa,Oa,kb,F){var Ma="undefined"==typeof Symbol?"__Í¼":Symbol.for("Í¼"),Na="undefined"==typeof Symbol?"__styleSet"+Math.floor(1E8*Math.random()):Symbol("styleSet"),Ba="undefined"==typeof qa?window:qa;qa=F.StyleModule=function(sa,xa){function Qa(Ga){if(/^@/.test(Ga))return[Ga];Ga=Ga.split(",");return Sa?Ga.map(Sa):Ga}function na(Ga,fa,ca){var la=[],ka=/^@(\w+)\b/.exec(Ga[0]);if(ka&&null==fa)return ca.push(Ga[0]+";");var H=function(t){if(/&/.test(t))na(Ga.map(function(z){return ta?
ta(t,z):t.replace(/&/,z)}),fa[t],ca);else if("object"==typeof fa[t]){if(!ka)throw new RangeError("The value of a property ("+t+") should be a primitive value.");na("keyframes"==ka[1]?[t]:Qa(t),fa[t],la)}else la.push(t.replace(/_.*/,"").replace(/[A-Z]/g,function(z){return"-"+z.toLowerCase()})+": "+fa[t]+";")},y;for(y in fa)H(y);(la.length||ka&&"keyframes"==ka[1])&&ca.push(Ga.join(",")+" {"+la.join(" ")+"}")}this.rules=[];xa=xa||{};var Sa=xa.process,ta=xa.extend,ya;for(ya in sa)na(Qa(ya),sa[ya],this.rules)};
qa.newName=function(){var sa=Ba[Ma]||1;Ba[Ma]=sa+1;return"Í¼"+sa.toString(36)};qa.mount=function(sa,xa){(sa[Na]||new Fa(sa)).mount(Array.isArray(xa)?xa:[xa])};var Pa=null,Fa=function(sa){if(sa.adoptedStyleSheets&&"undefined"!=typeof CSSStyleSheet){if(Pa)return sa.adoptedStyleSheets=[Pa.sheet].concat(sa.adoptedStyleSheets),sa[Na]=Pa;this.sheet=new CSSStyleSheet;sa.adoptedStyleSheets=[this.sheet].concat(sa.adoptedStyleSheets);Pa=this}else{this.styleTag=(sa.ownerDocument||sa).createElement("style");var xa=
sa.head||sa;xa.insertBefore(this.styleTag,xa.firstChild)}this.modules=[];sa[Na]=this};Fa.prototype.mount=function(sa){for(var xa=this.sheet,Qa=0,na=0,Sa=0;Sa<sa.length;Sa++){var ta=sa[Sa],ya=this.modules.indexOf(ta);ya<na&&-1<ya&&(this.modules.splice(ya,1),na--,ya=-1);if(-1==ya){if(this.modules.splice(na++,0,ta),xa)for(ya=0;ya<ta.rules.length;ya++)xa.insertRule(ta.rules[ya],Qa++)}else{for(;na<ya;)Qa+=this.modules[na++].rules.length;Qa+=ta.rules.length;na++}}if(!xa){sa="";for(xa=0;xa<this.modules.length;xa++)sa+=
this.modules[xa].rules.join("\n")+"\n";this.styleTag.textContent=sa}}};
shadow$provide[4]=function(qa,Oa,kb,F){function Ma(H,y){if(!(H instanceof y))throw new TypeError("Cannot call a class as a function");}function Na(H,y){for(var t=0;t<y.length;t++){var z=y[t];z.enumerable=z.enumerable||!1;z.configurable=!0;"value"in z&&(z.writable=!0);Object.defineProperty(H,z.key,z)}}function Ba(H,y,t){y&&Na(H.prototype,y);t&&Na(H,t);return H}function Pa(H,y){return H.from-y.from||H.value.startSide-y.value.startSide}function Fa(H,y){var t=new Map,z=!0,J=!1,R=void 0;try{for(var I=
H[Symbol.iterator](),r;!(z=(r=I.next()).done);z=!0){var v=r.value;for(H=0;H<v.chunk.length;H++)500>v.chunk[H].maxPoint&&t.set(v.chunk[H],v.chunkPos[H])}}catch(u){J=!0,R=u}finally{try{if(!z&&null!=I["return"])I["return"]()}finally{if(J)throw R;}}z=new Set;J=!0;R=!1;I=void 0;try{for(var p=y[Symbol.iterator](),h;!(J=(h=p.next()).done);J=!0){var q=h.value;for(y=0;y<q.chunk.length;y++)t.get(q.chunk[y])==q.chunkPos[y]&&z.add(q.chunk[y])}}catch(u){R=!0,I=u}finally{try{if(!J&&null!=p["return"])p["return"]()}finally{if(R)throw I;
}}return z}function sa(H,y){for(var t=H[y];;){var z=(y<<1)+1;if(z>=H.length)break;var J=H[z];z+1<H.length&&0<=J.compare(H[z+1])&&(J=H[z+1],z++);if(0>t.compare(J))break;H[z]=t;H[y]=J;y=z}}function xa(H,y,t,z,J,R){H["goto"](y);t["goto"](z);J=z+J;var I=z;for(y=z-y;;){z=H.to+y-t.to||H.endSide-t.endSide;var r=0>z?H.to+y:t.to,v=Math.min(r,J);if(H.point||t.point)H.point&&t.point&&(H.point==t.point||H.point.eq(t.point))||R.comparePoint(I,v,H.point,t.point);else{var p;if(p=v>I){a:{p=H.active;var h=t.active;
if(p.length!=h.length)p=!1;else{for(var q=0;q<p.length;q++)if(p[q]!=h[q]&&!p[q].eq(h[q])){p=!1;break a}p=!0}}p=!p}p&&R.compareRange(I,v,H.active,t.active)}if(r>J)break;I=r;0>=z&&H.next();0<=z&&t.next()}}function Qa(H,y){for(var t=H.length-1;y<t;y++)H[y]=H[y+1];H.pop()}function na(H,y,t){for(var z=H.length-1;z>=y;z--)H[z+1]=H[z];H[y]=t}function Sa(H,y){for(var t=-1,z=1E9,J=0;J<y.length;J++)0>(y[J]-z||H[J].endSide-H[t].endSide)&&(t=J,z=y[J]);return t}Object.defineProperty(F,"__esModule",{value:!0});
F.RangeValue=F.RangeSetBuilder=F.RangeSet=F.Range=void 0;qa=Oa(2);Oa=function(){function H(){Ma(this,H)}Ba(H,[{key:"eq",value:function(y){return this==y}},{key:"range",value:function(y){return new ta(y,1<arguments.length&&void 0!==arguments[1]?arguments[1]:y,this)}}]);return H}();F.RangeValue=Oa;Oa.prototype.startSide=Oa.prototype.endSide=0;Oa.prototype.point=!1;Oa.prototype.mapMode=qa.MapMode.TrackDel;var ta=function J(y,t,z){Ma(this,J);this.from=y;this.to=t;this.value=z};F.Range=ta;var ya=function(){function y(t,
z,J,R){Ma(this,y);this.from=t;this.to=z;this.value=J;this.maxPoint=R}Ba(y,[{key:"findIndex",value:function(t,z){var J=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1E9*z,R=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(0>=t)return R;for(var I=0>z?this.to:this.from,r=I.length;;){if(R==r)return R;var v=R+r>>1,p=I[v]-t||(0>z?this.value[v].startSide:this.value[v].endSide)-J;if(v==R)return 0<=p?R:r;0<=p?r=v:R=v+1}}},{key:"between",value:function(t,z,J,R){z=this.findIndex(z,-1);for(J=
this.findIndex(J,1,void 0,z);z<J;z++)if(!1===R(this.from[z]+t,this.to[z]+t,this.value[z]))return!1}},{key:"map",value:function(t,z){for(var J=[],R=[],I=[],r=-1,v=-1,p=0;p<this.value.length;p++){var h=this.value[p],q=this.from[p]+t,u=this.to[p]+t;if(q==u){u=z.mapPos(q,h.startSide,h.mapMode);if(null==u)continue;q=u}else if(q=z.mapPos(q,h.startSide),u=z.mapPos(u,h.endSide),q>u||q==u&&0<h.startSide&&0>=h.endSide)continue;0>(u-q||h.endSide-h.startSide)||(0>r&&(r=q),h.point&&(v=Math.max(v,u-q)),J.push(h),
R.push(q-r),I.push(u-r))}return{mapped:J.length?new y(R,I,J,v):null,pos:r}}},{key:"length",get:function(){return this.to[this.to.length-1]}}]);return y}(),Ga=function(){function y(t,z){var J=2<arguments.length&&void 0!==arguments[2]?arguments[2]:y.empty,R=3<arguments.length?arguments[3]:void 0;Ma(this,y);this.chunkPos=t;this.chunk=z;this.nextLayer=J;this.maxPoint=R}Ba(y,[{key:"chunkEnd",value:function(t){return this.chunkPos[t]+this.chunk[t].length}},{key:"update",value:function(t){var z=t.add;z=
void 0===z?[]:z;var J=t.sort,R=t.filter,I=t.filterFrom;I=void 0===I?0:I;t=t.filterTo;t=void 0===t?this.length:t;if(0==z.length&&!R)return this;(void 0===J?0:J)&&z.slice().sort(Pa);if(this==y.empty)return z.length?y.of(z):this;J=(new ca(this,null,-1))["goto"](0);for(var r=0,v=[],p=new fa;J.value||r<z.length;)if(r<z.length&&0<=(J.from-z[r].from||J.startSide-z[r].value.startSide)){var h=z[r++];p.addInner(h.from,h.to,h.value)||v.push(h)}else if(1==J.rangeIndex&&J.chunkIndex<this.chunk.length&&(r==z.length||
this.chunkEnd(J.chunkIndex)<z[r].from)&&(!R||I>this.chunkEnd(J.chunkIndex)||t<this.chunkPos[J.chunkIndex])&&p.addChunk(this.chunkPos[J.chunkIndex],this.chunk[J.chunkIndex]))J.nextChunk();else{if(!R||I>J.to||t<J.from||R(J.from,J.to,J.value))p.addInner(J.from,J.to,J.value)||v.push(new ta(J.from,J.to,J.value));J.next()}return p.finishInner(this.nextLayer!=y.empty||v.length?this.nextLayer.update({add:v,filter:R,filterFrom:I,filterTo:t}):y.empty)}},{key:"map",value:function(t){if(0==t.length||this==y.empty)return this;
for(var z=[],J=[],R=-1,I=0;I<this.chunk.length;I++){var r=this.chunkPos[I],v=this.chunk[I],p=t.touchesRange(r,r+v.length);!1===p?(R=Math.max(R,v.maxPoint),z.push(v),J.push(t.mapPos(r))):!0===p&&(v=v.map(r,t),r=v.mapped,v=v.pos,r&&(R=Math.max(R,r.maxPoint),z.push(r),J.push(v)))}t=this.nextLayer.map(t);return 0==z.length?t:new y(J,z,t,R)}},{key:"between",value:function(t,z,J){if(this!=y.empty){for(var R=0;R<this.chunk.length;R++){var I=this.chunkPos[R],r=this.chunk[R];if(z>=I&&t<=I+r.length&&!1===r.between(I,
t-I,z-I,J))return}this.nextLayer.between(t,z,J)}}},{key:"iter",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return la.from([this])["goto"](t)}},{key:"length",get:function(){var t=this.chunk.length-1;return 0>t?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}},{key:"size",get:function(){if(this==y.empty)return 0;var t=this.nextLayer.size,z=!0,J=!1,R=void 0;try{for(var I=this.chunk[Symbol.iterator](),r;!(z=(r=I.next()).done);z=!0)t+=r.value.value.length}catch(v){J=
!0,R=v}finally{try{if(!z&&null!=I["return"])I["return"]()}finally{if(J)throw R;}}return t}}],[{key:"iter",value:function(t){var z=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return la.from(t)["goto"](z)}},{key:"compare",value:function(t,z,J,R){var I,r=null!==(I=R.minPointSize)&&void 0!==I?I:-1;I=t.filter(function(u){return 500<=u.maxPoint||u!=y.empty&&0>z.indexOf(u)&&u.maxPoint>=r});var v=z.filter(function(u){return 500<=u.maxPoint||u!=y.empty&&0>t.indexOf(u)&&u.maxPoint>=r}),p=Fa(I,
v),h=new ka(I,p,r),q=new ka(v,p,r);J.iterGaps(function(u,L,E){return xa(h,u,q,L,E,R)});J.empty&&0==J.length&&xa(h,0,q,0,0,R)}},{key:"spans",value:function(t,z,J,R){var I;t=(new ka(t,null,null!==(I=R.minPointSize)&&void 0!==I?I:-1))["goto"](z);for(I=t.openStart;;){var r=Math.min(t.to,J);t.point?(R.point(z,r,t.point,t.activeForPoint(t.to),I),I=t.openEnd(r)+(t.to>r?1:0)):r>z&&(R.span(z,r,t.active,I),I=t.openEnd(r));if(t.to>J)break;z=t.to;t.next()}return I}},{key:"of",value:function(t){var z=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:!1,J=new fa,R=!0,I=!1,r=void 0;try{for(var v=(t instanceof ta?[t]:z?t.slice().sort(Pa):t)[Symbol.iterator](),p;!(R=(p=v.next()).done);R=!0){var h=p.value;J.add(h.from,h.to,h.value)}}catch(q){I=!0,r=q}finally{try{if(!R&&null!=v["return"])v["return"]()}finally{if(I)throw r;}}return J.finish()}}]);return y}();F.RangeSet=Ga;Ga.empty=new Ga([],[],null,-1);Ga.empty.nextLayer=Ga.empty;var fa=function(){function y(){Ma(this,y);this.chunks=[];this.chunkPos=[];this.chunkStart=
-1;this.last=null;this.lastTo=this.lastFrom=-1E9;this.from=[];this.to=[];this.value=[];this.setMaxPoint=this.maxPoint=-1;this.nextLayer=null}Ba(y,[{key:"finishChunk",value:function(t){this.chunks.push(new ya(this.from,this.to,this.value,this.maxPoint));this.chunkPos.push(this.chunkStart);this.chunkStart=-1;this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint);this.maxPoint=-1;t&&(this.from=[],this.to=[],this.value=[])}},{key:"add",value:function(t,z,J){this.addInner(t,z,J)||(this.nextLayer||(this.nextLayer=
new y)).add(t,z,J)}},{key:"addInner",value:function(t,z,J){var R=t-this.lastTo||J.startSide-this.last.endSide;if(0>=R&&0>(t-this.lastFrom||J.startSide-this.last.startSide))throw Error("Ranges must be added sorted by `from` position and `startSide`");if(0>R)return!1;250==this.from.length&&this.finishChunk(!0);0>this.chunkStart&&(this.chunkStart=t);this.from.push(t-this.chunkStart);this.to.push(z-this.chunkStart);this.last=J;this.lastFrom=t;this.lastTo=z;this.value.push(J);J.point&&(this.maxPoint=Math.max(this.maxPoint,
z-t));return!0}},{key:"addChunk",value:function(t,z){if(0>(t-this.lastTo||z.value[0].startSide-this.last.endSide))return!1;this.from.length&&this.finishChunk(!0);this.setMaxPoint=Math.max(this.setMaxPoint,z.maxPoint);this.chunks.push(z);this.chunkPos.push(t);var J=z.value.length-1;this.last=z.value[J];this.lastFrom=z.from[J]+t;this.lastTo=z.to[J]+t;return!0}},{key:"finish",value:function(){return this.finishInner(Ga.empty)}},{key:"finishInner",value:function(t){this.from.length&&this.finishChunk(!1);
if(0==this.chunks.length)return t;t=new Ga(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);this.from=null;return t}}]);return y}();F.RangeSetBuilder=fa;var ca=function(){function y(t,z,J){var R=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;Ma(this,y);this.layer=t;this.skip=z;this.minPoint=J;this.rank=R}Ba(y,[{key:"goto",value:function(t){var z=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1E9;this.chunkIndex=this.rangeIndex=0;this.gotoInner(t,
z,!1);return this}},{key:"gotoInner",value:function(t,z,J){for(;this.chunkIndex<this.layer.chunk.length;){var R=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(R)||this.layer.chunkEnd(this.chunkIndex)<t||R.maxPoint<this.minPoint))break;this.chunkIndex++;J=!1}t=this.chunkIndex==this.layer.chunk.length?0:this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],-1,z);if(!J||this.rangeIndex<t)this.rangeIndex=t;this.next()}},{key:"forward",value:function(t,z){0>
(this.to-t||this.endSide-z)&&this.gotoInner(t,z,!0)}},{key:"next",value:function(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1E9;this.value=null;break}else{var t=this.layer.chunkPos[this.chunkIndex],z=this.layer.chunk[this.chunkIndex];this.from=t+z.from[this.rangeIndex];this.to=t+z.to[this.rangeIndex];this.value=z.value[this.rangeIndex];if(++this.rangeIndex==z.value.length){this.chunkIndex++;if(this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;
this.rangeIndex=0}if(0>this.minPoint||this.value.point&&this.to-this.from>=this.minPoint)break}}},{key:"nextChunk",value:function(){this.chunkIndex++;this.rangeIndex=0;this.next()}},{key:"compare",value:function(t){return this.from-t.from||this.startSide-t.startSide||this.to-t.to||this.endSide-t.endSide}},{key:"startSide",get:function(){return this.value?this.value.startSide:0}},{key:"endSide",get:function(){return this.value?this.value.endSide:0}}]);return y}(),la=function(){function y(t){Ma(this,
y);this.heap=t}Ba(y,[{key:"goto",value:function(t){var z=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1E9,J=!0,R=!1,I=void 0;try{for(var r=this.heap[Symbol.iterator](),v;!(J=(v=r.next()).done);J=!0)v.value["goto"](t,z)}catch(p){R=!0,I=p}finally{try{if(!J&&null!=r["return"])r["return"]()}finally{if(R)throw I;}}for(z=this.heap.length>>1;0<=z;z--)sa(this.heap,z);this.next();return this}},{key:"forward",value:function(t,z){var J=!0,R=!1,I=void 0;try{for(var r=this.heap[Symbol.iterator](),v;!(J=
(v=r.next()).done);J=!0)v.value.forward(t,z)}catch(p){R=!0,I=p}finally{try{if(!J&&null!=r["return"])r["return"]()}finally{if(R)throw I;}}for(J=this.heap.length>>1;0<=J;J--)sa(this.heap,J);0>(this.to-t||this.value.endSide-z)&&this.next()}},{key:"next",value:function(){if(0==this.heap.length)this.from=this.to=1E9,this.value=null,this.rank=-1;else{var t=this.heap[0];this.from=t.from;this.to=t.to;this.value=t.value;this.rank=t.rank;t.value&&t.next();sa(this.heap,0)}}},{key:"startSide",get:function(){return this.value?
this.value.startSide:0}}],[{key:"from",value:function(t){for(var z=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,J=2<arguments.length&&void 0!==arguments[2]?arguments[2]:-1,R=[],I=0;I<t.length;I++)for(var r=t[I];r!=Ga.empty;r=r.nextLayer)r.maxPoint>=J&&R.push(new ca(r,z,J,I));return 1==R.length?R[0]:new y(R)}}]);return y}(),ka=function(){function y(t,z,J){Ma(this,y);this.minPoint=J;this.active=[];this.activeTo=[];this.activeRank=[];this.minActive=-1;this.point=null;this.pointRank=this.pointFrom=
0;this.to=-1E9;this.endSide=0;this.openStart=-1;this.cursor=la.from(t,z,J)}Ba(y,[{key:"goto",value:function(t){var z=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1E9;this.cursor["goto"](t,z);this.active.length=this.activeTo.length=this.activeRank.length=0;this.minActive=-1;this.to=t;this.endSide=z;this.openStart=-1;this.next();return this}},{key:"forward",value:function(t,z){for(;-1<this.minActive&&0>(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-z);)this.removeActive(this.minActive);
this.cursor.forward(t,z)}},{key:"removeActive",value:function(t){Qa(this.active,t);Qa(this.activeTo,t);Qa(this.activeRank,t);this.minActive=Sa(this.active,this.activeTo)}},{key:"addActive",value:function(t){var z=0,J=this.cursor,R=J.value,I=J.to;for(J=J.rank;z<this.activeRank.length&&this.activeRank[z]<=J;)z++;na(this.active,z,R);na(this.activeTo,z,I);na(this.activeRank,z,J);t&&na(t,z,this.cursor.from);this.minActive=Sa(this.active,this.activeTo)}},{key:"next",value:function(){var t=this.to;this.point=
null;for(var z=0>this.openStart?[]:null,J=0;;){var R=this.minActive;if(-1<R&&0>(this.activeTo[R]-this.cursor.from||this.active[R].endSide-this.cursor.startSide)){if(this.activeTo[R]>t){this.to=this.activeTo[R];this.endSide=this.active[R].endSide;break}this.removeActive(R);z&&Qa(z,R)}else if(this.cursor.value)if(this.cursor.from>t){this.to=this.cursor.from;this.endSide=this.cursor.startSide;break}else if(R=this.cursor.value,R.point){this.point=R;this.pointFrom=this.cursor.from;this.pointRank=this.cursor.rank;
this.to=this.cursor.to;this.endSide=R.endSide;this.cursor.from<t&&(J=1);this.cursor.next();this.to>t&&this.forward(this.to,this.endSide);break}else this.addActive(z),this.cursor.next();else{this.to=this.endSide=1E9;break}}if(z){for(R=0;R<z.length&&z[R]<t;)R++;this.openStart=R+J}}},{key:"activeForPoint",value:function(t){if(!this.active.length)return this.active;for(var z=[],J=0;J<this.active.length&&!(this.activeRank[J]>this.pointRank);J++)(this.activeTo[J]>t||this.activeTo[J]==t&&this.active[J].endSide>
this.point.endSide)&&z.push(this.active[J]);return z}},{key:"openEnd",value:function(t){for(var z=0;z<this.activeTo.length&&this.activeTo[z]>t;)z++;return z}}]);return y}()};
shadow$provide[5]=function(qa,Oa,kb,F){Object.defineProperty(F,"__esModule",{value:!0});var Ma={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"\x3d",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",
162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"\x3d",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},Na={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"\x26",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"\x3c",189:"_",190:"\x3e",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"};qa="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent);var Ba="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor);
Oa="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent);kb="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);var Pa="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Fa=qa&&(kb||57>+qa[1])||Oa&&kb;for(qa=0;10>qa;qa++)Ma[48+qa]=Ma[96+qa]=String(qa);for(qa=1;24>=qa;qa++)Ma[qa+111]="F"+qa;for(qa=65;90>=qa;qa++)Ma[qa]=String.fromCharCode(qa+32),Na[qa]=String.fromCharCode(qa);for(var sa in Ma)Na.hasOwnProperty(sa)||(Na[sa]=
Ma[sa]);F.base=Ma;F.keyName=function(xa){xa=!(Fa&&(xa.ctrlKey||xa.altKey||xa.metaKey)||(Ba||Pa)&&xa.shiftKey&&xa.key&&1==xa.key.length)&&xa.key||(xa.shiftKey?Na:Ma)[xa.keyCode]||xa.key||"Unidentified";"Esc"==xa&&(xa="Escape");"Del"==xa&&(xa="Delete");"Left"==xa&&(xa="ArrowLeft");"Up"==xa&&(xa="ArrowUp");"Right"==xa&&(xa="ArrowRight");"Down"==xa&&(xa="ArrowDown");return xa};F.shift=Na};
shadow$provide[6]=function(qa,Oa,kb,F){function Ma(m,e,a){Ma="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(b,d,g){for(;!Object.prototype.hasOwnProperty.call(b,d)&&(b=Fa(b),null!==b););if(b)return d=Object.getOwnPropertyDescriptor(b,d),d.get?d.get.call(g):d.value};return Ma(m,e,a||m)}function Na(m){Na="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?
"symbol":typeof e};return Na(m)}function Ba(m,e){return!e||"object"!==Na(e)&&"function"!==typeof e?Pa(m):e}function Pa(m){if(void 0===m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function Fa(m){Fa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return Fa(m)}function sa(m,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");m.prototype=
Object.create(e&&e.prototype,{constructor:{value:m,writable:!0,configurable:!0}});e&&xa(m,e)}function xa(m,e){xa=Object.setPrototypeOf||function(a,b){a.__proto__=b;return a};return xa(m,e)}function Qa(m){if(Array.isArray(m)){var e=0;for(var a=Array(m.length);e<m.length;e++)a[e]=m[e];e=a}else e=void 0;e||(e=Symbol.iterator in Object(m)||"[object Arguments]"===Object.prototype.toString.call(m)?Array.from(m):void 0);if(!(m=e))throw new TypeError("Invalid attempt to spread non-iterable instance");return m}
function na(m,e){if(!(m instanceof e))throw new TypeError("Cannot call a class as a function");}function Sa(m,e){for(var a=0;a<e.length;a++){var b=e[a];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(m,b.key,b)}}function ta(m,e,a){e&&Sa(m.prototype,e);a&&Sa(m,a);return m}function ya(m){return m.getSelection?m.getSelection():document.getSelection()}function Ga(m){var e=m.isCollapsed;e&&jb.chrome&&m.rangeCount&&!m.getRangeAt(0).collapsed&&(e=!1);return e}
function fa(m,e){if(!e.anchorNode)return!1;try{return m.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)}catch(a){return!1}}function ca(m){if(3==m.nodeType){var e=Ec||(Ec=document.createRange());e.setEnd(m,m.nodeValue.length);e.setStart(m,0);return e.getClientRects()}return 1==m.nodeType?m.getClientRects():[]}function la(m,e,a,b){return a?H(m,e,a,b,-1)||H(m,e,a,b,1):!1}function ka(m){for(var e=0;;e++)if(m=m.previousSibling,!m)return e}function H(m,e,a,b,d){for(;;){if(m==a&&
e==b)return!0;if(e==(0>d?0:y(m))){if("DIV"==m.nodeName)return!1;var g=m.parentNode;if(!g||1!=g.nodeType)return!1;e=ka(m)+(0>d?0:1);m=g}else if(1==m.nodeType)m=m.childNodes[e+(0>d?-1:0)],e=0>d?y(m):0;else return!1}}function y(m){return 3==m.nodeType?m.nodeValue.length:m.childNodes.length}function t(m,e){e=e?m.left:m.right;return{left:e,right:e,top:m.top,bottom:m.bottom}}function z(m){if(m.setActive)return m.setActive();if(Tb)return m.focus(Tb);for(var e=[],a=m;a&&(e.push(a,a.scrollTop,a.scrollLeft),
a!=a.ownerDocument);a=a.parentNode);m.focus(null==Tb?{get preventScroll(){Tb={preventScroll:!0};return!0}}:void 0);if(!Tb)for(Tb=!1,m=0;m<e.length;){a=e[m++];var b=e[m++],d=e[m++];a.scrollTop!=b&&(a.scrollTop=b);a.scrollLeft!=d&&(a.scrollLeft=d)}}function J(m){var e=m.nextSibling;m.parentNode.removeChild(m);return e}function R(m,e,a,b){var d=e,g=e,l=0;0==e&&0>a||e==b&&0<=a?jb.chrome||jb.gecko||(e?(d--,l=1):(g++,l=-1)):0>a?d--:g++;e=Ec||(Ec=document.createRange());e.setEnd(m,g);e.setStart(m,d);m=e.getBoundingClientRect();
return l?t(m,0>l):m}function I(m,e,a,b,d,g){var l=m.childCursor(),w=l.findPos(a,1),K=w.i;w=w.off;var P=l.findPos(e,-1);l=P.i;P=P.off;e-=a;a=!0;var V=!1,X=void 0;try{for(var ja=b[Symbol.iterator](),ia;!(a=(ia=ja.next()).done);a=!0)e+=ia.value.length}catch(Da){V=!0,X=Da}finally{try{if(!a&&null!=ja["return"])ja["return"]()}finally{if(V)throw X;}}m.length+=e;ja=m.children;if(l==K&&P){ia=ja[l];if(1==b.length&&ia.merge(P,w,b[0],d,g))return;if(0==b.length){ia.merge(P,w,null,d,g);return}w=ia.slice(w);w.merge(0,
0,b[b.length-1],0,g)?b[b.length-1]=w:b.push(w);K++;g=w=0}w?(ia=ja[K],b.length&&ia.merge(0,w,b[b.length-1],0,g)?(b.pop(),g=0):ia.merge(0,w,null,0,0)):K<ja.length&&b.length&&ja[K].merge(0,0,b[b.length-1],0,g)&&(b.pop(),g=0);P?(w=ja[l],b.length&&w.merge(P,w.length,b[0],d,0)?(b.shift(),d=0):w.merge(P,w.length,null,0,0),l++):l&&b.length&&(w=ja[l-1],w.merge(w.length,w.length,b[0],d,0)&&(b.shift(),d=0));for(;l<K&&b.length&&ja[K-1].become(b[b.length-1]);)b.pop(),K--,g=0;for(;l<K&&b.length&&ja[l].become(b[0]);)b.shift(),
l++,d=0;!b.length&&l&&K<ja.length&&d&&g&&ja[K].merge(0,0,ja[l-1],d,g)&&l--;(b.length||l!=K)&&m.replaceChildren(l,K,b)}function r(m,e,a){for(var b=0,d=0;b<e.length;b++){var g=e[b],l=d+g.length;if(!(l==d&&0>=g.getSide())){if(a>d&&a<l&&g.dom.parentNode==m)return g.domAtPos(a-d);if(a<=d)break;d=l}}for(;0<b;b--)if(a=e[b-1].dom,a.parentNode==m)return mc.after(a);return new mc(m,0)}function v(m,e,a){var b,d=m.children;0<a&&e instanceof Vc&&d.length&&(b=d[d.length-1])instanceof Vc&&b.mark.eq(e.mark)?v(b,
e.children[0],a-1):(d.push(e),e.setParent(m));m.length+=e.length}function p(m,e,a){for(var b=0,d=0;d<m.children.length;d++){var g=m.children[d],l=b+g.length;if(!(l==b&&0>=g.getSide())){if(0>=a||l==m.length?l>=e:l>e)return g.coordsAt(e-b,a);b=l}}return(m.dom.lastChild||m.dom).getBoundingClientRect()}function h(m,e){for(var a in m)"class"==a&&e["class"]?e["class"]+=" "+m["class"]:"style"==a&&e.style?e.style+=";"+m.style:e[a]=m[a];return e}function q(m,e){if(m==e)return!0;if(!m||!e)return!1;var a=Object.keys(m),
b=Object.keys(e);if(a.length!=b.length)return!1;for(var d=0;d<a.length;d++){var g=a[d];if(-1==b.indexOf(g)||m[g]!==e[g])return!1}return!0}function u(m,e,a){if(e)for(var b in e)a&&b in a||m.removeAttribute(b);if(a)for(var d in a)e&&e[d]==a[d]||m.setAttribute(d,a[d])}function L(m){var e=m.inclusiveStart,a=m.inclusiveEnd;null==e&&(e=m.inclusive);null==a&&(a=m.inclusive);return{start:e||!1,end:a||!1}}function E(m,e,a){var b=a.length-1;0<=b&&a[b]+4>m?a[b]=Math.max(a[b],e):a.push(m,e)}function C(m){return m.replace(/\$\w[\w\.]*/g,
function(e){e=e.slice(1).split(".");for(var a="",b=1;b<=e.length;b++)a+=".cm-"+e.slice(0,b).join("-");return a})}function G(m,e){return new Y.StyleModule(e,{process:function(a){a=C(a);return/\$/.test(a)?a.replace(/\$/,m):m+" "+a},extend:function(a,b){a=C(a);return b.slice(0,m.length+1)==m+" "?m+" "+a.replace(/&/,b.slice(m.length+1)):a.replace(/&/,b)}})}function Q(m){if(0>m.indexOf("."))return"cm-"+m;m=m.split(".");for(var e="",a=1;a<=m.length;a++)e+=(e?" ":"")+"cm-"+m.slice(0,a).join("-");return e}
function U(m){for(var e=[],a=0;a<m.length;a++)e.push(1<<+m[a]);return e}function ba(m,e){var a=m.length;e=e==dd?1:2;if(!m||1==e&&!nd.test(m))return[new rc(0,a,0)];for(var b=0,d=e,g=e;b<a;b++){var l=m.charCodeAt(b);l=247>=l?od[l]:1424<=l&&1524>=l?2:1536<=l&&1785>=l?pd[l-1536]:1774<=l&&2220>=l?4:8192<=l&&8203>=l?256:8204==l?256:1;512==l?l=d:8==l&&4==g&&(l=16);Eb[b]=4==l?2:l;l&7&&(g=l);d=l}g=0;for(m=l=e;g<a;g++){b=Eb[g];if(128==b)g<a-1&&l==Eb[g+1]&&l&24?b=Eb[g]=l:Eb[g]=256;else if(64==b){for(d=g+1;d<
a&&64==Eb[d];)d++;for(l=g&&8==l||d<a&&8==Eb[d]?1==m?1:8:256;g<d;g++)Eb[g]=l;g=d-1}else 8==b&&1==m&&(Eb[g]=1);l=b;b&7&&(m=b)}for(b=0;b<a;b++)if(256==Eb[b]){for(m=b+1;m<a&&256==Eb[m];)m++;d=1==(b?Eb[b-1]:e);for(d=d==(1==(m<a?Eb[m]:e))?d?1:2:e;b<m;b++)Eb[b]=d;b=m-1}m=[];if(1==e)for(e=0;e<a;){b=e;for(d=1!=Eb[e++];e<a&&d==(1!=Eb[e]);)e++;if(d)for(d=e;d>b;){g=d;for(l=2!=Eb[--d];d>b&&l==(2!=Eb[d-1]);)d--;m.push(new rc(d,g,l?2:1))}else m.push(new rc(b,e,0))}else for(e=0;e<a;){b=e;for(d=2==Eb[e++];e<a&&d==
(2==Eb[e]);)e++;m.push(new rc(b,e,d?1:2))}return m}function ha(m,e,a,b,d){var g,l=b.head-m.from,w=-1;if(0==l){if(!d||!m.length)return null;e[0].level!=a&&(l=e[0].side(!1,a),w=0)}else if(l==m.length){if(d)return null;var K=e[e.length-1];K.level!=a&&(l=K.side(!0,a),w=e.length-1)}0>w&&(w=rc.find(e,l,null!==(g=b.bidiLevel)&&void 0!==g?g:-1,b.assoc));b=e[w];l==b.side(d,a)&&(b=e[w+=d?1:-1],l=b.side(!d,a));K=d==(b.dir==a);g=m.findClusterBreak(l,K);ed=m.slice(Math.min(l,g),Math.max(l,g));return g!=b.side(d,
a)?A.EditorSelection.cursor(g+m.from,K?-1:1,b.level):(e=w==(d?e.length-1:0)?null:e[w+(d?1:-1)])||b.level==a?e&&e.level<b.level?A.EditorSelection.cursor(e.side(!d,a)+m.from,0,e.level):A.EditorSelection.cursor(g+m.from,0,b.level):A.EditorSelection.cursor(d?m.to:m.from,d?-1:1,a)}function ua(m,e){var a,b;null==m[e]&&(a=m[e-1])instanceof x&&(b=m[e+1])instanceof x&&m.splice(e-1,3,new x(a.length+1+b.length))}function La(m,e,a){var b=new S;wa.RangeSet.compare(m,e,a,b);return b.changes}function Ra(m,e,a){m=
m.facet(Aa);if(m.length)m[0](e);else if(window.onerror)window.onerror(String(e),a,void 0,void 0,e);else a?console.error(a+":",e):console.error(e)}function gb(m,e,a){var b=[],d=m,g=0;wa.RangeSet.spans(a.facet(Fb),m,e,{span:function(){},point:function(l,w){l>d&&(b.push({from:d,to:l}),g+=l-d);d=w},minPointSize:20});d<e&&(b.push({from:d,to:e}),g+=e-d);return{total:g,ranges:b}}function cb(m,e){var a=m.ranges;if(0>=e)return a[0].from;if(1<=e)return a[a.length-1].to;m=Math.floor(m.total*e);for(e=0;;e++){var b=
a[e],d=b.from;b=b.to-d;if(m<=b)return d+m;m-=b}}function sb(m,e){var a=0,b=!0,d=!1,g=void 0;try{for(var l=m.ranges[Symbol.iterator](),w;!(b=(w=l.next()).done);b=!0){var K=w.value,P=K.from,V=K.to;if(e<=V){a+=e-P;break}a+=V-P}}catch(X){d=!0,g=X}finally{try{if(!b&&null!=l["return"])l["return"]()}finally{if(d)throw g;}}return a/m.total}function zb(m,e){var a=!0,b=!1,d=void 0;try{for(var g=m[Symbol.iterator](),l;!(a=(l=g.next()).done);a=!0){var w=l.value;if(e(w))return w}}catch(K){b=!0,d=K}finally{try{if(!a&&
null!=g["return"])g["return"]()}finally{if(b)throw d;}}}function pb(m,e){var a=ya(m.root);a=a.focusNode&&Ib(a.focusNode,a.focusOffset,0);if(!a)return ob.none;var b=m.docView.nearest(a),d=a;if(b instanceof sc){for(;b.parent instanceof sc;)b=b.parent;var g=b.posAtStart;var l=g+b.length;d=b.dom}else if(b instanceof jc){for(;d.parentNode!=b.dom;)d=d.parentNode;for(l=d.previousSibling;l&&!Ub.get(l);)l=l.previousSibling;g=l=l?Ub.get(l).posAtEnd:b.posAtStart}else return ob.none;b=e.mapPos(g,1);e=Math.max(b,
e.mapPos(l,-1));l=a.nodeValue;m=m.state;if(e-b<l.length)if(m.sliceDoc(b,Math.min(m.doc.length,b+l.length))==l)e=b+l.length;else if(m.sliceDoc(Math.max(0,e-l.length),e)==l)b=e-l.length;else return ob.none;else if(m.sliceDoc(b,e)!=l)return ob.none;return ob.set(ob.replace({widget:new Pd(d,a)}).range(b,e))}function Ib(m,e,a){for(;;){if(3==m.nodeType)return m;if(1==m.nodeType&&0<e&&0>=a)m=m.childNodes[e-1],e=y(m);else if(1==m.nodeType&&e<m.childNodes.length&&0<=a)m=m.childNodes[e],e=0;else return null}}
function Bb(m,e){return 1!=m.nodeType?0:(e&&"false"==m.childNodes[e-1].contentEditable?1:0)|(e<m.childNodes.length&&"false"==m.childNodes[e].contentEditable?2:0)}function xb(m,e,a){var b=new Qd;wa.RangeSet.compare(m,e,a,b);return b.changes}function tb(m,e){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,b=m.charCategorizer(e),d=m.doc.lineAt(e),g=e-d.from;if(0==d.length)return A.EditorSelection.cursor(e);0==g?a=1:g==d.length&&(a=-1);var l=g,w=g;0>a?l=d.findClusterBreak(g,!1):w=d.findClusterBreak(g,
!0);for(a=b(d.slice(l,w));0<l;){g=d.findClusterBreak(l,!1);if(b(d.slice(g,l))!=a)break;l=g}for(;w<d.length;){g=d.findClusterBreak(w,!0);if(b(d.slice(w,g))!=a)break;w=g}return A.EditorSelection.range(l+d.from,w+d.from)}function vb(m,e){return m.top<e.bottom-1&&m.bottom>e.top+1}function Mb(m,e){return e<m.top?{top:e,left:m.left,right:m.right,bottom:m.bottom}:m}function Ab(m,e){return e>m.bottom?{top:m.top,left:m.left,right:m.right,bottom:e}:m}function wb(m,e,a){for(var b,d,g,l,w,K,P,V,X=m.firstChild;X;X=
X.nextSibling)for(var ja=ca(X),ia=0;ia<ja.length;ia++){var Da=ja[ia];d&&vb(d,Da)&&(Da=Mb(Ab(Da,d.bottom),d.top));var Xa=Da.left>e?Da.left-e:Math.max(0,e-Da.right),Ya=Da.top>a?Da.top-a:Math.max(0,a-Da.bottom);if(0==Xa&&0==Ya)return 3==X.nodeType?Nb(X,e,a):wb(X,e,a);if(!b||l>Ya||l==Ya&&g>Xa)b=X,d=Da,g=Xa,l=Ya;0==Xa?a>Da.bottom&&(!P||P.bottom<Da.bottom)?(w=X,P=Da):a<Da.top&&(!V||V.top>Da.top)&&(K=X,V=Da):P&&vb(P,Da)?P=Ab(P,Da.bottom):V&&vb(V,Da)&&(V=Mb(V,Da.top))}P&&P.bottom>=a?(b=w,d=P):V&&V.top<=a&&
(b=K,d=V);if(!b)return{node:m,offset:0};l=Math.max(d.left,Math.min(d.right,e));if(3==b.nodeType)return Nb(b,l,a);if(!g&&"true"==b.contentEditable)return wb(b,l,a);e=Array.prototype.indexOf.call(m.childNodes,b)+(e>=(d.left+d.right)/2?1:0);return{node:m,offset:e}}function Nb(m,e,a){for(var b=m.nodeValue.length,d=Ec||(Ec=document.createRange()),g=0;g<b;g++){d.setEnd(m,g+1);d.setStart(m,g);for(var l=d.getClientRects(),w=0;w<l.length;w++){var K=l[w];if(K.top!=K.bottom&&K.left-1<=e&&K.right+1>=e&&K.top-
1<=a&&K.bottom+1>=a){a=e=e>=(K.left+K.right)/2;if(jb.chrome||jb.gecko)d.setEnd(m,g),d.getBoundingClientRect().left==K.right&&(a=!e);return{node:m,offset:g+(a?1:0)}}}}return{node:m,offset:0}}function oc(m,e){for(var a=e.x,b=e.y,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:-1,g=m.contentDOM.getBoundingClientRect(),l,w=m.defaultLineHeight/2,K=!1;;){l=m.blockAtHeight(b,g.top);if(l.top>b||l.bottom<b){d=l.top>b?-1:1;b=Math.min(l.bottom-w,Math.max(l.top+w,b));if(K)return-1;K=!0}if(l.type==Cb.Text)break;
b=0<d?l.bottom+w:l.top-w}d=l.from;if(d<m.viewport.from)return 0==m.viewport.from?0:null;if(d>m.viewport.to)return m.viewport.to==m.state.doc.length?m.state.doc.length:null;a=Math.max(g.left+1,Math.min(g.right-1,a));l=m.root;w=l.elementFromPoint(a,b);g=-1;if(w&&m.contentDOM.contains(w)&&!(m.docView.nearest(w)instanceof Jb))if(l.caretPositionFromPoint){if(l=l.caretPositionFromPoint(a,b)){var P=l.offsetNode;g=l.offset}}else l.caretRangeFromPoint&&(l=l.caretRangeFromPoint(a,b))&&(P=l.startContainer,g=
l.startOffset);P&&m.docView.dom.contains(P)||(P=jc.find(m.docView,d),a=wb(P.dom,a,b),P=a.node,g=a.offset);return m.docView.posFromDOM(P,g)}function bc(m,e,a,b){for(var d=m.state.doc.lineAt(e.head),g=m.bidiSpans(d),l=null;;){var w=ha(d,g,m.textDirection,e,a),K=ed;if(!w){if(d.number==(a?m.state.doc.lines:1))return e;K="\n";d=m.state.doc.line(d.number+(a?1:-1));g=m.bidiSpans(d);w=A.EditorSelection.cursor(a?d.from:d.to)}if(!l){if(!b)return w;l=b(K)}else if(!l(K))return e;e=w}}function aa(m,e,a){var b=
m.state.charCategorizer(e),d=b(a);return function(g){g=b(g);d==A.CharCategory.Space&&(d=g);return d==g}}function N(m,e){if(m.state.selection.primary.empty)return!1;m=ya(m.root);if(0==m.rangeCount)return!0;m=m.getRangeAt(0).getClientRects();for(var a=0;a<m.length;a++){var b=m[a];if(b.left<=e.clientX&&b.right>=e.clientX&&b.top<=e.clientY&&b.bottom>=e.clientY)return!0}return!1}function M(m,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(var a=e.target,b;a!=m.contentDOM;a=a.parentNode)if(!a||
11==a.nodeType||(b=Ub.get(a))&&b.ignoreEvent(e))return!1;return!0}function D(m){var e=m.dom.parentNode;if(e){var a=e.appendChild(document.createElement("textarea"));a.style.cssText="position: fixed; left: -10000px; top: 10px";a.focus();setTimeout(function(){m.focus();a.remove();T(m,a.value)},50)}}function T(m,e){var a=m.state,b=1,d=a.toText(e),g=d.lines==a.selection.ranges.length;var l=qd&&a.selection.ranges.every(function(w){return w.empty})&&qd==d.toString()?{changes:a.selection.ranges.map(function(w){return a.doc.lineAt(w.from)}).filter(function(w,
K,P){return 0==K||P[K-1]!=w}).map(function(w){return{from:w.from,insert:(g?d.line(b++).slice():e)+a.lineBreak}})}:g?a.changeByRange(function(w){var K=d.line(b++);return{changes:{from:w.from,to:w.to,insert:K.slice()},range:A.EditorSelection.cursor(w.from+K.length)}}):a.replaceSelection(d);m.dispatch(l,{annotations:A.Transaction.userEvent.of("paste"),scrollIntoView:!0})}function W(m,e,a,b){if(1==b)return A.EditorSelection.cursor(e,a);if(2==b)return tb(m.state,e,a);if(a=jc.find(m.docView,e))return A.EditorSelection.range(a.posAtStart,
a.posAtEnd);m=m.state.doc.lineAt(e);return A.EditorSelection.range(m.from,m.to)}function da(m,e){var a=m.posAtCoords({x:e.clientX,y:e.clientY});if(null==a)a=null;else{var b=e.clientX;e=e.clientY;var d=jc.find(m.docView,a);if(d){var g=a-d.posAtStart;b=0==g?1:g==d.length?-1:(m=d.coordsAt(g,-1))&&e>=m.top&&e<=m.bottom&&b>=m.left&&b<=m.right?-1:(d=d.coordsAt(g,1))&&e>=d.top&&e<=d.bottom&&b>=d.left&&b<=d.right?1:m&&e>=m.top&&e<=m.bottom?-1:1}else b=1;a={pos:a,bias:b}}return a}function ma(m){if(!Rd)return m.detail;
var e=Bd;Bd=m;return Cd=!e||e.timeStamp>Date.now()-400&&2>Math.abs(e.clientX-m.clientX)&&2>Math.abs(e.clientY-m.clientY)?(Cd+1)%3:1}function Ca(m,e){var a=da(m,e),b=ma(e),d=m.state.selection,g=a,l=e;return{update:function(w){w.changes&&(a&&(a.pos=w.changes.mapPos(a.pos)),d=d.map(w.changes))},get:function(w,K,P){if(w.clientX==l.clientX&&w.clientY==l.clientY)var V=g;else V=g=da(m,w),l=w;if(!V||!a)return d;w=W(m,V.pos,V.bias,b);if(a.pos!=V.pos&&!K){var X=W(m,a.pos,a.bias,b);V=Math.min(X.from,w.from);
X=Math.max(X.to,w.to);w=V<w.from?A.EditorSelection.range(V,X):A.EditorSelection.range(X,V)}return K?d.replaceRange(d.primary.extend(w.from,w.to)):P?d.addRange(w):A.EditorSelection.create([w])}}}function Ha(m,e){var a=m.dom.parentNode;if(a){var b=a.appendChild(document.createElement("textarea"));b.style.cssText="position: fixed; left: -10000px; top: 10px";b.value=e;b.focus();b.selectionEnd=e.length;b.selectionStart=0;setTimeout(function(){b.remove();m.focus()},50)}}function Ja(m,e,a){for(;e;){var b=
Ub.get(e);if(b&&b.parent==m)return b;b=e.parentNode;e=b!=m.dom?b:0<a?e.nextSibling:e.previousSibling}return null}function za(m,e,a,b){var d,g=m.state.selection.primary,l;if(-1<e&&(l=m.docView.domBoundsAround(e,a,0))){var w=l;e=w.from;var K=w.to;w=m.docView.impreciseHead||m.docView.impreciseAnchor?[]:$a(m.contentDOM,m.root);a=new Sd(w,m.state.lineBreak);a.readRange(l.startDOM,l.endDOM);w=eb(w,e);l=g.from;var P=null;8===m.inputState.lastKeyCode&&m.inputState.lastKeyTime>Date.now()-100&&(l=g.to,P="end");
(l=Ta(m.state.sliceDoc(e,K),a.text,l-e,P))&&(d={from:e+l.from,to:e+l.toA,insert:m.state.toText(a.text.slice(l.from,l.toB))})}else m.hasFocus&&(e=ya(m.root),a=m.docView,l=a.impreciseHead,a=a.impreciseAnchor,l=l&&l.node==e.focusNode&&l.offset==e.focusOffset?m.state.selection.primary.head:m.docView.posFromDOM(e.focusNode,e.focusOffset),e=a&&a.node==e.anchorNode&&a.offset==e.anchorOffset?m.state.selection.primary.anchor:Ga(e)?l:m.docView.posFromDOM(e.anchorNode,e.anchorOffset),l!=g.head||e!=g.anchor)&&
(w=A.EditorSelection.single(e,l));if(d||w)if(!d&&b&&!g.empty&&w&&w.primary.empty&&(d={from:g.from,to:g.to,insert:m.state.doc.slice(g.from,g.to)}),d){var V=m.state;if(!jb.android||!(d.from==g.from&&d.to==g.to&&1==d.insert.length&&2==d.insert.lines&&ab(m,"Enter",10)||d.from==g.from-1&&d.to==g.to&&0==d.insert.length&&ab(m,"Backspace",8)||d.from==g.from&&d.to==g.to+1&&0==d.insert.length&&ab(m,"Delete",46))){var X=d.insert.toString();m.state.facet(Ia).some(function(ja){return ja(m,d.from,d.to,X)})||(d.from>=
g.from&&d.to<=g.to&&d.to-d.from>=(g.to-g.from)/3?(w=g.from<d.from?V.sliceDoc(g.from,d.from):"",g=g.to>d.to?V.sliceDoc(d.to,g.to):"",g=V.replaceSelection(m.state.toText(w+d.insert.sliceString(0,void 0,m.state.lineBreak)+g))):(g=V.changes(d),g={changes:g,selection:w&&!V.selection.primary.eq(w.primary)&&w.primary.to<=g.newLength?V.selection.replaceRange(w.primary):void 0}),m.dispatch(g,{scrollIntoView:!0,annotations:A.Transaction.userEvent.of("input")}))}}else w&&!w.primary.eq(g)&&(g=!1,m.inputState.lastSelectionTime>
Date.now()-50&&("keyboardselection"==m.inputState.lastSelectionOrigin?g=!0:V=A.Transaction.userEvent.of(m.inputState.lastSelectionOrigin)),m.dispatch({selection:w,scrollIntoView:g,annotations:V}))}function Ta(m,e,a,b){for(var d=Math.min(m.length,e.length),g=0;g<d&&m.charCodeAt(g)==e.charCodeAt(g);)g++;if(g==d&&m.length==e.length)return null;d=m.length;for(var l=e.length;0<d&&0<l&&m.charCodeAt(d-1)==e.charCodeAt(l-1);)d--,l--;"end"==b&&(a-=d+Math.max(0,g-Math.min(d,l))-g);d<g&&m.length<e.length?(g-=
a<=g&&a>=d?g-a:0,l=g+(l-d),d=g):l<g&&(g-=a<=g&&a>=l?g-a:0,d=g+(d-l),l=g);return{from:g,toA:d,toB:l}}function Va(m){return 1==m.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(m.nodeName)}function $a(m,e){var a=[];if(e.activeElement!=m)return a;var b=ya(e);m=b.anchorNode;e=b.anchorOffset;var d=b.focusNode;b=b.focusOffset;m&&(a.push(new Dd(m,e)),d==m&&b==e||a.push(new Dd(d,b)));return a}function eb(m,e){if(0==m.length)return null;var a=m[0].pos;m=2==m.length?m[1].pos:a;return-1<
a&&-1<m?A.EditorSelection.single(a+e,m+e):null}function ab(m,e,a){a={key:e,code:e,keyCode:a,which:a,cancelable:!0};e=new KeyboardEvent("keydown",a);m.contentDOM.dispatchEvent(e);a=new KeyboardEvent("keyup",a);m.contentDOM.dispatchEvent(a);return e.defaultPrevented||a.defaultPrevented}function nb(m,e){return null==m?e.getBoundingClientRect().top:m}function lb(){window.addEventListener("resize",function(){-1==rd&&(rd=setTimeout(Dc,50))})}function Dc(){rd=-1;for(var m=document.querySelectorAll(".cm-content"),
e=0;e<m.length;e++){var a=Ub.get(m[e]);a&&a.editorView.requestMeasure()}}function ub(m,e,a){e.altKey&&(m="Alt-"+m);e.ctrlKey&&(m="Ctrl-"+m);e.metaKey&&(m="Meta-"+m);!1!==a&&e.shiftKey&&(m="Shift-"+m);return m}function hc(m){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Td,a=Object.create(null),b=Object.create(null),d=function(Db,Kb){var yc=b[Db];if(null==yc)b[Db]=Kb;else if(yc!=Kb)throw Error("Key binding "+Db+" is used both as a regular binding and as a multi-stroke prefix");},g=function(Db,
Kb,yc,Nc){var Fc=a[Db]||(a[Db]=Object.create(null)),Pc=Kb.split(/ (?!$)/).map(function(kc){kc=kc.split(/-(?!$)/);var Lb=kc[kc.length-1];"Space"==Lb&&(Lb=" ");for(var zc,Ac,Wc,Oc,Kc=0;Kc<kc.length-1;++Kc){var Bc=kc[Kc];if(/^(cmd|meta|m)$/i.test(Bc))Oc=!0;else if(/^a(lt)?$/i.test(Bc))zc=!0;else if(/^(c|ctrl|control)$/i.test(Bc))Ac=!0;else if(/^s(hift)?$/i.test(Bc))Wc=!0;else if(/^mod$/i.test(Bc))"mac"==e?Oc=!0:Ac=!0;else throw Error("Unrecognized modifier name: "+Bc);}zc&&(Lb="Alt-"+Lb);Ac&&(Lb="Ctrl-"+
Lb);Oc&&(Lb="Meta-"+Lb);Wc&&(Lb="Shift-"+Lb);return Lb});Kb=function(kc){var Lb=Pc.slice(0,kc).join(" ");d(Lb,!0);Fc[Lb]||(Fc[Lb]={preventDefault:!0,commands:[function(zc){var Ac=Gc={view:zc,prefix:Lb,scope:Db};setTimeout(function(){Gc==Ac&&(Gc=null)},Ud);return!0}]})};for(var Hc=1;Hc<Pc.length;Hc++)Kb(Hc);Kb=Pc.join(" ");d(Kb,!1);Kb=Fc[Kb]||(Fc[Kb]={preventDefault:!1,commands:[]});Kb.commands.push(yc);Nc&&(Kb.preventDefault=!0)},l=!0,w=!1,K=void 0;try{for(var P=m[Symbol.iterator](),V;!(l=(V=P.next()).done);l=
!0){var X=V.value,ja=X[e]||X.key;if(ja){var ia=!0,Da=!1,Xa=void 0;try{for(var Ya=(X.scope?X.scope.split(" "):["editor"])[Symbol.iterator](),qb;!(ia=(qb=Ya.next()).done);ia=!0){var dc=qb.value;g(dc,ja,X.run,X.preventDefault);X.shift&&g(dc,"Shift-"+ja,X.shift,X.preventDefault)}}catch(Db){Da=!0,Xa=Db}finally{try{if(!ia&&null!=Ya["return"])Ya["return"]()}finally{if(Da)throw Xa;}}}}}catch(Db){w=!0,K=Db}finally{try{if(!l&&null!=P["return"])P["return"]()}finally{if(w)throw K;}}return a}function ic(m,e,a,
b){var d=(0,ra.keyName)(e),g=1==d.length&&" "!=d,l="";Gc&&Gc.view==a&&Gc.scope==b&&(l=Gc.prefix+" ",Gc=null);var w=!!l,K=function(Xa){if(Xa){var Ya=!0,qb=!1,dc=void 0;try{for(var Db=Xa.commands[Symbol.iterator](),Kb;!(Ya=(Kb=Db.next()).done);Ya=!0){var yc=Kb.value;if(yc(a))return!0}}catch(Nc){qb=!0,dc=Nc}finally{try{if(!Ya&&null!=Db["return"])Db["return"]()}finally{if(qb)throw dc;}}Xa.preventDefault&&(w=!0)}return!1},P=!0,V=!1,X=void 0;try{for(var ja=m[Symbol.iterator](),ia;!(P=(ia=ja.next()).done);P=
!0){var Da=ia.value[b];m=void 0;if(Da){if(K(Da[l+ub(d,e,!g)]))return!0;if(g&&(e.shiftKey||e.altKey||e.metaKey)&&(m=ra.base[e.keyCode])&&m!=d){if(K(Da[l+ub(m,e,!0)]))return!0}else if(g&&e.shiftKey&&K(Da[l+ub(d,e,!0)]))return!0}}}catch(Xa){V=!0,X=Xa}finally{try{if(!P&&null!=ja["return"])ja["return"]()}finally{if(V)throw X;}}return w}function cc(m){var e=m.scrollDOM.getBoundingClientRect();return{left:e.left-m.scrollDOM.scrollLeft,top:e.top-m.scrollDOM.scrollTop}}function wc(m,e){function a(ia,Da,Xa,
Ya){return new Ed(ia-V.left,Da-V.top,Xa-ia,Ya-Da,Vd)}function b(ia){var Da=ia.top,Xa=ia.bottom;ia=ia.horizontal;for(var Ya=[],qb=0;qb<ia.length;qb+=2)Ya.push(a(ia[qb],Da,ia[qb+1],Xa));return Ya}function d(ia,Da){var Xa=1E9,Ya=-1E9,qb=[],dc=null!==ia&&void 0!==ia?ia:m.moveToLineBoundary(A.EditorSelection.cursor(Da,1),!1).head,Db=null!==Da&&void 0!==Da?Da:m.moveToLineBoundary(A.EditorSelection.cursor(ia,-1),!0).head,Kb=!0,yc=!1,Nc=void 0;try{for(var Fc=m.visibleRanges[Symbol.iterator](),Pc;!(Kb=(Pc=
Fc.next()).done);Kb=!0){var Hc=Pc.value;if(Hc.to>dc&&Hc.from<Db)for(var kc=Math.max(Hc.from,dc),Lb=Math.min(Hc.to,Db);;){var zc=m.state.doc.lineAt(kc),Ac=!0,Wc=!1,Oc=void 0;try{for(var Kc=m.bidiSpans(zc)[Symbol.iterator](),Bc;!(Ac=(Bc=Kc.next()).done);Ac=!0){var sd=Bc.value,td=sd.from+zc.from,ud=sd.to+zc.from;if(td>=Lb)break;if(ud>kc){var Fd=null==ia&&td<=dc,Wd=Math.min(ud,Lb),Gd=null==Da&&ud>=Db,Xd=sd.dir,fd=m.coordsAtPos(Math.max(td,kc),1),gd=m.coordsAtPos(Wd,-1);Xa=Math.min(fd.top,gd.top,Xa);Ya=
Math.max(fd.bottom,gd.bottom,Ya);Xd==Sb.LTR?qb.push(w&&Fd?X:fd.left,w&&Gd?ja:gd.right):qb.push(!w&&Gd?X:gd.left,!w&&Fd?ja:fd.right)}}}catch(vd){Wc=!0,Oc=vd}finally{try{if(!Ac&&null!=Kc["return"])Kc["return"]()}finally{if(Wc)throw Oc;}}kc=zc.to+1;if(kc>=Lb)break}}}catch(vd){yc=!0,Nc=vd}finally{try{if(!Kb&&null!=Fc["return"])Fc["return"]()}finally{if(yc)throw Nc;}}0==qb.length&&(ia=m.coordsAtPos(dc,-1),Xa=Math.min(ia.top,Xa),Ya=Math.max(ia.bottom,Ya));return{top:Xa,bottom:Ya,horizontal:qb}}if(e.to<=
m.viewport.from||e.from>=m.viewport.to)return[];var g=Math.max(e.from,m.viewport.from),l=Math.min(e.to,m.viewport.to),w=m.textDirection==Sb.LTR,K=m.contentDOM,P=K.getBoundingClientRect(),V=cc(m);K=window.getComputedStyle(K.firstChild);var X=P.left+parseInt(K.paddingLeft),ja=P.right-parseInt(K.paddingRight);g=m.visualLineAt(g);l=m.visualLineAt(l);if(g.from==l.from)return b(d(e.from,e.to));P=d(e.from,null);e=d(null,e.to);K=[];g.to<l.from-1?K.push(a(X,P.bottom,ja,e.top)):P.bottom<e.top&&4>e.top-P.bottom&&
(P.bottom=e.top=(P.bottom+e.top)/2);return b(P).concat(K).concat(b(e))}function xc(m,e,a){e=m.coordsAtPos(e.head,e.assoc||1);if(!e)return null;m=cc(m);return new Ed(e.left-m.left,e.top-m.top,-1,e.bottom-e.top,a?Yd:Zd)}function lc(){if(null==wd&&"undefined"!=typeof document&&document.body){var m=document.body.style;wd=null!=(m.tabSize||m.MozTabSize)}return wd||!1}Object.defineProperty(F,"__esModule",{value:!0});F.drawSelection=function(){return[Xc.of(0<arguments.length&&void 0!==arguments[0]?arguments[0]:
{}),$d,ae]};F.highlightSpecialChars=function(){var m=[hd.of(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}),be];lc()||m.push(ce);return m};F.indentOnInput=function(){return A.EditorState.transactionFilter.of(function(m){if(!m.docChanged||"input"!=m.annotation(A.Transaction.userEvent))return m;var e=m.startState.languageDataAt("indentOnInput",m.startState.selection.primary.head);if(!e.length)return m;var a=m.newDoc,b=m.newSelection.primary.head,d=a.lineAt(b);if(b>d.from+Hd)return m;var g=
a.sliceString(d.from,b);if(!e.some(function(X){return X.test(g)}))return m;var l=m.state,w=-1,K=[];e=!0;a=!1;b=void 0;try{d=function(){var X=l.doc.lineAt(V.value.head);if(X.from==w)return"continue";w=X.from;var ja=Math.max.apply(Math,Qa(l.facet(A.EditorState.indentation).map(function(Da){return Da(new A.IndentContext(l),X.from)})));if(0>ja)return"continue";var ia=/^\s*/.exec(X.slice(0,Math.min(X.length,Hd)))[0];ja=l.indentString(ja);ia!=ja&&K.push({from:X.from,to:X.from+ia.length,insert:ja})};for(var P=
l.selection.ranges[Symbol.iterator](),V;!(e=(V=P.next()).done);e=!0)d()}catch(X){a=!0,b=X}finally{try{if(!e&&null!=P["return"])P["return"]()}finally{if(a)throw b;}}return K.length?[m,{changes:K}]:m})};F.keymap=function(m,e){return[de,xd.of(hc(m,e))]};F.logException=Ra;F.placeholder=function(m){return Xb.fromClass(function(){function e(a){na(this,e);this.view=a;this.placeholder=ob.set([ob.widget({widget:new ee(m),side:1}).range(0)])}ta(e,[{key:"decorations",get:function(){return this.view.state.doc.length?
ob.none:this.placeholder}}]);return e}(),{decorations:function(e){return e.decorations}})};F.runScopeHandlers=function(m,e,a){return ic(m.state.facet(xd),e,m,a)};F.themeClass=Q;Object.defineProperty(F,"Range",{enumerable:!0,get:function(){return wa.Range}});F.__test=F.WidgetType=F.ViewUpdate=F.ViewPlugin=F.PluginFieldProvider=F.PluginField=F.EditorView=F.Direction=F.Decoration=F.BlockType=F.BlockInfo=F.BidiSpan=void 0;var A=Oa(2),Y=Oa(3),wa=Oa(4),oa=Oa(0),ra=Oa(5),pa=function(m,e){var a=Array.isArray(m)?
m:void 0;if(!a)if(Symbol.iterator in Object(m)||"[object Arguments]"===Object.prototype.toString.call(m)){a=[];var b=!0,d=!1,g=void 0;try{for(var l=m[Symbol.iterator](),w;!(b=(w=l.next()).done)&&(a.push(w.value),!e||a.length!==e);b=!0);}catch(K){d=!0,g=K}finally{try{if(!b&&null!=l["return"])l["return"]()}finally{if(d)throw g;}}}else a=void 0;if(!(m=a))throw new TypeError("Invalid attempt to destructure non-iterable instance");return m}("undefined"!=typeof navigator?[navigator,document]:[{userAgent:"",
vendor:"",platform:""},{documentElement:{style:{}}}],2),Ka=pa[0],bb=pa[1],fb=/Edge\/(\d+)/.exec(Ka.userAgent),db=/MSIE \d/.test(Ka.userAgent),Ob=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ka.userAgent),ec=!!(db||Ob||fb),Yb=!ec&&/gecko\/(\d+)/i.test(Ka.userAgent),Qc=!ec&&/Chrome\/(\d+)/.exec(Ka.userAgent),Yc="webkitFontSmoothing"in bb.documentElement.style,jb={mac:/Mac/.test(Ka.platform),ie:ec,ie_version:db?bb.documentMode||6:Ob?+Ob[1]:fb?+fb[1]:0,gecko:Yb,gecko_version:Yb?+(/Firefox\/(\d+)/.exec(Ka.userAgent)||
[0,0])[1]:0,chrome:!!Qc,chrome_version:Qc?+Qc[1]:0,ios:!ec&&/AppleWebKit/.test(Ka.userAgent)&&/Mobile\/\w+/.test(Ka.userAgent),android:/Android\b/.test(Ka.userAgent),webkit:Yc,safari:/Apple Computer/.test(Ka.vendor),webkit_version:Yc?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=bb.documentElement.style.tabSize?"tab-size":"-moz-tab-size"},Lc=function(){function m(){na(this,m);this.anchorNode=null;this.anchorOffset=0;this.focusNode=null;this.focusOffset=0}ta(m,[{key:"eq",
value:function(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}},{key:"set",value:function(e){this.anchorNode=e.anchorNode;this.anchorOffset=e.anchorOffset;this.focusNode=e.focusNode;this.focusOffset=e.focusOffset}}]);return m}(),Tb=null,Ec,mc=function(){function m(e,a){var b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0;na(this,m);this.node=e;this.offset=a;this.precise=b}ta(m,null,[{key:"before",
value:function(e,a){return new m(e.parentNode,ka(e),a)}},{key:"after",value:function(e,a){return new m(e.parentNode,ka(e)+1,a)}}]);return m}(),yd=[],Ub=function(){function m(){na(this,m);this.dom=this.parent=null;this.dirty=2}ta(m,[{key:"posBefore",value:function(e){var a=this.posAtStart,b=!0,d=!1,g=void 0;try{for(var l=this.children[Symbol.iterator](),w;!(b=(w=l.next()).done);b=!0){var K=w.value;if(K==e)return a;a+=K.length+K.breakAfter}}catch(P){d=!0,g=P}finally{try{if(!b&&null!=l["return"])l["return"]()}finally{if(d)throw g;
}}throw new RangeError("Invalid child in posBefore");}},{key:"posAfter",value:function(e){return this.posBefore(e)+e.length}},{key:"coordsAt",value:function(e,a){return null}},{key:"sync",value:function(e){if(this.dirty&2){var a=this.dom,b=null,d=!0,g=!1,l=void 0;try{for(var w=this.children[Symbol.iterator](),K;!(d=(K=w.next()).done);d=!0){var P=K.value;if(P.dirty){var V=b?b.nextSibling:a.firstChild;!V||P.dom||m.get(V)||P.reuseDOM(V);P.sync(e);P.dirty=0}e&&e.node==a&&b!=P.dom&&(e.written=!0);var X=
a,ja=P.dom,ia=b?b.nextSibling:X.firstChild;if(ja.parentNode==X)for(;ia!=ja;)ia=J(ia);else X.insertBefore(ja,ia);b=P.dom}}catch(Da){g=!0,l=Da}finally{try{if(!d&&null!=w["return"])w["return"]()}finally{if(g)throw l;}}(w=b?b.nextSibling:a.firstChild)&&e&&e.node==a&&(e.written=!0);for(;w;)w=J(w)}else if(this.dirty&1){w=!0;K=!1;P=void 0;try{for(a=this.children[Symbol.iterator]();!(w=(b=a.next()).done);w=!0)d=b.value,d.dirty&&(d.sync(e),d.dirty=0)}catch(Da){K=!0,P=Da}finally{try{if(!w&&null!=a["return"])a["return"]()}finally{if(K)throw P;
}}}}},{key:"reuseDOM",value:function(e){return!1}},{key:"localPosFromDOM",value:function(e,a){if(e==this.dom)e=this.dom.childNodes[a];else{for(a=0==y(e)?0:0==a?-1:1;;){var b=e.parentNode;if(b==this.dom)break;0==a&&b.firstChild!=b.lastChild&&(a=e==b.firstChild?-1:1);e=b}e=0>a?e:e.nextSibling}if(e==this.dom.firstChild)return 0;for(;e&&!m.get(e);)e=e.nextSibling;if(!e)return this.length;for(b=a=0;;a++){var d=this.children[a];if(d.dom==e)return b;b+=d.length+d.breakAfter}}},{key:"domBoundsAround",value:function(e,
a){for(var b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,d=-1,g=-1,l=-1,w=-1,K=0,P=b;K<this.children.length;K++){var V=this.children[K],X=P+V.length;if(P<e&&X>a)return V.domBoundsAround(e,a,P);X>=e&&-1==d&&(d=K,g=P);if(X>=a&&X!=P&&-1==l){l=K;w=X;break}P=X+V.breakAfter}return{from:g,to:0>w?b+this.length:w,startDOM:(d?this.children[d-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:l<this.children.length-1&&0<=l?this.children[l+1].dom:null}}},{key:"markDirty",value:function(){var e=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1;this.dirty&2||(this.dirty|=2,this.markParentsDirty(e))}},{key:"markParentsDirty",value:function(e){for(var a=this.parent;a;a=a.parent){e&&(a.dirty|=2);if(a.dirty&1)break;a.dirty|=1;e=!1}}},{key:"setParent",value:function(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}},{key:"setDOM",value:function(e){this.dom=e;e.cmView=this}},{key:"replaceChildren",value:function(e,a){var b,d=2<arguments.length&&void 0!==arguments[2]?
arguments[2]:yd;this.markDirty();for(var g=e;g<a;g++)this.children[g].parent=null;(b=this.children).splice.apply(b,[e,a-e].concat(Qa(d)));for(b=0;b<d.length;b++)d[b].setParent(this)}},{key:"ignoreMutation",value:function(e){return!1}},{key:"ignoreEvent",value:function(e){return!1}},{key:"childCursor",value:function(){return new Pb(this.children,0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.length,this.children.length)}},{key:"childPos",value:function(e){var a=1<arguments.length&&void 0!==
arguments[1]?arguments[1]:1;return this.childCursor().findPos(e,a)}},{key:"toString",value:function(){var e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}},{key:"editorView",get:function(){if(!this.parent)throw Error("Accessing view in orphan content view");return this.parent.editorView}},{key:"overrideDOMText",get:function(){return null}},{key:"posAtStart",get:function(){return this.parent?
this.parent.posBefore(this):0}},{key:"posAtEnd",get:function(){return this.posAtStart+this.length}},{key:"rootView",get:function(){for(var e=this;;){var a=e.parent;if(!a)return e;e=a}}}],[{key:"get",value:function(e){return e.cmView}}]);return m}();Ub.prototype.breakAfter=0;var Pb=function(){function m(e,a,b){na(this,m);this.children=e;this.pos=a;this.i=b;this.off=0}ta(m,[{key:"findPos",value:function(e){for(var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;;){if(e>this.pos||e==this.pos&&
(0<a||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;var b=this.children[--this.i];this.pos-=b.length+b.breakAfter}}}]);return m}(),id=[],sc=function(m){function e(){na(this,e);return Ba(this,Fa(e).apply(this,arguments))}sa(e,m);ta(e,[{key:"become",value:function(a){return!1}},{key:"getSide",value:function(){return 0}}]);return e}(Ub);sc.prototype.children=id;var jd=function(m){function e(a){na(this,e);var b=Ba(this,Fa(e).call(this));b.text=a;return b}sa(e,m);ta(e,
[{key:"createDOM",value:function(a){this.setDOM(a||document.createTextNode(this.text))}},{key:"sync",value:function(a){this.dom||this.createDOM();this.dom.nodeValue!=this.text&&(a&&a.node==this.dom&&(a.written=!0),this.dom.nodeValue=this.text)}},{key:"reuseDOM",value:function(a){if(3!=a.nodeType)return!1;this.createDOM(a);return!0}},{key:"merge",value:function(a,b,d){if(d&&(!(d instanceof e)||256<this.length-(b-a)+d.length))return!1;this.text=this.text.slice(0,a)+(d?d.text:"")+this.text.slice(b);
this.markDirty();return!0}},{key:"slice",value:function(a){return new e(this.text.slice(a))}},{key:"localPosFromDOM",value:function(a,b){return a==this.dom?b:b?this.text.length:0}},{key:"domAtPos",value:function(a){return new mc(this.dom,a)}},{key:"domBoundsAround",value:function(a,b,d){return{from:d,to:d+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}},{key:"coordsAt",value:function(a,b){return R(this.dom,a,b,this.length)}},{key:"length",get:function(){return this.text.length}}]);return e}(sc),
Vc=function(m){function e(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;na(this,e);var g=Ba(this,Fa(e).call(this));g.mark=a;g.children=b;g.length=d;d=!0;var l=!1,w=void 0;try{for(var K=b[Symbol.iterator](),P;!(d=(P=K.next()).done);d=!0)P.value.setParent(Pa(g))}catch(V){l=!0,w=V}finally{try{if(!d&&null!=K["return"])K["return"]()}finally{if(l)throw w;}}return g}sa(e,m);ta(e,[{key:"createDOM",value:function(){var a=document.createElement(this.mark.tagName);
this.mark["class"]&&(a.className=this.mark["class"]);if(this.mark.attrs)for(var b in this.mark.attrs)a.setAttribute(b,this.mark.attrs[b]);this.setDOM(a)}},{key:"sync",value:function(a){this.dom||this.createDOM();Ma(Fa(e.prototype),"sync",this).call(this,a)}},{key:"merge",value:function(a,b,d,g,l){if(d&&(!(d instanceof e&&d.mark.eq(this.mark))||a&&0>=g||b<this.length&&0>=l))return!1;I(this,a,b,d?d.children:id,g-1,l-1);this.markDirty();return!0}},{key:"slice",value:function(a){var b=this.mark,d=[],
g=0,l=!0,w=!1,K=void 0;try{for(var P=this.children[Symbol.iterator](),V;!(l=(V=P.next()).done);l=!0){var X=V.value,ja=g+X.length;ja>a&&d.push(g<a?X.slice(a-g):X);g=ja}}catch(ia){w=!0,K=ia}finally{try{if(!l&&null!=P["return"])P["return"]()}finally{if(w)throw K;}}return new e(b,d,this.length-a)}},{key:"domAtPos",value:function(a){return r(this.dom,this.children,a)}},{key:"coordsAt",value:function(a,b){return p(this,a,b)}}]);return e}(sc),Jb=function(m){function e(a,b,d){na(this,e);var g=Ba(this,Fa(e).call(this));
g.widget=a;g.length=b;g.side=d;return g}sa(e,m);ta(e,[{key:"slice",value:function(a){return e.create(this.widget,this.length-a,this.side)}},{key:"sync",value:function(){this.dom&&this.widget.updateDOM(this.dom)||(this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}},{key:"getSide",value:function(){return this.side}},{key:"merge",value:function(a,b,d,g,l){if(d&&(!(d instanceof e&&this.widget.compare(d.widget))||0<a&&0>=g||b<this.length&&0>=l))return!1;this.length=a+(d?
d.length:0)+(this.length-b);return!0}},{key:"become",value:function(a){return a.length==this.length&&a instanceof e&&a.side==this.side&&this.widget.constructor==a.widget.constructor?(this.widget.eq(a.widget)||this.markDirty(!0),this.widget=a.widget,!0):!1}},{key:"ignoreMutation",value:function(){return!0}},{key:"ignoreEvent",value:function(a){return this.widget.ignoreEvent(a)}},{key:"domAtPos",value:function(a){return 0==a?mc.before(this.dom):mc.after(this.dom,a==this.length)}},{key:"domBoundsAround",
value:function(){return null}},{key:"coordsAt",value:function(a,b){b=this.dom.getClientRects();for(var d,g=0<a?b.length-1:0;!(d=b[g],0<a?0==g:g==b.length-1||d.top<d.bottom);g+=0<a?-1:1);return d}},{key:"overrideDOMText",get:function(){if(0==this.length)return oa.Text.empty;for(var a=this;a.parent;)a=a.parent;a=(a=a.editorView)&&a.state.doc;var b=this.posAtStart;return a?a.slice(b,b+this.length):oa.Text.empty}}],[{key:"create",value:function(a,b,d){return new (a.customView||e)(a,b,d)}}]);return e}(sc),
kd=function(m){function e(){na(this,e);return Ba(this,Fa(e).apply(this,arguments))}sa(e,m);ta(e,[{key:"domAtPos",value:function(a){return new mc(this.widget.text,a)}},{key:"sync",value:function(){this.dom||this.setDOM(this.widget.toDOM())}},{key:"localPosFromDOM",value:function(a,b){return b?3==a.nodeType?Math.min(b,this.length):this.length:0}},{key:"ignoreMutation",value:function(){return!1}},{key:"coordsAt",value:function(a,b){return R(this.widget.text,a,b,this.length)}},{key:"overrideDOMText",
get:function(){return null}}]);return e}(Jb),tc=function(){function m(){na(this,m)}ta(m,[{key:"eq",value:function(e){return!1}},{key:"updateDOM",value:function(e){return!1}},{key:"compare",value:function(e){return this==e||this.constructor==e.constructor&&this.eq(e)}},{key:"ignoreEvent",value:function(e){return!0}},{key:"estimatedHeight",get:function(){return-1}},{key:"customView",get:function(){return null}}]);return m}();F.WidgetType=tc;var Cb;F.BlockType=Cb;(function(m){m[m.Text=0]="Text";m[m.WidgetBefore=
1]="WidgetBefore";m[m.WidgetAfter=2]="WidgetAfter";m[m.WidgetRange=3]="WidgetRange"})(Cb||(F.BlockType=Cb={}));var ob=function(m){function e(a,b,d,g){na(this,e);var l=Ba(this,Fa(e).call(this));l.startSide=a;l.endSide=b;l.widget=d;l.spec=g;return l}sa(e,m);ta(e,[{key:"hasHeight",value:function(){return this.widget?-1<this.widget.estimatedHeight:!1}},{key:"heightRelevant",get:function(){return!1}}],[{key:"mark",value:function(a){return new ld(a)}},{key:"widget",value:function(a){var b=a.side||0;a.block&&
(b+=(2E8+1)*(0<b?1:-1));return new Zb(a,b,b,!!a.block,a.widget||null,!1)}},{key:"replace",value:function(a){var b=!!a.block,d=L(a),g=d.start;d=d.end;return new Zb(a,b?-2E8*(g?2:1):1E8*(g?-1:1),b?2E8*(d?2:1):1E8*(d?1:-1),b,a.widget||null,!0)}},{key:"line",value:function(a){return new uc(a)}},{key:"set",value:function(a){return wa.RangeSet.of(a,1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1)}}]);return e}(wa.RangeValue);F.Decoration=ob;ob.none=wa.RangeSet.empty;var ld=function(m){function e(a){na(this,
e);var b=L(a);var d=b.start;b=b.end;d=Ba(this,Fa(e).call(this,1E8*(d?-1:1),1E8*(b?1:-1),null,a));d.tagName=a.tagName||"span";d["class"]=a["class"]||"";d.attrs=a.attributes||null;return d}sa(e,m);ta(e,[{key:"eq",value:function(a){return this==a||a instanceof e&&this.tagName==a.tagName&&this["class"]==a["class"]&&q(this.attrs,a.attrs)}},{key:"range",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:a;if(a>=b)throw new RangeError("Mark decorations may not be empty");return Ma(Fa(e.prototype),
"range",this).call(this,a,b)}}]);return e}(ob);ld.prototype.point=!1;var uc=function(m){function e(a){na(this,e);return Ba(this,Fa(e).call(this,-1E8,-1E8,null,a))}sa(e,m);ta(e,[{key:"eq",value:function(a){return a instanceof e&&q(this.spec.attributes,a.spec.attributes)}},{key:"range",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:a;if(b!=a)throw new RangeError("Line decoration ranges must be zero-length");return Ma(Fa(e.prototype),"range",this).call(this,a,b)}}]);return e}(ob);
uc.prototype.mapMode=A.MapMode.TrackBefore;uc.prototype.point=!0;var Zb=function(m){function e(a,b,d,g,l,w){na(this,e);a=Ba(this,Fa(e).call(this,b,d,l,a));a.block=g;a.isReplace=w;a.mapMode=g?0>b?A.MapMode.TrackBefore:A.MapMode.TrackAfter:A.MapMode.TrackDel;return a}sa(e,m);ta(e,[{key:"eq",value:function(a){var b;if(b=a instanceof e){b=this.widget;var d=a.widget;b=b==d||!!(b&&d&&b.compare(d))}return b&&this.block==a.block&&this.startSide==a.startSide&&this.endSide==a.endSide}},{key:"range",value:function(a){var b=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:a;if(this.isReplace&&(a>b||a==b&&0<this.startSide&&0>this.endSide))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&b!=a)throw new RangeError("Widget decorations can only have zero-length ranges");return Ma(Fa(e.prototype),"range",this).call(this,a,b)}},{key:"type",get:function(){return this.startSide<this.endSide?Cb.WidgetRange:0>this.startSide?Cb.WidgetBefore:Cb.WidgetAfter}},{key:"heightRelevant",get:function(){return this.block||
!!this.widget&&5<=this.widget.estimatedHeight}}]);return e}(ob);Zb.prototype.point=!0;var Cc=A.Facet.define({combine:function(m){return m.join(" ")}}),Zc=A.Facet.define({combine:function(m){return-1<m.indexOf(!0)}}),Rc=Y.StyleModule.newName(),zd=G("."+Rc,{$:{position:"relative !important",boxSizing:"border-box","\x26$focused":{outline_fallback:"1px dotted #212121",outline:"5px auto -webkit-focus-ring-color"},display:"flex !important",flexDirection:"column"},$scroller:{display:"flex !important",alignItems:"flex-start !important",
fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},$content:{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",boxSizing:"border-box",padding:"4px 0",outline:"none"},"$$light $content":{caretColor:"black"},"$$dark $content":{caretColor:"white"},$line:{display:"block",padding:"0 2px 0 4px"},$selectionLayer:{zIndex:-1,contain:"size style"},$selectionBackground:{position:"absolute"},"$$light $selectionBackground":{background:"#d9d9d9"},
"$$dark $selectionBackground":{background:"#222"},"$$focused$light $selectionBackground":{background:"#d7d4f0"},"$$focused$dark $selectionBackground":{background:"#233"},$cursorLayer:{zIndex:100,contain:"size style",pointerEvents:"none"},"$$focused $cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},$cursor:{position:"absolute",borderLeft:"1.2px solid #aaa",
marginLeft:"-0.6px",pointerEvents:"none"},"$$focused $cursor":{borderLeft:"1.2px solid black"},$placeholder:{color:"#888",display:"inline-block"},$button:{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"3px"},"$$light $button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","\x26:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"$$dark $button":{backgroundImage:"linear-gradient(#555, #111)",border:"1px solid #888","\x26:active":{backgroundImage:"linear-gradient(#111, #333)"}},
$textfield:{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"$$light $textfield":{backgroundColor:"white"},"$$dark $textfield":{border:"1px solid #555",backgroundColor:"inherit"}}),$c=Q("line"),jc=function(m){function e(){na(this,e);var a=Ba(this,Fa(e).apply(this,arguments));a.children=[];a.length=0;a.prevAttrs=void 0;a.attrs=null;a.breakAfter=0;return a}sa(e,m);ta(e,[{key:"merge",value:function(a,b,d,g,l,w){if(d){if(!(d instanceof e))return!1;
this.dom||d.transferDOM(this)}g&&this.setDeco(d?d.attrs:null);I(this,a,b,d?d.children:Gb,l,w);return!0}},{key:"split",value:function(a){var b=new e;b.breakAfter=this.breakAfter;if(0==this.length)return b;var d=this.childPos(a),g=d.i;if(d=d.off)b.append(this.children[g].slice(d),0),this.children[g].merge(d,this.children[g].length,null,0,0),g++;for(d=g;d<this.children.length;d++)b.append(this.children[d],0);for(;0<g&&0==this.children[g-1].length;)this.children[g-1].parent=null,g--;this.children.length=
g;this.markDirty();this.length=a;return b}},{key:"transferDOM",value:function(a){this.dom&&(a.setDOM(this.dom),a.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}},{key:"setDeco",value:function(a){q(this.attrs,a)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=a)}},{key:"append",value:function(a,b){v(this,a,b)}},{key:"addLineDeco",value:function(a){if(a=a.spec.attributes)this.attrs=h(a,this.attrs||{})}},{key:"domAtPos",value:function(a){return r(this.dom,
this.children,a)}},{key:"sync",value:function(a){this.dom||(this.setDOM(document.createElement("div")),this.dom.className=$c,this.prevAttrs=this.attrs?null:void 0);void 0!==this.prevAttrs&&(u(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add($c),this.prevAttrs=void 0);Ma(Fa(e.prototype),"sync",this).call(this,a);a=this.dom.lastChild;if(!a||"BR"!=a.nodeName&&Ub.get(a)instanceof Jb)a=document.createElement("BR"),a.cmIgnore=!0,this.dom.appendChild(a)}},{key:"measureTextSize",value:function(){if(0==
this.children.length||20<this.length)return null;var a=0,b=!0,d=!1,g=void 0;try{for(var l=this.children[Symbol.iterator](),w;!(b=(w=l.next()).done);b=!0){var K=w.value;if(!(K instanceof jd))return null;var P=ca(K.dom);if(1!=P.length)return null;a+=P[0].width}}catch(V){d=!0,g=V}finally{try{if(!b&&null!=l["return"])l["return"]()}finally{if(d)throw g;}}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:a/this.length}}},{key:"coordsAt",value:function(a,b){return p(this,a,b)}},{key:"match",
value:function(a){return!1}},{key:"type",get:function(){return Cb.Text}}],[{key:"find",value:function(a,b){for(var d=0,g=0;;d++){var l=a.children[d];g+=l.length;if(g>=b){if(l instanceof e)return l;if(l.length)return null}g+=l.breakAfter}}}]);return e}(Ub),Gb=[],Sc=function(m){function e(a,b,d){na(this,e);var g=Ba(this,Fa(e).call(this));g.widget=a;g.length=b;g.type=d;g.breakAfter=0;return g}sa(e,m);ta(e,[{key:"merge",value:function(a,b,d,g,l,w){if(d&&(!(d instanceof e&&this.widget.compare(d.widget))||
0<a&&0>=l||b<this.length&&0>=w))return!1;this.length=a+(d?d.length:0)+(this.length-b);return!0}},{key:"domAtPos",value:function(a){return 0==a?mc.before(this.dom):mc.after(this.dom,a==this.length)}},{key:"split",value:function(a){var b=this.length-a;this.length=a;return new e(this.widget,b,this.type)}},{key:"sync",value:function(){this.dom&&this.widget.updateDOM(this.dom)||(this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}},{key:"domBoundsAround",value:function(){return null}},
{key:"match",value:function(a){return a instanceof e&&a.type==this.type&&a.widget.constructor==this.widget.constructor?(a.widget.eq(this.widget)||this.markDirty(!0),this.widget=a.widget,this.length=a.length,this.breakAfter=a.breakAfter,!0):!1}},{key:"children",get:function(){return Gb}},{key:"overrideDOMText",get:function(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):A.Text.empty}}]);return e}(Ub),pc=function(){function m(e,a,b){na(this,m);this.doc=e;this.pos=
a;this.end=b;this.content=[];this.curLine=null;this.breakAtStart=0;this.openEnd=this.openStart=-1;this.text="";this.textOff=0;this.cursor=e.iter();this.skip=a}ta(m,[{key:"posCovered",value:function(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;var e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof Sc&&e.type==Cb.WidgetBefore)}},{key:"getLine",value:function(){this.curLine||this.content.push(this.curLine=new jc);return this.curLine}},
{key:"addWidget",value:function(e){this.curLine=null;this.content.push(e)}},{key:"finish",value:function(){this.posCovered()||this.getLine()}},{key:"wrapMarks",value:function(e,a){for(var b=a.length-1;0<=b;b--)e=new Vc(a[b],[e],e.length);return e}},{key:"buildText",value:function(e,a,b){for(;0<e;){if(this.textOff==this.text.length){var d=this.cursor.next(this.skip),g=d.value,l=d.lineBreak;d=d.done;this.skip=0;if(d)throw Error("Ran out of text content when drawing inline views");if(l){this.posCovered()||
this.getLine();this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1;this.curLine=null;e--;continue}else this.text=g,this.textOff=0}g=Math.min(this.text.length-this.textOff,e);this.getLine().append(this.wrapMarks(new jd(this.text.slice(this.textOff,this.textOff+g)),a),b);e-=g;this.textOff+=g}}},{key:"span",value:function(e,a,b,d){this.buildText(a-e,b,d);this.pos=a;0>this.openStart&&(this.openStart=d)}},{key:"point",value:function(e,a,b,d,g){e=a-e;b instanceof Zb?
b.block?(d=b.type,d!=Cb.WidgetAfter||this.posCovered()||this.getLine(),this.addWidget(new Sc(b.widget||new Mc("div"),e,d))):(b=this.wrapMarks(Jb.create(b.widget||new Mc("span"),e,b.startSide),d),this.getLine().append(b,g)):this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(b);e&&(this.textOff+e<=this.text.length?this.textOff+=e:(this.skip+=e-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=a);0>this.openStart&&(this.openStart=g)}}],[{key:"build",value:function(e,
a,b,d){e=new m(e,a,b);e.openEnd=wa.RangeSet.spans(d,a,b,e);0>e.openStart&&(e.openStart=e.openEnd);e.finish();return e}}]);return m}(),Mc=function(m){function e(a){na(this,e);var b=Ba(this,Fa(e).call(this));b.tag=a;return b}sa(e,m);ta(e,[{key:"eq",value:function(a){return a.tag==this.tag}},{key:"toDOM",value:function(){return document.createElement(this.tag)}},{key:"updateDOM",value:function(a){return a.nodeName.toLowerCase()==this.tag}}]);return e}(tc),Sb;F.Direction=Sb;(function(m){m[m.LTR=0]="LTR";
m[m.RTL=1]="RTL"})(Sb||(F.Direction=Sb={}));var dd=Sb.LTR,md=Sb.RTL,od=U("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),pd=U("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),
nd=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,rc=function(){function m(e,a,b){na(this,m);this.from=e;this.to=a;this.level=b}ta(m,[{key:"side",value:function(e,a){return this.dir==a==e?this.to:this.from}},{key:"dir",get:function(){return this.level%2?md:dd}}],[{key:"find",value:function(e,a,b,d){for(var g=-1,l=0;l<e.length;l++){var w=e[l];if(w.from<=a&&w.to>=a){if(w.level==b)return l;if(0>g||(0!=d?0>d?w.from<a:w.to>a:e[g].level>w.level))g=l}}if(0>g)throw new RangeError("Index out of range");return g}}]);
return m}();F.BidiSpan=rc;var Eb=[],ed="",ad=["pre-wrap","normal","pre-line"],bd=function(){function m(){na(this,m);this.doc=oa.Text.empty;this.lineWrapping=!1;this.direction=Sb.LTR;this.heightSamples={};this.lineHeight=14;this.charWidth=7;this.lineLength=30;this.heightChanged=!1}ta(m,[{key:"heightForGap",value:function(e,a){var b=this.doc.lineAt(a).number-this.doc.lineAt(e).number+1;this.lineWrapping&&(b+=Math.ceil((a-e-b*this.lineLength*.5)/this.lineLength));return this.lineHeight*b}},{key:"heightForLine",
value:function(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}},{key:"setDoc",value:function(e){this.doc=e;return this}},{key:"mustRefresh",value:function(e,a,b){for(var d=!1,g=0;g<e.length;g++){var l=e[g];0>l?g++:this.heightSamples[Math.floor(10*l)]||(d=!0,this.heightSamples[Math.floor(10*l)]=!0)}return d||-1<ad.indexOf(a)!=this.lineWrapping||this.direction!=b}},{key:"refresh",value:function(e,a,b,d,g,l){var w=-1<ad.indexOf(e);
e=Math.round(b)!=Math.round(this.lineHeight)||this.lineWrapping!=w||this.direction!=a;this.lineWrapping=w;this.direction=a;this.lineHeight=b;this.charWidth=d;this.lineLength=g;if(e)for(this.heightSamples={},a=0;a<l.length;a++)b=l[a],0>b?a++:this.heightSamples[Math.floor(10*b)]=!0;return e}}]);return m}(),Tc=function(){function m(e,a){na(this,m);this.from=e;this.heights=a;this.index=0}ta(m,[{key:"more",get:function(){return this.index<this.heights.length}}]);return m}(),Ic=function(){function m(e,
a,b,d,g){na(this,m);this.from=e;this.length=a;this.top=b;this.height=d;this.type=g}ta(m,[{key:"join",value:function(e){var a=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new m(this.from,this.length+e.length,this.top,this.height+e.height,a)}},{key:"to",get:function(){return this.from+this.length}},{key:"bottom",get:function(){return this.top+this.height}}]);return m}();F.BlockInfo=Ic;var c;(function(m){m[m.ByPos=0]="ByPos";m[m.ByHeight=1]="ByHeight";m[m.ByPosNoHeight=
2]="ByPosNoHeight"})(c||(c={}));var f=function(){function m(e,a){var b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:2;na(this,m);this.length=e;this.height=a;this.flags=b}ta(m,[{key:"setHeight",value:function(e,a){this.height!=a&&(1E-4<Math.abs(this.height-a)&&(e.heightChanged=!0),this.height=a)}},{key:"replace",value:function(e,a,b){return m.of(b)}},{key:"decomposeLeft",value:function(e,a){a.push(this)}},{key:"decomposeRight",value:function(e,a){a.push(this)}},{key:"applyChanges",value:function(e,
a,b,d){for(var g=this,l=d.length-1;0<=l;l--){var w=d[l],K=w.fromA,P=w.toA,V=w.fromB;w=w.toB;var X=g.lineAt(K,c.ByPosNoHeight,a,0,0),ja=X.to>=P?X:g.lineAt(P,c.ByPosNoHeight,a,0,0);w+=ja.to-P;for(P=ja.to;0<l&&X.from<=d[l-1].toA;)K=d[l-1].fromA,V=d[l-1].fromB,l--,K<X.from&&(X=g.lineAt(K,c.ByPosNoHeight,a,0,0));V+=X.from-K;K=X.from;V=O.build(b,e,V,w);g=g.replace(K,P,V)}return g.updateHeight(b,0)}},{key:"outdated",get:function(){return 0<(this.flags&2)},set:function(e){this.flags=(e?2:0)|this.flags&-3}}],
[{key:"empty",value:function(){return new n(0,0)}},{key:"of",value:function(e){if(1==e.length)return e[0];for(var a=0,b=e.length,d=0,g=0;;)if(a==b)if(d>2*g){var l=e[a-1];l["break"]?e.splice(--a,1,l.left,null,l.right):e.splice(--a,1,l.left,l.right);b+=1+l["break"];d-=l.size}else if(g>2*d)l=e[b],l["break"]?e.splice(b,1,l.left,null,l.right):e.splice(b,1,l.left,l.right),b+=2+l["break"],g-=l.size;else break;else d<g?(l=e[a++])&&(d+=l.size):(l=e[--b])&&(g+=l.size);d=0;null==e[a-1]?(d=1,a--):null==e[a]&&
(d=1,b++);return new B(m.of(e.slice(0,a)),d,m.of(e.slice(b)))}}]);return m}();f.prototype.size=1;var k=function(m){function e(a,b,d){na(this,e);a=Ba(this,Fa(e).call(this,a,b));a.type=d;return a}sa(e,m);ta(e,[{key:"blockAt",value:function(a,b,d,g){return new Ic(g,this.length,d,this.height,this.type)}},{key:"lineAt",value:function(a,b,d,g,l){return this.blockAt(0,d,g,l)}},{key:"forEachLine",value:function(a,b,d,g,l,w){w(this.blockAt(0,d,g,l))}},{key:"updateHeight",value:function(a){var b=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:0,d=3<arguments.length?arguments[3]:void 0;d&&d.from<=b&&d.more&&this.setHeight(a,d.heights[d.index++]);this.outdated=!1;return this}},{key:"toString",value:function(){return"block(".concat(this.length,")")}}]);return e}(f),n=function(m){function e(a,b){na(this,e);a=Ba(this,Fa(e).call(this,a,b,Cb.Text));a.collapsed=0;a.widgetHeight=0;return a}sa(e,m);ta(e,[{key:"replace",value:function(a,b,d){a=d[0];return 1==d.length&&(a instanceof e||a instanceof x&&a.flags&4)&&
10>Math.abs(this.length-a.length)?(a instanceof x?a=new e(a.length,this.height):a.height=this.height,this.outdated||(a.outdated=!1),a):f.of(d)}},{key:"updateHeight",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,g=3<arguments.length?arguments[3]:void 0;g&&g.from<=b&&g.more?this.setHeight(a,g.heights[g.index++]):(d||this.outdated)&&this.setHeight(a,Math.max(this.widgetHeight,a.heightForLine(this.length-this.collapsed)));
this.outdated=!1;return this}},{key:"toString",value:function(){return"line(".concat(this.length).concat(this.collapsed?-this.collapsed:"").concat(this.widgetHeight?":"+this.widgetHeight:"",")")}}]);return e}(k),x=function(m){function e(a){na(this,e);return Ba(this,Fa(e).call(this,a,0))}sa(e,m);ta(e,[{key:"lines",value:function(a,b){var d=a.lineAt(b).number;a=a.lineAt(b+this.length).number;return{firstLine:d,lastLine:a,lineHeight:this.height/(a-d+1)}}},{key:"blockAt",value:function(a,b,d,g){var l=
this.lines(b,g),w=l.firstLine;g=l.lineHeight;a=Math.max(0,Math.min(l.lastLine-w,Math.floor((a-d)/g)));b=b.line(w+a);return new Ic(b.from,b.length,d+g*a,g,Cb.Text)}},{key:"lineAt",value:function(a,b,d,g,l){if(b==c.ByHeight)return this.blockAt(a,d,g,l);if(b==c.ByPosNoHeight)return g=d.lineAt(a),a=g.from,new Ic(a,g.to-a,0,0,Cb.Text);l=this.lines(d,l);b=l.firstLine;l=l.lineHeight;a=d.lineAt(a);return new Ic(a.from,a.length,g+l*(a.number-b),l,Cb.Text)}},{key:"forEachLine",value:function(a,b,d,g,l,w){var K=
this.lines(d,l);l=K.firstLine;K=K.lineHeight;for(var P=a;P<b;){var V=d.lineAt(P);P==a&&(g+=K*(V.number-l));w(new Ic(V.from,V.length,g,g+=K,Cb.Text));P=V.to+1}}},{key:"replace",value:function(a,b,d){b=this.length-b;if(0<b){var g=d[d.length-1];g instanceof e?d[d.length-1]=new e(g.length+b):d.push(null,new e(b-1))}0<a&&(b=d[0],b instanceof e?d[0]=new e(a+b.length):d.unshift(new e(a-1),null));return f.of(d)}},{key:"decomposeLeft",value:function(a,b){b.push(new e(a-1),null)}},{key:"decomposeRight",value:function(a,
b){b.push(null,new e(this.length-a-1))}},{key:"updateHeight",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,g=3<arguments.length?arguments[3]:void 0,l=b+this.length;if(g&&g.from<=b+this.length&&g.more){d=[];var w=Math.max(b,g.from);for(g.from>b&&d.push((new e(g.from-b-1)).updateHeight(a,b));w<=l&&g.more;){b=a.doc.lineAt(w).length;d.length&&d.push(null);var K=new n(b,g.heights[g.index++]);K.outdated=!1;d.push(K);
w+=b+1}w<=l&&d.push(null,(new e(l-w)).updateHeight(a,w));a.heightChanged=!0;return f.of(d)}if(d||this.outdated)this.setHeight(a,a.heightForGap(b,b+this.length)),this.outdated=!1;return this}},{key:"toString",value:function(){return"gap(".concat(this.length,")")}}]);return e}(f),B=function(m){function e(a,b,d){na(this,e);b=Ba(this,Fa(e).call(this,a.length+b+d.length,a.height+d.height,b|(a.outdated||d.outdated?2:0)));b.left=a;b.right=d;b.size=a.size+d.size;return b}sa(e,m);ta(e,[{key:"blockAt",value:function(a,
b,d,g){var l=d+this.left.height;return a<l||0==this.right.height?this.left.blockAt(a,b,d,g):this.right.blockAt(a,b,l,g+this.left.length+this["break"])}},{key:"lineAt",value:function(a,b,d,g,l){var w=g+this.left.height,K=l+this.left.length+this["break"],P=b==c.ByHeight?a<w||0==this.right.height:a<K;a=P?this.left.lineAt(a,b,d,g,l):this.right.lineAt(a,b,d,w,K);if(this["break"]||(P?a.to<K:a.from>K))return a;b=b==c.ByPosNoHeight?c.ByPosNoHeight:c.ByPos;return P?a.join(this.right.lineAt(K,b,d,w,K)):this.left.lineAt(K,
b,d,g,l).join(a)}},{key:"forEachLine",value:function(a,b,d,g,l,w){var K=g+this.left.height,P=l+this.left.length+this["break"];if(this["break"])a<P&&this.left.forEachLine(a,b,d,g,l,w),b>=P&&this.right.forEachLine(a,b,d,K,P,w);else{var V=this.lineAt(P,c.ByPos,d,g,l);a<V.from&&this.left.forEachLine(a,V.from-1,d,g,l,w);V.to>=a&&V.from<=b&&w(V);b>V.to&&this.right.forEachLine(V.to+1,b,d,K,P,w)}}},{key:"replace",value:function(a,b,d){var g=this.left.length+this["break"];if(b<g)return this.balanced(this.left.replace(a,
b,d),this.right);if(a>this.left.length)return this.balanced(this.left,this.right.replace(a-g,b-g,d));g=[];0<a&&this.decomposeLeft(a,g);var l=g.length,w=!0,K=!1,P=void 0;try{for(var V=d[Symbol.iterator](),X;!(w=(X=V.next()).done);w=!0)g.push(X.value)}catch(ja){K=!0,P=ja}finally{try{if(!w&&null!=V["return"])V["return"]()}finally{if(K)throw P;}}0<a&&ua(g,l-1);b<this.length&&(a=g.length,this.decomposeRight(b,g),ua(g,a));return f.of(g)}},{key:"decomposeLeft",value:function(a,b){var d=this.left.length;
if(a<=d)return this.left.decomposeLeft(a,b);b.push(this.left);this["break"]&&(d++,a>=d&&b.push(null));a>d&&this.right.decomposeLeft(a-d,b)}},{key:"decomposeRight",value:function(a,b){var d=this.left.length,g=d+this["break"];if(a>=g)return this.right.decomposeRight(a-g,b);a<d&&this.left.decomposeRight(a,b);this["break"]&&a<g&&b.push(null);b.push(this.right)}},{key:"balanced",value:function(a,b){if(a.size>2*b.size||b.size>2*a.size)return f.of(this["break"]?[a,null,b]:[a,b]);this.left=a;this.right=b;
this.height=a.height+b.height;this.outdated=a.outdated||b.outdated;this.size=a.size+b.size;this.length=a.length+this["break"]+b.length;return this}},{key:"updateHeight",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,g=3<arguments.length?arguments[3]:void 0,l=this.left,w=this.right,K=b+l.length+this["break"],P=null;g&&g.from<=b+l.length&&g.more?P=l=l.updateHeight(a,b,d,g):l.updateHeight(a,b,d);g&&g.from<=
K+w.length&&g.more?P=w=w.updateHeight(a,K,d,g):w.updateHeight(a,K,d);if(P)return this.balanced(l,w);this.height=this.left.height+this.right.height;this.outdated=!1;return this}},{key:"toString",value:function(){return this.left+(this["break"]?" ":"-")+this.right}},{key:"break",get:function(){return this.flags&1}}]);return e}(f),O=function(){function m(e,a){na(this,m);this.pos=e;this.oracle=a;this.nodes=[];this.lineEnd=this.lineStart=-1;this.covering=null;this.writtenTo=e}ta(m,[{key:"span",value:function(e,
a){if(-1<this.lineStart){e=Math.min(a,this.lineEnd);var b=this.nodes[this.nodes.length-1];b instanceof n?b.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new n(e-this.pos,-1));this.writtenTo=e;a>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=a}},{key:"point",value:function(e,a,b){if(e<a||b.heightRelevant){var d=b.widget?Math.max(0,b.widget.estimatedHeight):0;e=a-e;b.block?this.addBlock(new k(e,d,b.type)):(e||5<=d)&&this.addLineDeco(d,e)}else a>e&&this.span(e,
a);-1<this.lineEnd&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}},{key:"enterLine",value:function(){if(!(-1<this.lineStart)){var e=this.oracle.doc.lineAt(this.pos),a=e.from;e=e.to;this.lineStart=a;this.lineEnd=e;this.writtenTo<a&&((this.writtenTo<a-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,a-1)),this.nodes.push(null));this.pos>a&&this.nodes.push(new n(this.pos-a,-1));this.writtenTo=this.pos}}},{key:"blankContent",value:function(e,
a){var b=new x(a-e);this.oracle.doc.lineAt(e).to==a&&(b.flags|=4);return b}},{key:"ensureLine",value:function(){this.enterLine();var e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof n)return e;e=new n(0,-1);this.nodes.push(e);return e}},{key:"addBlock",value:function(e){this.enterLine();e.type!=Cb.WidgetAfter||this.isCovered||this.ensureLine();this.nodes.push(e);this.writtenTo=this.pos+=e.length;e.type!=Cb.WidgetBefore&&(this.covering=e)}},{key:"addLineDeco",value:function(e,
a){var b=this.ensureLine();b.length+=a;b.collapsed+=a;b.widgetHeight=Math.max(b.widgetHeight,e);this.writtenTo=this.pos+=a}},{key:"finish",value:function(e){var a=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(-1<this.lineStart)||a instanceof n||this.isCovered?(this.writtenTo<this.pos||null==a)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new n(0,-1));a=!0;var b=!1,d=void 0;try{for(var g=this.nodes[Symbol.iterator](),l;!(a=(l=g.next()).done);a=!0){var w=
l.value;w instanceof n&&w.updateHeight(this.oracle,e);e+=w?w.length:1}}catch(K){b=!0,d=K}finally{try{if(!a&&null!=g["return"])g["return"]()}finally{if(b)throw d;}}return this.nodes}},{key:"isCovered",get:function(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}},{key:"minPointSize",get:function(){return 0}}],[{key:"build",value:function(e,a,b,d){e=new m(b,e);wa.RangeSet.spans(a,b,d,e);return e.finish(b)}}]);return m}(),S=function(){function m(){na(this,m);this.changes=[]}ta(m,
[{key:"compareRange",value:function(){}},{key:"comparePoint",value:function(e,a,b,d){(e<a||b&&b.heightRelevant||d&&d.heightRelevant)&&E(e,a,this.changes)}},{key:"minPointSize",get:function(){return 0}}]);return m}(),Z=[],ea=A.Facet.define(),va=A.Facet.define(),Ea=A.Facet.define(),Aa=A.Facet.define(),Ua=A.Facet.define(),Ia=A.Facet.define(),Wa=A.Facet.define({combine:function(m){return m.length?m[0]:!0}}),yb=function b(e,a){na(this,b);this.field=e;this.get=a};F.PluginFieldProvider=yb;var Qb=function(){function e(){na(this,
e)}ta(e,[{key:"from",value:function(a){return new yb(this,a)}}],[{key:"define",value:function(){return new e}}]);return e}();F.PluginField=Qb;Qb.scrollMargins=Qb.define();var hb=0,mb=A.Facet.define(),Xb=function(){function e(a,b,d){na(this,e);this.id=a;this.create=b;this.fields=d;this.extension=mb.of(this)}ta(e,null,[{key:"define",value:function(a,b){b=b||{};var d=b.eventHandlers,g=b.provide;b=b.decorations;var l=[];if(g){var w=!0,K=!1,P=void 0;try{for(var V=(Array.isArray(g)?g:[g])[Symbol.iterator](),
X;!(w=(X=V.next()).done);w=!0)l.push(X.value)}catch(Da){K=!0,P=Da}finally{try{if(!w&&null!=V["return"])V["return"]()}finally{if(K)throw P;}}}d&&l.push(ib.from(function(Da){return{plugin:Da,handlers:d}}));if(b){V=!0;X=!1;g=void 0;try{for(var ja=(Array.isArray(b)?b:[b])[Symbol.iterator](),ia;!(V=(ia=ja.next()).done);V=!0)l.push(vc.from(ia.value))}catch(Da){X=!0,g=Da}finally{try{if(!V&&null!=ja["return"])ja["return"]()}finally{if(X)throw g;}}}return new e(hb++,a,l)}},{key:"fromClass",value:function(a,
b){return e.define(function(d){return new a(d)},b)}}]);return e}();F.ViewPlugin=Xb;var vc=Qb.define(),ib=Qb.define(),Hb=function(){function e(a,b){na(this,e);this.value=a;this.spec=b}ta(e,[{key:"takeField",value:function(a,b){var d=!0,g=!1,l=void 0;try{for(var w=this.spec.fields[Symbol.iterator](),K;!(d=(K=w.next()).done);d=!0){var P=K.value,V=P.get;P.field==a&&b.push(V(this.value))}}catch(X){g=!0,l=X}finally{try{if(!d&&null!=w["return"])w["return"]()}finally{if(g)throw l;}}}},{key:"update",value:function(a){if(!this.value.update)return this;
try{return this.value.update(a),this}catch(b){Ra(a.state,b,"CodeMirror plugin crashed");if(this.value.destroy)try{this.value.destroy()}catch(d){}return e.dummy}}},{key:"destroy",value:function(a){if(this.value.destroy)try{this.value.destroy()}catch(b){Ra(a.state,b,"CodeMirror plugin crashed")}}}],[{key:"create",value:function(a,b){try{var d=a.create(b)}catch(g){return Ra(b.state,g,"CodeMirror plugin crashed"),e.dummy}return new e(d,a)}}]);return e}();Hb.dummy=new Hb({},Xb.define(function(){return{}}));
var $b=A.Facet.define({combine:function(e){return e.reduce(function(a,b){return h(b,a)},{})}}),fc=A.Facet.define({combine:function(e){return e.reduce(function(a,b){return h(b,a)},{})}}),Fb=A.Facet.define(),Rb=A.Facet.define(),ac=function(){function e(a,b,d,g){na(this,e);this.fromA=a;this.toA=b;this.fromB=d;this.toB=g}ta(e,[{key:"join",value:function(a){return new e(Math.min(this.fromA,a.fromA),Math.max(this.toA,a.toA),Math.min(this.fromB,a.fromB),Math.max(this.toB,a.toB))}},{key:"addToSet",value:function(a){for(var b=
a.length,d=this;0<b;b--){var g=a[b-1];if(!(g.fromA>d.toA)){if(g.toA<d.fromA)break;d=d.join(g);a.splice(b-1,1)}}a.splice(b,0,d);return a}}],[{key:"extendWithRanges",value:function(a,b){if(0==b.length)return a;for(var d=[],g=0,l=0,w=0,K=0;;g++){var P=g==a.length?null:a[g];w-=K;for(var V=P?P.fromB:1E9;l<b.length&&b[l]<V;){var X=b[l+1],ja=Math.max(K,b[l]),ia=Math.min(V,X);ja<=ia&&(new e(ja+w,ia+w,ja,ia)).addToSet(d);if(X>V)break;else l+=2}if(!P)return d;(new e(P.fromA,P.toA,P.fromB,P.toB)).addToSet(d);
w=P.toA;K=P.toB}}}]);return e}(),gc=function(){function e(a,b){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Z;na(this,e);this.view=a;this.state=b;this.transactions=d;this.flags=0;this.prevState=a.state;this.changes=A.ChangeSet.empty(this.prevState.doc.length);var g=!0,l=!1,w=void 0;try{for(var K=d[Symbol.iterator](),P;!(g=(P=K.next()).done);g=!0)this.changes=this.changes.compose(P.value.changes)}catch(X){l=!0,w=X}finally{try{if(!g&&null!=K["return"])K["return"]()}finally{if(l)throw w;
}}var V=[];this.changes.iterChangedRanges(function(X,ja,ia,Da){return V.push(new ac(X,ja,ia,Da))});this.changedRanges=V;d=a.hasFocus;d!=a.inputState.notifiedFocused&&(a.inputState.notifiedFocused=d,1!=this.flags);this.docChanged&&(this.flags|=2)}ta(e,[{key:"viewportChanged",get:function(){return 0<(this.flags&4)}},{key:"heightChanged",get:function(){return 0<(this.flags&2)}},{key:"geometryChanged",get:function(){return this.docChanged||0<(this.flags&18)}},{key:"focusChanged",get:function(){return 0<
(this.flags&1)}},{key:"docChanged",get:function(){return this.transactions.some(function(a){return a.docChanged})}},{key:"selectionSet",get:function(){return this.transactions.some(function(a){return a.selection})}},{key:"empty",get:function(){return 0==this.flags&&0==this.transactions.length}}]);return e}();F.ViewUpdate=gc;var qc=function(){function e(a,b,d){na(this,e);this.from=a;this.to=b;this.size=d}ta(e,[{key:"draw",value:function(a){return ob.replace({widget:new nc(this.size,a)}).range(this.from,
this.to)}}],[{key:"same",value:function(a,b){if(a.length!=b.length)return!1;for(var d=0;d<a.length;d++){var g=a[d],l=b[d];if(g.from!=l.from||g.to!=l.to||g.size!=l.size)return!1}return!0}}]);return e}(),nc=function(e){function a(b,d){na(this,a);var g=Ba(this,Fa(a).call(this));g.size=b;g.vertical=d;return g}sa(a,e);ta(a,[{key:"eq",value:function(b){return b.size==this.size&&b.vertical==this.vertical}},{key:"toDOM",value:function(){var b=document.createElement("div");this.vertical?b.style.height=this.size+
"px":(b.style.width=this.size+"px",b.style.height="2px",b.style.display="inline-block");return b}},{key:"estimatedHeight",get:function(){return this.vertical?this.size:-1}}]);return a}(tc),Za=function(){function e(a){na(this,e);this.state=a;this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0};this.inView=!0;this.contentWidth=this.paddingBottom=this.paddingTop=0;this.heightOracle=new bd;this.heightMap=f.empty();this.scrollTo=null;this.printing=!1;this.visibleRanges=[];this.mustEnforceCursorAssoc=
!1;this.heightMap=this.heightMap.applyChanges(a.facet(Fb),oa.Text.empty,this.heightOracle.setDoc(a.doc),[new ac(0,0,0,a.doc.length)]);this.viewport=this.getViewport(0,null);this.lineGaps=this.ensureLineGaps([]);this.lineGapDeco=ob.set(this.lineGaps.map(function(b){return b.draw(!1)}));this.computeVisibleRanges()}ta(e,[{key:"update",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,d=this.state;this.state=a.state;var g=this.state.facet(Fb),l=ac.extendWithRanges(a.changedRanges,
La(a.prevState.facet(Fb),g,a?a.changes:A.ChangeSet.empty(this.state.doc.length))),w=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(g,d.doc,this.heightOracle.setDoc(this.state.doc),l);this.heightMap.height!=w&&(a.flags|=2);d=l.length?this.mapViewport(this.viewport,a.changes):this.viewport;if(b&&(b.head<d.from||b.head>d.to)||!this.viewportIsAppropriate(d))d=this.getViewport(0,b);d.eq(this.viewport)||(this.viewport=d,a.flags|=4);if(this.lineGaps.length||15E3<this.viewport.to-this.viewport.from)a.flags|=
this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,a.changes)));this.computeVisibleRanges();b&&(this.scrollTo=b);!this.mustEnforceCursorAssoc&&a.selectionSet&&a.view.lineWrapping&&a.state.selection.primary.empty&&a.state.selection.primary.assoc&&(this.mustEnforceCursorAssoc=!0)}},{key:"measure",value:function(a,b){var d=a.dom,g="",l=Sb.LTR;if(!b){var w=window.getComputedStyle(d);g=w.whiteSpace;l="rtl"==w.direction?Sb.RTL:Sb.LTR;this.paddingTop=parseInt(w.paddingTop)||0;this.paddingBottom=
parseInt(w.paddingBottom)||0}if(this.printing)w={top:-1E8,bottom:1E8,left:-1E8,right:1E8};else{w=this.paddingTop;var K=d.getBoundingClientRect(),P=Math.max(0,K.left),V=Math.min(innerWidth,K.right),X=Math.max(0,K.top),ja=Math.min(innerHeight,K.bottom);for(d=d.parentNode;d;)if(1==d.nodeType){if((d.scrollHeight>d.clientHeight||d.scrollWidth>d.clientWidth)&&"visible"!=window.getComputedStyle(d).overflow){var ia=d.getBoundingClientRect();P=Math.max(P,ia.left);V=Math.min(V,ia.right);X=Math.max(X,ia.top);
ja=Math.min(ja,ia.bottom)}d=d.parentNode}else if(11==d.nodeType)d=d.host;else break;w={left:P-K.left,right:V-K.left,top:X-(K.top+w),bottom:ja-(K.top+w)}}P=w;w=P.top-this.pixelViewport.top;K=P.bottom-this.pixelViewport.bottom;this.pixelViewport=P;this.inView=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(!this.inView)return 0;P=a.measureVisibleLineHeights();d=!1;X=V=0;ja=this.heightOracle;if(!b){b=a.dom.clientWidth;if(ja.mustRefresh(P,g,l)||ja.lineWrapping&&
Math.abs(b-this.contentWidth)>ja.charWidth)if(d=a.measureTextSize(),ia=d.charWidth,d=ja.refresh(g,l,d.lineHeight,ia,b/ia,P))a.minWidth=0,X|=16;this.contentWidth!=b&&(this.contentWidth=b,X|=16);0<w&&0<K?V=Math.max(w,K):0>w&&0>K&&(V=Math.min(w,K))}ja.heightChanged=!1;this.heightMap=this.heightMap.updateHeight(ja,0,d,new Tc(this.viewport.from,P));ja.heightChanged&&(X|=2);if(!this.viewportIsAppropriate(this.viewport,V)||this.scrollTo&&(this.scrollTo.head<this.viewport.from||this.scrollTo.head>this.viewport.to))this.viewport=
this.getViewport(V,this.scrollTo),X|=4;if(this.lineGaps.length||15E3<this.viewport.to-this.viewport.from)X|=this.updateLineGaps(this.ensureLineGaps(d?[]:this.lineGaps));this.computeVisibleRanges();this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,a.enforceCursorAssoc());return X}},{key:"getViewport",value:function(a,b){var d=.5-Math.max(-.5,Math.min(.5,a/1E3/2));a=this.heightMap;var g=this.state.doc,l=this.pixelViewport,w=l.top;l=l.bottom;d=new rb(a.lineAt(w-1E3*d,c.ByHeight,g,0,0).from,
a.lineAt(l+1E3*(1-d),c.ByHeight,g,0,0).to);b&&(b.head<d.from?(b=a.lineAt(b.head,c.ByPos,g,0,0).top,d=new rb(a.lineAt(b-500,c.ByHeight,g,0,0).from,a.lineAt(b+(l-w)+500,c.ByHeight,g,0,0).to)):b.head>d.to&&(b=a.lineAt(b.head,c.ByPos,g,0,0).bottom,d=new rb(a.lineAt(b-(l-w)-500,c.ByHeight,g,0,0).from,a.lineAt(b+500,c.ByHeight,g,0,0).to)));return d}},{key:"mapViewport",value:function(a,b){var d=b.mapPos(a.from,-1);a=b.mapPos(a.to,1);return new rb(this.heightMap.lineAt(d,c.ByPos,this.state.doc,0,0).from,
this.heightMap.lineAt(a,c.ByPos,this.state.doc,0,0).to)}},{key:"viewportIsAppropriate",value:function(a){var b=a.from,d=a.to,g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,l=this.heightMap.lineAt(b,c.ByPos,this.state.doc,0,0).top,w=this.heightMap.lineAt(d,c.ByPos,this.state.doc,0,0).bottom;return(0==b||l<=this.pixelViewport.top-Math.max(10,Math.min(-g,250)))&&(d==this.state.doc.length||w>=this.pixelViewport.bottom+Math.max(10,Math.min(g,250)))&&l>this.pixelViewport.top-2E3&&w<this.pixelViewport.bottom+
2E3}},{key:"mapLineGaps",value:function(a,b){if(!a.length||b.empty)return a;var d=[],g=!0,l=!1,w=void 0;try{for(var K=a[Symbol.iterator](),P;!(g=(P=K.next()).done);g=!0){var V=P.value;b.touchesRange(V.from,V.to)||d.push(new qc(b.mapPos(V.from),b.mapPos(V.to),V.size))}}catch(X){l=!0,w=X}finally{try{if(!g&&null!=K["return"])K["return"]()}finally{if(l)throw w;}}return d}},{key:"ensureLineGaps",value:function(a){var b=this,d=[];if(this.heightOracle.direction!=Sb.LTR)return d;this.heightMap.forEachLine(this.viewport.from,
this.viewport.to,this.state.doc,0,0,function(g){if(!(1E4>g.length)){var l=gb(g.from,g.to,b.state);if(!(1E4>l.total)){if(b.heightOracle.lineWrapping){var w=g.from!=b.viewport.from?g.from:cb(l,(b.pixelViewport.top-g.top)/g.height);var K=g.to!=b.viewport.to?g.to:cb(l,(b.pixelViewport.bottom-g.top)/g.height)}else K=l.total*b.heightOracle.charWidth,w=cb(l,b.pixelViewport.left/K),K=cb(l,b.pixelViewport.right/K);var P=b.state.selection.primary;P.from<=w&&P.to>=g.from&&(w=P.from);P.from<=g.to&&P.to>=K&&(K=
P.to);var V=w-1E4,X=K+1E4;V>g.from+5E3&&d.push(zb(a,function(ja){return ja.from==g.from&&ja.to>V-5E3&&ja.to<V+5E3})||new qc(g.from,V,b.gapSize(g,V,!0,l)));X<g.to-5E3&&d.push(zb(a,function(ja){return ja.to==g.to&&ja.from>X-5E3&&ja.from<X+5E3})||new qc(X,g.to,b.gapSize(g,X,!1,l)))}}});return d}},{key:"gapSize",value:function(a,b,d,g){if(this.heightOracle.lineWrapping)return g=a.height*sb(g,b),d?g:a.height-g;a=sb(g,b);return g.total*this.heightOracle.charWidth*(d?a:1-a)}},{key:"updateLineGaps",value:function(a){var b=
this;return qc.same(a,this.lineGaps)?0:(this.lineGaps=a,this.lineGapDeco=ob.set(a.map(function(d){return d.draw(b.heightOracle.lineWrapping)})),8)}},{key:"computeVisibleRanges",value:function(){var a=this.state.facet(Fb);this.lineGaps.length&&(a=a.concat(this.lineGapDeco));var b=[];wa.RangeSet.spans(a,this.viewport.from,this.viewport.to,{span:function(d,g){b.push({from:d,to:g})},point:function(){},minPointSize:20});this.visibleRanges=b}},{key:"lineAt",value:function(a,b){return this.heightMap.lineAt(a,
c.ByPos,this.state.doc,b+this.paddingTop,0)}},{key:"lineAtHeight",value:function(a,b){return this.heightMap.lineAt(a,c.ByHeight,this.state.doc,b+this.paddingTop,0)}},{key:"blockAtHeight",value:function(a,b){return this.heightMap.blockAt(a,this.state.doc,b+this.paddingTop,0)}},{key:"forEachLine",value:function(a,b,d,g){return this.heightMap.forEachLine(a,b,this.state.doc,g+this.paddingTop,0,d)}}]);return e}(),rb=function(){function e(a,b){na(this,e);this.from=a;this.to=b}ta(e,[{key:"eq",value:function(a){return this.from==
a.from&&this.to==a.to}}]);return e}(),Jc=[],Uc=function(e){function a(b){na(this,a);var d=Ba(this,Fa(a).call(this));d.view=b;d.viewports=Jc;d.compositionDeco=ob.none;d.decorations=[];d.minWidth=0;d.minWidthFrom=0;d.minWidthTo=0;d.impreciseAnchor=null;d.impreciseHead=null;d.setDOM(b.contentDOM);d.children=[new jc];d.children[0].setParent(Pa(d));d.updateInner([new ac(0,0,0,b.state.doc.length)],d.updateDeco(),0);return d}sa(a,e);ta(a,[{key:"update",value:function(b){var d=this,g,l=b.changedRanges;0<
this.minWidth&&l.length&&(l.every(function(P){var V=P.fromA;return P.toA<d.minWidthFrom||V>d.minWidthTo})?(this.minWidthFrom=b.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=b.changes.mapPos(this.minWidthTo,1)):this.minWidth=0);null!==(g=this.view.inputState)&&void 0!==g&&g.composing?b.transactions.length&&(this.compositionDeco=pb(this.view,b.changes)):this.compositionDeco=ob.none;g=(jb.ie||jb.chrome)&&!this.compositionDeco.size&&b&&b.state.doc.lines!=b.prevState.doc.lines;var w=this.decorations,
K=this.updateDeco();w=xb(w,K,b.changes);l=ac.extendWithRanges(l,w);w=b.transactions.some(function(P){return"pointerselection"==P.annotation(A.Transaction.userEvent)});if(0==this.dirty&&0==l.length&&!(b.flags&12)&&b.state.selection.primary.from>=this.view.viewport.from&&b.state.selection.primary.to<=this.view.viewport.to)return this.updateSelection(g,w),!1;this.updateInner(l,K,b.prevState.doc.length,g,w);return!0}},{key:"updateInner",value:function(b,d,g){var l=this,w=3<arguments.length&&void 0!==
arguments[3]?arguments[3]:!1,K=4<arguments.length&&void 0!==arguments[4]?arguments[4]:!1;this.updateChildren(b,d,g);this.view.observer.ignore(function(){l.dom.style.height=l.view.viewState.heightMap.height+"px";l.dom.style.minWidth=l.minWidth?l.minWidth+"px":"";var P=jb.chrome?{node:ya(l.view.root).focusNode,written:!1}:void 0;l.sync(P);l.dirty=0;if(null===P||void 0===P?0:P.written)w=!0;l.updateSelection(w,K);l.dom.style.height=""})}},{key:"updateChildren",value:function(b,d,g){g=this.childCursor(g);
for(var l=b.length-1;;l--){var w=0<=l?b[l]:null;if(!w)break;var K=w.fromA,P=w.toA,V=pc.build(this.view.state.doc,w.fromB,w.toB,d);w=V.content;var X=V.breakAtStart,ja=V.openStart;V=V.openEnd;var ia=g.findPos(P,1);P=ia.i;ia=ia.off;K=g.findPos(K,-1);this.replaceRange(K.i,K.off,P,ia,w,X,ja,V)}}},{key:"replaceRange",value:function(b,d,g,l,w,K,P,V){var X=this.children[b],ja=w.length?w[w.length-1]:null,ia=ja?ja.breakAfter:K;if(b!=g||K||ia||!(2>w.length)||!X.merge(d,l,w.length?ja:null,0==d,P,V)){var Da=this.children[g];
l<Da.length||Da.children.length&&0==Da.children[Da.children.length-1].length?(b==g&&(Da=Da.split(l),l=0),!ia&&ja&&Da.merge(0,l,ja,!0,0,V)?w[w.length-1]=Da:((l||Da.children.length&&0==Da.children[0].length)&&Da.merge(0,l,null,!1,0,V),w.push(Da))):Da.breakAfter&&(ja?ja.breakAfter=1:K=1);g++;X.breakAfter=K;0<d&&(!K&&w.length&&X.merge(d,X.length,w[0],!1,P,0)?X.breakAfter=w.shift().breakAfter:(d<X.length||X.children.length&&0==X.children[X.children.length-1].length)&&X.merge(d,X.length,null,!1,P,0),b++);
for(;b<g&&w.length;)if(this.children[g-1].match(w[w.length-1]))g--,w.pop();else if(this.children[b].match(w[0]))b++,w.shift();else break;(b<g||w.length)&&this.replaceChildren(b,g,w)}}},{key:"updateSelection",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1;if(1<arguments.length&&void 0!==arguments[1]&&arguments[1]||this.mayControlSelection()){var d=this.view.state.selection.primary,g=this.domAtPos(d.anchor),l=this.domAtPos(d.head),w=ya(this.root);(b||!w.focusNode||
jb.gecko&&d.empty&&Bb(w.focusNode,w.focusOffset)||!la(g.node,g.offset,w.anchorNode,w.anchorOffset)||!la(l.node,l.offset,w.focusNode,w.focusOffset))&&this.view.observer.ignore(function(){if(d.empty){if(jb.gecko){var K=Bb(g.node,g.offset);if(K&&3!=K){var P=Ib(g.node,g.offset,1==K?1:-1);P&&(g=new mc(P,1==K?0:P.nodeValue.length))}}w.collapse(g.node,g.offset);null!=d.bidiLevel&&null!=w.cursorBidiLevel&&(w.cursorBidiLevel=d.bidiLevel)}else w.extend?(w.collapse(g.node,g.offset),w.extend(l.node,l.offset)):
(K=document.createRange(),d.anchor>d.head&&(P=[l,g],g=P[0],l=P[1]),K.setEnd(l.node,l.offset),K.setStart(g.node,g.offset),w.removeAllRanges(),w.addRange(K))});this.impreciseAnchor=g.precise?null:new mc(w.anchorNode,w.anchorOffset);this.impreciseHead=l.precise?null:new mc(w.focusNode,w.focusOffset)}}},{key:"enforceCursorAssoc",value:function(){var b=this.view.state.selection.primary,d=ya(this.root);if(b.empty&&b.assoc&&d.modify){var g=jc.find(this,b.head);if(g){var l=g.posAtStart;b.head!=l&&b.head!=
l+g.length&&(g=this.coordsAt(b.head,-1),l=this.coordsAt(b.head,1),!g||!l||g.bottom>l.top||(g=this.domAtPos(b.head+b.assoc),d.collapse(g.node,g.offset),d.modify("move",0>b.assoc?"forward":"backward","lineboundary")))}}}},{key:"mayControlSelection",value:function(){return this.view.state.facet(Wa)?this.root.activeElement==this.dom:fa(this.dom,ya(this.root))}},{key:"nearest",value:function(b){for(;b;){var d=Ub.get(b);if(d&&d.rootView==this)return d;b=b.parentNode}return null}},{key:"posFromDOM",value:function(b,
d){var g=this.nearest(b);if(!g)throw new RangeError("Trying to find position for a DOM position outside of the document");return g.localPosFromDOM(b,d)+g.posAtStart}},{key:"domAtPos",value:function(b){var d=this.childCursor().findPos(b,-1);b=d.i;for(d=d.off;b<this.children.length-1;){var g=this.children[b];if(d<g.length||g instanceof jc)break;b++;d=0}return this.children[b].domAtPos(d)}},{key:"coordsAt",value:function(b,d){for(var g=this.length,l=this.children.length-1;;l--){var w=this.children[l];
g=g-w.breakAfter-w.length;if(b>=g&&w.type!=Cb.WidgetAfter)return w.coordsAt(b-g,d)}}},{key:"measureVisibleLineHeights",value:function(){var b=[],d=this.view.viewState.viewport,g=d.from;d=d.to;for(var l=Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,w=0,K=0;K<this.children.length;K++){var P=this.children[K],V=w+P.length;if(V>d)break;if(w>=g){b.push(P.dom.getBoundingClientRect().height);var X=P.dom.scrollWidth;X>l&&(this.minWidth=l=X,this.minWidthFrom=w,this.minWidthTo=V)}w=V+P.breakAfter}return b}},
{key:"measureTextSize",value:function(){var b=this,d=!0,g=!1,l=void 0;try{for(var w=this.children[Symbol.iterator](),K;!(d=(K=w.next()).done);d=!0){var P=K.value;if(P instanceof jc){var V=P.measureTextSize();if(V)return V}}}catch(Da){g=!0,l=Da}finally{try{if(!d&&null!=w["return"])w["return"]()}finally{if(g)throw l;}}var X=document.createElement("div"),ja,ia;X.className="cm-line";X.textContent="abc def ghi jkl mno pqr stu";this.view.observer.ignore(function(){b.dom.appendChild(X);var Da=ca(X.firstChild)[0];
ja=X.getBoundingClientRect().height;ia=Da?Da.width/27:7;X.remove()});return{lineHeight:ja,charWidth:ia}}},{key:"childCursor",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.length,d=this.children.length;d&&(b-=this.children[--d].length);return new Pb(this.children,b,d)}},{key:"computeBlockGapDeco",value:function(){var b=this.view.viewState.viewport,d=[b],g=this.view.state.selection.primary,l=g.head,w=g.anchor;if(l<b.from||l>b.to)b=this.view.viewState.lineAt(l,0),
d.push(new rb(b.from,b.to));d.some(function(X){var ja=X.to;return w>=X.from&&w<=ja})||(b=this.view.viewState.lineAt(w,0),d.push(new rb(b.from,b.to)));this.viewports=d.sort(function(X,ja){return X.from-ja.from});b=[];for(l=g=0;;l++){var K=l==d.length?null:d[l],P=K?K.from-1:this.length;if(P>g){var V=this.view.viewState.lineAt(P,0).bottom-this.view.viewState.lineAt(g,0).top;b.push(ob.replace({widget:new cd(V),block:!0,inclusive:!0}).range(g,P))}if(!K)break;g=K.to+1}return ob.set(b)}},{key:"updateDeco",
value:function(){return this.decorations=[this.computeBlockGapDeco(),this.view.viewState.lineGapDeco,this.compositionDeco].concat(Qa(this.view.state.facet(Fb)),Qa(this.view.pluginField(vc)))}},{key:"scrollPosIntoView",value:function(b,d){var g;if(b=this.coordsAt(b,d)){var l=g=d=0,w=0,K=!0,P=!1,V=void 0;try{for(var X=this.view.pluginField(Qb.scrollMargins)[Symbol.iterator](),ja;!(K=(ja=X.next()).done);K=!0){var ia=ja.value;if(ia){var Da=ia.left,Xa=ia.right,Ya=ia.top;var qb=ia.bottom;null!=Da&&(d=Math.max(d,
Da));null!=Xa&&(g=Math.max(g,Xa));null!=Ya&&(l=Math.max(l,Ya));null!=qb&&(w=Math.max(w,qb))}}}catch(dc){P=!0,V=dc}finally{try{if(!K&&null!=X["return"])X["return"]()}finally{if(P)throw V;}}ia=this.dom;X={left:b.left-d,top:b.top-l,right:b.right+g,bottom:b.bottom+w};ja=ia.ownerDocument.defaultView;for(ia=ia.parentNode;ia;)if(1==ia.nodeType){if(Da=ia==document.body)qb=0,b=ja.innerWidth,d=0,g=ja.innerHeight;else{if(ia.scrollHeight<=ia.clientHeight&&ia.scrollWidth<=ia.clientWidth){ia=ia.parentNode;continue}Xa=
ia.getBoundingClientRect();qb=Xa.left;b=Xa.left+ia.clientWidth;d=Xa.top;g=Xa.top+ia.clientHeight}Ya=Xa=0;X.top<d?Ya=-(d-X.top+5):X.bottom>g&&(Ya=X.bottom-g+5);X.left<qb?Xa=-(qb-X.left+5):X.right>b&&(Xa=X.right-b+5);if(Xa||Ya)Da?ja.scrollBy(Xa,Ya):(Ya&&(qb=ia.scrollTop,ia.scrollTop+=Ya,Ya=ia.scrollTop-qb),Xa&&(qb=ia.scrollLeft,ia.scrollLeft+=Xa,Xa=ia.scrollLeft-qb),X={left:X.left-Xa,top:X.top-Ya,right:X.right-Xa,bottom:X.bottom-Ya});if(Da)break;ia=ia.parentNode}else if(11==ia.nodeType)ia=ia.host;else break}}},
{key:"root",get:function(){return this.view.root}},{key:"editorView",get:function(){return this.view}},{key:"length",get:function(){return this.view.state.doc.length}}]);return a}(Ub),cd=function(e){function a(b){na(this,a);var d=Ba(this,Fa(a).call(this));d.height=b;return d}sa(a,e);ta(a,[{key:"toDOM",value:function(){var b=document.createElement("div");this.updateDOM(b);return b}},{key:"eq",value:function(b){return b.height==this.height}},{key:"updateDOM",value:function(b){if(1E7>this.height){for(;b.lastChild;)b.lastChild.remove();
b.style.height=this.height+"px"}else{b.style.height="";for(var d=this.height;0<d;d-=1E7)b.appendChild(document.createElement("div")).style.height=Math.min(d,1E7)+"px"}return!0}},{key:"estimatedHeight",get:function(){return this.height}}]);return a}(tc),Pd=function(e){function a(b,d){na(this,a);var g=Ba(this,Fa(a).call(this));g.top=b;g.text=d;return g}sa(a,e);ta(a,[{key:"eq",value:function(b){return this.top==b.top&&this.text==b.text}},{key:"toDOM",value:function(){return this.top}},{key:"ignoreEvent",
value:function(){return!1}},{key:"customView",get:function(){return kd}}]);return a}(tc),Qd=function(){function e(){na(this,e);this.changes=[]}ta(e,[{key:"compareRange",value:function(a,b){E(a,b,this.changes)}},{key:"comparePoint",value:function(a,b){E(a,b,this.changes)}}]);return e}(),ge=function(){function e(a){var b=this;na(this,e);this.lastKeyTime=this.lastKeyCode=0;this.lastSelectionOrigin=null;this.lastSelectionTime=0;this.scrollHandlers=[];this.registeredEvents=[];this.customHandlers=[];this.composing=
!1;this.compositionEndedAt=0;this.mouseSelection=null;var d=function(l){var w=Vb[l];a.contentDOM.addEventListener(l,function(K){M(a,K)&&!b.ignoreDuringComposition(K)&&(b.mustFlushObserver(K)&&a.observer.forceFlush(),b.runCustomHandlers(l,a,K)?K.preventDefault():w(a,K))});b.registeredEvents.push(l)},g;for(g in Vb)d(g);a.contentDOM.addEventListener("keydown",function(l){a.inputState.lastKeyCode=l.keyCode;a.inputState.lastKeyTime=Date.now()});this.notifiedFocused=a.hasFocus;this.ensureHandlers(a)}ta(e,
[{key:"setSelectionOrigin",value:function(a){this.lastSelectionOrigin=a;this.lastSelectionTime=Date.now()}},{key:"ensureHandlers",value:function(a){var b=this,d=this.customHandlers=a.pluginField(ib),g=!0,l=!1,w=void 0;try{for(var K=d[Symbol.iterator](),P;!(g=(P=K.next()).done);g=!0){var V=P.value;d=function(ja){0>b.registeredEvents.indexOf(ja)&&"scroll"!=ja&&(b.registeredEvents.push(ja),a.contentDOM.addEventListener(ja,function(ia){M(a,ia)&&b.runCustomHandlers(ja,a,ia)&&ia.preventDefault()}))};for(var X in V.handlers)d(X)}}catch(ja){l=
!0,w=ja}finally{try{if(!g&&null!=K["return"])K["return"]()}finally{if(l)throw w;}}}},{key:"runCustomHandlers",value:function(a,b,d){var g=!0,l=!1,w=void 0;try{for(var K=this.customHandlers[Symbol.iterator](),P;!(g=(P=K.next()).done);g=!0){var V=P.value,X=V.handlers[a];if(X)try{if(X.call(V.plugin,d,b)||d.defaultPrevented)return!0}catch(ja){Ra(b.state,ja)}}}catch(ja){l=!0,w=ja}finally{try{if(!g&&null!=K["return"])K["return"]()}finally{if(l)throw w;}}return!1}},{key:"runScrollHandlers",value:function(a,
b){var d=!0,g=!1,l=void 0;try{for(var w=this.customHandlers[Symbol.iterator](),K;!(d=(K=w.next()).done);d=!0){var P=K.value,V=P.handlers.scroll;if(V)try{V.call(P.plugin,b,a)}catch(X){Ra(a.state,X)}}}catch(X){g=!0,l=X}finally{try{if(!d&&null!=w["return"])w["return"]()}finally{if(g)throw l;}}}},{key:"ignoreDuringComposition",value:function(a){return/^key/.test(a.type)?this.composing?!0:jb.safari&&500>a.timeStamp-this.compositionEndedAt?(this.compositionEndedAt=0,!0):!1:!1}},{key:"mustFlushObserver",
value:function(a){return"keydown"==a.type||"compositionend"==a.type}},{key:"startMouseSelection",value:function(a,b,d){this.mouseSelection&&this.mouseSelection.destroy();this.mouseSelection=new fe(this,a,b,d)}},{key:"update",value:function(a){this.mouseSelection&&this.mouseSelection.update(a);this.lastKeyCode=this.lastSelectionTime=0}},{key:"destroy",value:function(){this.mouseSelection&&this.mouseSelection.destroy()}}]);return e}(),fe=function(){function e(a,b,d,g){na(this,e);this.inputState=a;this.view=
b;this.startEvent=d;this.style=g;a=b.contentDOM.ownerDocument;a.addEventListener("mousemove",this.move=this.move.bind(this));a.addEventListener("mouseup",this.up=this.up.bind(this));this.extend=d.shiftKey;if(a=b.state.facet(A.EditorState.allowMultipleSelections))a=b.state.facet(ea),a=a.length?a[0](d):jb.mac?d.metaKey:d.ctrlKey;this.multiple=a;a=b.state.facet(va);this.dragMove=a.length?a[0](d):jb.mac?!d.altKey:!d.ctrlKey;this.dragging=N(b,d)?null:!1;!1===this.dragging&&(d.preventDefault(),this.select(d))}
ta(e,[{key:"move",value:function(a){if(0==a.buttons)return this.destroy();!1===this.dragging&&this.select(a)}},{key:"up",value:function(a){null==this.dragging&&this.select(this.startEvent);this.dragging||a.preventDefault();this.destroy()}},{key:"destroy",value:function(){var a=this.view.contentDOM.ownerDocument;a.removeEventListener("mousemove",this.move);a.removeEventListener("mouseup",this.up);this.inputState.mouseSelection=null}},{key:"select",value:function(a){a=this.style.get(a,this.extend,this.multiple);
a.eq(this.view.state.selection)&&a.primary.assoc==this.view.state.selection.primary.assoc||this.view.dispatch({selection:a,annotations:A.Transaction.userEvent.of("pointerselection"),scrollIntoView:!0})}},{key:"update",value:function(a){a.docChanged&&this.dragging&&(this.dragging=this.dragging.map(a.changes));this.style.update(a)}}]);return e}(),Vb=Object.create(null),Id=jb.ie&&15>jb.ie_version||jb.ios&&604>jb.webkit_version;Vb.keydown=function(e,a){var b=(a.ctrlKey?1:0)|(a.metaKey?8:0)|(a.altKey?
2:0)|(a.shiftKey?4:0),d=a.keyCode,g=jb.mac&&1==b;(8==d||g&&72==d||46==d||g&&68==d||27==d||b==(jb.mac?8:1)&&(66==d||73==d||89==d||90==d))&&a.preventDefault();e.inputState.setSelectionOrigin("keyboardselection")};Vb.touchdown=Vb.touchmove=function(e){e.inputState.setSelectionOrigin("pointerselection")};Vb.mousedown=function(e,a){var b=null,d=!0,g=!1,l=void 0;try{for(var w=e.state.facet(Ea)[Symbol.iterator](),K;!(d=(K=w.next()).done);d=!0){var P=K.value;if(b=P(e,a))break}}catch(V){g=!0,l=V}finally{try{if(!d&&
null!=w["return"])w["return"]()}finally{if(g)throw l;}}b||0!=a.button||(b=Ca(e,a));b&&(e.root.activeElement!=e.contentDOM&&e.observer.ignore(function(){return z(e.contentDOM)}),e.inputState.startMouseSelection(e,a,b))};var Rd=jb.ie&&11>=jb.ie_version,Bd=null,Cd=0;Vb.dragstart=function(e,a){var b=e.state.selection.primary,d=e.inputState.mouseSelection;d&&(d.dragging=b);a.dataTransfer&&(a.dataTransfer.setData("Text",e.state.sliceDoc(b.from,b.to)),a.dataTransfer.effectAllowed="copyMove")};Vb.drop=function(e,
a){if(a.dataTransfer){var b=e.posAtCoords({x:a.clientX,y:a.clientY}),d=a.dataTransfer.getData("Text");null!=b&&d&&(a.preventDefault(),a=(a=e.inputState.mouseSelection)&&a.dragging&&a.dragMove?{from:a.dragging.from,to:a.dragging.to}:null,d={from:b,insert:d},d=e.state.changes(a?[a,d]:d),e.focus(),e.dispatch({changes:d,selection:{anchor:d.mapPos(b,-1),head:d.mapPos(b,1)},annotations:A.Transaction.userEvent.of("drop")}))}};Vb.paste=function(e,a){e.observer.flush();var b=Id?null:a.clipboardData;(b=b&&
b.getData("text/plain"))?(T(e,b),a.preventDefault()):D(e)};var qd=null;Vb.copy=Vb.cut=function(e,a){var b=e.state;var d=[],g=[],l=!1,w=!0,K=!1,P=void 0;try{for(var V=b.selection.ranges[Symbol.iterator](),X;!(w=(X=V.next()).done);w=!0){var ja=X.value;ja.empty||(d.push(b.sliceDoc(ja.from,ja.to)),g.push(ja))}}catch(Ya){K=!0,P=Ya}finally{try{if(!w&&null!=V["return"])V["return"]()}finally{if(K)throw P;}}if(!d.length){l=-1;w=!0;K=!1;P=void 0;try{for(var ia=b.selection.ranges[Symbol.iterator](),Da;!(w=(Da=
ia.next()).done);w=!0){var Xa=b.doc.lineAt(Da.value.from);Xa.number>l&&(d.push(Xa.slice()),g.push({from:Xa.from,to:Math.min(b.doc.length,Xa.to+1)}));l=Xa.number}}catch(Ya){K=!0,P=Ya}finally{try{if(!w&&null!=ia["return"])ia["return"]()}finally{if(K)throw P;}}l=!0}if(b=d.join(b.lineBreak))qd=l?b:null,(d=Id?null:a.clipboardData)?(a.preventDefault(),d.clearData(),d.setData("text/plain",b)):Ha(e,b),"cut"==a.type&&e.dispatch({changes:g,scrollIntoView:!0,annotations:A.Transaction.userEvent.of("cut")})};
Vb.focus=Vb.blur=function(e){setTimeout(function(){e.hasFocus!=e.inputState.notifiedFocused&&e.update([])},10)};Vb.beforeprint=function(e){e.viewState.printing=!0;e.requestMeasure();setTimeout(function(){e.viewState.printing=!1;e.requestMeasure()},2E3)};Vb.compositionstart=Vb.compositionupdate=function(e){e.inputState.composing||(e.docView.compositionDeco.size&&(e.observer.flush(),e.docView.compositionDeco.size&&e.update([])),e.inputState.composing=!0)};Vb.compositionend=function(e){e.inputState.composing=
!1;e.inputState.compositionEndedAt=Date.now();setTimeout(function(){e.inputState.composing||e.docView.compositionDeco.size&&e.update([])},50)};var he={childList:!0,characterData:!0,subtree:!0,characterDataOldValue:!0},Ad=jb.ie&&11>=jb.ie_version,ie=function(){function e(a,b,d){var g=this;na(this,e);this.view=a;this.onChange=b;this.onScrollChanged=d;this.active=!1;this.ignoreSelection=new Lc;this.delayedFlush=-1;this.queue=[];this.scrollTargets=[];this.intersection=null;this.intersecting=!1;this.parentCheck=
-1;this.dom=a.contentDOM;this.observer=new MutationObserver(function(l){var w=!0,K=!1,P=void 0;try{for(var V=l[Symbol.iterator](),X;!(w=(X=V.next()).done);w=!0)g.queue.push(X.value)}catch(ja){K=!0,P=ja}finally{try{if(!w&&null!=V["return"])V["return"]()}finally{if(K)throw P;}}jb.ie&&11>=jb.ie_version&&l.some(function(ja){return"childList"==ja.type&&ja.removedNodes.length||"characterData"==ja.type&&ja.oldValue.length>ja.target.nodeValue.length})?g.flushSoon():g.flush()});Ad&&(this.onCharData=function(l){g.queue.push({target:l.target,
type:"characterData",oldValue:l.prevValue});g.flushSoon()});this.onSelectionChange=function(){if(g.view.root.activeElement==g.dom){if(jb.ie&&11>=jb.ie_version&&!g.view.state.selection.primary.empty){var l=ya(g.view.root);if(l.focusNode&&la(l.focusNode,l.focusOffset,l.anchorNode,l.anchorOffset))return g.flushSoon()}g.flush()}};this.start();this.onScroll=this.onScroll.bind(this);window.addEventListener("scroll",this.onScroll);"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver(function(l){0>
g.parentCheck&&(g.parentCheck=setTimeout(g.listenForScroll.bind(g),1E3));0<l[l.length-1].intersectionRatio!=g.intersecting&&(g.intersecting=!g.intersecting,g.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom));this.listenForScroll()}ta(e,[{key:"onScroll",value:function(a){this.intersecting&&(this.flush(),this.onScrollChanged(a))}},{key:"listenForScroll",value:function(){this.parentCheck=-1;for(var a=0,b=null,d=this.dom;d;)if(1==d.nodeType)!b&&a<this.scrollTargets.length&&
this.scrollTargets[a]==d?a++:b||(b=this.scrollTargets.slice(0,a)),b&&b.push(d),d=d.parentNode;else if(11==d.nodeType)d=d.host;else break;a<this.scrollTargets.length&&!b&&(b=this.scrollTargets.slice(0,a));if(b){a=!0;d=!1;var g=void 0;try{for(var l=this.scrollTargets[Symbol.iterator](),w;!(a=(w=l.next()).done);a=!0)w.value.removeEventListener("scroll",this.onScroll)}catch(V){d=!0,g=V}finally{try{if(!a&&null!=l["return"])l["return"]()}finally{if(d)throw g;}}l=!0;w=!1;a=void 0;try{for(var K=(this.scrollTargets=
b)[Symbol.iterator](),P;!(l=(P=K.next()).done);l=!0)P.value.addEventListener("scroll",this.onScroll)}catch(V){w=!0,a=V}finally{try{if(!l&&null!=K["return"])K["return"]()}finally{if(w)throw a;}}}}},{key:"ignore",value:function(a){if(!this.active)return a();try{return this.stop(),a()}finally{this.start(),this.clear()}}},{key:"start",value:function(){this.active||(this.observer.observe(this.dom,he),this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange),Ad&&this.dom.addEventListener("DOMCharacterDataModified",
this.onCharData),this.active=!0)}},{key:"stop",value:function(){this.active&&(this.active=!1,this.observer.disconnect(),this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange),Ad&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}},{key:"clearSelection",value:function(){this.ignoreSelection.set(ya(this.view.root))}},{key:"clear",value:function(){this.observer.takeRecords();this.queue.length=0;this.clearSelection()}},{key:"flushSoon",value:function(){var a=
this;0>this.delayedFlush&&(this.delayedFlush=window.setTimeout(function(){a.delayedFlush=-1;a.flush()},20))}},{key:"forceFlush",value:function(){0<=this.delayedFlush&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1,this.flush())}},{key:"flush",value:function(){var a=this;if(!(0<=this.delayedFlush)){var b=this.queue,d=!0,g=!1,l=void 0;try{for(var w=this.observer.takeRecords()[Symbol.iterator](),K;!(d=(K=w.next()).done);d=!0)b.push(K.value)}catch(Da){g=!0,l=Da}finally{try{if(!d&&null!=
w["return"])w["return"]()}finally{if(g)throw l;}}b.length&&(this.queue=[]);d=ya(this.view.root);d=!this.ignoreSelection.eq(d)&&fa(this.dom,d);if(0!=b.length||d){l=g=-1;w=!1;K=!0;var P=!1,V=void 0;try{for(var X=b[Symbol.iterator](),ja;!(K=(ja=X.next()).done);K=!0){var ia=this.readMutation(ja.value);ia&&(ia.typeOver&&(w=!0),-1==g?(g=ia.from,l=ia.to):(g=Math.min(ia.from,g),l=Math.max(ia.to,l)))}}catch(Da){P=!0,V=Da}finally{try{if(!K&&null!=X["return"])X["return"]()}finally{if(P)throw V;}}b=this.view.state;
if(-1<g||d)this.onChange(g,l,w);this.view.state==b&&(this.view.docView.dirty&&(this.ignore(function(){return a.view.docView.sync()}),this.view.docView.dirty=0),this.view.docView.updateSelection());this.clearSelection()}}}},{key:"readMutation",value:function(a){var b=this.view.docView.nearest(a.target);if(!b||b.ignoreMutation(a))return null;b.markDirty();if("childList"==a.type){var d=Ja(b,a.previousSibling||a.target.previousSibling,-1);a=Ja(b,a.nextSibling||a.target.nextSibling,1);return{from:d?b.posAfter(d):
b.posAtStart,to:a?b.posBefore(a):b.posAtEnd,typeOver:!1}}return{from:b.posAtStart,to:b.posAtEnd,typeOver:a.target.nodeValue==a.oldValue}}},{key:"destroy",value:function(){this.stop();this.intersection&&this.intersection.disconnect();var a=!0,b=!1,d=void 0;try{for(var g=this.scrollTargets[Symbol.iterator](),l;!(a=(l=g.next()).done);a=!0)l.value.removeEventListener("scroll",this.onScroll)}catch(w){b=!0,d=w}finally{try{if(!a&&null!=g["return"])g["return"]()}finally{if(b)throw d;}}window.removeEventListener("scroll",
this.onScroll);clearTimeout(this.parentCheck)}}]);return e}(),Sd=function(){function e(a,b){na(this,e);this.points=a;this.lineSep=b;this.text=""}ta(e,[{key:"readRange",value:function(a,b){if(a){for(var d=a.parentNode;;){this.findPointBefore(d,a);this.readNode(a);var g=a.nextSibling;if(g==b)break;var l=Ub.get(a),w=Ub.get(g);if((l?l.breakAfter:Va(a))||(w?w.breakAfter:Va(g))&&("BR"!=a.nodeName||a.cmIgnore))this.text+=this.lineSep;a=g}this.findPointBefore(d,b)}}},{key:"readNode",value:function(a){if(!a.cmIgnore){var b=
Ub.get(a);b=b&&b.overrideDOMText;var d;null!=b?d=b.sliceString(0,void 0,this.lineSep):3==a.nodeType?d=a.nodeValue:"BR"==a.nodeName?d=a.nextSibling?this.lineSep:"":1==a.nodeType&&this.readRange(a.firstChild,null);null!=d&&(this.findPointIn(a,d.length),this.text+=d)}}},{key:"findPointBefore",value:function(a,b){var d=!0,g=!1,l=void 0;try{for(var w=this.points[Symbol.iterator](),K;!(d=(K=w.next()).done);d=!0){var P=K.value;P.node==a&&a.childNodes[P.offset]==b&&(P.pos=this.text.length)}}catch(V){g=!0,
l=V}finally{try{if(!d&&null!=w["return"])w["return"]()}finally{if(g)throw l;}}}},{key:"findPointIn",value:function(a,b){var d=!0,g=!1,l=void 0;try{for(var w=this.points[Symbol.iterator](),K;!(d=(K=w.next()).done);d=!0){var P=K.value;P.node==a&&(P.pos=this.text.length+Math.min(P.offset,b))}}catch(V){g=!0,l=V}finally{try{if(!d&&null!=w["return"])w["return"]()}finally{if(g)throw l;}}}}]);return e}(),Dd=function d(a,b){na(this,d);this.node=a;this.offset=b;this.pos=-1},Wb=function(){function a(){var b=
this,d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};na(this,a);this.plugins=[];this.editorAttrs={};this.contentAttrs={};this.bidiCache=[];this.updateState=2;this.measureScheduled=-1;this.measureRequests=[];this.contentDOM=document.createElement("div");this.scrollDOM=document.createElement("div");this.scrollDOM.className=Q("scroller");this.scrollDOM.appendChild(this.contentDOM);this.dom=document.createElement("div");this.dom.appendChild(this.scrollDOM);this._dispatch=d.dispatch||function(g){return b.update([g])};
this.dispatch=this.dispatch.bind(this);this.root=d.root||document;this.viewState=new Za(d.state||A.EditorState.create());this.plugins=this.state.facet(mb).map(function(g){return Hb.create(g,b)});this.observer=new ie(this,function(g,l,w){return za(b,g,l,w)},function(g){b.inputState.runScrollHandlers(b,g);b.measure()});this.docView=new Uc(this);this.inputState=new ge(this);this.mountStyles();this.updateAttrs();this.updateState=0;lb();this.requestMeasure();d.parent&&d.parent.appendChild(this.dom)}ta(a,
[{key:"dispatch",value:function(){var b;this._dispatch(1==arguments.length&&(0>=arguments.length?void 0:arguments[0])instanceof A.Transaction?0>=arguments.length?void 0:arguments[0]:(b=this.state).update.apply(b,arguments))}},{key:"update",value:function(b){if(0!=this.updateState)throw Error("Calls to EditorView.update are not allowed while an update is in progress");this.updateState=2;var d=this.state,g=!0,l=!1,w=void 0;try{for(var K=b[Symbol.iterator](),P;!(g=(P=K.next()).done);g=!0){var V=P.value;
if(V.startState!=d)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");d=V.state}}catch(Da){l=!0,w=Da}finally{try{if(!g&&null!=K["return"])K["return"]()}finally{if(l)throw w;}}g=new gc(this,d,b);b=b.some(function(Da){return Da.scrollIntoView})?d.selection.primary:null;this.viewState.update(g,b);this.bidiCache=Jd.update(this.bidiCache,g.changes);g.empty||this.updatePlugins(g);d=this.docView.update(g);this.state.facet(Rb)!=this.styleModules&&
this.mountStyles();this.updateAttrs();this.updateState=0;(d||b||this.viewState.mustEnforceCursorAssoc)&&this.requestMeasure();b=!0;d=!1;l=void 0;try{for(var X=this.state.facet(Ua)[Symbol.iterator](),ja;!(b=(ja=X.next()).done);b=!0){var ia=ja.value;ia(g)}}catch(Da){d=!0,l=Da}finally{try{if(!b&&null!=X["return"])X["return"]()}finally{if(d)throw l;}}}},{key:"setState",value:function(b){var d=this;if(0!=this.updateState)throw Error("Calls to EditorView.setState are not allowed while an update is in progress");
this.updateState=2;var g=!0,l=!1,w=void 0;try{for(var K=this.plugins[Symbol.iterator](),P;!(g=(P=K.next()).done);g=!0)P.value.destroy(this)}catch(V){l=!0,w=V}finally{try{if(!g&&null!=K["return"])K["return"]()}finally{if(l)throw w;}}this.viewState=new Za(b);this.plugins=b.facet(mb).map(function(V){return Hb.create(V,d)});this.docView=new Uc(this);this.inputState.ensureHandlers(this);this.mountStyles();this.updateAttrs();this.bidiCache=[];this.updateState=0;this.requestMeasure()}},{key:"updatePlugins",
value:function(b){var d=b.prevState.facet(mb),g=b.state.facet(mb);if(d!=g){var l=[],w=[],K=!0,P=!1,V=void 0;try{for(var X=g[Symbol.iterator](),ja;!(K=(ja=X.next()).done);K=!0){var ia=ja.value,Da=d.indexOf(ia);if(0>Da)l.push(Hb.create(ia,this));else{var Xa=this.plugins[Da].update(b);w.push(Xa);l.push(Xa)}}}catch(Db){P=!0,V=Db}finally{try{if(!K&&null!=X["return"])X["return"]()}finally{if(P)throw V;}}b=!0;d=!1;g=void 0;try{for(var Ya=this.plugins[Symbol.iterator](),qb;!(b=(qb=Ya.next()).done);b=!0){var dc=
qb.value;0>w.indexOf(dc)&&dc.destroy(this)}}catch(Db){d=!0,g=Db}finally{try{if(!b&&null!=Ya["return"])Ya["return"]()}finally{if(d)throw g;}}this.plugins=l;this.inputState.ensureHandlers(this)}else for(l=0;l<this.plugins.length;l++)this.plugins[l]=this.plugins[l].update(b)}},{key:"measure",value:function(){var b=this;-1<this.measureScheduled&&cancelAnimationFrame(this.measureScheduled);this.measureScheduled=-1;for(var d=null,g=0;;g++){this.updateState=1;var l=this.viewState.measure(this.docView,0<
g),w=this.measureRequests;if(!l&&!w.length&&null==this.viewState.scrollTo)break;this.measureRequests=[];if(5<g){console.warn("Viewport failed to stabilize");break}var K=w.map(function(ia){try{return ia.read(b)}catch(Da){return Ra(b.state,Da),Kd}}),P=new gc(this,this.state);P.flags|=l;d?d.flags|=l:d=P;this.updateState=2;this.updatePlugins(P);this.updateAttrs();l&&this.docView.update(P);for(P=0;P<w.length;P++)if(K[P]!=Kd)try{w[P].write(K[P],this)}catch(ia){Ra(this.state,ia)}this.viewState.scrollTo&&
(this.docView.scrollPosIntoView(this.viewState.scrollTo.head,this.viewState.scrollTo.assoc),this.viewState.scrollTo=null);if(!(l&4)&&0==this.measureRequests.length)break}this.updateState=0;this.measureScheduled=-1;if(d){g=!0;l=!1;w=void 0;try{for(var V=this.state.facet(Ua)[Symbol.iterator](),X;!(g=(X=V.next()).done);g=!0){var ja=X.value;ja(d)}}catch(ia){l=!0,w=ia}finally{try{if(!g&&null!=V["return"])V["return"]()}finally{if(l)throw w;}}}}},{key:"updateAttrs",value:function(){var b=h(this.state.facet($b),
{"class":Q("wrap")+(this.hasFocus?" cm-focused ":" ")+this.themeClasses});u(this.dom,this.editorAttrs,b);this.editorAttrs=b;b=h(this.state.facet(fc),{spellcheck:"false",contenteditable:String(this.state.facet(Wa)),"class":Q("content"),style:"".concat(jb.tabSize,": ").concat(this.state.tabSize),role:"textbox","aria-multiline":"true"});u(this.contentDOM,this.contentAttrs,b);this.contentAttrs=b}},{key:"mountStyles",value:function(){this.styleModules=this.state.facet(Rb);Y.StyleModule.mount(this.root,
this.styleModules.concat(zd).reverse())}},{key:"domAtPos",value:function(b){return this.docView.domAtPos(b)}},{key:"posAtDOM",value:function(b){return this.docView.posFromDOM(b,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0)}},{key:"readMeasured",value:function(){if(2==this.updateState)throw Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&-1<this.measureScheduled&&this.measure()}},{key:"requestMeasure",value:function(b){var d=this;0>this.measureScheduled&&
(this.measureScheduled=requestAnimationFrame(function(){return d.measure()}));if(b){if(null!=b.key)for(var g=0;g<this.measureRequests.length;g++)if(this.measureRequests[g].key===b.key){this.measureRequests[g]=b;return}this.measureRequests.push(b)}}},{key:"pluginField",value:function(b){var d=[],g=!0,l=!1,w=void 0;try{for(var K=this.plugins[Symbol.iterator](),P;!(g=(P=K.next()).done);g=!0)P.value.takeField(b,d)}catch(V){l=!0,w=V}finally{try{if(!g&&null!=K["return"])K["return"]()}finally{if(l)throw w;
}}return d}},{key:"plugin",value:function(b){var d=!0,g=!1,l=void 0;try{for(var w=this.plugins[Symbol.iterator](),K;!(d=(K=w.next()).done);d=!0){var P=K.value;if(P.spec==b)return P.value}}catch(V){g=!0,l=V}finally{try{if(!d&&null!=w["return"])w["return"]()}finally{if(g)throw l;}}return null}},{key:"blockAtHeight",value:function(b,d){this.readMeasured();return this.viewState.blockAtHeight(b,nb(d,this.contentDOM))}},{key:"visualLineAtHeight",value:function(b,d){this.readMeasured();return this.viewState.lineAtHeight(b,
nb(d,this.contentDOM))}},{key:"visualLineAt",value:function(b){return this.viewState.lineAt(b,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0)}},{key:"viewportLines",value:function(b,d){var g=this.viewport;this.viewState.forEachLine(g.from,g.to,b,nb(d,this.contentDOM))}},{key:"moveByChar",value:function(b,d,g){return bc(this,b,d,g)}},{key:"moveByGroup",value:function(b,d){var g=this;return bc(this,b,d,function(l){return aa(g,b.head,l)})}},{key:"moveToLineBoundary",value:function(b,d){a:{var g=
2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0;var l=this.state.doc.lineAt(b.head);if(g=g&&this.lineWrapping?this.coordsAtPos(0>b.assoc&&b.head>l.from?b.head-1:b.head):null){var w=this.dom.getBoundingClientRect();g=this.posAtCoords({x:d==(this.textDirection==Sb.LTR)?w.right-1:w.left+1,y:(g.top+g.bottom)/2});if(null!=g){l=A.EditorSelection.cursor(g,d?-1:1);break a}}g=jc.find(this.docView,b.head);l=A.EditorSelection.cursor(g?d?g.posAtEnd:g.posAtStart:d?l.to:l.from,d?-1:1)}return l}},{key:"moveVertically",
value:function(b,d,g){a:{var l,w=b.head;var K=d?1:-1;if(w==(d?this.state.doc.length:0))K=A.EditorSelection.cursor(w);else{var P=this.coordsAtPos(w);if(P){var V=this.dom.getBoundingClientRect();d=null!==(l=b.goalColumn)&&void 0!==l?l:P.left-V.left;l=V.left+d;g=null!==g&&void 0!==g?g:5;P=0>K?P.top:P.bottom;for(V=0;50>V;V+=10){var X=oc(this,{x:l,y:P+(g+V)*K},K);if(null==X)break;if(X!=w){K=A.EditorSelection.cursor(X,void 0,void 0,d);break a}}}g=this.state.doc;P=g.lineAt(w);d=this.state.tabSize;l=b.goalColumn;
b=0;if(null==l){for(w=g.iterRange(P.from,w);!w.next().done;)b=(0,oa.countColumn)(w.value,b,d);l=b*this.defaultCharacterWidth}else b=Math.round(l/this.defaultCharacterWidth);if(0>K&&0==P.from)K=A.EditorSelection.cursor(0);else if(0<K&&P.to==g.length)K=A.EditorSelection.cursor(P.to);else{P=g.line(P.number+K);K=P.from;w=0;for(g=g.iterRange(P.from,P.to);w>=b&&!g.next().done;)w=(0,oa.findColumn)(g.value,w,b,d),P=w.offset,w=b-w.leftOver,K+=P;K=A.EditorSelection.cursor(K,void 0,void 0,l)}}}return K}},{key:"scrollPosIntoView",
value:function(b){this.viewState.scrollTo=A.EditorSelection.cursor(b);this.requestMeasure()}},{key:"posAtCoords",value:function(b){this.readMeasured();return oc(this,b)}},{key:"coordsAtPos",value:function(b){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;this.readMeasured();var g=this.docView.coordsAt(b,d);if(!g||g.left==g.right)return g;var l=this.state.doc.lineAt(b),w=this.bidiSpans(l);l=w[rc.find(w,b-l.from,-1,d)];return t(g,l.dir==Sb.LTR==0<d)}},{key:"bidiSpans",value:function(b){if(b.length>
je)return[new rc(0,b.length,0)];var d=this.textDirection,g=!0,l=!1,w=void 0;try{for(var K=this.bidiCache[Symbol.iterator](),P;!(g=(P=K.next()).done);g=!0){var V=P.value;if(V.from==b.from&&V.dir==d)return V.order}}catch(X){l=!0,w=X}finally{try{if(!g&&null!=K["return"])K["return"]()}finally{if(l)throw w;}}g=ba(b.slice(),this.textDirection);this.bidiCache.push(new Jd(b.from,b.to,d,g));return g}},{key:"focus",value:function(){var b=this;this.observer.ignore(function(){z(b.contentDOM);b.docView.updateSelection()})}},
{key:"destroy",value:function(){var b=!0,d=!1,g=void 0;try{for(var l=this.plugins[Symbol.iterator](),w;!(b=(w=l.next()).done);b=!0)w.value.destroy(this)}catch(K){d=!0,g=K}finally{try{if(!b&&null!=l["return"])l["return"]()}finally{if(d)throw g;}}this.inputState.destroy();this.dom.remove();this.observer.destroy();-1<this.measureScheduled&&cancelAnimationFrame(this.measureScheduled)}},{key:"state",get:function(){return this.viewState.state}},{key:"viewport",get:function(){return this.viewState.viewport}},
{key:"visibleRanges",get:function(){return this.viewState.visibleRanges}},{key:"inView",get:function(){return this.viewState.inView}},{key:"composing",get:function(){return this.inputState.composing}},{key:"themeClasses",get:function(){return Rc+" "+(this.state.facet(Zc)?"cm-dark":"cm-light")+" "+this.state.facet(Cc)}},{key:"contentHeight",get:function(){return this.viewState.heightMap.height+this.viewState.paddingTop+this.viewState.paddingBottom}},{key:"defaultCharacterWidth",get:function(){return this.viewState.heightOracle.charWidth}},
{key:"defaultLineHeight",get:function(){return this.viewState.heightOracle.lineHeight}},{key:"textDirection",get:function(){return this.viewState.heightOracle.direction}},{key:"lineWrapping",get:function(){return this.viewState.heightOracle.lineWrapping}},{key:"hasFocus",get:function(){return this.root.activeElement==this.contentDOM}}],[{key:"domEventHandlers",value:function(b){return Xb.define(function(){return{}},{eventHandlers:b})}},{key:"theme",value:function(b,d){var g=Y.StyleModule.newName();
b=[Cc.of(g),Rb.of(G(".".concat(Rc,".").concat(g),b))];d&&d.dark&&b.push(Zc.of(!0));return b}},{key:"baseTheme",value:function(b){return(0,A.precedence)(Rb.of(G("."+Rc,b)),"fallback")}}]);return a}();F.EditorView=Wb;Wb.styleModule=Rb;Wb.inputHandler=Ia;Wb.exceptionSink=Aa;Wb.updateListener=Ua;Wb.editable=Wa;Wb.dragMovesSelection=va;Wb.clickAddsSelectionRange=ea;Wb.mouseSelectionStyle=Ea;Wb.decorations=Fb;Wb.lineWrapping=Wb.theme({$content:{whiteSpace:"pre-wrap"}});Wb.contentAttributes=fc;Wb.editorAttributes=
$b;var je=4096,rd=-1,Kd={},Jd=function(){function a(b,d,g,l){na(this,a);this.from=b;this.to=d;this.dir=g;this.order=l}ta(a,null,[{key:"update",value:function(b,d){if(d.empty)return b;for(var g=[],l=b.length?b[b.length-1].dir:Sb.LTR,w=Math.max(0,b.length-10);w<b.length;w++){var K=b[w];K.dir!=l||d.touchesRange(K.from,K.to)||g.push(new a(d.mapPos(K.from,1),d.mapPos(K.to,-1),K.dir,K.order))}return g}}]);return a}(),Td="undefined"==typeof navigator?"key":/Mac/.test(navigator.platform)?"mac":/Win/.test(navigator.platform)?
"win":/Linux|X11/.test(navigator.platform)?"linux":"key",xd=A.Facet.define(),de=Wb.domEventHandlers({keydown:function(a,b){return ic(b.state.facet(xd),a,b,"editor")}}),Gc=null,Ud=4E3,Ld=!jb.ios,Xc=A.Facet.define({combine:function(a){return(0,A.combineConfig)(a,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:function(b,d){return Math.min(b,d)},drawRangeCursor:function(b,d){return b||d}})}}),Ed=function(){function a(b,d,g,l,w){na(this,a);this.left=b;this.top=d;this.width=g;this.height=l;
this.className=w}ta(a,[{key:"draw",value:function(){var b=document.createElement("div");b.className=this.className;b.style.left=this.left+"px";b.style.top=this.top+"px";0<=this.width&&(b.style.width=this.width+"px");b.style.height=this.height+"px";return b}},{key:"eq",value:function(b){return this.left==b.left&&this.top==b.top&&this.width==b.width&&this.height==b.height&&this.className==b.className}}]);return a}(),$d=Xb.fromClass(function(){function a(b){na(this,a);this.view=b;this.rangePieces=[];
this.cursors=[];this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)};this.selectionLayer=b.scrollDOM.appendChild(document.createElement("div"));this.selectionLayer.className=Q("selectionLayer");this.selectionLayer.setAttribute("aria-hidden","true");this.cursorLayer=b.scrollDOM.appendChild(document.createElement("div"));this.cursorLayer.className=Q("cursorLayer");this.cursorLayer.setAttribute("aria-hidden","true");b.requestMeasure(this.measureReq);this.setBlinkRate()}ta(a,[{key:"setBlinkRate",
value:function(){this.cursorLayer.style.animationDuration=this.view.state.facet(Xc).cursorBlinkRate+"ms"}},{key:"update",value:function(b){var d=b.prevState.facet(Xc)!=b.state.facet(Xc);(d||b.selectionSet||b.geometryChanged||b.viewportChanged)&&this.view.requestMeasure(this.measureReq);b.transactions.some(function(g){return g.scrollIntoView})&&(this.cursorLayer.style.animationName="cm-blink"==this.cursorLayer.style.animationName?"cm-blink2":"cm-blink");d&&this.setBlinkRate()}},{key:"readPos",value:function(){var b=
this,d=this.view.state,g=d.facet(Xc),l=d.selection.ranges.map(function(Ya){return Ya.empty?[]:wc(b.view,Ya)}).reduce(function(Ya,qb){return Ya.concat(qb)}),w=[],K=!0,P=!1,V=void 0;try{for(var X=d.selection.ranges[Symbol.iterator](),ja;!(K=(ja=X.next()).done);K=!0){var ia=ja.value,Da=ia==d.selection.primary;if(ia.empty?!Da||Ld:g.drawRangeCursor){var Xa=xc(this.view,ia,Da);Xa&&w.push(Xa)}}}catch(Ya){P=!0,V=Ya}finally{try{if(!K&&null!=X["return"])X["return"]()}finally{if(P)throw V;}}return{rangePieces:l,
cursors:w}}},{key:"drawSel",value:function(b){var d=this,g=b.rangePieces;b=b.cursors;if(g.length!=this.rangePieces.length||g.some(function(ia,Da){return!ia.eq(d.rangePieces[Da])})){this.selectionLayer.textContent="";var l=!0,w=!1,K=void 0;try{for(var P=g[Symbol.iterator](),V;!(l=(V=P.next()).done);l=!0)this.selectionLayer.appendChild(V.value.draw())}catch(ia){w=!0,K=ia}finally{try{if(!l&&null!=P["return"])P["return"]()}finally{if(w)throw K;}}this.rangePieces=g}if(b.length!=this.cursors.length||b.some(function(ia,
Da){return!ia.eq(d.cursors[Da])})){this.cursorLayer.textContent="";g=!0;P=!1;V=void 0;try{for(var X=b[Symbol.iterator](),ja;!(g=(ja=X.next()).done);g=!0)this.cursorLayer.appendChild(ja.value.draw())}catch(ia){P=!0,V=ia}finally{try{if(!g&&null!=X["return"])X["return"]()}finally{if(P)throw V;}}this.cursors=b}}},{key:"destroy",value:function(){this.selectionLayer.remove();this.cursorLayer.remove()}}]);return a}()),Md={$content:{"\x26 ::selection":{backgroundColor:"transparent !important"}}};Ld&&(Md.$content.caretColor=
"transparent !important");var ae=(0,A.precedence)(Wb.theme(Md),"override"),Vd=Q("selectionBackground"),Yd=Q("cursor.primary"),Zd=Q("cursor.secondary"),ke=/[\0-\x08\n-\x1F\x7F-\x9F\xAD\u061C\u200B\u200C\u200E\u200F\u2028\u2029\uFEFF\uFFF9-\uFFFC]/g,le={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8233:"paragraph separator",
65279:"zero width no-break space",65532:"object replacement"},wd=null,Nd=null!=/x/.unicode?"gu":"g",hd=A.Facet.define({combine:function(a){a=(0,A.combineConfig)(a,{render:null,specialChars:ke,addSpecialChars:null});if(a.replaceTabs=!lc())a.specialChars=new RegExp("\t|"+a.specialChars.source,Nd);a.addSpecialChars&&(a.specialChars=new RegExp(a.specialChars.source+"|"+a.addSpecialChars.source,Nd));return a}}),be=Xb.fromClass(function(){function a(b){na(this,a);this.view=b;this.decorations=ob.none;this.decorationCache=
Object.create(null);this.recompute()}ta(a,[{key:"update",value:function(b){var d=b.prevState.facet(hd)!=b.state.facet(hd);d&&(this.decorationCache=Object.create(null));(d||b.changes.length||b.viewportChanged)&&this.recompute()}},{key:"recompute",value:function(){var b=[],d=!0,g=!1,l=void 0;try{for(var w=this.view.visibleRanges[Symbol.iterator](),K;!(d=(K=w.next()).done);d=!0){var P=K.value;this.getDecorationsFor(P.from,P.to,b)}}catch(V){g=!0,l=V}finally{try{if(!d&&null!=w["return"])w["return"]()}finally{if(g)throw l;
}}this.decorations=ob.set(b)}},{key:"getDecorationsFor",value:function(b,d,g){var l=this.view.state.facet(hd),w=this.view.state.doc,K=b;for(b=w.iterRange(b,d);!b.next().done;){if(!b.lineBreak)for(;d=l.specialChars.exec(b.value);){var P=(0,oa.codePointAt)(d[0],0);if(null!=P){if(9==P){var V=w.lineAt(K+d.index);P=this.view.state.tabSize;V=(0,oa.countColumn)(w.sliceString(V.from,K+d.index),0,P);P=ob.replace({widget:new me((P-V%P)*this.view.defaultCharacterWidth)})}else P=this.decorationCache[P]||(this.decorationCache[P]=
ob.replace({widget:new ne(l,P)}));g.push(P.range(K+d.index,K+d.index+d[0].length))}}K+=b.value.length}}}]);return a}(),{decorations:function(a){return a.decorations}}),ne=function(a){function b(d,g){na(this,b);var l=Ba(this,Fa(b).call(this));l.options=d;l.code=g;return l}sa(b,a);ta(b,[{key:"eq",value:function(d){return d.code==this.code}},{key:"toDOM",value:function(){var d=this.code;d=32<=d?null:10==d?"â¤":String.fromCharCode(9216+d);d=d||"â€¢";var g="Control character "+(le[this.code]||this.code),
l=this.options.render&&this.options.render(this.code,g,d);if(l)return l;l=document.createElement("span");l.textContent=d;l.title=g;l.setAttribute("aria-label",g);l.style.color="red";return l}},{key:"ignoreEvent",value:function(){return!1}}]);return b}(tc),me=function(a){function b(d){na(this,b);var g=Ba(this,Fa(b).call(this));g.width=d;return g}sa(b,a);ta(b,[{key:"eq",value:function(d){return d.width==this.width}},{key:"toDOM",value:function(){var d=document.createElement("span");d.textContent="\t";
d.className=Od;d.style.width=this.width+"px";return d}},{key:"ignoreEvent",value:function(){return!1}}]);return b}(tc),Od=Y.StyleModule.newName(),ce=Wb.styleModule.of(new Y.StyleModule(function(a,b,d){b in a?Object.defineProperty(a,b,{value:d,enumerable:!0,configurable:!0,writable:!0}):a[b]=d;return a}({},"."+Od,{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"}))),Hd=200,ee=function(a){function b(d){na(this,b);var g=Ba(this,Fa(b).call(this));g.content=d;return g}sa(b,a);ta(b,[{key:"toDOM",
value:function(){var d=document.createElement("span");d.className=Q("placeholder");d.style.pointerEvents="none";d.appendChild("string"==typeof this.content?document.createTextNode(this.content):this.content);"string"==typeof this.content?d.setAttribute("aria-label","placeholder "+this.content):d.setAttribute("aria-hidden","true");return d}},{key:"ignoreEvent",value:function(){return!1}}]);return b}(tc);F.__test={HeightMap:f,HeightOracle:bd,MeasuredHeights:Tc,QueryType:c,ChangedRange:ac,computeOrder:ba,
moveVisually:ha}};
shadow$provide[7]=function(qa,Oa,kb,F){function Ma(fa){for(var ca=0;ca<Ga.length;ca+=2)if(Ga.charCodeAt(ca)==fa)return Ga.charAt(ca+1);return(0,ta.fromCodePoint)(128>fa?fa:fa+1)}function Na(fa,ca,la,ka){if(fa.composing)return!1;var H=fa.state.selection.primary;if(2<ka.length||2==ka.length&&1==(0,ta.codePointSize)((0,ta.codePointAt)(ka,0))||ca!=H.from||la!=H.to)return!1;ca=Ba(fa.state,ka);if(!ca)return!1;fa.dispatch(ca);return!0}function Ba(fa,ca){var la=fa.languageDataAt("closeBrackets",fa.selection.primary.head)[0]||
ya,ka=la.brackets||ya.brackets,H=!0,y=!1,t=void 0;try{for(var z=ka[Symbol.iterator](),J;!(H=(J=z.next()).done);H=!0){var R=J.value,I=Ma((0,ta.codePointAt)(R,0));if(ca==R)return I==R?xa(fa,R,-1<ka.indexOf(R+R+R)):Fa(fa,R,I,la.before||ya.before);if(ca==I)return sa(fa,R,I)}}catch(r){y=!0,t=r}finally{try{if(!H&&null!=z["return"])z["return"]()}finally{if(y)throw t;}}return null}function Pa(fa,ca){fa=fa.sliceString(ca,ca+2);return fa.slice(0,(0,ta.codePointSize)((0,ta.codePointAt)(fa,0)))}function Fa(fa,
ca,la,ka){var H=null,y=fa.changeByRange(function(t){if(!t.empty)return{changes:[{insert:ca,from:t.from},{insert:la,from:t.to}],range:Sa.EditorSelection.range(t.anchor+ca.length,t.head+ca.length)};var z=Pa(fa.doc,t.head);return!z||/\s/.test(z)||-1<ka.indexOf(z)?{changes:{insert:ca+la,from:t.head},range:Sa.EditorSelection.cursor(t.head+ca.length)}:{range:H=t}});return H?null:fa.update(y,{scrollIntoView:!0,annotations:Sa.Transaction.userEvent.of("input")})}function sa(fa,ca,la){var ka=null;ca=fa.selection.ranges.map(function(H){return H.empty&&
Pa(fa.doc,H.head)==la?Sa.EditorSelection.cursor(H.head+la.length):ka=H});return ka?null:fa.update({selection:Sa.EditorSelection.create(ca,fa.selection.primaryIndex),scrollIntoView:!0})}function xa(fa,ca,la){var ka=null,H=fa.changeByRange(function(y){if(!y.empty)return{changes:[{insert:ca,from:y.from},{insert:ca,from:y.to}],range:Sa.EditorSelection.range(y.anchor+ca.length,y.head+ca.length)};var t=y.head,z=Pa(fa.doc,t);if(z==ca){if(Qa(fa,t))return{changes:{insert:ca+ca,from:t},range:Sa.EditorSelection.cursor(t+
ca.length)};y=la&&fa.sliceDoc(t,t+3*ca.length)==ca+ca+ca;return{range:Sa.EditorSelection.cursor(t+ca.length*(y?3:1))}}return la&&fa.sliceDoc(t-2*ca.length,t)==ca+ca&&Qa(fa,t-2*ca.length)?{changes:{insert:ca+ca+ca+ca,from:t},range:Sa.EditorSelection.cursor(t+ca.length)}:fa.charCategorizer(t)(z)!=Sa.CharCategory.Word&&(z=fa.sliceDoc(t-1,t),z!=ca&&fa.charCategorizer(t)(z)!=Sa.CharCategory.Word)?{changes:{insert:ca+ca,from:t},range:Sa.EditorSelection.cursor(t+ca.length)}:{range:ka=y}});return ka?null:
fa.update(H,{scrollIntoView:!0,annotations:Sa.Transaction.userEvent.of("input")})}function Qa(fa,ca){fa=fa.tree.resolve(ca+1);return fa.parent&&fa.from==ca}Object.defineProperty(F,"__esModule",{value:!0});F.closeBrackets=function(){return na.EditorView.inputHandler.of(Na)};F.handleInsertion=Ba;F.deleteBracketPair=F.closeBracketsKeymap=void 0;var na=Oa(6),Sa=Oa(2),ta=Oa(0),ya={brackets:["(","[","{","'",'"'],before:")]}'\":;\x3e"},Ga="()[]{}\x3c\x3e";qa=function(fa){var ca=fa.state;fa=fa.dispatch;var la=
(ca.languageDataAt("closeBrackets",ca.selection.primary.head)[0]||ya).brackets||ya.brackets,ka=null,H=ca.changeByRange(function(y){if(y.empty){var t=y.head;t=ca.doc.sliceString(t-2,t);t=(0,ta.codePointSize)((0,ta.codePointAt)(t,0))==t.length?t:t.slice(1);var z=!0,J=!1,R=void 0;try{for(var I=la[Symbol.iterator](),r;!(z=(r=I.next()).done);z=!0){var v=r.value;if(v==t&&Pa(ca.doc,y.head)==Ma((0,ta.codePointAt)(v,0)))return{changes:{from:y.head-v.length,to:y.head+v.length},range:Sa.EditorSelection.cursor(y.head-
v.length),annotations:Sa.Transaction.userEvent.of("delete")}}}catch(p){J=!0,R=p}finally{try{if(!z&&null!=I["return"])I["return"]()}finally{if(J)throw R;}}}return{range:ka=y}});ka||fa(ca.update(H,{scrollIntoView:!0}));return!ka};F.deleteBracketPair=qa;F.closeBracketsKeymap=[{key:"Backspace",run:qa}]};
shadow$provide[8]=function(qa,Oa,kb,F){function Ma(p){Ma="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"===typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h};return Ma(p)}function Na(p,h){if(!(p instanceof h))throw new TypeError("Cannot call a class as a function");}function Ba(p,h){for(var q=0;q<h.length;q++){var u=h[q];u.enumerable=u.enumerable||!1;u.configurable=!0;"value"in u&&(u.writable=!0);
Object.defineProperty(p,u.key,u)}}function Pa(p,h,q){h&&Ba(p.prototype,h);q&&Ba(p,q);return p}function Fa(p,h){if(h&&("object"===Ma(h)||"function"===typeof h))return h;if(void 0===p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p}function sa(p){sa=Object.setPrototypeOf?Object.getPrototypeOf:function(h){return h.__proto__||Object.getPrototypeOf(h)};return sa(p)}function xa(p,h){if("function"!==typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function");
p.prototype=Object.create(h&&h.prototype,{constructor:{value:p,writable:!0,configurable:!0}});h&&Qa(p,h)}function Qa(p,h){Qa=Object.setPrototypeOf||function(q,u){q.__proto__=u;return q};return Qa(p,h)}function na(p){return[Sa(),la.of(Object.assign(Object.assign({},ca),p))]}function Sa(p){var h=[y,ka];p&&!1===p.fixed&&h.push(H.of(!0));return h}function ta(p){for(var h=9;h<p;)h=10*h+9;return h}Object.defineProperty(F,"__esModule",{value:!0});F.gutter=na;F.gutters=Sa;F.lineNumbers=function(){return[I.of(0<
arguments.length&&void 0!==arguments[0]?arguments[0]:{}),v]};F.lineNumberMarkers=F.GutterMarker=void 0;var ya=Oa(6),Ga=Oa(4),fa=Oa(2);qa=function(p){function h(){Na(this,h);return Fa(this,sa(h).apply(this,arguments))}xa(h,p);Pa(h,[{key:"compare",value:function(q){return this==q||this.constructor==q.constructor&&this.eq(q)}},{key:"toDOM",value:function(q){return null}},{key:"at",value:function(q){return new Ga.Range(q,q,this)}}]);return h}(Ga.RangeValue);F.GutterMarker=qa;qa.prototype.elementClass=
"";qa.prototype.mapMode=fa.MapMode.TrackBefore;var ca={style:"",renderEmptyElements:!1,elementStyle:"",markers:function(){return Ga.RangeSet.empty},lineMarker:function(){return null},initialSpacer:null,updateSpacer:null,domEventHandlers:{}},la=fa.Facet.define(),ka=ya.EditorView.baseTheme({$gutters:{display:"flex",height:"100%",boxSizing:"border-box",left:0},"$$light $gutters":{backgroundColor:"#f5f5f5",color:"#999",borderRight:"1px solid #ddd"},"$$dark $gutters":{backgroundColor:"#333338",color:"#ccc"},
$gutter:{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",height:"100%",overflow:"hidden"},$gutterElement:{boxSizing:"border-box"},"$gutterElement.lineNumber":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"}}),H=fa.Facet.define({combine:function(p){return p.some(function(h){return h})}}),y=ya.ViewPlugin.fromClass(function(){function p(h){Na(this,p);this.view=h;this.dom=document.createElement("div");this.dom.className=(0,ya.themeClass)("gutters");
this.dom.setAttribute("aria-hidden","true");this.gutters=h.state.facet(la).map(function(G){return new z(h,G)});var q=!0,u=!1,L=void 0;try{for(var E=this.gutters[Symbol.iterator](),C;!(q=(C=E.next()).done);q=!0)this.dom.appendChild(C.value.dom)}catch(G){u=!0,L=G}finally{try{if(!q&&null!=E["return"])E["return"]()}finally{if(u)throw L;}}if(this.fixed=!h.state.facet(H))this.dom.style.position="sticky";h.scrollDOM.insertBefore(this.dom,h.contentDOM)}Pa(p,[{key:"update",value:function(h){var q=this;if(this.updateGutters(h)){var u=
this.gutters.map(function(U){return new t(U,q.view.viewport)});this.view.viewportLines(function(U){if(Array.isArray(U.type)){var ba=!0,ha=!1,ua=void 0;try{for(var La=U.type[Symbol.iterator](),Ra;!(ba=(Ra=La.next()).done);ba=!0){var gb=Ra.value;if(gb.type==ya.BlockType.Text){var cb=gb;break}}}catch(pb){ha=!0,ua=pb}finally{try{if(!ba&&null!=La["return"])La["return"]()}finally{if(ha)throw ua;}}}else cb=U.type==ya.BlockType.Text?U:void 0;if(cb){U=!0;ba=!1;ha=void 0;try{for(var sb=u[Symbol.iterator](),
zb;!(U=(zb=sb.next()).done);U=!0)zb.value.line(q.view,cb)}catch(pb){ba=!0,ha=pb}finally{try{if(!U&&null!=sb["return"])sb["return"]()}finally{if(ba)throw ha;}}}},0);var L=!0,E=!1,C=void 0;try{for(var G=u[Symbol.iterator](),Q;!(L=(Q=G.next()).done);L=!0)Q.value.finish()}catch(U){E=!0,C=U}finally{try{if(!L&&null!=G["return"])G["return"]()}finally{if(E)throw C;}}this.dom.style.minHeight=this.view.contentHeight+"px";h.state.facet(H)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?
"sticky":"")}}},{key:"updateGutters",value:function(h){var q=h.prevState.facet(la),u=h.state.facet(la),L=h.docChanged||h.heightChanged||h.viewportChanged;if(q==u){var E=!0,C=!1;q=void 0;try{for(var G=this.gutters[Symbol.iterator](),Q;!(E=(Q=G.next()).done);E=!0)Q.value.update(h)&&(L=!0)}catch(gb){C=!0,q=gb}finally{try{if(!E&&null!=G["return"])G["return"]()}finally{if(C)throw q;}}}else{L=!0;G=[];Q=!0;var U=!1,ba=void 0;try{for(var ha=u[Symbol.iterator](),ua;!(Q=(ua=ha.next()).done);Q=!0){var La=ua.value,
Ra=q.indexOf(La);0>Ra?G.push(new z(this.view,La)):(this.gutters[Ra].update(h),G.push(this.gutters[Ra]))}}catch(gb){U=!0,ba=gb}finally{try{if(!Q&&null!=ha["return"])ha["return"]()}finally{if(U)throw ba;}}h=!0;q=!1;u=void 0;try{for(E=this.gutters[Symbol.iterator]();!(h=(C=E.next()).done);h=!0)C.value.dom.remove()}catch(gb){q=!0,u=gb}finally{try{if(!h&&null!=E["return"])E["return"]()}finally{if(q)throw u;}}for(h=0;h<G.length;h++)this.dom.appendChild(G[h].dom);this.gutters=G}return L}},{key:"destroy",
value:function(){this.dom.remove()}}]);return p}(),{provide:ya.PluginField.scrollMargins.from(function(p){return 0!=p.gutters.length&&p.fixed?p.view.textDirection==ya.Direction.LTR?{left:p.dom.offsetWidth}:{right:p.dom.offsetWidth}:null})}),t=function(){function p(h,q){Na(this,p);this.gutter=h;this.localMarkers=[];this.height=this.i=0;this.cursor=Ga.RangeSet.iter(Array.isArray(h.markers)?h.markers:[h.markers],q.from)}Pa(p,[{key:"line",value:function(h,q){this.localMarkers.length&&(this.localMarkers=
[]);for(;this.cursor.value&&this.cursor.from<=q.from;)this.cursor.from==q.from&&this.localMarkers.push(this.cursor.value),this.cursor.next();var u=this.gutter.config.lineMarker(h,q,this.localMarkers);u&&this.localMarkers.unshift(u);u=this.gutter;if(0!=this.localMarkers.length||u.config.renderEmptyElements){var L=q.top-this.height;if(this.i==u.elements.length)h=new J(h,q.height,L,this.localMarkers,u.elementClass),u.elements.push(h),u.dom.appendChild(h.dom);else{var E=this.localMarkers,C=u.elements[this.i];
a:{var G=E;var Q=C.markers;if(G.length!=Q.length)G=!1;else{for(var U=0;U<G.length;U++)if(!G[U].compare(Q[U])){G=!1;break a}G=!0}}G&&(E=C.markers,this.localMarkers.length=0);C.update(h,q.height,L,E,u.elementClass)}this.height=q.bottom;this.i++}}},{key:"finish",value:function(){for(var h=this.gutter;h.elements.length>this.i;)h.dom.removeChild(h.elements.pop().dom)}}]);return p}(),z=function(){function p(h,q){var u=this;Na(this,p);this.view=h;this.config=q;this.elements=[];this.spacer=null;this.dom=
document.createElement("div");this.dom.className=(0,ya.themeClass)("gutter"+(this.config.style?"."+this.config.style:""));this.elementClass=(0,ya.themeClass)("gutterElement"+(this.config.style?"."+this.config.style:""));var L=function(C){u.dom.addEventListener(C,function(G){var Q=h.visualLineAtHeight(G.clientY,h.contentDOM.getBoundingClientRect().top);q.domEventHandlers[C](h,Q,G)&&G.preventDefault()})},E;for(E in q.domEventHandlers)L(E);this.markers=q.markers(h.state);q.initialSpacer&&(this.spacer=
new J(h,0,0,[q.initialSpacer(h)],this.elementClass),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}Pa(p,[{key:"update",value:function(h){var q=this.markers;this.markers=this.config.markers(h.state);if(this.spacer&&this.config.updateSpacer){var u=this.config.updateSpacer(this.spacer.markers[0],h);u!=this.spacer.markers[0]&&this.spacer.update(h.view,0,0,[u],this.elementClass)}return this.markers!=q}}]);return p}(),J=function(){function p(h,
q,u,L,E){Na(this,p);this.height=-1;this.above=0;this.dom=document.createElement("div");this.update(h,q,u,L,E)}Pa(p,[{key:"update",value:function(h,q,u,L,E){this.height!=q&&(this.dom.style.height=(this.height=q)+"px");this.above!=u&&(this.dom.style.marginTop=(this.above=u)?u+"px":"");if(this.markers!=L){for(this.markers=L;q=this.dom.lastChild;)q.remove();q=!0;u=!1;var C=void 0;try{for(var G=L[Symbol.iterator](),Q;!(q=(Q=G.next()).done);q=!0){var U=Q.value,ba=U.toDOM(h);ba&&this.dom.appendChild(ba);
var ha=U.elementClass;ha&&(E+=" "+ha)}}catch(ua){u=!0,C=ua}finally{try{if(!q&&null!=G["return"])G["return"]()}finally{if(u)throw C;}}this.dom.className=E}}}]);return p}(),R=fa.Facet.define();F.lineNumberMarkers=R;var I=fa.Facet.define({combine:function(p){return(0,fa.combineConfig)(p,{formatNumber:String,domEventHandlers:{}},{domEventHandlers:function(h,q){var u=Object.assign({},h);h=function(E){var C=u[E],G=q[E];u[E]=C?function(Q,U,ba){return C(Q,U,ba)||G(Q,U,ba)}:G};for(var L in q)h(L);return u}})}}),
r=function(p){function h(q){Na(this,h);var u=Fa(this,sa(h).call(this));u.number=q;return u}xa(h,p);Pa(h,[{key:"eq",value:function(q){return this.number==q.number}},{key:"toDOM",value:function(q){q=q.state.facet(I);return document.createTextNode(q.formatNumber(this.number))}}]);return h}(qa),v=na({style:"lineNumber",markers:function(p){return p.facet(R)},lineMarker:function(p,h,q){return q.length?null:new r(p.state.doc.lineAt(h.from).number)},initialSpacer:function(p){return new r(ta(p.state.doc.lines))},
updateSpacer:function(p,h){h=ta(h.view.state.doc.lines);return h==p.number?p:new r(h)}})};
shadow$provide[9]=function(qa,Oa,kb,F){function Ma(h){Ma="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(q){return typeof q}:function(q){return q&&"function"===typeof Symbol&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q};return Ma(h)}function Na(h,q){if(!(h instanceof q))throw new TypeError("Cannot call a class as a function");}function Ba(h,q){for(var u=0;u<q.length;u++){var L=q[u];L.enumerable=L.enumerable||!1;L.configurable=!0;"value"in L&&(L.writable=!0);
Object.defineProperty(h,L.key,L)}}function Pa(h,q,u){q&&Ba(h.prototype,q);u&&Ba(h,u);return h}function Fa(h,q){if(q&&("object"===Ma(q)||"function"===typeof q))return q;if(void 0===h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function sa(h){sa=Object.setPrototypeOf?Object.getPrototypeOf:function(q){return q.__proto__||Object.getPrototypeOf(q)};return sa(h)}function xa(h,q){if("function"!==typeof q&&null!==q)throw new TypeError("Super expression must either be null or a function");
h.prototype=Object.create(q&&q.prototype,{constructor:{value:h,writable:!0,configurable:!0}});q&&Qa(h,q)}function Qa(h,q){Qa=Object.setPrototypeOf||function(u,L){u.__proto__=L;return u};return Qa(h,q)}function na(h,q){var u=q.mapPos(h.from,1);h=q.mapPos(h.to,-1);return u>=h?void 0:{from:u,to:h}}function Sa(h){var q=[],u=!0,L=!1,E=void 0;try{for(var C=function(){var U=Q.value.head;if(q.some(function(ba){return ba.from<=U&&ba.to>=U}))return"continue";q.push(h.visualLineAt(U))},G=h.state.selection.ranges[Symbol.iterator](),
Q;!(u=(Q=G.next()).done);u=!0)C()}catch(U){L=!0,E=U}finally{try{if(!u&&null!=G["return"])G["return"]()}finally{if(L)throw E;}}return q}function ta(h,q,u){var L,E=null;null===(L=h.field(t,!1))||void 0===L?void 0:L.between(q,u,function(C,G){if(!E||E.from>C)E={from:C,to:G}});return E}function ya(h,q,u){var L=!1;h.between(q,q,function(E,C){E==q&&C==u&&(L=!0)});return L}function Ga(h,q,u){return h.facet(ca.EditorState.foldable).reduce(function(L,E){return L||E(h,q,u)},null)}function fa(h){var q=[t,p];
h&&q.push(R.of(h));return q}Object.defineProperty(F,"__esModule",{value:!0});F.codeFolding=fa;F.foldGutter=function(){var h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},q=Object.assign(Object.assign({},r),h),u=new v(q,!0),L=new v(q,!1);return[(0,ka.gutter)({style:"foldGutter",lineMarker:function(E,C){return ta(E.state,C.from,C.to)?L:Ga(E.state,C.from,C.to)?u:null},initialSpacer:function(){return new v(q,!1)},domEventHandlers:{click:function(E,C){var G=ta(E.state,C.from,C.to);return G?
(E.dispatch({effects:y.of(G)}),!0):(C=Ga(E.state,C.from,C.to))?(E.dispatch({effects:H.of(C)}),!0):!1}}}),fa()]};F.unfoldCode=F.unfoldAll=F.foldKeymap=F.foldCode=F.foldAll=void 0;var ca=Oa(2),la=Oa(6),ka=Oa(8),H=ca.StateEffect.define({map:na}),y=ca.StateEffect.define({map:na}),t=ca.StateField.define({create:function(){return la.Decoration.none},update:function(h,q){h=h.map(q.changes);var u=!0,L=!1,E=void 0;try{for(var C=function(){var ha=Q.value;ha.is(H)&&!ya(h,ha.value.from,ha.value.to)?h=h.update({add:[I.range(ha.value.from,
ha.value.to)]}):ha.is(y)&&(h=h.update({filter:function(ua,La){return ha.value.from!=ua||ha.value.to!=La},filterFrom:ha.value.from,filterTo:ha.value.to}))},G=q.effects[Symbol.iterator](),Q;!(u=(Q=G.next()).done);u=!0)C()}catch(ha){L=!0,E=ha}finally{try{if(!u&&null!=G["return"])G["return"]()}finally{if(L)throw E;}}if(q.selection){var U=!1,ba=q.selection.primary.head;h.between(ba,ba,function(ha,ua){ha<ba&&ua>ba&&(U=!0)});U&&(h=h.update({filterFrom:ba,filterTo:ba,filter:function(ha,ua){return ua<=ba||
ha>=ba}}))}return h},provide:[la.EditorView.decorations]});qa=function(h){var q=!0,u=!1,L=void 0;try{for(var E=Sa(h)[Symbol.iterator](),C;!(q=(C=E.next()).done);q=!0){var G=C.value,Q=Ga(h.state,G.from,G.to);if(Q)return h.dispatch({effects:H.of(Q),reconfigure:h.state.field(t,!1)?void 0:{append:fa()}}),!0}}catch(U){u=!0,L=U}finally{try{if(!q&&null!=E["return"])E["return"]()}finally{if(u)throw L;}}return!1};F.foldCode=qa;Oa=function(h){if(!h.state.field(t,!1))return!1;var q=[],u=!0,L=!1,E=void 0;try{for(var C=
Sa(h)[Symbol.iterator](),G;!(u=(G=C.next()).done);u=!0){var Q=G.value,U=ta(h.state,Q.from,Q.to);U&&q.push(y.of(U))}}catch(ba){L=!0,E=ba}finally{try{if(!u&&null!=C["return"])C["return"]()}finally{if(L)throw E;}}q.length&&h.dispatch({effects:q});return 0<q.length};F.unfoldCode=Oa;kb=function(h){for(var q=h.state,u=[],L=0;L<q.doc.length;){L=h.visualLineAt(L);var E=Ga(q,L.from,L.to);E&&u.push(H.of(E));L=(E?h.visualLineAt(E.to):L).to+1}u.length&&h.dispatch({effects:u,reconfigure:h.state.field(t,!1)?void 0:
{append:fa()}});return!!u.length};F.foldAll=kb;var z=function(h){var q=h.state.field(t,!1);if(!q||!q.size)return!1;var u=[];q.between(0,h.state.doc.length,function(L,E){u.push(y.of({from:L,to:E}))});h.dispatch({effects:u});return!0};F.unfoldAll=z;F.foldKeymap=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:qa},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Oa},{key:"Ctrl-Alt-[",run:kb},{key:"Ctrl-Alt-]",run:z}];var J={placeholderDOM:null,placeholderText:"â€¦"},R=ca.Facet.define({combine:function(h){return(0,ca.combineConfig)(h,
J)}}),I=la.Decoration.replace({widget:new (function(h){function q(){Na(this,q);return Fa(this,sa(q).apply(this,arguments))}xa(q,h);Pa(q,[{key:"ignoreEvents",value:function(){return!1}},{key:"toDOM",value:function(u){var L=u.state,E=L.facet(R);if(E.placeholderDOM)return E.placeholderDOM();var C=document.createElement("span");C.textContent=E.placeholderText;C.setAttribute("aria-label",L.phrase("folded code"));C.title=L.phrase("unfold");C.className=(0,la.themeClass)("foldPlaceholder");C.onclick=function(G){var Q=
u.visualLineAt(u.posAtDOM(G.target));(Q=ta(u.state,Q.from,Q.to))&&u.dispatch({effects:y.of(Q)});G.preventDefault()};return C}}]);return q}(la.WidgetType))}),r={openText:"âŒ„",closedText:"â€º"},v=function(h){function q(u,L){Na(this,q);var E=Fa(this,sa(q).call(this));E.config=u;E.open=L;return E}xa(q,h);Pa(q,[{key:"eq",value:function(u){return this.config==u.config&&this.open==u.open}},{key:"toDOM",value:function(u){var L=document.createElement("span");L.textContent=this.open?this.config.openText:this.config.closedText;
L.title=u.state.phrase(this.open?"Fold line":"Unfold line");return L}}]);return q}(ka.GutterMarker),p=la.EditorView.baseTheme({$foldPlaceholder:{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},"$gutterElement.foldGutter":{padding:"0 1px",cursor:"pointer"}})};
shadow$provide[10]=function(qa,Oa,kb,F){function Ma(ca,la){if(!(ca instanceof la))throw new TypeError("Cannot call a class as a function");}function Na(ca,la){for(var ka=0;ka<la.length;ka++){var H=la[ka];H.enumerable=H.enumerable||!1;H.configurable=!0;"value"in H&&(H.writable=!0);Object.defineProperty(ca,H.key,H)}}function Ba(ca,la,ka){la&&Na(ca.prototype,la);ka&&Na(ca,ka);return ca}Object.defineProperty(F,"__esModule",{value:!0});F.styleTags=F.highlighter=F.defaultTags=F.defaultHighlighter=F.TagSystem=
void 0;var Pa=Oa(1),Fa=Oa(3),sa=Oa(6),xa=Oa(2),Qa=Oa(4);qa=function(){function ca(la){var ka=this;Ma(this,ca);this.typeNames=[""];this.typeIDs=Object.create(null);this.prop=new Pa.NodeProp;this.flags=la.flags;this.types=la.types;this.flagMask=Math.pow(2,this.flags.length)-1;this.typeShift=this.flags.length;var H=la.subtypes||0,y=[void 0];this.typeIDs[""]=0;var t=1,z=!0,J=!1,R=void 0;try{for(var I=la.types[Symbol.iterator](),r;!(z=(r=I.next()).done);z=!0){var v=r.value,p=/^([\w\-]+)(?:=([\w-]+))?$/.exec(v);
if(!p)throw new RangeError("Invalid type name "+v);var h=t++;this.typeNames[h]=p[1];this.typeIDs[p[1]]=h;y[h]=p[2];for(la=0;la<H;la++){var q=t++,u=p[1]+"#"+(la+1);this.typeNames[q]=u;this.typeIDs[u]=q;y[q]=p[1]}}}catch(L){J=!0,R=L}finally{try{if(!z&&null!=I["return"])I["return"]()}finally{if(J)throw R;}}this.parents=y.map(function(L){if(null==L)return 0;var E=ka.typeIDs[L];if(null==E)throw new RangeError("Unknown parent type '".concat(L,"' specified"));return E});if(30<this.flags.length||this.typeNames.length>
Math.pow(2,30-this.flags.length))throw new RangeError("Too many style tag flags to fit in a 30-bit integer");}Ba(ca,[{key:"get",value:function(la){var ka=0,H=!0,y=!1,t=void 0;try{for(var z=la.split(" ")[Symbol.iterator](),J;!(H=(J=z.next()).done);H=!0){var R=J.value;if(R){var I=this.flags.indexOf(R);if(-1<I)ka+=1<<I;else{var r=this.typeIDs[R];if(null==r)throw new RangeError("Unknown tag type '".concat(R,"'"));if(ka>>this.typeShift)throw new RangeError("Multiple tag types specified in '".concat(la,
"'"));ka+=r<<this.typeShift}}}}catch(v){y=!0,t=v}finally{try{if(!H&&null!=z["return"])z["return"]()}finally{if(y)throw t;}}return ka}},{key:"getWithMode",value:function(la){var ka="+"==la[0]?1:"!"==la[0]?0:2;return{mode:ka,tag:this.get(2==ka?la:la.slice(1))}}},{key:"addTagProp",value:function(la){var ka=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},H=this.getWithMode(la);return this.prop.set(ka,new ta(H.tag,H.mode,Sa))}},{key:"add",value:function(la){var ka=Object.create(null),H;for(H in la){var y=
this.getWithMode(la[H]),t=y.mode;y=y.tag;var z=!0,J=!1,R=void 0;try{for(var I=H.split(" ")[Symbol.iterator](),r;!(z=(r=I.next()).done);z=!0){var v=r.value.split("/"),p=v[v.length-1],h=1<v.length?v.slice(0,v.length-1).map(function(u){return"*"==u?null:u}):Sa,q=new ta(y,t,h);ka[p]=q.sort(ka[p])}}catch(u){J=!0,R=u}finally{try{if(!z&&null!=I["return"])I["return"]()}finally{if(J)throw R;}}}return this.prop.add(ka)}},{key:"highlighter",value:function(la){var ka=this,H=new Ga(this,la);return[(0,xa.precedence)(sa.ViewPlugin.define(function(y){return new fa(y,
ka.prop,H)},{decorations:function(y){return y.decorations}}),"fallback"),sa.EditorView.styleModule.of(H.module)]}},{key:"specificity",value:function(la){for(var ka=la&this.flagMask,H=0,y=1;y<=this.flags.length;y++)ka&1<<y&&H++;for(la>>=this.typeShift;la;la=this.parents[la])H+=/#/.test(this.typeNames[la])?500:1E3;return H}}]);return ca}();F.TagSystem=qa;var na=new qa({flags:"invalid meta standard definition constant local control link strong emphasis monospace changed inserted deleted".split(" "),
subtypes:7,types:"comment lineComment\x3dcomment blockComment\x3dcomment docComment\x3dcomment name variableName\x3dname typeName\x3dname propertyName\x3dname className\x3dname labelName\x3dname functionName\x3dname namespace\x3dname literal string\x3dliteral docString\x3dstring character\x3dstring number\x3dliteral integer\x3dnumber float\x3dnumber bool\x3dliteral regexp\x3dliteral escape\x3dliteral color\x3dliteral content heading\x3dcontent list\x3dcontent quote\x3dcontent keyword self\x3dkeyword null\x3dkeyword atom\x3dkeyword unit\x3dkeyword modifier\x3dkeyword operatorKeyword\x3dkeyword operator derefOperator\x3doperator arithmeticOperator\x3doperator logicOperator\x3doperator bitwiseOperator\x3doperator compareOperator\x3doperator updateOperator\x3doperator typeOperator\x3doperator punctuation separator\x3dpunctuation bracket\x3dpunctuation angleBracket\x3dbracket squareBracket\x3dbracket paren\x3dbracket brace\x3dbracket".split(" ")});
F.defaultTags=na;var Sa=[],ta=function(){function ca(la,ka,H,y){Ma(this,ca);this.tag=la;this.mode=ka;this.context=H;this.next=y}Ba(ca,[{key:"sort",value:function(la){if(!la||la.context.length<this.context.length)return this.next=la,this;la.next=this.sort(la.next);return la}}]);return ca}();F.styleTags=function(ca){return na.add(ca)};qa=function(ca){return na.highlighter(ca)};F.highlighter=qa;var ya=function t(la,ka,H,y){Ma(this,t);this.type=la;this.flags=ka;this.specificity=H;this.cls=y},Ga=function(){function la(ka,
H){Ma(this,la);this.tags=ka;this.cache=Object.create(null);var y=Object.create(null),t=[],z;for(z in H){var J=Fa.StyleModule.newName();y["."+J]=H[z];var R=!0,I=!1,r=void 0;try{for(var v=z.split(/\s*,\s*/)[Symbol.iterator](),p;!(R=(p=v.next()).done);R=!0){var h=ka.get(p.value);t.push(new ya(h>>ka.typeShift,h&ka.flagMask,ka.specificity(h),J))}}catch(q){I=!0,r=q}finally{try{if(!R&&null!=v["return"])v["return"]()}finally{if(I)throw r;}}}this.rules=t.sort(function(q,u){return u.specificity-q.specificity});
this.module=new Fa.StyleModule(y)}Ba(la,[{key:"match",value:function(ka){var H=this.cache[ka];if(null!=H)return H;H="";for(var y=ka>>this.tags.typeShift,t=ka&this.tags.flagMask;;){var z=!0,J=!1,R=void 0;try{for(var I=this.rules[Symbol.iterator](),r;!(z=(r=I.next()).done);z=!0){var v=r.value;if(v.type==y&&(v.flags&t)==v.flags&&(H&&(H+=" "),H+=v.cls,t&=~v.flags,y))break}}catch(p){J=!0,R=p}finally{try{if(!z&&null!=I["return"])I["return"]()}finally{if(J)throw R;}}if(y)y=this.tags.parents[y];else break}return this.cache[ka]=
H}}]);return la}(),fa=function(){function la(ka,H,y){Ma(this,la);this.prop=H;this.styling=y;this.nodeStack=[""];this.classStack=[""];this.inheritStack=[""];this.tree=ka.state.tree;this.decorations=this.buildDeco(ka.visibleRanges,this.tree)}Ba(la,[{key:"update",value:function(ka){var H=ka.state.facet(xa.EditorState.syntax);if(!H.length)this.decorations=sa.Decoration.none;else if(H[0].parsePos(ka.state)<ka.view.viewport.to)this.decorations=this.decorations.map(ka.changes);else if(this.tree!=H[0].getTree(ka.state)||
ka.viewportChanged)this.tree=H[0].getTree(ka.state),this.decorations=this.buildDeco(ka.view.visibleRanges,this.tree)}},{key:"buildDeco",value:function(ka,H){function y(G,Q){G>J&&Q&&z.add(J,G,sa.Decoration.mark({"class":Q}));J=G}var t=this,z=new Qa.RangeSetBuilder,J,R,I,r=this.nodeStack,v=this.classStack,p=this.inheritStack,h=!0,q=!1,u=void 0;try{for(var L=function(){var G=C.value,Q=G.from,U=G.to;R="";I=0;J=Q;H.iterate({from:Q,to:U,enter:function(ba,ha){I++;for(var ua=p[I-1],La=ua,Ra=ba.prop(t.prop),
gb=!1;Ra;){var cb;if(!(cb=!Ra.context.length))a:if(cb=Ra.context,cb.length>I-1)cb=!1;else{for(var sb=I-1,zb=cb.length-1;0<=zb;zb--,sb--){var pb=cb[zb];if(pb&&pb!=r[sb]){cb=!1;break a}}cb=!0}if(cb){if(cb=t.styling.match(Ra.tag))La&&(La+=" "),La+=cb,1==Ra.mode?ua=La:0==Ra.mode&&(gb=!0);break}Ra=Ra.next}La!=R&&(y(ha,R),R=La);if(gb)return I--,!1;v[I]=La;p[I]=ua;r[I]=ba.name},leave:function(ba,ha,ua){I--;ba=v[I];ba!=R&&(y(Math.min(U,ua),R),R=ba)}})},E=ka[Symbol.iterator](),C;!(h=(C=E.next()).done);h=!0)L()}catch(G){q=
!0,u=G}finally{try{if(!h&&null!=E["return"])E["return"]()}finally{if(q)throw u;}}return z.finish()}}]);return la}();qa=qa({deleted:{textDecoration:"line-through"},inserted:{textDecoration:"underline"},link:{textDecoration:"underline"},strong:{fontWeight:"bold"},emphasis:{fontStyle:"italic"},keyword:{color:"#708"},"atom, bool":{color:"#219"},number:{color:"#164"},string:{color:"#a11"},"regexp, escape, string#2":{color:"#e40"},"variableName definition":{color:"#00f"},typeName:{color:"#085"},className:{color:"#167"},
"name#2":{color:"#256"},"propertyName definition":{color:"#00c"},comment:{color:"#940"},meta:{color:"#555"},invalid:{color:"#f00"}});F.defaultHighlighter=qa};
shadow$provide[11]=function(qa,Oa,kb,F){function Ma(v,p){if(!(v instanceof p))throw new TypeError("Cannot call a class as a function");}function Na(v,p){for(var h=0;h<p.length;h++){var q=p[h];q.enumerable=q.enumerable||!1;q.configurable=!0;"value"in q&&(q.writable=!0);Object.defineProperty(v,q.key,q)}}function Ba(v,p,h){p&&Na(v.prototype,p);h&&Na(v,h);return v}function Pa(v,p){return function(h){var q=h.state;h=h.dispatch;var u=q.field(y,!1);if(!u)return!1;q=u.pop(v,q,p);if(!q)return!1;h(q);return!0}}
function Fa(v){return function(p){p=p.field(y,!1);if(!p)return 0;p=0==v?p.done:p.undone;return p.length-(p.length&&!p[0].changes?1:0)}}function sa(v,p,h,q){v=v.slice(p+1>h+20?p-h-1:0,p);v.push(q);return v}function xa(v,p){var h=[],q=!1;v.iterChangedRanges(function(u,L){return h.push(u,L)});p.iterChangedRanges(function(u,L,E,C){for(u=0;u<h.length;){L=h[u++];var G=h[u++];C>=L&&E<=G&&(q=!0)}});return q}function Qa(v,p){return v.ranges.length==p.ranges.length&&0===v.ranges.filter(function(h,q){return h.empty!=
p.ranges[q].empty}).length}function na(v,p){return v.length?p.length?v.concat(p):v:p}function Sa(v,p){if(v.length){var h=v[v.length-1],q=h.selectionsAfter.slice(Math.max(0,h.selectionsAfter.length-I));if(q.length&&q[q.length-1].eq(p))return v;q.push(p);return sa(v,v.length-1,1E9,h.setSelAfter(q))}return[J.selection([p])]}function ta(v){var p=v[v.length-1],h=v.slice();h[v.length-1]=p.setSelAfter(p.selectionsAfter.slice(0,p.selectionsAfter.length-1));return h}function ya(v,p){if(!v.length)return v;
for(var h=v.length,q=R;h;){q=Ga(v[h-1],p,q);if(q.changes&&!q.changes.empty||q.effects.length)return v=v.slice(0,h),v[h-1]=q,v;p=q.mapped;h--;q=q.selectionsAfter}return q.length?[J.selection(q)]:R}function Ga(v,p,h){h=na(v.selectionsAfter.length?v.selectionsAfter.map(function(E){return E.map(p)}):R,h);if(!v.changes)return J.selection(h);var q=v.changes.map(p),u=p.mapDesc(v.changes,!0),L=v.mapped?v.mapped.composeDesc(u):u;return new J(q,fa.StateEffect.mapEffects(v.effects,p),L,v.startSelection.map(u),
h)}Object.defineProperty(F,"__esModule",{value:!0});F.history=function(){return[y,H.of(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})]};F.undoSelection=F.undoDepth=F.undo=F.redoSelection=F.redoDepth=F.redo=F.isolateHistory=F.invertedEffects=F.historyKeymap=void 0;var fa=Oa(2),ca=fa.Annotation.define(),la=fa.Annotation.define();F.isolateHistory=la;var ka=fa.Facet.define();F.invertedEffects=ka;var H=fa.Facet.define({combine:function(v){return(0,fa.combineConfig)(v,{minDepth:100,newGroupDelay:500},
{minDepth:Math.max,newGroupDelay:Math.min})}}),y=fa.StateField.define({create:function(){return r.empty},update:function(v,p){var h=p.state.facet(H),q=p.annotation(ca);if(q){var u=J.fromTransaction(p),L=q.side;v=0==L?v.undone:v.done;v=u?sa(v,v.length,h.minDepth,u):Sa(v,p.startState.selection);return new r(0==L?q.rest:v,0==L?v:q.rest)}q=p.annotation(la);if("full"==q||"before"==q)v=v.isolate();if(!1===p.annotation(fa.Transaction.addToHistory))return p.changes.length?v.addMapping(p.changes.desc):v;u=
J.fromTransaction(p);L=p.annotation(fa.Transaction.time);var E=p.annotation(fa.Transaction.userEvent);u?v=v.addChanges(u,L,E,h.newGroupDelay,h.minDepth):p.selection&&(v=v.addSelection(p.startState.selection,L,E,h.newGroupDelay));if("full"==q||"after"==q)v=v.isolate();return v}});qa=Pa(0,!1);F.undo=qa;Oa=Pa(1,!1);F.redo=Oa;kb=Pa(0,!0);F.undoSelection=kb;var t=Pa(1,!0);F.redoSelection=t;var z=Fa(0);F.undoDepth=z;z=Fa(1);F.redoDepth=z;var J=function(){function v(p,h,q,u,L){Ma(this,v);this.changes=p;
this.effects=h;this.mapped=q;this.startSelection=u;this.selectionsAfter=L}Ba(v,[{key:"setSelAfter",value:function(p){return new v(this.changes,this.effects,this.mapped,this.startSelection,p)}}],[{key:"fromTransaction",value:function(p){var h=R,q=!0,u=!1,L=void 0;try{for(var E=p.startState.facet(ka)[Symbol.iterator](),C;!(q=(C=E.next()).done);q=!0){var G=C.value,Q=G(p);Q.length&&(h=h.concat(Q))}}catch(U){u=!0,L=U}finally{try{if(!q&&null!=E["return"])E["return"]()}finally{if(u)throw L;}}return!h.length&&
p.changes.empty?null:new v(p.changes.invert(p.startState.doc),h,void 0,p.startState.selection,R)}},{key:"selection",value:function(p){return new v(void 0,R,void 0,void 0,p)}}]);return v}(),R=[],I=200,r=function(){function v(p,h){var q=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,u=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0;Ma(this,v);this.done=p;this.undone=h;this.prevTime=q;this.prevUserEvent=u}Ba(v,[{key:"isolate",value:function(){return this.prevTime?new v(this.done,
this.undone):this}},{key:"addChanges",value:function(p,h,q,u,L){var E=this.done,C=E[E.length-1];E=C&&C.changes&&h-this.prevTime<u&&!C.selectionsAfter.length&&C.changes.length&&p.changes&&xa(C.changes,p.changes)?sa(E,E.length-1,L,new J(p.changes.compose(C.changes),na(p.effects,C.effects),C.mapped,C.startSelection,R)):sa(E,E.length,L,p);return new v(E,R,h,q)}},{key:"addSelection",value:function(p,h,q,u){var L=this.done.length?this.done[this.done.length-1].selectionsAfter:R;return 0<L.length&&h-this.prevTime<
u&&"keyboardselection"==q&&this.prevUserEvent==q&&Qa(L[L.length-1],p)?this:new v(Sa(this.done,p),this.undone,h,q)}},{key:"addMapping",value:function(p){return new v(ya(this.done,p),ya(this.undone,p),this.prevTime,this.prevUserEvent)}},{key:"pop",value:function(p,h,q){var u=0==p?this.done:this.undone;if(0==u.length)return null;var L=u[u.length-1];return q&&L.selectionsAfter.length?h.update({selection:L.selectionsAfter[L.selectionsAfter.length-1],annotations:ca.of({side:p,rest:ta(u)})}):L.changes?(q=
1==u.length?R:u.slice(0,u.length-1),L.mapped&&(q=ya(q,L.mapped)),h.update({changes:L.changes,selection:L.startSelection,effects:L.effects,annotations:ca.of({side:p,rest:q}),filter:!1})):null}}]);return v}();r.empty=new r(R,R);F.historyKeymap=[{key:"Mod-z",run:qa,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Oa,preventDefault:!0},{key:"Mod-u",run:kb,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:t,preventDefault:!0}]};
shadow$provide[12]=function(qa,Oa,kb,F){function Ma(p,h,q){h in p?Object.defineProperty(p,h,{value:q,enumerable:!0,configurable:!0,writable:!0}):p[h]=q;return p}function Na(p){Na="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"===typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h};return Na(p)}function Ba(p,h){if(!(p instanceof h))throw new TypeError("Cannot call a class as a function");}function Pa(p,
h){for(var q=0;q<h.length;q++){var u=h[q];u.enumerable=u.enumerable||!1;u.configurable=!0;"value"in u&&(u.writable=!0);Object.defineProperty(p,u.key,u)}}function Fa(p,h,q){h&&Pa(p.prototype,h);q&&Pa(p,q);return p}function sa(p){sa=Object.setPrototypeOf?Object.getPrototypeOf:function(h){return h.__proto__||Object.getPrototypeOf(h)};return sa(p)}function xa(p,h){if("function"!==typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(h&&
h.prototype,{constructor:{value:p,writable:!0,configurable:!0}});h&&Qa(p,h)}function Qa(p,h){Qa=Object.setPrototypeOf||function(q,u){q.__proto__=u;return q};return Qa(p,h)}function na(p){return ka.EditorState.indentation.of(function(h,q){a:{for(var u=p.getTree(h.state).resolve(q),L=u,E=q;;){E=L.childBefore(E);if(!E)break;E.type.isError&&E.from==E.to?(u=L,E=E.from):(L=E,E=L.to+1)}for(;u;u=u.parent)if(L=Sa(u)){h=L(new t(h,q,u));break a}h=-1}return h})}function Sa(p){var h=p.type.prop(y);if(h)return h;
h=p.firstChild;var q;if(h&&(q=h.type.prop(la.NodeProp.closedBy))){var u=p.lastChild,L=u&&-1<q.indexOf(u.name);return function(E){var C;if(C=L){var G,Q;C=!(E.pos==(null===(G=E.options)||void 0===G?void 0:G.simulateBreak)&&(null===(Q=E.options)||void 0===Q?0:Q.simulateDoubleBreak))}return ya(E,!0,1,void 0,C?u.from:void 0)}}return null==p.parent?ta:null}function ta(){return 0}function ya(p,h,q,u,L){var E=p.textAfter,C=E.match(/^\s*/)[0].length;u=u&&E.slice(C,C+u.length)==u||L==p.pos+C;var G;if(h)a:if(h=
p.node,L=h.childAfter(h.from),E=h.lastChild,L)for(C=null===(G=p.options)||void 0===G?void 0:G.simulateBreak,G=p.state.doc.lineAt(L.from),G=null==C||C<=G.from?G.to:Math.min(G.to,C),C=L.to;;){C=h.childAfter(C);if(!C||C==E){G=null;break a}if(!C.type.isSkipped){G=C.from<G?L:null;break a}C=C.to}else G=null;else G=null;return G?u?p.column(G.from):p.column(G.to):p.baseIndent+(u?0:p.unit*q)}function Ga(p){return ka.EditorState.foldable.of(function(h,q,u){for(var L=null,E=p.getTree(h).resolve(u);E;E=E.parent)if(!(E.to<=
u||E.from>u)){if(L&&E.from<q)break;var C=E.type.prop(z);C&&(C=C(E,h))&&C.from<=u&&C.from>=q&&C.to>u&&(L=C)}return L})}function fa(p,h){for(var q=2<arguments.length&&void 0!==arguments[2]?arguments[2]:5E6,u=Date.now()+h;;){var L=p.advance();if(L)return L;if(p.pos>q||Date.now()>u)return null}}function ca(p,h){var q=p.forceFinish();p=q.applyChanges([{fromA:p.pos,toA:q.length,fromB:p.pos,toB:q.length}]).append(h.applyChanges([{fromA:0,toA:p.pos,fromB:0,toB:p.pos}]));return{parsed:q,cache:p}}Object.defineProperty(F,
"__esModule",{value:!0});F.continuedIndent=function(){var p=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},h=p.except;p=p.units;var q=void 0===p?1:p;return function(u){var L=h&&h.test(u.textAfter);return u.baseIndent+(L?0:q*u.unit)}};F.delimitedIndent=function(p){var h=p.closing,q=p.align,u=void 0===q?!0:q;p=p.units;var L=void 0===p?1:p;return function(E){return ya(E,u,L,h)}};F.indentNodeProp=F.foldNodeProp=F.flatIndent=F.TreeIndentContext=F.LezerSyntax=void 0;var la=Oa(1),ka=Oa(2),H=Oa(6),
y=new la.NodeProp;F.indentNodeProp=y;var t=function(p){function h(q,u,L){Ba(this,h);q=sa(h).call(this,q.state,q.options);if(!q||"object"!==Na(q)&&"function"!==typeof q){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");q=this}q.pos=u;q.node=L;return q}xa(h,p);Fa(h,[{key:"textAfter",get:function(){return this.textAfterPos(this.pos)}},{key:"baseIndent",get:function(){for(var q=this.state.doc.lineAt(this.node.from);;){for(var u=this.node.resolve(q.from);u.parent&&
u.parent.from==u.from;)u=u.parent;var L;a:{for(L=this.node;L;L=L.parent)if(u==L){L=!0;break a}L=!1}if(L)break;q=this.state.doc.lineAt(u.from)}return this.lineIndent(q)}}]);return h}(ka.IndentContext);F.TreeIndentContext=t;F.flatIndent=function(p){return p.baseIndent};var z=new la.NodeProp;F.foldNodeProp=z;qa=function(){function p(h,q,u){var L=this;Ba(this,p);this.parser=h;this.dialect=q;this.languageData=u;var E=ka.StateEffect.define();this.field=ka.StateField.define({create:function(C){return R.advance(la.Tree.empty,
L,C.doc)},update:function(C,G){return C.apply(G,L,E)}});this.extension=[ka.EditorState.syntax.of(this),this.field,H.ViewPlugin.define(function(C){return new v(C,L,E)}),na(this),Ga(this)]}Fa(p,[{key:"withDialect",value:function(h){return new p(this.parser,h,this.languageData)}},{key:"getTree",value:function(h){return h.field(this.field).tree}},{key:"parsePos",value:function(h){return h.field(this.field).upto}},{key:"ensureTree",value:function(h,q){var u=2<arguments.length&&void 0!==arguments[2]?arguments[2]:
100,L=h.field(this.field);if(L.upto>=q)return L.updatedTree;L.parse||L.startParse(this,h.doc);return L.parse.pos<q&&(u=fa(L.parse,u,q))?L.stopParse(u,h.doc.length):L.parse.pos<q?null:L.stopParse()}},{key:"languageDataFacetAt",value:function(h,q){if(this.parser.hasNested)for(h=this.getTree(h).resolve(q,-1);h;){if(q=h.type.prop(ka.languageDataProp))return q;h=h.parent}return this.languageData}}],[{key:"define",value:function(h){var q=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},u=ka.Facet.define({combine:q.languageData?
function(L){return L.concat(q.languageData)}:void 0});return new p(h.withProps(ka.languageDataProp.add(Ma({},h.topType.name,u))),q.dialect||"",u)}}]);return p}();F.LezerSyntax=qa;var J=function(){function p(h){var q=1<arguments.length&&void 0!==arguments[1]?arguments[1]:h.length;Ba(this,p);this.doc=h;this.length=q;this.cursorPos=0;this.string="";this.cursor=h.iter()}Fa(p,[{key:"get",value:function(h){if(h>=this.length)return-1;var q=this.cursorPos-this.string.length;if(h<q||h>=this.cursorPos)h<this.cursorPos&&
(this.cursor=this.doc.iter(),this.cursorPos=0),this.string=this.cursor.next(h-this.cursorPos).value,this.cursorPos=h+this.string.length,q=this.cursorPos-this.string.length;return this.string.charCodeAt(h-q)}},{key:"read",value:function(h,q){var u=this.cursorPos-this.string.length;return h<u||q>=this.cursorPos?this.doc.sliceString(h,q):this.string.slice(h-u,q-u)}},{key:"clip",value:function(h){return new p(this.doc,h)}}]);return p}(),R=function(){function p(h,q,u){Ba(this,p);this.tree=h;this.upto=
q;this.cache=u;this.parse=null;this.updatedTree=h}Fa(p,[{key:"apply",value:function(h,q,u){var L=!0,E=!1,C=void 0;try{for(var G=h.effects[Symbol.iterator](),Q;!(L=(Q=G.next()).done);L=!0){var U=Q.value;if(U.is(u))return U.value}}catch(ha){E=!0,C=ha}finally{try{if(!L&&null!=G["return"])G["return"]()}finally{if(E)throw C;}}if(!h.docChanged)return this;var ba=[];h.changes.iterChangedRanges(function(ha,ua,La,Ra){return ba.push({fromA:ha,toA:ua,fromB:La,toB:Ra})});return p.advance((this.parse?ca(this.parse,
this.updatedTree).cache:this.cache).applyChanges(ba),q,h.state.doc)}},{key:"startParse",value:function(h,q){this.parse=h.parser.startParse(new J(q),{cache:this.cache,dialect:h.dialect})}},{key:"stopParse",value:function(h,q){if(h)this.cache=h;else{var u=ca(this.parse,this.updatedTree);h=u.parsed;this.cache=u.cache}this.updatedTree=h;this.upto=null!==q&&void 0!==q?q:this.parse.pos;this.parse=null;return h}}],[{key:"advance",value:function(h,q,u){q=q.parser.startParse(new J(u),{cache:h,dialect:q.dialect});
var L=fa(q,25);if(L)return new p(L,u.length,L);h=ca(q,h);return new p(h.parsed,q.pos,h.cache)}}]);return p}(),I="undefined"!=typeof window&&window.requestIdleCallback||function(p,h){return setTimeout(p,h.timeout)},r="undefined"!=typeof window&&window.cancelIdleCallback||clearTimeout,v=function(){function p(h,q,u){Ba(this,p);this.view=h;this.syntax=q;this.setSyntax=u;this.working=-1;this.work=this.work.bind(this);this.scheduleWork()}Fa(p,[{key:"update",value:function(h){h.docChanged&&this.scheduleWork()}},
{key:"scheduleWork",value:function(){if(!(-1<this.working)){var h=this.view.state;h.field(this.syntax.field).upto>=h.doc.length||(this.working=I(this.work,{timeout:200}))}}},{key:"work",value:function(h){this.working=-1;var q=this.view.state,u=q.field(this.syntax.field);u.upto>=q.doc.length||(u.parse||u.startParse(this.syntax,q.doc),(h=fa(u.parse,h?Math.max(25,h.timeRemaining()):100))||.8<u.parse.badness?(h=u.stopParse(h,q.doc.length),this.view.dispatch({effects:this.setSyntax.of(new R(h,q.doc.length,
u.cache))})):this.scheduleWork())}},{key:"destroy",value:function(){0<=this.working&&r(this.working)}}]);return p}()};
shadow$provide[13]=function(qa,Oa,kb,F){function Ma(){throw Error("setTimeout has not been defined");}function Na(){throw Error("clearTimeout has not been defined");}function Ba(ca){if(na===setTimeout)return setTimeout(ca,0);if((na===Ma||!na)&&setTimeout)return na=setTimeout,setTimeout(ca,0);try{return na(ca,0)}catch(la){try{return na.call(null,ca,0)}catch(ka){return na.call(this,ca,0)}}}function Pa(ca){if(Sa===clearTimeout)return clearTimeout(ca);if((Sa===Na||!Sa)&&clearTimeout)return Sa=clearTimeout,
clearTimeout(ca);try{return Sa(ca)}catch(la){try{return Sa.call(null,ca)}catch(ka){return Sa.call(this,ca)}}}function Fa(){ya&&Ga&&(ya=!1,Ga.length?ta=Ga.concat(ta):fa=-1,ta.length&&sa())}function sa(){if(!ya){var ca=Ba(Fa);ya=!0;for(var la=ta.length;la;){Ga=ta;for(ta=[];++fa<la;)Ga&&Ga[fa].run();fa=-1;la=ta.length}Ga=null;ya=!1;Pa(ca)}}function xa(ca,la){this.fun=ca;this.array=la}function Qa(){}qa=kb.exports={};try{var na="function"===typeof setTimeout?setTimeout:Ma}catch(ca){na=Ma}try{var Sa="function"===
typeof clearTimeout?clearTimeout:Na}catch(ca){Sa=Na}var ta=[],ya=!1,Ga,fa=-1;qa.nextTick=function(ca){var la=Array(arguments.length-1);if(1<arguments.length)for(var ka=1;ka<arguments.length;ka++)la[ka-1]=arguments[ka];ta.push(new xa(ca,la));1!==ta.length||ya||Ba(sa)};xa.prototype.run=function(){this.fun.apply(null,this.array)};qa.title="browser";qa.browser=!0;qa.env={};qa.argv=[];qa.version="";qa.versions={};qa.on=Qa;qa.addListener=Qa;qa.once=Qa;qa.off=Qa;qa.removeListener=Qa;qa.removeAllListeners=
Qa;qa.emit=Qa;qa.prependListener=Qa;qa.prependOnceListener=Qa;qa.listeners=function(ca){return[]};qa.binding=function(ca){throw Error("process.binding is not supported");};qa.cwd=function(){return"/"};qa.chdir=function(ca){throw Error("process.chdir is not supported");};qa.umask=function(){return 0}};
shadow$provide[14]=function(qa,Oa,kb,F){function Ma(I,r){function v(){this.constructor=I}xa(I,r);I.prototype=null===r?Object.create(r):(v.prototype=r.prototype,new v)}function Na(I,r){void 0===r&&(r=Uint16Array);if("string"!=typeof I)return I;for(var v=null,p=0,h=0;p<I.length;){for(var q=0;;){var u=I.charCodeAt(p++),L=!1;if(126==u){q=65535;break}92<=u&&u--;34<=u&&u--;u-=32;46<=u&&(u-=46,L=!0);q+=u;if(L)break;q*=46}v?v[h++]=q:v=new r(q)}return v}function Ba(I,r){return I[r]|I[r+1]<<16}function Pa(I,
r,v){for(var p=r,h;65535!=(h=I[p]);p++)if(h==v)return p-r;return-1}function Fa(I){for(var r=null,v=0;v<I.length;v++){var p=I[v];p.pos==p.cx.input.length&&p.cx.parser.stateFlag(p.state,2)&&(!r||r.score<p.score)&&(r=p)}return r}qa=Oa(13);"use strict";Object.defineProperty(F,"__esModule",{value:!0});var sa=Oa(1),xa=function(I,r){xa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,p){v.__proto__=p}||function(v,p){for(var h in p)Object.prototype.hasOwnProperty.call(p,h)&&(v[h]=p[h])};
return xa(I,r)},Qa=function(){function I(r,v,p,h,q,u,L,E,C){this.cx=r;this.stack=v;this.state=p;this.reducePos=h;this.pos=q;this.score=u;this.buffer=L;this.bufferBase=E;this.parent=C}I.prototype.toString=function(){return"["+this.stack.filter(function(r,v){return 0==v%3}).concat(this.state)+"]@"+this.pos+(this.score?"!"+this.score:"")};I.start=function(r,v,p){void 0===p&&(p=0);return new I(r,[],v,p,p,0,[],0,null)};I.prototype.pushState=function(r,v){this.stack.push(this.state,v,this.bufferBase+this.buffer.length);
this.state=r};I.prototype.reduce=function(r){var v=r>>19,p=r&65535,h=this.cx.parser,q=h.dynamicPrecedence(p);q&&(this.score+=q);if(0==v)p<h.minRepeatTerm&&this.storeNode(p,this.reducePos,this.reducePos,4,!0),this.pushState(h.getGoto(this.state,p,!0),this.reducePos);else{v=this.stack.length-3*(v-1)-(r&262144?6:0);q=this.stack[v-2];var u=this.bufferBase+this.buffer.length-this.stack[v-1];if(p<h.minRepeatTerm||r&131072){var L=h.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(p,q,L,u+4,
!0)}for(this.state=r&262144?this.stack[v]:h.getGoto(this.stack[v-3],p,!0);this.stack.length>v;)this.stack.pop()}};I.prototype.storeNode=function(r,v,p,h,q){void 0===h&&(h=4);void 0===q&&(q=!1);if(0==r){var u=this,L=this.buffer.length;0==L&&u.parent&&(L=u.bufferBase-u.parent.bufferBase,u=u.parent);if(0<L&&0==u.buffer[L-4]&&-1<u.buffer[L-1]){if(v==p)return;if(u.buffer[L-2]>=v){u.buffer[L-2]=p;return}}}if(q&&this.pos!=p){q=this.buffer.length;if(0<q&&0!=this.buffer[q-4])for(;0<q&&this.buffer[q-2]>p;)this.buffer[q]=
this.buffer[q-4],this.buffer[q+1]=this.buffer[q-3],this.buffer[q+2]=this.buffer[q-2],this.buffer[q+3]=this.buffer[q-1],q-=4,4<h&&(h-=4);this.buffer[q]=r;this.buffer[q+1]=v;this.buffer[q+2]=p;this.buffer[q+3]=h}else this.buffer.push(r,v,p,h)};I.prototype.shift=function(r,v,p){if(r&131072)this.pushState(r&65535,this.pos);else if(0==(r&262144)){var h=this.pos,q=this.cx.parser;if(p>this.pos||v<=q.maxNode)this.pos=p,q.stateFlag(r,1)||(this.reducePos=p);this.pushState(r,h);v<=q.maxNode&&this.buffer.push(v,
h,p,4)}else v<=this.cx.parser.maxNode&&this.buffer.push(v,this.pos,p,4),this.pos=p};I.prototype.apply=function(r,v,p){r&65536?this.reduce(r):this.shift(r,v,p)};I.prototype.useNode=function(r,v){var p=this.cx.reused.length-1;if(0>p||this.cx.reused[p]!=r)this.cx.reused.push(r),p++;var h=this.pos;this.reducePos=this.pos=h+r.length;this.pushState(v,h);this.buffer.push(p,h,this.reducePos,-1)};I.prototype.split=function(){for(var r=this,v=r.buffer.length;0<v&&r.buffer[v-2]>r.reducePos;)v-=4;var p=r.buffer.slice(v);
for(v=r.bufferBase+v;r&&v==r.bufferBase;)r=r.parent;return new I(this.cx,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,p,v,r)};I.prototype.recoverByDelete=function(r,v){var p=r<=this.cx.parser.maxNode;p&&this.storeNode(r,this.pos,v);this.storeNode(0,this.pos,v,p?8:4);this.pos=this.reducePos=v;this.score-=200};I.prototype.canShift=function(r){for(var v=new Sa(this);;){var p=this.cx.parser.stateSlot(v.top,4)||this.cx.parser.hasAction(v.top,r);if(0==(p&65536))return!0;if(0==p)return!1;
v.reduce(p)}};Object.defineProperty(I.prototype,"ruleStart",{get:function(){for(var r=this.state,v=this.stack.length;;){r=this.cx.parser.stateSlot(r,5);if(!(r&65536))return 0;v-=3*(r>>19);if((r&65535)<this.cx.parser.minRepeatTerm)return this.stack[v+1];r=this.stack[v]}},enumerable:!0,configurable:!0});I.prototype.startOf=function(r,v){for(var p=this.state,h=this.stack.length,q=this.cx.parser;;){var u=q.stateSlot(p,5);p=u>>19;var L=u&65535;if(-1<r.indexOf(L)&&(u=this.stack[h-3*(u>>19)+1],null==v||
v>u))return u;if(0==h)return null;0==p?(h-=3,p=this.stack[h]):(h-=3*(p-1),p=q.getGoto(this.stack[h-3],L,!0))}};I.prototype.recoverByInsert=function(r){var v=this;if(300<=this.stack.length)return[];var p=this.cx.parser.nextStates(this.state);if(4<p.length||120<=this.stack.length){var h=p.filter(function(L){return L!=v.state&&v.cx.parser.hasAction(L,r)});if(120>this.stack.length)for(var q=0;4>h.length&&q<p.length;q++)0>h.indexOf(p[q])&&h.push(p[q]);p=h}h=[];for(q=0;q<p.length&&4>h.length;q++)if(p[q]!=
this.state){var u=this.split();u.storeNode(0,u.pos,u.pos,4,!0);u.pushState(p[q],this.pos);u.score-=200;h.push(u)}return h};I.prototype.forceReduce=function(){var r=this.cx.parser.stateSlot(this.state,5);if(0==(r&65536))return!1;this.cx.parser.validAction(this.state,r)||(this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100);this.reduce(r);return!0};I.prototype.forceAll=function(){for(;!this.cx.parser.stateFlag(this.state,2)&&this.forceReduce(););return this};Object.defineProperty(I.prototype,
"deadEnd",{get:function(){if(3!=this.stack.length)return!1;var r=this.cx.parser;return 65535==r.data[r.stateSlot(this.state,1)]&&!r.stateSlot(this.state,4)},enumerable:!0,configurable:!0});I.prototype.restart=function(){this.state=this.stack[0];this.stack.length=0};I.prototype.sameState=function(r){if(this.state!=r.state||this.stack.length!=r.stack.length)return!1;for(var v=0;v<this.stack.length;v+=3)if(this.stack[v]!=r.stack[v])return!1;return!0};I.prototype.toTree=function(){return sa.Tree.build({buffer:ta.create(this),
group:this.cx.parser.group,topID:this.cx.topTerm,maxBufferLength:this.cx.maxBufferLength,reused:this.cx.reused,minRepeatType:this.cx.parser.minRepeatTerm})};Object.defineProperty(I.prototype,"parser",{get:function(){return this.cx.parser},enumerable:!0,configurable:!0});I.prototype.dialectEnabled=function(r){return this.cx.dialect.flags[r]};return I}(),na;(function(I){I[I.Token=200]="Token";I[I.Reduce=100]="Reduce";I[I.MaxNext=4]="MaxNext";I[I.MaxInsertStackDepth=300]="MaxInsertStackDepth";I[I.DampenInsertStackDepth=
120]="DampenInsertStackDepth"})(na||(na={}));var Sa=function(){function I(r){this.stack=r;this.top=r.state;this.rest=r.stack;this.offset=this.rest.length}I.prototype.reduce=function(r){var v=r&65535;r>>=19;0==r?(this.rest==this.stack.stack&&(this.rest=this.rest.slice()),this.rest.push(this.top,0,0),this.offset+=3):this.offset-=3*(r-1);this.top=this.stack.cx.parser.getGoto(this.rest[this.offset-3],v,!0)};return I}(),ta=function(){function I(r,v,p){this.stack=r;this.pos=v;this.index=p;this.buffer=r.buffer;
0==this.index&&this.maybeNext()}I.create=function(r){return new I(r,r.bufferBase+r.buffer.length,r.buffer.length)};I.prototype.maybeNext=function(){var r=this.stack.parent;null!=r&&(this.index=this.stack.bufferBase-r.bufferBase,this.stack=r,this.buffer=r.buffer)};Object.defineProperty(I.prototype,"id",{get:function(){return this.buffer[this.index-4]},enumerable:!0,configurable:!0});Object.defineProperty(I.prototype,"start",{get:function(){return this.buffer[this.index-3]},enumerable:!0,configurable:!0});
Object.defineProperty(I.prototype,"end",{get:function(){return this.buffer[this.index-2]},enumerable:!0,configurable:!0});Object.defineProperty(I.prototype,"size",{get:function(){return this.buffer[this.index-1]},enumerable:!0,configurable:!0});I.prototype.next=function(){this.index-=4;this.pos-=4;0==this.index&&this.maybeNext()};I.prototype.fork=function(){return new I(this.stack,this.pos,this.index)};return I}();Oa=function(){function I(){this.end=this.value=this.start=-1}I.prototype.accept=function(r,
v){this.value=r;this.end=v};return I}();var ya=function(){function I(r,v){void 0===v&&(v=r.length);this.string=r;this.length=v}I.prototype.get=function(r){return 0>r||r>=this.length?-1:this.string.charCodeAt(r)};I.prototype.read=function(r,v){return this.string.slice(r,Math.min(this.length,v))};I.prototype.clip=function(r){return new I(this.string,r)};return I}(),Ga=function(){function I(r,v){this.data=r;this.id=v}I.prototype.token=function(r,v,p){var h=this.data,q=0,u=1<<this.id,L=p.cx.dialect,E=
v.start;a:for(;0!=(u&h[q]);){for(var C=h[q+1],G=q+3;G<C;G+=2)if(0<(h[G+1]&u)){var Q=h[G];if(L.allows(Q)&&(-1==v.value||v.value==Q||p.cx.parser.overrides(Q,v.value))){v.accept(Q,E);break}}G=r.get(E++);Q=0;for(q=h[q+2];Q<q;){var U=Q+q>>1,ba=C+U+(U<<1),ha=h[ba+1];if(G<h[ba])q=U;else if(G>=ha)Q=U+1;else{q=h[ba+2];continue a}}break}};return I}();Ga.prototype.contextual=Ga.prototype.fallback=Ga.prototype.extend=!1;na=function(){return function(I,r){void 0===r&&(r={});this.token=I;this.contextual=!!r.contextual;
this.fallback=!!r.fallback;this.extend=!!r.extend}}();var fa="undefined"!=typeof qa&&/\bparse\b/.test(qa.env.LOG),ca=null,la=function(){function I(r){this.start=[0];this.index=[0];this.nextStart=0;this.trees=[r]}I.prototype.nodeAt=function(r){if(r<this.nextStart)return null;for(;;){var v=this.trees.length-1;if(0>v)return this.nextStart=1E9,null;var p=this.trees[v],h=this.index[v];if(h==p.children.length)this.trees.pop(),this.start.pop(),this.index.pop();else{var q=p.children[h];p=this.start[v]+p.positions[h];
if(p>=r)return p==r?q:null;q instanceof sa.TreeBuffer?(this.index[v]++,this.nextStart=p+q.length):(this.index[v]++,p+q.length>=r&&(this.trees.push(q),this.start.push(p),this.index.push(0)))}}};return I}(),ka=function(I){function r(){var v=null!==I&&I.apply(this,arguments)||this;v.extended=-1;v.mask=0;return v}Ma(r,I);r.prototype.clear=function(v){this.start=v;this.value=this.extended=-1};return r}(Oa),H=new Oa,y=function(){function I(r){this.tokens=[];this.mainToken=H;this.actions=[];this.tokens=
r.tokenizers.map(function(v){return new ka})}I.prototype.getActions=function(r,v){var p=0,h=null,q=r.cx.parser,u=q.tokenizers;q=q.stateSlot(r.state,3);for(var L=0;L<u.length;L++)if(0!=(1<<L&q)){var E=u[L],C=this.tokens[L];if(!h||E.fallback){if(E.contextual||C.start!=r.pos||C.mask!=q)this.updateCachedToken(C,E,r,v),C.mask=q;if(0!=C.value){var G=p;-1<C.extended&&(p=this.addActions(r,C.extended,C.end,p));p=this.addActions(r,C.value,C.end,p);if(!E.extend&&(h=C,p>G))break}}}for(;this.actions.length>p;)this.actions.pop();
h||(h=H,h.start=r.pos,r.pos==v.length?h.accept(r.cx.parser.eofTerm,r.pos):h.accept(0,r.pos+1));this.mainToken=h;return this.actions};I.prototype.updateCachedToken=function(r,v,p,h){r.clear(p.pos);v.token(h,r,p);if(-1<r.value){v=p.cx.parser;for(var q=0;q<v.specialized.length;q++)if(v.specialized[q]==r.value){var u=v.specializers[q](h.read(r.start,r.end),p);if(0<=u&&p.cx.dialect.allows(u>>1)){0==(u&1)?r.value=u>>1:r.extended=u>>1;break}}}else p.pos==h.length?r.accept(p.cx.parser.eofTerm,p.pos):r.accept(0,
p.pos+1)};I.prototype.putAction=function(r,v,p,h){for(var q=0;q<h;q+=3)if(this.actions[q]==r)return h;this.actions[h++]=r;this.actions[h++]=v;this.actions[h++]=p;return h};I.prototype.addActions=function(r,v,p,h){var q=r.state;r=r.cx.parser;for(var u=r.data,L=0;2>L;L++)for(var E=r.stateSlot(q,L?2:1);;E+=3){if(65535==u[E])if(1==u[E+1])E=Ba(u,E+2);else{0==h&&2==u[E+1]&&(h=this.putAction(Ba(u,E+1),v,p,h));break}u[E]==v&&(h=this.putAction(Ba(u,E+1),v,p,h))}return h};return I}(),t=function(){return function(I,
r,v,p,h,q,u){void 0===q&&(q=null);void 0===u&&(u=-1);this.parser=I;this.maxBufferLength=r;this.input=v;this.topTerm=p;this.dialect=h;this.parent=q;this.wrapType=u;this.reused=[];this.tokens=new y(I)}}(),z=function(){function I(r,v,p){void 0===p&&(p={});this.tokenCount=this.recovering=this.pos=0;this.nextStackID=9812;var h=p.cache;h=void 0===h?void 0:h;var q=p.strict;q=void 0===q?!1:q;var u=p.bufferLength;u=void 0===u?sa.DefaultBufferLength:u;var L=p.top;L=void 0===L?void 0:L;p=p.dialect;var E=L?r.topRules[L]:
r.defaultTop;if(!E)throw new RangeError("Invalid top rule name "+L);this.stacks=[Qa.start(new t(r,u,v,E[1],r.parseDialect(p)),E[0])];this.strict=q;this.cache=h?new la(h):null}I.prototype.putStack=function(r){this.stacks.push(r);if(0>this.pos||r.pos<this.pos)this.pos=r.pos};I.prototype.putStackDedup=function(r){for(var v=0;v<this.stacks.length;v++){var p=this.stacks[v];if(p.pos==r.pos&&p.sameState(r)){this.stacks[v].score<r.score&&(this.stacks[v]=r);return}}this.putStack(r)};I.prototype.advance=function(){var r=
this.stacks,v=this.pos;this.stacks=[];this.pos=-1;for(var p=null,h=null,q=0;q<r.length;q++)for(var u=r[q];;){if(u.pos>v)this.putStack(u);else{var L=this.advanceStack(u,r);if(L){u=L;continue}else p||(p=[],h=[]),p.push(u),u=u.cx.tokens.mainToken,h.push(u.value,u.end)}break}if(!this.stacks.length){if(q=p&&Fa(p))return q.toTree();if(this.strict)throw fa&&p&&console.log("Stuck with token "+p[0].cx.parser.getName(p[0].cx.tokens.mainToken.value)),new SyntaxError("No parse at "+v);this.recovering||(this.recovering=
5)}if(this.recovering&&p&&(q=this.runRecovery(p,h)))return q.forceAll().toTree();if(this.recovering)q=1==this.recovering?1:3*this.recovering,this.stacks.length>q&&(this.stacks.sort(function(E,C){return C.score-E.score}),this.stacks.length=q),this.stacks.some(function(E){return E.reducePos>v})&&this.recovering--;else if(1<this.stacks.length)a:for(q=0;q<this.stacks.length-1;q++)for(u=this.stacks[q],p=q+1;p<this.stacks.length;p++)if(h=this.stacks[p],u.sameState(h)||200<u.buffer.length&&200<h.buffer.length)if(0<
(u.score-h.score||u.buffer.length-h.buffer.length))this.stacks.splice(p--,1);else{this.stacks.splice(q--,1);continue a}this.tokenCount++;return null};I.prototype.advanceStack=function(r,v){var p=r.pos,h=r.cx,q=h.input,u=h.parser;h=fa?this.stackID(r)+" -\x3e ":"";if(this.cache)for(var L=this.cache.nodeAt(p);L;){var E=u.group.types[L.type.id]==L.type?u.getGoto(r.state,L.type.id):-1;if(-1<E)return r.useNode(L,E),fa&&console.log(h+this.stackID(r)+(" (via reuse of "+u.getName(L.type.id)+")")),r;if(!(L instanceof
sa.Tree)||0==L.children.length||0<L.positions[0])break;L=L.children[0];if(!(L instanceof sa.Tree))break}L=u.startNested(r.state);a:if(-1<L){E=u.nested[L];var C=E.grammar;L=E.end;E=E.placeholder;var G=void 0,Q=null,U=void 0,ba=void 0,ha=void 0;if("function"==typeof C){ha=C(q,r);if(ha.stay)break a;Q=ha.parseNode;v=ha.parser;U=ha.top;ba=ha.dialect;G=ha.filterEnd;ha=ha.wrapType}else v=C;L=this.scanForNestEnd(r,L,G);p=r.cx.input.clip(L);if(Q||!v)return h=Q?Q(p,r.pos):sa.Tree.empty,h.length!=L-r.pos&&(h=
new sa.Tree(h.type,h.children,h.positions,L-r.pos)),null!=ha&&(h=new sa.Tree(u.group.types[ha],[h],[0],h.length)),r.useNode(h,u.getGoto(r.state,E,!0)),r;u=U?v.topRules[U]:v.defaultTop;r=Qa.start(new t(v,r.cx.maxBufferLength,p,u[1],v.parseDialect(ba),r,ha),u[0],r.pos);fa&&console.log(h+this.stackID(r)+" (nested)");return r}L=u.stateSlot(r.state,4);if(0<L)return r.reduce(L),fa&&console.log(h+this.stackID(r)+(" (via always-reduce "+u.getName(L&65535)+")")),r;E=r.cx.tokens.getActions(r,q);for(ba=0;ba<
E.length;){ha=E[ba++];Q=E[ba++];L=E[ba++];G=(U=ba==E.length||!v)?r:r.split();G.apply(ha,Q,L);fa&&console.log(h+this.stackID(G)+(" (via "+(0==(ha&65536)?"shift":"reduce of "+u.getName(ha&65535))+" for "+u.getName(Q)+" @ "+p+(G==r?"":", split")+")"));if(U)return G;G.pos>p?this.putStack(G):v.push(G)}return r.cx.parent&&r.pos==q.length?this.finishNested(r):null};I.prototype.advanceFully=function(r){for(var v=r.pos;;){var p=this.advanceStack(r,null);if(!p)return r;if(p.pos>v)return this.putStackDedup(p),
null;r=p}};I.prototype.runRecovery=function(r,v){for(var p=null,h=!1,q=0;q<r.length;q++){var u=r[q],L=v[q<<1],E=v[(q<<1)+1],C=fa?this.stackID(u)+" -\x3e ":"";if(u.deadEnd){if(h)continue;h=!0;u.restart();fa&&console.log(C+this.stackID(u)+" (restarted)");var G=this.advanceFully(u);if(G)u=G;else continue}for(var Q=u.split(),U=C,ba=0;Q.forceReduce()&&10>ba;ba++){fa&&console.log(U+this.stackID(Q)+" (via force-reduce)");G=this.advanceFully(Q);if(!G)break;Q=G;fa&&(U=this.stackID(G)+" -\x3e ")}G=0;for(Q=
u.recoverByInsert(L);G<Q.length;G++)U=Q[G],fa&&console.log(C+this.stackID(U)+" (via recover-insert)"),this.advanceFully(U);u.cx.input.length>u.pos?(E==u.pos&&(E++,L=0),u.recoverByDelete(L,E),fa&&console.log(C+this.stackID(u)+(" (via recover-delete "+u.cx.parser.getName(L)+")")),this.putStackDedup(u)):u.cx.parent||p&&!(p.score<u.score)||(p=u)}return p};I.prototype.forceFinish=function(){return this.stacks[0].split().forceAll().toTree()};Object.defineProperty(I.prototype,"badness",{get:function(){return this.stacks.length?
-(this.stacks[0].score/(200*this.tokenCount)):0},enumerable:!0,configurable:!0});I.prototype.scanForNestEnd=function(r,v,p){for(var h=r.cx.input,q=r.pos;q<h.length;q++)if(H.start=q,H.value=-1,v.token(h,H,r),-1<H.value&&(!p||p(h.read(q,H.end))))return q;return h.length};I.prototype.finishNested=function(r){if(-2==r.cx.wrapType)return null;var v=r.cx.parent,p=r.forceAll().toTree(),h=v.cx.parser,q=h.nested[h.startNested(v.state)];p=new sa.Tree(p.type,p.children,p.positions.map(function(u){return u-v.pos}),
r.pos-v.pos);-1<r.cx.wrapType&&(p=new sa.Tree(h.group.types[r.cx.wrapType],[p],[0],p.length));r.cx.wrapType=-2;v.useNode(p,h.getGoto(v.state,q.placeholder,!0));fa&&console.log(this.stackID(v)+(" (via unnest "+(-1<r.cx.wrapType?h.getName(r.cx.wrapType):p.type.name)+")"));return v};I.prototype.stackID=function(r){var v=(ca||(ca=new WeakMap)).get(r);v||ca.set(r,v=String.fromCodePoint(this.nextStackID++));return v+r};return I}(),J=function(){function I(r,v,p){this.source=r;this.flags=v;this.disabled=
p}I.prototype.allows=function(r){return!this.disabled||0==this.disabled[r]};return I}();qa=function(){function I(r){function v(ua,La,Ra){L[ua]==R&&(L[ua]=Object.create(null));La.set(L[ua],La.deserialize(String(Ra)))}var p=this;this.nextStateCache=[];this.cachedDialect=null;if(12!=r.version)throw new RangeError("Parser version ("+r.version+") doesn't match runtime version (12)");var h=Na(r.tokenData),q=r.nodeNames.split(" ");this.minRepeatTerm=q.length;for(var u=0;u<r.repeatNodeCount;u++)q.push("");
var L=[];for(u=0;u<q.length;u++)L.push(R);if(r.nodeProps)for(var E=0,C=r.nodeProps;E<C.length;E++){var G=C[E],Q=G[0];for(u=1;u<G.length;){var U=G[u++];if(0<=U)v(U,Q,G[u++]);else{var ba=G[u+-U];for(U=-U;0<U;U--)v(G[u++],Q,ba);u++}}}this.specialized=new Uint16Array(r.specialized?r.specialized.length:0);this.specializers=[];if(r.specialized)for(u=0;u<r.specialized.length;u++)this.specialized[u]=r.specialized[u].term,this.specializers[u]=r.specialized[u].get;this.states=Na(r.states,Uint32Array);this.data=
Na(r.stateData);this.goto=Na(r.goto);var ha=Object.keys(r.topRules).map(function(ua){return r.topRules[ua][1]});this.group=new sa.NodeGroup(q.map(function(ua,La){var Ra=(La>=p.minRepeatTerm?8:0)|(-1<ha.indexOf(La)?1:0)|(0==La?4:0)|(r.skippedNodes&&-1<r.skippedNodes.indexOf(La)?2:0);return new sa.NodeType(ua,L[La],La,Ra)}));this.maxTerm=r.maxTerm;this.tokenizers=r.tokenizers.map(function(ua){return"number"==typeof ua?new Ga(h,ua):ua});this.topRules=r.topRules;this.nested=(r.nested||[]).map(function(ua){var La=
ua[3];return{name:ua[0],grammar:ua[1],end:new Ga(Na(ua[2]),0),placeholder:La}});this.dialects=r.dialects||{};this.dynamicPrecedences=r.dynamicPrecedences||null;this.tokenPrecTable=r.tokenPrec;this.termNames=r.termNames||null;this.maxNode=this.group.types.length-1;u=0;for(q=this.states.length/6;u<q;u++)this.nextStateCache[u]=null}I.prototype.parse=function(r,v){"string"==typeof r&&(r=new ya(r));for(r=new z(this,r,v);;)if(v=r.advance())return v};I.prototype.startParse=function(r,v){"string"==typeof r&&
(r=new ya(r));return new z(this,r,v)};I.prototype.getGoto=function(r,v,p){void 0===p&&(p=!1);var h=this.goto;if(v>=h[0])return-1;for(v=h[v+1];;){var q=h[v++],u=q&1,L=h[v++];if(u&&p)return L;for(q=v+(q>>1);v<q;v++)if(h[v]==r)return L;if(u)return-1}};I.prototype.hasAction=function(r,v){for(var p=this.data,h=0;2>h;h++)for(var q=this.stateSlot(r,h?2:1),u;;q+=3){if(65535==(u=p[q]))if(1==p[q+1])u=p[q=Ba(p,q+2)];else{if(2==p[q+1])return Ba(p,q+2);break}if(u==v||0==u)return Ba(p,q+1)}return 0};I.prototype.stateSlot=
function(r,v){return this.states[6*r+v]};I.prototype.stateFlag=function(r,v){return 0<(this.stateSlot(r,0)&v)};I.prototype.startNested=function(r){r=this.stateSlot(r,0);return r&4?r>>10:-1};I.prototype.validAction=function(r,v){if(v==this.stateSlot(r,4))return!0;for(r=this.stateSlot(r,1);;r+=3){if(65535==this.data[r])if(1==this.data[r+1])r=Ba(this.data,r+2);else return!1;if(v==Ba(this.data,r+1))return!0}};I.prototype.nextStates=function(r){var v=this.nextStateCache[r];if(v)return v;v=[];for(var p=
this.stateSlot(r,1);;p+=3){if(65535==this.data[p])if(1==this.data[p+1])p=Ba(this.data,p+2);else break;0==(this.data[p+2]&1)&&0>v.indexOf(this.data[p+1])&&v.push(this.data[p+1])}p=this.goto;for(var h=p[0],q=0;q<h;q++)for(var u=p[q+1];;){for(var L=p[u++],E=p[u++],C=u+(L>>1);u<C;u++)p[u]==r&&0>v.indexOf(E)&&v.push(E);if(L&1)break}return this.nextStateCache[r]=v};I.prototype.overrides=function(r,v){v=Pa(this.data,this.tokenPrecTable,v);return 0>v||Pa(this.data,this.tokenPrecTable,r)<v};I.prototype.withNested=
function(r){return this.copy({nested:this.nested.map(function(v){return Object.prototype.hasOwnProperty.call(r,v.name)?{name:v.name,grammar:r[v.name],end:v.end,placeholder:v.placeholder}:v})})};I.prototype.withProps=function(){for(var r,v=[],p=0;p<arguments.length;p++)v[p]=arguments[p];return this.copy({group:(r=this.group).extend.apply(r,v)})};I.prototype.withTokenizer=function(r,v){return this.copy({tokenizers:this.tokenizers.map(function(p){return p==r?v:p})})};I.prototype.copy=function(r){for(var v=
Object.create(I.prototype),p=0,h=Object.keys(this);p<h.length;p++){var q=h[p];v[q]=q in r?r[q]:this[q]}return v};I.prototype.getName=function(r){return this.termNames?this.termNames[r]:String(r<=this.maxNode&&this.group.types[r].name||r)};Object.defineProperty(I.prototype,"eofTerm",{get:function(){return this.maxNode+1},enumerable:!0,configurable:!0});Object.defineProperty(I.prototype,"hasNested",{get:function(){return 0<this.nested.length},enumerable:!0,configurable:!0});Object.defineProperty(I.prototype,
"defaultTop",{get:function(){return this.topRules[Object.keys(this.topRules)[0]]},enumerable:!0,configurable:!0});I.prototype.dynamicPrecedence=function(r){var v=this.dynamicPrecedences;return null==v?0:v[r]||0};Object.defineProperty(I.prototype,"topType",{get:function(){return this.group.types[this.defaultTop[1]]},enumerable:!0,configurable:!0});I.prototype.parseDialect=function(r){if(this.cachedDialect&&this.cachedDialect.source==r)return this.cachedDialect;var v=Object.keys(this.dialects),p=v.map(function(){return!1});
if(r)for(var h=0,q=r.split(" ");h<q.length;h++){var u=v.indexOf(q[h]);0<=u&&(p[u]=!0)}h=null;for(q=0;q<v.length;q++)if(!p[q]){var L=this.dialects[v[q]];for(u=void 0;65535!=(u=this.data[L++]);)(h||(h=new Uint8Array(this.maxTerm+1)))[u]=1}return this.cachedDialect=new J(r,p,h)};I.deserialize=function(r){return new I(r)};return I}();qa.TokenGroup=Ga;var R=Object.create(null);F.NodeGroup=sa.NodeGroup;F.NodeProp=sa.NodeProp;F.NodeType=sa.NodeType;F.Tree=sa.Tree;F.TreeCursor=sa.TreeCursor;F.ExternalTokenizer=
na;F.ParseContext=z;F.Parser=qa;F.Stack=Qa;F.Token=Oa};
shadow$provide[15]=function(qa,Oa,kb,F){function Ma(c,f){let k=null;for(let n=0;n<c.length;n++){let x=c[n].walk(f);x==c[n]||k||(k=c.slice(0,n));k&&k.push(x)}return k||c}function Na(c,f){return c.constructor==f.constructor&&c.eq(f)}function Ba(c,f){return c.length==f.length&&c.every((k,n)=>Na(k,f[n]))}function Pa(c,f){return c.prec<f.prec?"("+c.toString()+")":c.toString()}function Fa(c){for(let f in c)return!0;return!1}function sa(c,f,k){if(c.length!=f.length)return c.length-f.length;for(let n=0;n<
c.length;n++){let x=k(c[n],f[n]);if(x)return x}return 0}function xa(c,f){if(0==c.length||c==f)return f;if(0==f.length)return c;let k=c.slice();for(let n of f)c.includes(n)||k.push(n);return k.sort()}function Qa(c){return 65534<c?"âˆž":55296<=c&&57343>c?"\\u{"+c.toString(16)+"}":String.fromCharCode(c)}function na(c){let f="";for(let k=0;k<c.length;k++)f+=String.fromCharCode(c[k].from);return f}function Sa(c){let f="";for(let k of c)f+=(f.length?"-":"")+k.id;return f}function ta(c){let f=[],k=[];for(var n of c)f.includes(n.from)||
f.push(n.from),f.includes(n.to)||f.push(n.to);f.sort((x,B)=>x-B);for(n=1;n<f.length;n++){let x=f[n-1],B=f[n],O=[];for(let S of c)if(S.to>x&&S.from<B)for(let Z of S.target.closure())O.includes(Z)||O.push(Z);O.length&&k.push(new tc(x,B,O))}return k}function ya(c,f){let k=f?f.start:c.start;f=f||R(c);let n=Ga(c),x=[];if(c.eat("\x3c"))for(;!c.eat("\x3e");)x.length&&c.expect(","),x.push(R(c));c=ca(c);return new ub(k,f,n,x,c)}function Ga(c){if("["!=c.type)return ob;let f=[];for(c.expect("[");!c.eat("]");)f.length&&
c.expect(","),f.push(fa(c));return f}function fa(c){let f=c.start,k=[],n=c.value,x="at"==c.type;c.eat("at")||c.eat("id")||c.unexpected();if(c.eat("\x3d"))for(;;)if("string"==c.type||"id"==c.type)k.push(new Lc(c.start,c.value,null)),c.next();else if(c.eat("."))k.push(new Lc(c.start,".",null));else if(c.eat("{"))k.push(new Lc(c.start,null,c.expect("id"))),c.expect("}");else break;return new jb(f,x,n,k)}function ca(c){c.expect("{");let f=J(c);c.expect("}");return f}function la(c){var f=c.start;if(c.eat("("))return f=
J(c),c.expect(")"),f;if("string"==c.type){var k=c.value;c.next();return 0==k.length?new db(f,ob,[ob,ob]):new Yb(f,k)}if(c.eat("id","_"))return new Yc(f);if("set"==c.type){k="!"==c.string[c.start];var n=L(c.value.replace(/\\.|-|"/g,B=>"-"==B?"ï·š":'"'==B?'\\"':B));let x=[];for(let B=0;B<n.length;){let O=n.codePointAt(B);B+=65535<O?2:1;if(B<n.length-1&&"ï·š"==n[B]){let S=n.codePointAt(B+1);B+=65535<S?3:2;S<O&&c.raise("Invalid character range",c.start);H(c,x,O,S+1)}else H(c,x,O,O+1)}c.next();return new Qc(f,
x.sort((B,O)=>B[0]-O[0]),k)}if("at"!=c.type||"specialize"!=c.value&&"extend"!=c.value){if("["==c.type)return k=ya(c,new oa(f,"_anon")),k.params.length&&c.raise("Inline rules can't have parameters",k.start),new bb(f,k);k=R(c);if("["==c.type||"{"==c.type)return k=ya(c,k),k.params.length&&c.raise("Inline rules can't have parameters",k.start),new bb(f,k);n=null;c.eat(".")&&(n=k,k=R(c));return new pa(f,n,k,ka(c))}{let {start:x,value:B}=c;c.next();f=Ga(c);c.expect("\x3c");n=J(c);c.eat(",")?k=J(c):n instanceof
Yb?k=n:c.raise(`@${B} requires two arguments when its first argument isn't a literal string`);c.expect("\x3e");return new Ka(x,B,f,n,k)}}function ka(c){let f=[];if(c.eat("\x3c"))for(;!c.eat("\x3e");)f.length&&c.expect(","),f.push(J(c));return f}function H(c,f,k,n){f.every(([x,B])=>B<=k||x>=n)||c.raise("Overlapping character range",c.start);f.push([k,n])}function y(c){let f=c.start,k=la(c);for(;;){let n=c.type;if(c.eat("*")||c.eat("?")||c.eat("+"))k=new ec(f,k,n);else return k}}function t(c){return"}"==
c.type||")"==c.type||"|"==c.type||"/"==c.type||"/\\"==c.type||"{"==c.type||","==c.type||"\x3e"==c.type}function z(c){let f=c.start,k=[],n=[ob];do{for(;;){let x=c.start,B;if(c.eat("~"))B="ambig";else if(c.eat("!"))B="prec";else break;n[n.length-1]=n[n.length-1].concat(new Ob(x,R(c),B))}if(t(c))break;k.push(y(c));n.push(ob)}while(!t(c));return 1==k.length&&n.every(x=>0==x.length)?k[0]:new db(f,k,n)}function J(c){let f=c.start;var k=z(c);if(!c.eat("|"))return k;k=[k];do k.push(z(c));while(c.eat("|"));
return new fb(f,k)}function R(c){"id"!=c.type&&c.unexpected();let f=c.start,k=c.value;c.next();return new oa(f,k)}function I(c){let f=c.start;c.next();c.expect("{");let k=[];for(;!c.eat("}");){k.length&&c.expect(",");let n=la(c);n instanceof Yb||n instanceof pa?k.push(n):c.raise("Invalid expression in token precedences",n.start)}return new ic(f,k)}function r(c){let f=c.start;c.next();c.expect("{");let k=la(c);k instanceof Yb||k instanceof pa||c.raise("Invalid expression in token conflict",k.start);
c.eat(",");let n=la(c);n instanceof Yb||n instanceof pa||c.raise("Invalid expression in token conflict",n.start);c.expect("}");return new cc(f,k,n)}function v(c){let f=[];for(c.expect("{");!c.eat("}");){f.length&&c.eat(",");let k=R(c),n=Ga(c);f.push({id:k,props:n})}return f}function p(c,f){let k=R(c);c.expect("id","from");let n=c.expect("string");return new lc(f,k,n,v(c))}function h(c,f,k){c.expect("{");let n=J(c);c.expect("}");let x=R(c);c.expect("id","from");let B=c.expect("string");return new A(k,
f,n,x,B,v(c))}function q(c,f){let k=R(c),n=c.eat("id","as")?R(c):k,x=null;c.eat("id","from")?x=c.expect("string"):c.expect("id","empty");return new Y(f,n,k,x)}function u(c,f){let k=R(c),n=c.eat("id","as")?R(c):k;c.expect("id","from");c=c.expect("string");return new wa(f,n,k,c)}function L(c){let f=/\\(?:u\{([\da-f]+)\}|u([\da-f]{4})|x([\da-f]{2})|([ntbrf0])|(.))|./yig,k="",n;for(;n=f.exec(c);){let [x,B,O,S,Z,ea]=n;k=B||O||S?k+String.fromCodePoint(parseInt(B||O||S,16)):Z?k+("n"==Z?"\n":"t"==Z?"\t":
"0"==Z?"\x00":"r"==Z?"\r":"f"==Z?"\f":"\b"):ea?k+ea:k+x}return k}function E(c,f){return(c<<5)+c+f}function C(c){let f=Pb.none;for(let k of c)f=f.join(k.conflicts());return f}function G(c,f){for(let k of c)if(k.rule.name.repeated)for(let n of f)if(n.rule.name==k.rule.name){if(k.rule.isRepeatWrap&&2==k.pos)return 1;if(n.rule.isRepeatWrap&&2==n.pos)return-1}return 0}function Q(c,f){return c<f?-1:c>f?1:0}function U(c,f,k,n){let x=[];for(f+=1;f<c.parts.length;f++){let B=c.parts[f],O=!1;if(B.terminal)Ra(B,
x);else for(let S of n[B.name])null==S?O=!0:Ra(S,x);if(!O)return x}for(let B of k)Ra(B,x);return x}function ba(c,f){if(c.length!=f.length)return!1;for(let k=0;k<c.length;k++)if(!c[k].eq(f[k]))return!1;return!0}function ha(c,f){if(c.length!=f.length)return!1;for(let k=0;k<c.length;k++)if(c[k]!=f[k])return!1;return!0}function ua(c){let f=5381;for(let k of c)f=E(f,k.hash);return f}function La(c,f){function k(O,S,Z,ea,va){for(let Ea of O.rules){O=n.find(Aa=>Aa.rule==Ea);O||(O=(O=c.find(Aa=>0==Aa.pos&&
Aa.rule==Ea))?new uc(Ea,0,O.ahead.slice(),O.ambigAhead,O.skipAhead,O.via):new uc(Ea,0,[],jc,ea,va),n.push(O));if(O.skipAhead!=ea)throw new Tb("Inconsistent skip sets after "+va.trail());O.ambigAhead=xa(O.ambigAhead,Z);for(let Aa of S)O.ahead.includes(Aa)||(O.ahead.push(Aa),O.rule.parts.length&&!O.rule.parts[0].terminal&&Ra(O,x))}}let n=[],x=[];for(var B of c){let O=B.next;O&&!O.terminal&&k(O,U(B.rule,B.pos,B.ahead,f),B.conflicts(B.pos+1).ambigGroups,B.pos==B.rule.parts.length-1?B.skipAhead:B.rule.skip,
B)}for(;x.length;)B=x.pop(),k(B.rule.parts[0],U(B.rule,0,B.ahead,f),xa(B.rule.conflicts[1].ambigGroups,1==B.rule.parts.length?B.ambigAhead:jc),B.skipAhead,B);f=c.slice();for(let O of n)O.ahead.sort((S,Z)=>S.hash-Z.hash),O.finish(),B=c.findIndex(S=>0==S.pos&&S.rule==O.rule),-1<B?f[B]=O:f.push(O);return f.sort((O,S)=>O.cmp(S))}function Ra(c,f){f.includes(c)||f.push(c)}function gb(c){let f=Object.create(null);for(var k of c.terms)k.terminal||(f[k.name]=[]);for(;;){k=!1;for(let n of c.terms)if(!n.terminal)for(let x of n.rules){let B=
f[n.name],O=!1,S=B.length;for(let Z of x.parts){O=!0;if(Z.terminal)Ra(Z,B);else for(let ea of f[Z.name])null==ea?O=!1:Ra(ea,B);if(O)break}O||Ra(null,B);B.length>S&&(k=!0)}if(!k)return f}}function cb(c,f){function k(n,x){let B=[];for(let O=x.via;!O.eqSimple(n);O=O.via)B.push(O);if(!B.length)return"";B.unshift(x);return B.reverse().map((O,S)=>"\n"+"  ".repeat(S+1)+(O==x?"":"via ")+O).join("")}if(c.eqSimple(f))return"";for(let n=c;n;n=n.via)for(let x=f;x;x=x.via)if(n.eqSimple(x))return"\nShared origin: "+
n+k(n,c)+k(n,f);return""}function sb(c,f,k){function n(Aa,Ua){if(0==Aa.length)return null;let Ia=ua(Aa);var Wa=B[Ia];let yb;for(var Qb of Aa)if(!yb)yb=Qb.skip;else if(yb!=Qb.skip)throw new Tb("Inconsistent skip sets after "+Qb.trail());if(Wa)for(let mb of Wa)if(ba(Aa,mb.set)){if(mb.state.skip!=yb)throw new Tb("Inconsistent skip sets after "+mb.set[0].trail());return mb.state}Wa=La(Aa,k);Qb=ua(Wa);let hb;if(!Ua)for(let mb of x)mb.hash==Qb&&mb.hasSet(Wa)&&(hb=mb);hb||(hb=new Zc(x.length,Wa,0,yb,Qb,
Ua),x.push(hb));(B[Ia]||(B[Ia]=[])).push(new Rc(Aa,hb));return hb}let x=[],B={};for(var O of f){const Aa=O.rules.length?O.rules[0].skip:c.names["%noskip"];n(O.rules.map(Ua=>(new uc(Ua,0,[c.eof],jc,Aa,null)).finish()),O)}f=[];for(O=0;O<x.length;O++){let Aa=x[O];var S=[];let Ua=[];var Z=[];for(let Ia of Aa.set)if(Ia.pos==Ia.rule.parts.length)Ia.rule.name.top||Z.push(Ia);else{var ea=Ia.rule.parts[Ia.pos],va=S.indexOf(ea);0>va?(S.push(ea),Ua.push([Ia])):Ua[va].push(Ia)}for(ea=0;ea<S.length;ea++){va=S[ea];
var Ea=Ua[ea].map(Ia=>Ia.advance());va.terminal?(Ea=zb(Ea),(Ea=n(Ea))&&Aa.addAction(new Zb(va,Ea),Ua[ea],f)):(Ea=n(Ea))&&Aa.goto.push(new Zb(va,Ea))}S=!1;for(let Ia of Z)for(let Wa of Ia.ahead)Z=Aa.actions.length,Aa.addAction(new Cc(Wa,Ia.rule),[Ia],f),Aa.actions.length==Z&&(S=!0);if(S)for(Z=0;Z<Aa.goto.length;Z++)k[Aa.goto[Z].term.name].some(Ia=>Aa.actions.some(Wa=>Wa.term==Ia&&Wa instanceof Zb))||Aa.goto.splice(Z--,1)}if(f.length)throw new Tb(f.map(Aa=>Aa.error).join("\n\n"));for(let Aa of x)Aa.finish();
return x}function zb(c){let f=null,k=1;for(let n of c){let x=n.rule.conflicts[n.pos-1].cut;if(!(x<k)){if(!f||x>k)k=x,f=[];f.push(n)}}return f||c}function pb(c,f,k){for(let n of c.goto)for(let x of f.goto)if(n.term==x.term&&k[n.target.id]!=k[x.target.id])return!1;a:for(let n of c.actions){c=!1;for(let x of f.actions)if(x.term==n.term){if(n instanceof Zb?x instanceof Zb&&k[n.target.id]==k[x.target.id]:x.eq(n))continue a;c=!0}if(c)return!1}return!0}function Ib(c,f,k){return pb(c,f,k)&&pb(f,c,k)}function Bb(c,
f){let k=[];for(var n of c){let x=f[n.id];k[x]||(k[x]=new Zc(x,n.set,0,n.skip,n.hash,n.startRule),k[x].tokenGroup=n.tokenGroup,k[x].defaultReduce=n.defaultReduce)}for(let x of c){c=k[f[x.id]];c.flags|=x.flags;for(n=0;n<x.actions.length;n++){let B=x.actions[n].map(f,k);c.actions.some(O=>O.eq(B))||(c.actions.push(B),c.actionPositions.push(x.actionPositions[n]))}for(let B of x.goto){let O=B.map(f,k);c.goto.some(S=>S.eq(O))||c.goto.push(O)}}return k}function xb(c,f){if(c.length!=f.length)return!1;for(let k=
0;k<c.length;k++)if(!c[k].eqSimple(f[k]))return!1;return!0}function tb(c){function f(Z,ea){let va=n[Z],Ea=c[va.members[ea]],Aa=va.members.pop();ea!=va.members.length&&(va.members[ea]=Aa);for(Z+=1;Z<n.length;Z++)if(k[Ea.id]=Z,n[Z].origin==va.origin&&n[Z].members.every(Ua=>Ib(Ea,c[Ua],k))){n[Z].members.push(Ea.id);return}k[Ea.id]=n.length;n.push(new $c(va.origin,Ea.id))}let k=[],n=[];a:for(var x=0;x<c.length;x++){var B=c[x];if(!B.startRule)for(var O=0;O<n.length;O++){var S=n[O];let Z=c[S.members[0]];
if(B.tokenGroup==Z.tokenGroup&&B.skip==Z.skip&&!Z.startRule&&xb(B.set,Z.set)){S.members.push(x);k.push(O);continue a}}k.push(n.length);n.push(new $c(n.length,x))}for(;;){x=!1;for(let Z=0,ea=n.length;Z<ea;Z++)for(B=n[Z],O=0;O<B.members.length-1;O++)for(S=O+1;S<B.members.length;S++)Ib(c[B.members[O]],c[B.members[S]],k)||(x=!0,f(Z,S--));if(!x)return Bb(c,k)}}function vb(c){for(;;){let k=[],n=!1,x=[];for(let B=0;B<c.length;B++){let O=c[B];var f=x.findIndex(S=>O.eq(S));if(0>f)k[B]=x.length,x.push(O);else{k[B]=
f;n=!0;f=x[f];let S=null;for(let Z of O.set)f.set.some(ea=>ea.eqSimple(Z))||(S||(S=[])).push(Z);S&&(f.set=S.concat(f.set).sort((Z,ea)=>Z.cmp(ea)))}}if(!n)return c;for(let B of x)B.defaultReduce||(B.actions=B.actions.map(O=>O.map(k,x)),B.goto=B.goto.map(O=>O.map(k,x)));for(c=0;c<x.length;c++)x[c].id=c;c=x}}function Mb(c,f=65535){if(c>f)throw Error("Trying to encode a number that's too big: "+c);if(65535==c)return String.fromCharCode(126);f="";for(var k=46;;k=0){let n=c%46;c-=n;k=n+k+32;34<=k&&k++;
92<=k&&k++;k=String.fromCharCode(k);f=k+f;if(0==c)break;c/=46}return f}function Ab(c,f=65535){let k='"'+Mb(c.length,4294967295);for(let n=0;n<c.length;n++)k+=Mb(c[n],f);return k+'"'}function wb(...c){return new pc(c,null)}function Nb(c,f,k){let n=c.props[f];if(!n||0>n.split(" ").indexOf(k))c.props[f]=n?n+" "+k:k}function oc(c){let f=Object.create(null);for(let {value:k,term:n,type:x}of c)f[k]=n.id<<1|("specialize"==x?0:1);return f}function bc(c,f,k=c.parts.length){return c.name.id|65536|(c.isRepeatWrap&&
k==c.parts.length?131072:0)|(f.some(n=>n.rule==c.name)?262144:0)|k<<19}function aa(c,f){let k=Object.create(null),n=[],x=B=>{k[B.id]||(k[B.id]=!0,n.push(B))};for(let B of c)B.startRule&&f.includes(B.startRule)&&x(B);for(c=0;c<n.length;c++){for(let B of n[c].actions)B instanceof Zb&&x(B.target);for(let B of n[c].goto)x(B.target)}return B=>!k[B]}function N(c){let f={},k=0;for(var n of c)for(var x of n.goto)k=Math.max(x.term.id,k),c=f[x.term.id]||(f[x.term.id]={}),(c[x.target.id]||(c[x.target.id]=[])).push(n.id);
n=new md;x=[];c=k+2;for(let B=0;B<=k;B++){let O=f[B];if(!O){x.push(1);continue}let S=[],Z=Object.keys(O);for(let ea of Z){let va=O[ea];S.push((ea==Z[Z.length-1]?1:0)+(va.length<<1));S.push(+ea);for(let Ea of va)S.push(Ea)}x.push(n.storeArray(S)+c)}if(x.some(B=>65535<B))throw new Tb("Goto table too large");return Uint16Array.from([k+1,...x,...n.data])}function M(c,f){c.includes(f)||c.push(f)}function D(c){let f=Object.create(null);for(let k of c){c=1<<k.id;for(let n of k.tokens)f[n.id]=(f[n.id]||0)|
c}return f}function T(c,f){function k(x){if(x instanceof db){let B=x.exprs.indexOf(f);-1<B&&B<x.exprs.length-1&&(n=x.exprs[B+1])}return x}let n;for(let x of c.rules)x.expr.walk(k);for(let x of c.topRules)x.expr.walk(k);return n}function W(c,f,k){function n(B,O){return B.actions.some(S=>S.term==O)||k[f.skipRules.indexOf(B.skip)].startTokens.includes(O)}let x=Object.create(null);return(B,O)=>{B.id<O.id&&([B,O]=[O,B]);let S=B.id|O.id<<16,Z=x[S];return null!=Z?Z:x[S]=c.some(ea=>n(ea,B)&&n(ea,O))}}function da(c){let f=
0,k=[];for(let [n,x]of c)n>f&&k.push([f,n]),f=x;1114111>=f&&k.push([f,1114112]);return k}function ma(c,f,k,n){if(55296>k&&1114112==n)c.edge(k,65535,f);else if(65536>k&&(55296>k&&c.edge(k,Math.min(n,55296),f),57344<n&&c.edge(Math.max(k,57344),Math.min(n,65535),f),k=65536),!(65536>n)){k=String.fromCodePoint(k);var x=String.fromCodePoint(n-1);n=k.charCodeAt(0);k=k.charCodeAt(1);var B=x.charCodeAt(0);x=x.charCodeAt(1);if(n==B)B=new Jb,c.edge(n,n+1,B),B.edge(k,x+1,f);else{let O=n,S=B;if(56320<k){O++;let Z=
new Jb;c.edge(n,n+1,Z);Z.edge(k,57344,f)}57343>x&&(S--,n=new Jb,c.edge(B,B+1,n),n.edge(56320,x+1,f));O<=S&&(n=new Jb,c.edge(O,S+1,n),n.edge(56320,57344,f))}}}function Ca(c){return c instanceof db&&0==c.exprs.length}function Ha(c,f){let k=Object.create(null);for(let n of f){c.unique(n.id);let {name:x,props:B,dialect:O}=c.nodeInfo(n.props,"d",n.id.name);f=c.makeTerminal(n.id.name,x,B);null!=O&&(c.tokens.byDialect[O]||(c.tokens.byDialect[O]=[])).push(f);c.namedTerms[n.id.name]=k[n.id.name]=f}return k}
function Ja(c,f,k){f=f[k.id.name];if(!f)return null;k.args.length&&c.raise("External tokens cannot take arguments",k.args[0].start);c.used(k.id.name);return f}function za(c,f,k){let n=c.findIndex(x=>x.term==f);0>n?c.push({term:f,after:k}):c[n]={term:f,after:c[n].after.concat(k)}}function Ta(c,f){for(let n=0;;n++){let x=Object.create(null),B;if(0==n)for(let S of c)if(S.name.inline&&!x[S.name.name]){let Z=c.filter(ea=>ea.name==S.name);Z.some(ea=>ea.parts.includes(S.name))||(B=x[S.name.name]=Z)}for(let S=
0;S<c.length;S++){let Z=c[S];Z.name.interesting||Z.parts.includes(Z.name)||!(3>Z.parts.length)||f.includes(Z.name)||1!=Z.parts.length&&!c.every(ea=>ea.skip==Z.skip||!ea.parts.includes(Z.name))||Z.parts.some(ea=>!!x[ea.name])||c.some((ea,va)=>va!=S&&ea.name==Z.name)||(B=x[Z.name.name]=[Z])}if(!B)return c;let O=[];for(let S of c){var k=function(Z,ea,va){if(Z==S.parts.length)O.push(new sc(S.name,va,ea,S.skip));else{var Ea=S.parts[Z],Aa=x[Ea.name];if(Aa)for(let Ua of Aa)k(Z+1,ea.slice(0,ea.length-1).concat(ea[Z].join(Ua.conflicts[0])).concat(Ua.conflicts.slice(1,
Ua.conflicts.length-1)).concat(S.conflicts[Z+1].join(Ua.conflicts[Ua.conflicts.length-1])),va.concat(Ua.parts));else k(Z+1,ea.concat(S.conflicts[Z+1]),va.concat(Ea))}};x[S.name.name]||(S.parts.some(Z=>!!x[Z.name])?k(0,[S.conflicts[0]],[]):O.push(S))}c=O}}function Va(c){let f=Object.create(null);var k;for(let n=0;n<c.length;){let x=n,B=c[n++].name;for(;n<c.length&&c[n].name==B;)n++;let O=n-x;if(!B.interesting)for(let S=n;S<c.length;){let Z=S,ea=c[S++].name;for(;S<c.length&&c[S].name==ea;)S++;if(S-
Z!=O||ea.interesting)continue;let va=!0;for(let Ea=0;Ea<O&&va;Ea++)0!=c[x+Ea].cmpNoName(c[Z+Ea])&&(va=!1);va&&(k=f[B.name]=ea)}}if(!k)return c;k=[];for(let n of c)f[n.name.name]||k.push(n.parts.every(x=>!f[x.name])?n:new sc(n.name,n.parts.map(x=>f[x.name]||x),n.conflicts,n.skip));return k}function $a(c,f){return Va(Ta(c,f))}function eb(c){return c.props.some(f=>f.at&&"export"==f.name)}var ab=Oa(13);"use strict";Object.defineProperty(F,"__esModule",{value:!0});var nb=Oa(14);class lb{constructor(c){this.start=
c}}class Dc extends lb{constructor(c,f,k,n,x,B,O,S,Z,ea,va,Ea,Aa){super(c);this.rules=f;this.topRules=k;this.tokens=n;this.externalTokens=x;this.externalSpecializers=B;this.precedences=O;this.mainSkip=S;this.scopedSkip=Z;this.dialects=ea;this.grammars=va;this.externalProps=Ea;this.autoDelim=Aa}toString(){return Object.values(this.rules).join("\n")}}class ub extends lb{constructor(c,f,k,n,x){super(c);this.id=f;this.props=k;this.params=n;this.expr=x}toString(){return this.id.name+(this.params.length?
`<${this.params.join()}>`:"")+" -\x3e "+this.expr}}class hc extends lb{constructor(c,f){super(c);this.items=f}}class ic extends lb{constructor(c,f){super(c);this.items=f}}class cc extends lb{constructor(c,f,k){super(c);this.a=f;this.b=k}}class wc extends lb{constructor(c,f,k,n,x){super(c);this.precedences=f;this.conflicts=k;this.rules=n;this.literals=x}}class xc extends lb{constructor(c,f,k){super(c);this.literal=f;this.props=k}}class lc extends lb{constructor(c,f,k,n){super(c);this.id=f;this.source=
k;this.tokens=n}}class A extends lb{constructor(c,f,k,n,x,B){super(c);this.type=f;this.token=k;this.id=n;this.source=x;this.tokens=B}}class Y extends lb{constructor(c,f,k,n){super(c);this.id=f;this.externalID=k;this.source=n}}class wa extends lb{constructor(c,f,k,n){super(c);this.id=f;this.externalID=k;this.source=n}}class oa extends lb{constructor(c,f){super(c);this.name=f}toString(){return this.name}}class ra extends lb{walk(c){return c(this)}eq(c){return!1}}ra.prototype.prec=10;class pa extends ra{constructor(c,
f,k,n){super(c);this.namespace=f;this.id=k;this.args=n}toString(){return this.id.name+(this.args.length?`<${this.args.join()}>`:"")}eq(c){return(this.namespace?null!=c.namespace&&c.namespace.name==this.namespace.name:!c.namespace)&&this.id.name==c.id.name&&Ba(this.args,c.args)}walk(c){let f=Ma(this.args,c);return c(f==this.args?this:new pa(this.start,this.namespace,this.id,f))}}class Ka extends ra{constructor(c,f,k,n,x){super(c);this.type=f;this.props=k;this.token=n;this.content=x}toString(){return`@${this.type}[${this.props.join(",")}]<${this.token}, ${this.content}>`}eq(c){return this.type==
c.type&&jb.eqProps(this.props,c.props)&&Na(this.token,c.token)&&Na(this.content,c.content)}walk(c){let f=this.token.walk(c),k=this.content.walk(c);return c(f==this.token&&k==this.content?this:new Ka(this.start,this.type,this.props,f,k))}}class bb extends ra{constructor(c,f){super(c);this.rule=f}toString(){let c=this.rule;return`${c.id}${c.props.length?`[${c.props.join(",")}]`:""} { ${c.expr} }`}eq(c){let f=this.rule;c=c.rule;return Na(f.expr,c.expr)&&f.id.name==c.id.name&&jb.eqProps(f.props,c.props)}walk(c){let f=
this.rule,k=f.expr.walk(c);return c(k==f.expr?this:new bb(this.start,new ub(f.start,f.id,f.props,[],k)))}}class fb extends ra{constructor(c,f){super(c);this.exprs=f}toString(){return this.exprs.map(c=>Pa(c,this)).join(" | ")}eq(c){return Ba(this.exprs,c.exprs)}walk(c){let f=Ma(this.exprs,c);return c(f==this.exprs?this:new fb(this.start,f))}}fb.prototype.prec=1;class db extends ra{constructor(c,f,k){super(c);this.exprs=f;this.markers=k}toString(){return this.exprs.map(c=>Pa(c,this)).join(" ")}eq(c){return Ba(this.exprs,
c.exprs)&&this.markers.every((f,k)=>{let n=c.markers[k];return f.length==n.length&&f.every((x,B)=>x.eq(n[B]))})}walk(c){let f=Ma(this.exprs,c);return c(f==this.exprs?this:new db(this.start,f,this.markers))}}db.prototype.prec=2;class Ob extends lb{constructor(c,f,k){super(c);this.id=f;this.type=k}toString(){return("ambig"==this.type?"~":"!")+this.id.name}eq(c){return this.id.name==c.id.name&&this.type==c.type}}class ec extends ra{constructor(c,f,k){super(c);this.expr=f;this.kind=k}toString(){return Pa(this.expr,
this)+this.kind}eq(c){return Na(this.expr,c.expr)&&this.kind==c.kind}walk(c){let f=this.expr.walk(c);return c(f==this.expr?this:new ec(this.start,f,this.kind))}}ec.prototype.prec=3;class Yb extends ra{constructor(c,f){super(c);this.value=f}toString(){return JSON.stringify(this.value)}eq(c){return this.value==c.value}}class Qc extends ra{constructor(c,f,k){super(c);this.ranges=f;this.inverted=k}toString(){return`[${this.inverted?"^":""}${this.ranges.map(([c,f])=>String.fromCodePoint(c)+(f==c+1?"":
"-"+String.fromCodePoint(f)))}]`}eq(c){return this.inverted==c.inverted&&this.ranges.length==c.ranges.length&&this.ranges.every(([f,k],n)=>{let [x,B]=c.ranges[n];return f==x&&k==B})}}class Yc extends ra{constructor(c){super(c)}toString(){return"_"}eq(){return!0}}class jb extends lb{constructor(c,f,k,n){super(c);this.at=f;this.name=k;this.value=n}eq(c){return this.name==c.name&&this.value.length==c.value.length&&this.value.every((f,k)=>f.value==c.value[k].value&&f.name==c.value[k].name)}toString(){let c=
(this.at?"@":"")+this.name;if(this.value.length){c+="\x3d";for(let {name:f,value:k}of this.value)c+=f?`{${f}}`:/[^\w-]/.test(k)?JSON.stringify(k):k}return c}static eqProps(c,f){return c.length==f.length&&c.every((k,n)=>k.eq(f[n]))}}class Lc extends lb{constructor(c,f,k){super(c);this.value=f;this.name=k}}class Tb extends Error{}let Ec=0;class mc{constructor(c,f,k,n={}){this.name=c;this.flags=f;this.nodeName=k;this.props=n;this.hash=++Ec;this.id=-1;this.rules=[]}toString(){return this.name}get nodeType(){return this.top||
null!=this.nodeName||Fa(this.props)||this.repeated}get terminal(){return 0<(this.flags&1)}get eof(){return 0<(this.flags&4)}get error(){return"error"in this.props}get top(){return 0<(this.flags&2)}get interesting(){return 0<this.flags||null!=this.nodeName}get repeated(){return 0<(this.flags&16)}set preserve(c){this.flags=c?this.flags|8:this.flags&-9}get preserve(){return 0<(this.flags&8)}set inline(c){this.flags=c?this.flags|32:this.flags&-33}get inline(){return 0<(this.flags&32)}cmp(c){return this.hash-
c.hash}}class yd{constructor(){this.terms=[];this.names=Object.create(null);this.tops=[];this.eof=this.term("â„",null,5);this.error=this.term("âš ","âš ",8)}term(c,f,k=0,n={}){f=new mc(c,k,f,n);this.terms.push(f);return this.names[c]=f}makeTop(c,f){c=this.term("@top",c,2,f);this.tops.push(c);return c}makeTerminal(c,f,k={}){return this.term(c,f,1,k)}makeNonTerminal(c,f,k={}){return this.term(c,f,0,k)}makeRepeat(c){return this.term(c,null,16)}uniqueName(c){for(let f=0;;f++){let k=f?`${c}-${f}`:c;if(!this.names[k])return k}}finish(c){for(var f of c)f.name.rules.push(f);
this.terms=this.terms.filter(B=>B.terminal||B.preserve||c.some(O=>O.name==B||O.parts.includes(B)));f={};let k=[this.error];this.error.id=0;let n=1;for(var x of this.terms)0>x.id&&x.nodeType&&!x.repeated&&(x.id=n++,k.push(x));x=n;for(let B of this.terms)B.repeated&&(B.id=n++,k.push(B));this.eof.id=n++;for(let B of this.terms)0>B.id&&(B.id=n++),B.name&&(f[B.id]=B.name);if(65534<=n)throw new Tb("Too many terms");return{nodeTypes:k,names:f,minRepeatTerm:x,maxTerm:n-1}}}const Ub=[];class Pb{constructor(c,
f=Ub,k=0){this.precedence=c;this.ambigGroups=f;this.cut=k}join(c){return this==Pb.none||this==c?c:c==Pb.none?this:new Pb(Math.max(this.precedence,c.precedence),xa(this.ambigGroups,c.ambigGroups),Math.max(this.cut,c.cut))}cmp(c){return this.precedence-c.precedence||sa(this.ambigGroups,c.ambigGroups,(f,k)=>f<k?-1:f>k?1:0)||this.cut-c.cut}}Pb.none=new Pb(0);let id=0;class sc{constructor(c,f,k,n){this.name=c;this.parts=f;this.conflicts=k;this.skip=n;this.id=id++}cmp(c){return this.id-c.id}cmpNoName(c){return this.parts.length-
c.parts.length||this.skip.hash-c.skip.hash||this.parts.reduce((f,k,n)=>f||k.cmp(c.parts[n]),0)||sa(this.conflicts,c.conflicts,(f,k)=>f.cmp(k))}toString(){return this.name+" -\x3e "+this.parts.join(" ")}get isRepeatWrap(){return this.name.repeated&&2==this.parts.length&&this.parts[0]==this.name}sameReduce(c){return this.name==c.name&&this.parts.length==c.parts.length&&this.isRepeatWrap==c.isRepeatWrap}}class jd{constructor(c,f,k){this.from=c;this.to=f;this.target=k}toString(){return`-> ${this.target.id}[label=${JSON.stringify(0>
this.from?"Îµ":Qa(this.from)+(this.to>this.from+1?"-"+Qa(this.to-1):""))}]`}}let Vc=1;class Jb{constructor(c=[],f=Vc++){this.accepting=c;this.id=f;this.edges=[]}edge(c,f,k){this.edges.push(new jd(c,f,k))}nullEdge(c){this.edge(-1,-1,c)}compile(){function c(n){let x=f[Sa(n)]=new Jb(n.reduce((O,S)=>xa(O,S.accepting),[]),k++),B=[];for(let O of n)for(let S of O.edges)0<=S.from&&B.push(S);n=ta(B);for(let O of n)n=O.targets.sort((S,Z)=>S.id-Z.id),x.edge(O.from,O.to,f[Sa(n)]||c(n));return x}let f=Object.create(null),
k=0;return c(this.closure().sort((n,x)=>n.id-x.id))}closure(){function c(k){if(!f.includes(k)){(k.edges.some(n=>0<=n.from)||0<k.accepting.length&&!k.edges.some(n=>{a:{var x=k.accepting;n=n.target.accepting;if(x.length!=n.length)x=!1;else{for(let B=0;B<x.length;B++)if(x[B]!=n[B]){x=!1;break a}x=!0}}return x}))&&f.push(k);for(let n of k.edges)0>n.from&&c(n.target)}}let f=[];c(this);return f}findConflicts(c){function f(x,B,O,S,Z){x.id<B.id&&([x,B]=[B,x],O=-O);let ea=k.find(va=>va.a==x&&va.b==B);ea?ea.soft!=
O&&(ea.soft=0):k.push(new kd(x,B,O,na(S),Z&&na(Z)))}let k=[],n=this.cycleTerms();this.reachable((x,B)=>{if(0!=x.accepting.length){for(let O=0;O<x.accepting.length;O++)for(let S=O+1;S<x.accepting.length;S++)f(x.accepting[O],x.accepting[S],0,B);x.reachable((O,S)=>{if(O!=x)for(let Z of O.accepting){O=n.includes(Z);for(let ea of x.accepting)Z!=ea&&f(Z,ea,O||n.includes(ea)||!c(Z,ea)?0:1,B,B.concat(S))}})}});return k}cycleTerms(){let c=[];this.reachable(n=>{for(let {target:x}of n.edges)c.push(n,x)});var f=
new Map;let k=[];for(let n=0;n<c.length;){let x=c[n++],B=c[n++],O=f.get(x);O||f.set(x,O=[]);if(!O.includes(B))if(x==B)k.includes(x)||k.push(x);else{for(let S of O)c.push(x,S);O.push(B)}}f=[];for(let n of k)for(let x of n.accepting)f.includes(x)||f.push(x);return f}reachable(c){let f=[],k=[];(function B(x){c(x,k);f.push(x);for(let O of x.edges)f.includes(O.target)||(k.push(O),B(O.target),k.pop())})(this)}toString(){let c="digraph {\n";this.reachable(f=>{f.accepting.length&&(c+=`  ${f.id} [label=${JSON.stringify(f.accepting.join())}];\n`);
for(let k of f.edges)c+=`  ${f.id} ${k};\n`});return c+"}"}toArray(c,f){let k=[],n=[];this.reachable(x=>{let B=n.length,O=B+3+2*x.accepting.length;k[x.id]=B;n.push(x.stateMask(c),O,x.edges.length);x.accepting.sort((S,Z)=>f.indexOf(S.id)-f.indexOf(Z.id));for(let S of x.accepting)n.push(S.id,c[S.id]||65535);for(let S of x.edges)n.push(S.from,S.to,-S.target.id-1)});for(let x=0;x<n.length;x++)0>n[x]&&(n[x]=k[-n[x]-1]);if(65536<n.length)throw new Tb("Tokenizer tables too big to represent with 16-bit offsets.");
return Uint16Array.from(n)}stateMask(c){let f=0;this.reachable(k=>{for(let n of k.accepting)f|=c[n.id]||65535});return f}}class kd{constructor(c,f,k,n,x){this.a=c;this.b=f;this.soft=k;this.exampleA=n;this.exampleB=x}}class tc{constructor(c,f,k){this.from=c;this.to=f;this.targets=k}}let Cb=/[\w_-]+/gy;try{Cb=/[\p{Alphabetic}\d_-]+/ugy}catch(c){}const ob=[];class ld{constructor(c,f=null){this.string=c;this.fileName=f;this.type="sof";this.value=null;this.end=this.start=0;this.next()}lineInfo(c){for(let f=
1,k=0;;){let n=this.string.indexOf("\n",k);if(-1<n&&n<c)++f,k=n+1;else return{line:f,ch:c-k}}}message(c,f=-1){let k=this.fileName||"";-1<f&&(f=this.lineInfo(f),k+=(k?" ":"")+f.line+":"+f.ch);return k?c+` (${k})`:c}raise(c,f=-1){throw new Tb(this.message(c,f));}match(c,f){return(f=f.exec(this.string.slice(c)))?c+f[0].length:-1}next(){let c=this.match(this.end,/^(\s|\/\/.*|\/\*[^]*?\*\/)*/);if(c==this.string.length)return this.set("eof",null,c,c);var f=this.string[c];if('"'==f)return f=this.match(c+
1,/^(\\.|[^"])*"/),-1==f&&this.raise("Unterminated string literal",c),this.set("string",L(this.string.slice(c+1,f-1)),c,f);if("'"==f)return f=this.match(c+1,/^(\\.|[^'])*'/),-1==f&&this.raise("Unterminated string literal",c),this.set("string",L(this.string.slice(c+1,f-1)),c,f);if("@"==f)return Cb.lastIndex=c+1,(f=Cb.exec(this.string))?this.set("at",f[0],c,c+1+f[0].length):this.raise("@ without a name",c);if("$"!=f&&"!"!=f||"["!=this.string[c+1]){if(/[\[\]()!~+*?{}<>\.,|:$=]/.test(f))return this.set(f,
null,c,c+1);{Cb.lastIndex=c;let k=Cb.exec(this.string);return k?this.set("id",k[0],c,c+k[0].length):this.raise("Unexpected character "+JSON.stringify(f),c)}}f=this.match(c+2,/^(?:\\.|[^\]])*\]/);-1==f&&this.raise("Unterminated character set",c);return this.set("set",this.string.slice(c+2,f-1),c,f)}set(c,f,k,n){this.type=c;this.value=f;this.start=k;this.end=n}eat(c,f=null){if(this.type!=c||null!=f&&this.value!==f)return!1;this.next();return!0}unexpected(){return this.raise(`Unexpected token '${this.string.slice(this.start,
this.end)}'`,this.start)}expect(c,f=null){let k=this.value;(this.type!=c||null!=f&&k!==f)&&this.unexpected();this.next();return k}parse(){{var c=this.start;let B=[];var f=null,k=null;let O=null,S=[],Z=[],ea=[],va=[],Ea=[],Aa=[],Ua=[],Ia=!1;for(;"eof"!=this.type;){var n=this.start;if("at"==this.type&&"top"==this.value)this.next(),"id"!=this.type&&this.raise("Top rules must have a name",this.start),n=R(this),Ua.length&&"@top"===n.name&&this.raise("Unnamed secondary @top declaration",this.start),Ua.push(ya(this,
n));else if("at"==this.type&&"tokens"==this.value)if(k)this.raise("Multiple @tokens declaractions",this.start);else{{k=this.start;this.next();this.expect("{");n=[];var x=[];let Wa=[],yb=[];for(;!this.eat("}");)"at"==this.type&&"precedence"==this.value?Wa.push(I(this)):"at"==this.type&&"conflict"==this.value?yb.push(r(this)):"string"==this.type?x.push(new xc(this.start,this.expect("string"),Ga(this))):n.push(ya(this));k=new wc(k,Wa,yb,n,x)}}else if(this.eat("at","external"))this.eat("id","tokens")?
ea.push(p(this,n)):this.eat("id","grammar")?Ea.push(q(this,n)):this.eat("id","prop")?Aa.push(u(this,n)):this.eat("id","extend")?va.push(h(this,"extend",n)):this.eat("id","specialize")?va.push(h(this,"specialize",n)):this.unexpected();else if(this.eat("at","dialects"))for(this.expect("{"),n=!0;!this.eat("}");n=!1)n||this.eat(","),Z.push(R(this));else if("at"==this.type&&"precedence"==this.value){f&&this.raise("Multiple precedence declarations",this.start);f=this.start;this.next();this.expect("{");
for(n=[];!this.eat("}");)n.length&&this.eat(","),n.push({id:R(this),type:this.eat("at","left")?"left":this.eat("at","right")?"right":this.eat("at","cut")?"cut":null});f=new hc(f,n)}else if(this.eat("at","detectDelim"))Ia=!0;else if(this.eat("at","skip"))if(n=ca(this),"{"==this.type){this.next();for(x=[];!this.eat("}");)x.push(ya(this));S.push({expr:n,rules:x})}else O&&this.raise("Multiple top-level skip declarations",this.start),O=n;else B.push(ya(this))}c=Ua.length?new Dc(c,B,Ua,k,ea,va,f,O,S,Z,
Ea,Aa,Ia):this.raise("Missing @top declaration")}return c}}class uc{constructor(c,f,k,n,x,B){this.rule=c;this.pos=f;this.ahead=k;this.ambigAhead=n;this.skipAhead=x;this.via=B;this.hash=0}finish(){var c=E(E(this.rule.id,this.pos),this.skipAhead.hash);for(var f of this.ahead)c=E(c,f.hash);for(let k of this.ambigAhead){f=k;for(let n=0;n<f.length;n++)c=E(c,f.charCodeAt(n))}this.hash=c;return this}get next(){return this.pos<this.rule.parts.length?this.rule.parts[this.pos]:null}advance(){return(new uc(this.rule,
this.pos+1,this.ahead,this.ambigAhead,this.skipAhead,this.via)).finish()}get skip(){return this.pos==this.rule.parts.length?this.skipAhead:this.rule.skip}cmp(c){return this.rule.cmp(c.rule)||this.pos-c.pos||this.skipAhead.hash-c.skipAhead.hash||sa(this.ahead,c.ahead,(f,k)=>f.cmp(k))||sa(this.ambigAhead,c.ambigAhead,Q)}eqSimple(c){return c.rule==this.rule&&c.pos==this.pos}toString(){let c=this.rule.parts.map(f=>f.name);c.splice(this.pos,0,"Â·");return`${this.rule.name} -> ${c.join(" ")}`}eq(c){return this==
c||this.hash==c.hash&&this.rule==c.rule&&this.pos==c.pos&&this.skipAhead==c.skipAhead&&ha(this.ahead,c.ahead)&&ha(this.ambigAhead,c.ambigAhead)}trail(c=60){var f=[];for(let k=this;k;k=k.via)for(let n=k.pos-1;0<=n;n--)f.push(k.rule.parts[n]);f=f.reverse().join(" ");f.length>c&&(f=f.slice(f.length-c).replace(/.*? /,"â€¦ "));return f}conflicts(c=this.pos){let f=this.rule.conflicts[c];c==this.rule.parts.length&&this.ambigAhead.length&&(f=f.join(new Pb(0,this.ambigAhead)));return f}static addOrigins(c,f){c=
c.slice();for(let k=0;k<c.length;k++){let n=c[k];if(0==n.pos)for(let x of f)x.next!=n.rule.name||c.includes(x)||c.push(x)}return c}}class Zb{constructor(c,f){this.term=c;this.target=f}eq(c){return c instanceof Zb&&this.term==c.term&&c.target.id==this.target.id}cmp(c){return c instanceof Cc?-1:this.term.id-c.term.id||this.target.id-c.target.id}toString(){return"s"+this.target.id}map(c,f){c=f[c[this.target.id]];return c==this.target?this:new Zb(this.term,c)}}class Cc{constructor(c,f){this.term=c;this.rule=
f}eq(c){return c instanceof Cc&&this.term==c.term&&c.rule.sameReduce(this.rule)}cmp(c){return c instanceof Zb?1:this.term.id-c.term.id||this.rule.name.id-c.rule.name.id||this.rule.parts.length-c.rule.parts.length}toString(){return`${this.rule.name.name}(${this.rule.parts.length})`}map(){return this}}class Zc{constructor(c,f,k=0,n,x=ua(f),B=null){this.id=c;this.set=f;this.flags=k;this.skip=n;this.hash=x;this.startRule=B;this.actions=[];this.actionPositions=[];this.goto=[];this.tokenGroup=-1;this.defaultReduce=
null;this.nested=-1}toString(){let c=this.actions.map(f=>f.term+"\x3d"+f).join(",")+(this.goto.length?" | "+this.goto.map(f=>f.term+"\x3d"+f).join(","):"");return this.id+": "+this.set.filter(f=>0<f.pos).join()+(this.defaultReduce?`\n  always ${this.defaultReduce.name}(${this.defaultReduce.parts.length})`:c.length?"\n  "+c:"")}addActionInner(c,f){for(let n=0;n<this.actions.length;n++){let x=this.actions[n];if(x.term==c.term){if(x.eq(c))return null;var k=uc.addOrigins(f,this.set);let B=uc.addOrigins(this.actionPositions[n],
this.set),O=C(k),S=C(B);k=G(k,B)||O.precedence-S.precedence;if(0<k)this.actions.splice(n,1),this.actionPositions.splice(n,1),n--;else{if(0>k)return null;if(!O.ambigGroups.some(Z=>S.ambigGroups.includes(Z)))return x}}}this.actions.push(c);this.actionPositions.push(f);return null}addAction(c,f,k){var n=this.addActionInner(c,f);if(n){let x=this.actionPositions[this.actions.indexOf(n)][0],B=[f[0].rule.name,x.rule.name];k.some(O=>O.rules.some(S=>B.includes(S)))||(n=n instanceof Zb?`shift/reduce conflict between\n  ${x}\nand\n  ${f[0].rule}`:
`reduce/reduce conflict between\n  ${x.rule}\nand\n  ${f[0].rule}`,n+=`\nWith input:\n  ${f[0].trail(70)} Â· ${c.term} â€¦`,n+=cb(x,f[0]),k.push(new zd(n,B)))}}getGoto(c){return this.goto.find(f=>f.term==c)}hasSet(c){return ba(this.set,c)}finish(){if(this.actions.length){let c=this.actions[0];if(c instanceof Cc){let {rule:f}=c;this.actions.every(k=>k instanceof Cc&&k.rule.sameReduce(f))&&(this.defaultReduce=f)}}this.actions.sort((c,f)=>c.cmp(f));this.goto.sort((c,f)=>c.cmp(f))}eq(c){let f=this.defaultReduce,
k=c.defaultReduce;return f||k?f&&k?f.sameReduce(k):!1:this.skip==c.skip&&this.tokenGroup==c.tokenGroup&&ba(this.actions,c.actions)&&ba(this.goto,c.goto)}}class Rc{constructor(c,f){this.set=c;this.state=f}}class zd{constructor(c,f){this.error=c;this.rules=f}}class $c{constructor(c,f){this.origin=c;this.members=[f]}}const jc=[],Gb=[],Sc="undefined"!=typeof ab&&ab.env.LOG||"";class pc{constructor(c,f){this.terms=c;this.conflicts=f}concat(c){if(this==pc.none)return c;if(c==pc.none)return this;let f=null;
if(this.conflicts||c.conflicts){f=this.conflicts?this.conflicts.slice():this.ensureConflicts();let k=c.ensureConflicts();f[f.length-1]=f[f.length-1].join(k[0]);for(let n=1;n<k.length;n++)f.push(k[n])}return new pc(this.terms.concat(c.terms),f)}withConflicts(c,f){if(f==Pb.none)return this;let k=this.conflicts?this.conflicts.slice():this.ensureConflicts();k[c]=k[c].join(f);return new pc(this.terms,k)}ensureConflicts(){if(this.conflicts)return this.conflicts;let c=[];for(let f=0;f<=this.terms.length;f++)c.push(Pb.none);
return c}}pc.none=new pc(Gb,null);class Mc{constructor(c,f,k){this.id=c;this.args=f;this.term=k}matches(c){return this.id==c.id.name&&Ba(c.args,this.args)}matchesRepeat(c){return"+"==this.id&&Na(c.expr,this.args[0])}}class Sb{constructor(c,f){this.options=f;this.terms=new yd;this.nestedGrammars=[];this.specialized=Object.create(null);this.tokenOrigins=Object.create(null);this.rules=[];this.built=[];this.ruleNames=Object.create(null);this.namespaces=Object.create(null);this.namedTerms=Object.create(null);
this.termTable=Object.create(null);this.knownProps=Object.create(null);this.dynamicRulePrecedences=[];this.definedGroups=[];this.astRules=[];this.currentSkip=[];this.input=new ld(c,f.fileName);this.ast=this.input.parse();c=nb.NodeProp;for(var k in c)c[k]instanceof nb.NodeProp&&(this.knownProps[k]={prop:c[k],source:{name:k,from:null}});for(var n of this.ast.externalProps)this.knownProps[n.id.name]={prop:this.options.externalProp?this.options.externalProp(n.id.name):nb.NodeProp.string(),source:{name:n.externalID.name,
from:n.source}};this.dialects=this.ast.dialects.map(ea=>ea.name);this.tokens=new ed(this,this.ast.tokens);this.externalTokens=this.ast.externalTokens.map(ea=>new bd(this,ea));this.externalSpecializers=this.ast.externalSpecializers.map(ea=>new Tc(this,ea));this.defineNamespace("nest",new nd);for(let ea of this.ast.grammars)this.ast.grammars.some(va=>va!=ea&&va.id.name==ea.id.name)&&this.raise(`Duplicate external grammar name '${ea.id.name}'`,ea.id.start);k=this.newName("%noskip",!0);this.defineRule(k,
[]);n=this.ast.mainSkip?this.newName("%mainskip",!0):k;let x=[];for(var B of this.ast.rules)this.astRules.push({skip:n,rule:B});for(let ea of this.ast.scopedSkip){B=k;c=this.ast.scopedSkip.findIndex((va,Ea)=>Ea<x.length&&Na(va.expr,ea.expr));-1<c?B=x[c]:this.ast.mainSkip&&Na(ea.expr,this.ast.mainSkip)?B=n:Ca(ea.expr)||(B=this.newName("%skip",!0));x.push(B);for(var O of ea.rules)this.astRules.push({skip:B,rule:O})}for(var {rule:S}of this.astRules)this.unique(S.id),this.namespaces[S.id.name]&&this.raise(`Rule name '${S.id.name}' conflicts with a defined namespace`,
S.id.start);this.currentSkip.push(k);this.skipRules=n==k?[n]:[k,n];n!=k&&this.defineRule(n,this.normalizeExpr(this.ast.mainSkip));for(O=0;O<this.ast.scopedSkip.length;O++)S=x[O],this.skipRules.includes(S)||(this.skipRules.push(S),S!=k&&this.defineRule(S,this.normalizeExpr(this.ast.scopedSkip[O].expr)));this.currentSkip.pop();for(var Z of this.ast.topRules){this.currentSkip.push(n);let {name:ea,props:va}=this.nodeInfo(Z.props,"",Z.id.name,Gb,Gb,Z.expr);this.defineRule(this.terms.makeTop(ea,va),this.normalizeExpr(Z.expr));
this.currentSkip.pop()}for(let ea of this.externalSpecializers)ea.finish();for(let {skip:ea,rule:va}of this.astRules)this.ruleNames[va.id.name]&&eb(va)&&!va.params.length&&(this.buildRule(va,[],ea,!1),va.expr instanceof db&&0==va.expr.exprs.length&&this.used(va.id.name));for(let ea in this.ruleNames)(Z=this.ruleNames[ea])&&this.warn(`Unused rule '${Z.name}'`,Z.start);this.tokens.takePrecedences();this.tokens.takeConflicts();for(let {name:ea,group:va,rule:Ea}of this.definedGroups)this.defineGroup(ea,
va,Ea);this.checkGroups()}unique(c){c.name in this.ruleNames&&this.raise(`Duplicate definition of rule '${c.name}'`,c.start);this.ruleNames[c.name]=c}used(c){this.ruleNames[c]=null}defineNamespace(c,f,k=0){this.namespaces[c]&&this.raise(`Duplicate definition of namespace '${c}'`,k);this.namespaces[c]=f}newName(c,f=null,k={}){for(let n=f?0:1;;n++){let x=n?`${c}-${n}`:c;if(!this.terms.names[x])return this.terms.makeNonTerminal(x,!0===f?null:f,k)}}prepareParser(){var c=$a(this.rules,[...this.skipRules,
...this.nestedGrammars.map(ib=>ib.placeholder),...this.terms.tops]);let {nodeTypes:f,names:k,minRepeatTerm:n,maxTerm:x}=this.terms.finish(c);for(var B in this.namedTerms)this.termTable[B]=this.namedTerms[B].id;/\bgrammar\b/.test(Sc)&&console.log(c.join("\n"));let O=this.terms.tops.slice(),S=gb(this.terms);B=this.skipRules.map((ib,Hb)=>{let $b=[],fc=[],Fb=[];for(let Rb of ib.rules){if(!Rb.parts.length)continue;let ac=Rb.parts[0];for(let gc of ac.terminal?[ac]:S[ac.name]||[])fc.includes(gc)||fc.push(gc);
ac.terminal&&1==Rb.parts.length&&!Fb.some(gc=>gc!=Rb&&gc.parts[0]==ac)?$b.push(ac):Fb.push(Rb)}ib.rules=Fb;Fb.length&&O.push(ib);return{skip:$b,rule:Fb.length?ib:null,startTokens:fc,id:Hb}});c=sb(this.terms,O,S);let {tokenGroups:Z,tokenPrec:ea,tokenData:va}=this.tokens.buildTokenGroups(c,B),Ea=vb(tb(c));var Aa=aa(Ea,this.terms.tops);this.addNestedGrammars(Ea);/\blr\b/.test(Sc)&&console.log(Ea.join("\n"));c=[];for(var Ua of this.externalSpecializers)c.push(Ua);for(var Ia in this.specialized)c.push({token:this.terms.names[Ia],
table:oc(this.specialized[Ia])});let Wa=ib=>ib instanceof lc?ib.start:this.tokens.ast?this.tokens.ast.start:-1;Ua=Z.concat(this.externalTokens.map(ib=>ib.ast)).sort((ib,Hb)=>Wa(ib)-Wa(Hb));let yb=new md,Qb=B.map(ib=>{let Hb=[];for(var $b of ib.skip)Hb.push($b.id,0,4);if(ib.rule){$b=Ea.find(fc=>fc.startRule==ib.rule);for(let fc of $b.actions)Hb.push(fc.term.id,$b.id,2)}Hb.push(65535,0);return yb.storeArray(Hb)});Ia=new Uint32Array(6*Ea.length);var hb=this.computeForceReductions(Ea,B);B=new dd(Ua,yb,
Ia,Qb,B,Ea,this);for(var mb of Ea)B.finish(mb,Aa(mb.id),hb[mb.id]);mb=Object.create(null);for(B=0;B<this.dialects.length;B++)mb[this.dialects[B]]=yb.storeArray((this.tokens.byDialect[B]||Gb).map(ib=>ib.id).concat(65535));B=null;if(this.dynamicRulePrecedences.length){B=Object.create(null);for(let {rule:ib,prec:Hb}of this.dynamicRulePrecedences)B[ib.id]=Hb}Aa=Object.create(null);for(let ib of this.terms.tops)Aa[ib.nodeName]=[Ea.find(Hb=>Hb.startRule==ib).id,ib.id];hb=yb.storeArray(ea.concat(65535));
let {nodeProps:Xb,skippedTypes:vc}=this.gatherNodeProps(f);return{states:Ia,stateData:yb.finish(),goto:N(Ea),nodeNames:f.filter(ib=>ib.id<n).map(ib=>ib.nodeName).join(" "),nodeProps:Xb,skippedTypes:vc,maxTerm:x,repeatNodeCount:f.length-n,tokenizers:Ua,tokenData:va,topRules:Aa,dialects:mb,dynamicPrecedences:B,specialized:c,tokenPrec:hb,termNames:k}}getParser(){let {states:c,stateData:f,goto:k,nodeNames:n,nodeProps:x,skippedTypes:B,maxTerm:O,repeatNodeCount:S,tokenizers:Z,tokenData:ea,topRules:va,dialects:Ea,
dynamicPrecedences:Aa,specialized:Ua,tokenPrec:Ia,termNames:Wa}=this.prepareParser(),yb=Ua.map(hb=>{if(hb instanceof Tc){let mb=this.options.externalSpecializer(hb.ast.id.name,this.termTable);return{term:hb.term.id,get:(Xb,vc)=>mb(Xb,vc)<<1|("extend"==hb.ast.type?1:0)}}return{term:hb.token.id,get:mb=>hb.table[mb]||-1}}),Qb=Z.map(hb=>hb instanceof lc?this.options.externalTokenizer(hb.id.name,this.termTable):hb.id);return nb.Parser.deserialize({version:12,states:c,stateData:f,goto:k,nodeNames:n,maxTerm:O,
repeatNodeCount:S,nodeProps:x.map(({prop:hb,terms:mb})=>[this.knownProps[hb].prop,...mb]),skippedNodes:B,tokenData:ea,tokenizers:Qb,topRules:va,nested:this.nestedGrammars.map(hb=>[hb.name,hb.source?this.options.nestedGrammar(hb.name,this.termTable):null,hb.end.compile().toArray({},Gb),hb.placeholder.id]),dialects:Ea,dynamicPrecedences:Aa,specialized:yb,tokenPrec:Ia,termNames:Wa})}getParserFile(){function c(Za){return"{__proto__:null,"+Object.keys(Za).map(rb=>`${/\W/.test(rb)?JSON.stringify(rb):rb}:${Za[rb]}`).join(", ")+
"}"}function f(Za){return"string"!=typeof Za||/^(true|false|\d+(\.\d+)?|\.\d+)$/.test(Za)?Za:JSON.stringify(Za)}let {states:k,stateData:n,goto:x,nodeNames:B,nodeProps:O,skippedTypes:S,maxTerm:Z,repeatNodeCount:ea,tokenizers:va,tokenData:Ea,topRules:Aa,dialects:Ua,dynamicPrecedences:Ia,specialized:Wa,tokenPrec:yb,termNames:Qb}=this.prepareParser(),hb=this.options.moduleStyle||"es",mb;mb="// This file was generated by lezer-generator. You probably shouldn't edit it.\n"+("cjs"==hb?'const {Parser} \x3d require("lezer")\n':
'import {Parser} from "lezer"\n');let Xb={},vc=Object.create(null),ib=Object.create(null);ib.Parser=!0;let Hb=Za=>{for(let rb=0;;rb++){let Jc=Za+(rb?"_"+rb:"");if(!ib[Jc])return Jc}},$b=(Za,rb,Jc)=>{let Uc=Za+" from "+rb;if(vc[Uc])return vc[Uc];rb=JSON.stringify(rb);let cd=Za;Za in ib&&(cd=Hb(Jc),Za+=`${"cjs"==hb?":":" as"} ${cd}`);(Xb[rb]||(Xb[rb]=[])).push(Za);return vc[Uc]=cd};var fc=va.map(Za=>{if(Za instanceof lc){let {source:rb,id:{name:Jc}}=Za;return $b(Jc,rb,"tok")}return Za.id}),Fb=this.nestedGrammars.map(Za=>
`[${JSON.stringify(Za.name)}, ${Za.source?$b(Za.extName,Za.source,Za.name):"null"},\
${Ab(Za.end.compile().toArray({},Gb))}, ${Za.placeholder.id}]`),Rb=O.map(({prop:Za,terms:rb})=>{({source:Za}=this.knownProps[Za]);return`[${Za.from?$b(Za.name,Za.from,"prop"):$b("NodeProp","lezer","NodeProp")+"."+Za.name}, ${rb.map(f).join(",")}]`});let ac="";var gc=Wa.map(Za=>{if(Za instanceof Tc){var rb=$b(Za.ast.id.name,Za.ast.source,Za.ast.id.name);return`{term: ${Za.term.id}, get: (value, stack) => (${rb}(value, stack) << 1)${"extend"==Za.ast.type?" | 1":""}}`}rb=Hb("spec_"+Za.token.name.replace(/\W/g,
""));ac+=`const ${rb} = ${c(Za.table)}\n`;return`{term: ${Za.token.id}, get: value => ${rb}[value] || -1}`});for(var qc in Xb)mb="cjs"==hb?mb+`const {${Xb[qc].join(", ")}} = require(${qc})\n`:mb+`import {${Xb[qc].join(", ")}} from ${qc}\n`;mb+=ac;qc=Object.keys(Ua).map(Za=>`${Za}: ${Ua[Za]}`);fc=`Parser.deserialize({
  version: ${12},
  states: ${Ab(k,4294967295)},
  stateData: ${Ab(n)},
  goto: ${Ab(x)},
  nodeNames: ${JSON.stringify(B)},
  maxTerm: ${Z}${Rb.length?`,
  nodeProps: [
    ${Rb.join(",\n    ")}
  ]`:""}${S.length?`,
  skippedNodes: ${JSON.stringify(S)}`:""},
  repeatNodeCount: ${ea},
  tokenData: ${Ab(Ea)},
  tokenizers: [${fc.join(", ")}],
  topRules: ${JSON.stringify(Aa)}${Fb.length?`,
  nested: [${Fb.join(", ")}]`:""}${qc.length?`,
  dialects: {${qc.join(", ")}}`:""}${Ia?`,
  dynamicPrecedences: ${JSON.stringify(Ia)}`:""}${gc.length?`,
  specialized: [${gc.join(",")}]`:""},
  tokenPrec: ${yb}${this.options.includeNames?`,
  termNames: ${JSON.stringify(Qb)}`:""}
})`;Fb=[];for(var nc in this.termTable){Rb=nc;if(Ic.includes(Rb))for(gc=1;Rb="_".repeat(gc)+nc,Rb in this.termTable;gc++);Fb.push(`${Rb}${"cjs"==hb?":":" \x3d"} ${this.termTable[nc]}`)}for(nc=0;nc<this.dialects.length;nc++)Fb.push(`Dialect_${this.dialects[nc]}${"cjs"==hb?":":" \x3d"} ${nc}`);nc=this.options.exportName||"parser";return{parser:mb+("cjs"==hb?`exports.${nc} = ${fc}\n`:`export const ${nc} = ${fc}\n`),terms:"cjs"==hb?`${"// This file was generated by lezer-generator. You probably shouldn't edit it.\n"}module.exports = {\n  ${Fb.join(",\n  ")}\n}`:
`${"// This file was generated by lezer-generator. You probably shouldn't edit it.\n"}export const\n  ${Fb.join(",\n  ")}\n`}}gatherNonSkippedNodes(){let c=Object.create(null),f=[],k=n=>{c[n.id]||(c[n.id]=!0,f.push(n))};this.terms.tops.forEach(k);for(let n=0;n<f.length;n++)for(let x of f[n].rules)for(let B of x.parts)k(B);return c}gatherNodeProps(c){let f=this.gatherNonSkippedNodes(),k=[],n=[];for(let x of c){f[x.id]||x.error||k.push(x.id);for(let B in x.props){c=this.knownProps[B];if(!c)throw new Tb("No known prop type for "+
B);if(null!=c.source.from||"repeated"!=c.source.name&&"error"!=c.source.name)(c=n.find(O=>O.prop==B))||n.push(c={prop:B,values:{}}),(c.values[x.props[B]]||(c.values[x.props[B]]=[])).push(x.id)}}return{nodeProps:n.map(({prop:x,values:B})=>{let O=[];for(let S in B){let Z=B[S];if(1==Z.length)O.push(Z[0],S);else{O.push(-Z.length);for(let ea of Z)O.push(ea);O.push(S)}}return{prop:x,terms:O}}),skippedTypes:k}}addNestedGrammars(c){for(let f of c)if(c=f.set.filter(k=>this.nestedGrammars.some(n=>n.placeholder==
k.next)),c.length){let k=c[0].next;c.every(n=>n.next==k)||this.raise(`Multiple nested grammars possible after ${c[0].trail()}`);f.set.every(n=>n.next==k||0==n.pos&&f.set.some(x=>x.next==n.rule.name))||this.raise(`Nested grammar in ambiguous position after ${c[0].trail()} `+f.set);f.nested=this.nestedGrammars.findIndex(n=>n.placeholder==k)}}makeTerminal(c,f,k){return this.terms.makeTerminal(this.terms.uniqueName(c),f,k)}computeForceReductions(c,f){function k(va,Ea,Aa=null){return(va=B[va])?va.some(Ua=>
{let Ia=Aa?Aa.filter(yb=>Ua.parents.includes(yb)):Ua.parents;if(0==Ia.length)return!1;if(Ua.target==Ea)return!0;let Wa=ea[Ua.target];return null!=Wa&&k(Wa,Ea,Ia)}):!1}let n=[],x=[],B=Object.create(null);for(var O of c){n.push(0);for(let va of O.goto){var S=B[va.term.id]||(B[va.term.id]=[]),Z=S.find(Ea=>Ea.target==va.target.id);Z?Z.parents.push(O.id):S.push({parents:[O.id],target:va.target.id})}x[O.id]=O.set.filter(va=>0<va.pos&&!va.rule.name.top).sort((va,Ea)=>Ea.pos-va.pos||va.rule.parts.length-
Ea.rule.parts.length)}let ea=Object.create(null);for(let va of c)va.defaultReduce&&0<va.defaultReduce.parts.length&&(n[va.id]=bc(va.defaultReduce,f),1==va.defaultReduce.parts.length&&(ea[va.id]=va.defaultReduce.name.id));for(O=1;;O++){S=!0;for(let va of c)if(!va.defaultReduce)if(Z=x[va.id],Z.length!=O)Z.length>O&&(S=!1);else for(let Ea of Z)if(1!=Ea.pos||!k(Ea.rule.name.id,va.id)){n[va.id]=bc(Ea.rule,f,Ea.pos);1==Ea.pos&&(ea[va.id]=Ea.rule.name.id);break}if(S)break}return n}substituteArgs(c,f,k){return 0==
f.length?c:c.walk(n=>{var x;if(n instanceof pa&&!n.namespace&&-1<(x=k.findIndex(B=>B.name==n.id.name))){x=f[x];if(n.args.length){if(x instanceof pa&&!x.args.length)return new pa(n.start,x.namespace,x.id,n.args);this.raise("Passing arguments to a parameter that already has arguments",n.start)}return x}if(n instanceof bb){x=n.rule;let B=this.substituteArgsInProps(x.props,f,k);return B==x.props?n:new bb(n.start,new ub(x.start,x.id,B,x.params,x.expr))}return n instanceof Ka?(x=this.substituteArgsInProps(n.props,
f,k),x==n.props?n:new Ka(n.start,n.type,x,n.token,n.content)):n})}substituteArgsInProps(c,f,k){let n=B=>{let O=B;for(let Z=0;Z<B.length;Z++){let ea=B[Z];if(ea.name){var S=k.findIndex(va=>va.name==ea.name);0>S||(O==B&&(O=B.slice()),S=f[S],S instanceof pa&&!S.namespace&&!S.args.length?O[Z]=new Lc(ea.start,S.id.name,null):S instanceof Yb?O[Z]=new Lc(ea.start,S.value,null):this.raise(`Trying to interpolate expression '${S}' into a prop`,ea.start))}}return O},x=c;for(let B=0;B<c.length;B++){let O=c[B],
S=n(O.value);S!=O.value&&(x==c&&(x=c.slice()),x[B]=new jb(O.start,O.at,O.name,S))}return x}conflictsFor(c){let f=Pb.none,k=Pb.none;for(let x of c)if("ambig"==x.type)f=f.join(new Pb(0,[x.id.name]));else{var n=this.ast.precedences;let B=n?n.items.findIndex(O=>O.id.name==x.id.name):-1;0>B&&this.raise(`Reference to unknown precedence: '${x.id.name}'`,x.id.start);c=n.items[B];n=n.items.length-B;"cut"==c.type?f=f.join(new Pb(0,Gb,n)):(f=f.join(new Pb(n<<2)),k=k.join(new Pb((n<<2)+("left"==c.type?1:"right"==
c.type?-1:0))))}return{here:f,atEnd:k}}raise(c,f=1){return this.input.raise(c,f)}warn(c,f=-1){c=this.input.message(c,f);this.options.warn?this.options.warn(c):console.warn(c)}defineRule(c,f){let k=this.currentSkip[this.currentSkip.length-1];for(let n of f)this.rules.push(new sc(c,n.terms,n.ensureConflicts(),k))}resolve(c){if(c.namespace){var f=this.namespaces[c.namespace.name];f||this.raise(`Reference to undefined namespace '${c.namespace.name}'`,c.start);return f.resolve(c,this)}for(var k of this.built)if(k.matches(c))return[wb(k.term)];
if(k=this.tokens.getToken(c))return[wb(k)];for(var n of this.externalTokens)if(k=n.getToken(c))return[wb(k)];for(f of this.externalSpecializers)if(n=f.getToken(c))return[wb(n)];f=this.astRules.find(x=>x.rule.id.name==c.id.name);if(!f)return this.raise(`Reference to undefined rule '${c.id.name}'`,c.start);f.rule.params.length!=c.args.length&&this.raise(`Wrong number or arguments for '${c.id.name}'`,c.start);this.used(f.rule.id.name);return[wb(this.buildRule(f.rule,c.args,f.skip))]}normalizeRepeat(c){var f=
this.built.find(k=>k.matchesRepeat(c));if(f)return wb(f.term);f=this.terms.makeRepeat(this.terms.uniqueName(c.expr.prec<c.prec?`(${c.expr})+`:`${c.expr}+`));this.built.push(new Mc("+",[c.expr],f));this.defineRule(f,this.normalizeExpr(c.expr).concat(wb(f,f)));return wb(f)}normalizeSequence(c){function f(x,B,O){let {here:S,atEnd:Z}=n.conflictsFor(c.markers[B]);if(B==k.length)return[x.withConflicts(x.terms.length,S.join(O))];let ea=[];for(let va of k[B])for(let Ea of f(x.concat(va).withConflicts(x.terms.length,
S),B+1,O.join(Z)))ea.push(Ea);return ea}let k=c.exprs.map(x=>this.normalizeExpr(x)),n=this;return f(pc.none,0,Pb.none)}normalizeExpr(c){if(c instanceof ec&&"?"==c.kind)return[pc.none,...this.normalizeExpr(c.expr)];if(c instanceof ec){let f=this.normalizeRepeat(c);return"+"==c.kind?[f]:[pc.none,f]}return c instanceof fb?c.exprs.reduce((f,k)=>f.concat(this.normalizeExpr(k)),[]):c instanceof db?this.normalizeSequence(c):c instanceof Yb?[wb(this.tokens.getLiteral(c))]:c instanceof pa?this.resolve(c):
c instanceof Ka?[wb(this.resolveSpecialization(c))]:c instanceof bb?[wb(this.buildRule(c.rule,Gb,this.currentSkip[this.currentSkip.length-1],!0))]:this.raise(`This type of expression ('${c}') may not occur in non-token rules`,c.start)}buildRule(c,f,k,n=!1){let x=this.substituteArgs(c.expr,f,c.params),{name:B,props:O,dynamicPrec:S,inline:Z,group:ea,exported:va}=this.nodeInfo(c.props||Gb,n?"pg":"pgi",c.id.name,f,c.params,c.expr);va&&c.params.length&&this.warn("Can't export parameterized rules",c.start);
let Ea=this.newName(c.id.name+(f.length?"\x3c"+f.join(",")+"\x3e":""),B||!0,O);Z&&(Ea.inline=!0);S&&this.registerDynamicPrec(Ea,S);(Ea.nodeType||va)&&0==c.params.length&&(B||(Ea.preserve=!0),this.namedTerms[c.id.name]=Ea);n||this.built.push(new Mc(c.id.name,f,Ea));this.currentSkip.push(k);this.defineRule(Ea,this.normalizeExpr(x));this.currentSkip.pop();ea&&this.definedGroups.push({name:Ea,group:ea,rule:c});return Ea}nodeInfo(c,f,k=null,n=Gb,x=Gb,B,O){let S={};var Z;(Z=k)&&!(Z=null===O||void 0===O?
void 0:O.top)&&(Z=k[0],Z="_"==Z||Z.toUpperCase()!=Z,Z=!Z);Z=Z&&!/ /.test(k)?k:null;var ea=null;let va=0,Ea=!1,Aa=null,Ua=!1;for(let Ia of c)if(Ia.at)"name"==Ia.name?(Z=this.finishProp(Ia,n,x),/ /.test(Z)&&this.raise(`Node names cannot have spaces ('${Z}')`,Ia.start)):"dialect"==Ia.name?(0>f.indexOf("d")&&this.raise("Can't specify a dialect on non-token rules",c[0].start),1==Ia.value.length||Ia.value[0].value||this.raise("The '@dialect' rule prop must hold a plain string value"),ea=this.dialects.indexOf(Ia.value[0].value),
0>ea&&this.raise(`Unknown dialect '${Ia.value[0].value}'`,Ia.value[0].start)):"dynamicPrecedence"==Ia.name?(0>f.indexOf("p")&&this.raise("Dynamic precedence can only be specified on nonterminals"),1==Ia.value.length&&/^-?(?:10|\d)$/.test(Ia.value[0].value)||this.raise("The '@dynamicPrecedence' rule prop must hold an integer between -10 and 10"),va=+Ia.value[0].value):"inline"==Ia.name?(Ia.value.length&&this.raise("'@inline' doesn't take a value",Ia.value[0].start),0>f.indexOf("i")&&this.raise("Inline can only be specified on nonterminals"),
Ea=!0):"isGroup"==Ia.name?(0>f.indexOf("g")&&this.raise("'@isGroup' can only be specified on nonterminals"),Aa=Ia.value.length?this.finishProp(Ia,n,x):k):"export"==Ia.name?(Ia.value.length&&this.raise("'@export' doesn't take a value",Ia.value[0].start),Ua=!0):this.raise(`Unknown built-in prop name '@${Ia.name}'`,Ia.start);else{if(!this.knownProps[Ia.name]){let Wa=["name","dialect","dynamicPrecedence","export","isGroup"].includes(Ia.name)?` (did you mean '@${Ia.name}'?)`:"";this.raise(`Unknown prop name '${Ia.name}'${Wa}`,
Ia.start)}S[Ia.name]=this.finishProp(Ia,n,x)}B&&this.ast.autoDelim&&(Z||Fa(S))&&(f=this.findDelimiters(B))&&(Nb(f[0],"closedBy",f[1].nodeName),Nb(f[1],"openedBy",f[0].nodeName));if(O&&Fa(O))for(let Ia in O)Ia in S||(S[Ia]=O[Ia]);Fa(S)&&!Z&&this.raise("Node has properties but no name",c.length?c[0].start:B.start);Ea&&(Fa(S)||ea||va)&&this.raise("Inline nodes can't have props, dynamic precedence, or a dialect",c[0].start);Ea&&Z&&(Z=null);return{name:Z,props:S,dialect:ea,dynamicPrec:va,inline:Ea,group:Aa,
exported:Ua}}finishProp(c,f,k){return c.value.map(n=>{if(n.value)return n.value;var x=k.findIndex(B=>B.name==n.name);0>x&&this.raise(`Property refers to '${n.name}', but no parameter by that name is in scope`,n.start);x=f[x];return x instanceof pa&&!x.args.length&&!x.namespace?x.id.name:x instanceof Yb?x.value:this.raise(`Expression '${x}' can not be used as part of a property value`,n.start)}).join("")}resolveSpecialization(c){let f=c.type,{name:k,props:n,dialect:x}=this.nodeInfo(c.props,"d");var B=
this.normalizeExpr(c.token);1==B.length&&1==B[0].terms.length&&B[0].terms[0].terminal||this.raise(`The first argument to '${f}' must resolve to a token`,c.token.start);if(c.content instanceof Yb)var O=[c.content.value];else if(c.content instanceof fb&&c.content.exprs.every(ea=>ea instanceof Yb))O=c.content.exprs.map(ea=>ea.value);else return this.raise(`The second argument to '${c.type}' must be a literal or choice of literals`,c.content.start);B=B[0].terms[0];let S=null,Z=this.specialized[B.name]||
(this.specialized[B.name]=[]);for(let ea of O)O=Z.find(va=>va.value==ea),null==O?(S||(S=this.makeTerminal(B.name+"/"+JSON.stringify(ea),k,n),null!=x&&(this.tokens.byDialect[x]||(this.tokens.byDialect[x]=[])).push(S)),Z.push({value:ea,term:S,type:f,dialect:x,name:k}),this.tokenOrigins[S.name]={spec:B}):(O.type!=f&&this.raise(`Conflicting specialization types for ${JSON.stringify(ea)} of ${B.name} (${f} vs ${O.type})`,c.start),O.dialect!=x&&this.raise(`Conflicting dialects for specialization ${JSON.stringify(ea)} of ${B.name}`,
c.start),O.name!=k&&this.raise(`Conflicting names for specialization ${JSON.stringify(ea)} of ${B.name}`,c.start),S&&O.term!=S&&this.raise(`Conflicting specialization tokens for ${JSON.stringify(ea)} of ${B.name}`,c.start),S=O.term);return S}findDelimiters(c){if(!(c instanceof db)||2>c.exprs.length)return null;let f=x=>{if(x instanceof Yb)return{term:this.tokens.getLiteral(x),str:x.value};if(x instanceof pa&&0==x.args.length){var B=this.ast.rules.find(O=>O.id.name==x.id.name);if(B)return f(B.expr);
if((B=this.tokens.rules.find(O=>O.id.name==x.id.name))&&B.expr instanceof Yb)return{term:this.tokens.getToken(x),str:B.expr.value}}return null},k=f(c.exprs[c.exprs.length-1]);if(!k||!k.term.nodeName)return null;let n=["()","[]","{}","\x3c\x3e"].find(x=>-1<k.str.indexOf(x[1])&&0>k.str.indexOf(x[0]));if(!n)return null;c=f(c.exprs[0]);return!c||!c.term.nodeName||0>c.str.indexOf(n[0])||-1<c.str.indexOf(n[1])?null:[c.term,k.term]}registerDynamicPrec(c,f){this.dynamicRulePrecedences.push({rule:c,prec:f});
c.preserve=!0}defineGroup(c,f,k){var n;let x=[],B=O=>{if(O.nodeName)return[O];x.includes(O)&&this.raise(`Rule '${k.id.name}' cannot define a group because it contains a non-named recursive rule ('${O.name}')`,k.start);let S=[];x.push(O);for(let Z of this.rules)if(Z.name==O){let ea=Z.parts.map(B).filter(va=>va.length);1<ea.length&&this.raise(`Rule '${k.id.name}' cannot define a group because some choices produce multiple named nodes`,k.start);if(1==ea.length)for(let va of ea[0])S.push(va)}x.pop();
return S};for(let O of B(c))O.props.group=((null===(n=O.props.group)||void 0===n?void 0:n.split(" "))||[]).concat(f).sort().join(" ")}checkGroups(){let c=Object.create(null),f=Object.create(null);for(var k of this.terms.terms)if(k.nodeName&&(f[k.nodeName]=!0,k.props.group))for(var n of k.props.group.split(" "))(c[n]||(c[n]=[])).push(k);k=Object.keys(c);for(n=0;n<k.length;n++){let x=k[n],B=c[x];f[x]&&this.warn(`Group name '${x}' conflicts with a node of the same name`);for(let O=n+1;O<k.length;O++){let S=
c[k[O]];B.some(Z=>S.includes(Z))&&(B.length>S.length?S.some(Z=>!B.includes(Z)):B.some(Z=>!S.includes(Z)))&&this.warn(`Groups '${x}' and '${k[O]}' overlap without one being a superset of the other`)}}}}class dd{constructor(c,f,k,n,x,B,O){this.tokenizers=c;this.data=f;this.stateArray=k;this.skipData=n;this.skipInfo=x;this.states=B;this.builder=O;this.sharedActions=[]}findSharedActions(c){if(5>c.actions.length)return null;var f=null;for(var k of this.sharedActions)(!f||k.actions.length>f.actions.length)&&
k.actions.every(x=>c.actions.some(B=>B.eq(x)))&&(f=k);if(f)return f;f=null;k=[];for(let x=c.id+1;x<this.states.length;x++){let B=this.states[x],O=0;if(!(B.defaultReduce||5>B.actions.length)){for(var n of c.actions)for(let S of B.actions)n.eq(S)&&(k[O++]=n);5<=O&&(!f||f.length<O)&&(f=k,k=[])}}if(!f)return null;n={actions:f,addr:this.storeActions(f,-1,null)};this.sharedActions.push(n);return n}storeActions(c,f,k){if(0>f&&k&&k.actions.length==c.length)return k.addr;let n=[];for(let x of c)k&&k.actions.some(B=>
B.eq(x))||(x instanceof Zb?n.push(x.term.id,x.target.id,0):(c=bc(x.rule,this.skipInfo),c!=f&&n.push(x.term.id,c&65535,c>>16)));n.push(65535);-1<f?n.push(2,f&65535,f>>16):k?n.push(1,k.addr&65535,k.addr>>16):n.push(0);return this.data.storeArray(n)}finish(c,f,k){var n=this.builder,x=n.skipRules.indexOf(c.skip);let B=this.skipData[x];var O=this.skipInfo[x].startTokens;x=c.defaultReduce?bc(c.defaultReduce,this.skipInfo):0;f=(f?1:0)|(-1<c.nested?4|c.nested<<10:0);let S=-1,Z=null;if(0==x){for(const Aa of c.actions)Aa instanceof
Cc&&Aa.term.eof&&this.skipInfo.some(Ua=>Ua.rule==Aa.rule.name)&&(S=bc(Aa.rule,this.skipInfo));0>S&&(Z=this.findSharedActions(c))}c.set.some(Aa=>Aa.rule.name.top&&Aa.pos==Aa.rule.parts.length)&&(f|=2);var ea=[];for(var va=0;va<c.actions.length+O.length;va++)for(var Ea=va<c.actions.length?c.actions[va].term:O[va-c.actions.length];;)if((Ea=n.tokenOrigins[Ea.name])&&Ea.spec)Ea=Ea.spec;else{Ea&&Ea.external instanceof bd&&M(ea,Ea.external.ast);break}ea.sort((Aa,Ua)=>Aa.start-Ua.start);n=0;for(O=0;O<this.tokenizers.length;O++)if(va=
this.tokenizers[O],va instanceof lc?ea.includes(va):va.id==c.tokenGroup)n|=1<<O;ea=6*c.id;this.stateArray[ea+0]=f;this.stateArray[ea+1]=this.storeActions(x?Gb:c.actions,S,Z);this.stateArray[ea+2]=B;this.stateArray[ea+3]=n;this.stateArray[ea+4]=x;this.stateArray[ea+5]=k}}class md{constructor(){this.data=[]}storeArray(c){a:{var f=this.data;b:for(var k=0;;){k=f.indexOf(c[0],k);if(-1==k||k+c.length>f.length)break;for(let n=1;n<c.length;n++)if(c[n]!=f[k+n]){k+=1;continue b}f=k;break a}f=-1}if(-1<f)return f;
f=this.data.length;for(let n of c)this.data.push(n);return f}finish(){return Uint16Array.from(this.data)}}class od{constructor(c,f){this.tokens=c;this.id=f}}class pd{constructor(c,f,k,n,x){this.placeholder=c;this.name=f;this.extName=k;this.source=n;this.end=x}}class nd{resolve(c,f){2<c.args.length&&f.raise(`Too many arguments to 'nest.${c.id.name}'`,c.start);let [k,n]=c.args,x=f.ast.grammars.find(Z=>Z.id.name==c.id.name);if(!x)return f.raise(`No external grammar '${c.id.name}' defined`,c.id.start);
let B=f.newName(c.id.name+"-placeholder",!0);f.defineRule(B,n?f.normalizeExpr(n):[]);if(!k&&!(k=T(f.ast,c)))return f.raise("No end token specified, and no token found directly after the nest expression",c.start);let O=new Jb,S=new Jb([f.terms.eof]);try{f.tokens.build(k,O,S,Gb)}catch(Z){if(!(Z instanceof SyntaxError))throw Z;f.raise(`End token '${k}' for nested grammar is not a valid token expression`,k.start)}f.nestedGrammars.push(new pd(B,x.id.name,x.externalID.name,x.source,O));f.nestedGrammars.length>=
2**20&&f.raise("Too many nested grammars used");return[wb(B)]}}class rc{constructor(c,f,k){this.name=c;this.expr=f;this.scope=k}}class Eb{constructor(c,f,k,n){this.name=c;this.start=f;this.to=k;this.args=n}}class ed{constructor(c,f){this.b=c;this.ast=f;this.startState=new Jb;this.built=[];this.building=[];this.byDialect=Object.create(null);this.precedenceRelations=[];this.explicitConflicts=[];this.rules=f?f.rules:Gb;for(let k of this.rules)this.b.unique(k.id)}getToken(c){for(var f of this.built)if(f.matches(c))return f.term;
let k=c.id.name;f=this.rules.find(Z=>Z.id.name==k);if(!f)return null;let {name:n,props:x,dialect:B,exported:O}=this.b.nodeInfo(f.props,"d",k,c.args,f.params.length!=c.args.length?Gb:f.params),S=this.b.makeTerminal(c.toString(),n,x);null!=B&&(this.byDialect[B]||(this.byDialect[B]=[])).push(S);(S.nodeType||O)&&0==f.params.length&&(S.nodeType||(S.preserve=!0),this.b.namedTerms[k]=S);this.buildRule(f,c,this.startState,new Jb([S]));this.built.push(new Mc(k,c.args,S));return S}getLiteral(c){let f=JSON.stringify(c.value);
for(var k of this.built)if(k.id==f)return k.term;var n=null;let x={};k=null;let B=this.ast?this.ast.literals.find(O=>O.literal==c.value):null;B&&({name:n,props:x,dialect:k}=this.b.nodeInfo(B.props,"d",c.value));n=this.b.makeTerminal(f,n,x);null!=k&&(this.byDialect[k]||(this.byDialect[k]=[])).push(n);this.build(c,this.startState,new Jb([n]),Gb);this.built.push(new Mc(f,Gb,n));return n}buildRule(c,f,k,n,x=Gb){let B=f.id.name;c.params.length!=f.args.length&&this.b.raise(`Incorrect number of arguments for token '${B}'`,
f.start);var O=this.building.find(S=>S.name==B&&Ba(f.args,S.args));if(O){if(O.to==n){k.nullEdge(O.start);return}for(O=this.building.length-1;this.building[O].name!=B;)O--;this.b.raise(`Invalid (non-tail) recursion in token rules: ${this.building.slice(O).map(S=>S.name).join(" -\x3e ")}`,f.start)}this.b.used(c.id.name);O=new Jb;k.nullEdge(O);this.building.push(new Eb(B,O,n,f.args));this.build(this.b.substituteArgs(c.expr,f.args,c.params),O,n,f.args.map((S,Z)=>new rc(c.params[Z].name,S,x)));this.building.pop()}build(c,
f,k,n){if(c instanceof pa){if(c.namespace){if("std"==c.namespace.name)return this.buildStd(c,f,k);this.b.raise(`Unknown namespace '${c.namespace.name}'`,c.start)}let O=c.id.name;var x=n.find(S=>S.name==O);if(x)return this.build(x.expr,f,k,x.scope);x=this.rules.find(S=>S.id.name==O);if(!x)return this.b.raise(`Reference to rule '${c.id.name}', which isn't found in this token group`,c.start);this.buildRule(x,c,f,k,n)}else if(c instanceof fb)for(x of c.exprs)this.build(x,f,k,n);else if(Ca(c))f.nullEdge(k);
else if(c instanceof db)for((x=c.markers.find(O=>0<O.length))&&this.b.raise("Conflict marker in token expression",x[0].start),x=0;x<c.exprs.length;x++){var B=x==c.exprs.length-1?k:new Jb;this.build(c.exprs[x],f,B,n);f=B}else if(c instanceof ec)"*"==c.kind?(x=new Jb,f.nullEdge(x),this.build(c.expr,x,x,n),x.nullEdge(k)):"+"==c.kind?(x=new Jb,this.build(c.expr,f,x,n),this.build(c.expr,x,x,n),x.nullEdge(k)):(f.nullEdge(k),this.build(c.expr,f,k,n));else if(c instanceof Qc)for(let [O,S]of c.inverted?da(c.ranges):
c.ranges)ma(f,k,O,S);else if(c instanceof Yb)for(n=0;n<c.value.length;n++)x=c.value.charCodeAt(n),B=n==c.value.length-1?k:new Jb,f.edge(x,x+1,B),f=B;else if(c instanceof Yc)f.edge(0,65535,k);else return this.b.raise("Unrecognized expression type in token",c.start)}buildStd(c,f,k){c.args.length&&this.b.raise(`'std.${c.id.name}' does not take arguments`,c.args[0].start);ad.hasOwnProperty(c.id.name)||this.b.raise(`There is no builtin rule 'std.${c.id.name}'`,c.start);for(let [n,x]of ad[c.id.name])f.edge(n,
x,k)}takePrecedences(){let c=this.precedenceRelations=[];if(this.ast)for(let f of this.ast.precedences){let k=[];for(let n of f.items){let x=[];if(n instanceof pa)for(let B of this.built)(n.args.length?B.matches(n):B.id==n.id.name)&&x.push(B.term);else{let B=JSON.stringify(n.value),O=this.built.find(S=>S.id==B);O&&x.push(O.term)}x.length||this.b.warn(`Precedence specified for unknown token ${n}`,n.start);for(let B of x)za(c,B,k);k=k.concat(x)}}}takeConflicts(){var c;let f=k=>{if(k instanceof pa)for(var n of this.built){if(n.matches(k))return n.term}else{let x=
JSON.stringify(k.value);if(n=this.built.find(B=>B.id==x))return n.term}this.b.warn(`Precedence specified for unknown token ${k}`,k.start);return null};for(let k of(null===(c=this.ast)||void 0===c?void 0:c.conflicts)||[]){c=f(k.a);let n=f(k.b);c&&n&&(c.id<n.id&&([c,n]=[n,c]),this.explicitConflicts.push({a:c,b:n}))}}precededBy(c,f){let k=this.precedenceRelations.find(n=>n.term==c);return k&&k.after.includes(f)}buildTokenGroups(c,f){let k=this.startState.compile();k.accepting.length&&this.b.raise(`Grammar contains zero-length tokens (in '${k.accepting[0].name}')`,
this.rules.find(Aa=>Aa.id.name==k.accepting[0].name).start);/\btokens\b/.test(Sc)&&console.log(k.toString());let n=k.findConflicts(W(c,this.b,f)).filter(({a:Aa,b:Ua})=>!this.precededBy(Aa,Ua)&&!this.precededBy(Ua,Aa));for(let {a:Aa,b:Ua}of this.explicitConflicts)n.some(Ia=>Ia.a==Aa&&Ia.b==Ua)||n.push(new kd(Aa,Ua,0,"",""));var x=n.filter(Aa=>Aa.soft),B=n.filter(Aa=>!Aa.soft);let O=[],S=[];for(let Aa of c){if(Aa.defaultReduce)continue;c=[];let Ua=[];var Z=f[this.b.skipRules.indexOf(Aa.skip)].startTokens;
for(let Ia of Z)Aa.actions.some(Wa=>Wa.term==Ia)&&this.b.raise(`Use of token ${Ia.name} conflicts with skip rule`);var ea=[];for(var va=0;va<Aa.actions.length+(Z?Z.length:0);va++){let Ia=va<Aa.actions.length?Aa.actions[va].term:Z[va-Aa.actions.length],Wa=this.b.tokenOrigins[Ia.name];if(Wa&&Wa.spec)Ia=Wa.spec;else if(Wa&&Wa.external)continue;M(ea,Ia)}if(0!=ea.length){for(let Ia of ea)for(let Wa of B)if(Z=Wa.a==Ia?Wa.b:Wa.b==Ia?Wa.a:null)ea.includes(Z)&&!O.some(yb=>yb.conflict==Wa)&&(va=Wa.exampleA?
` (example: ${JSON.stringify(Wa.exampleA)}${Wa.exampleB?` vs ${JSON.stringify(Wa.exampleB)}`:""})`:"",O.push({error:`Overlapping tokens ${Ia.name} and ${Z.name} used in same context${va}\n`+`After: ${Aa.set[0].trail()}`,conflict:Wa})),M(c,Ia),M(Ua,Z);ea=null;for(let Ia of S)if(!Ua.some(Wa=>Ia.tokens.includes(Wa))){for(let Wa of c)M(Ia.tokens,Wa);ea=Ia;break}ea||(ea=new od(c,S.length),S.push(ea));Aa.tokenGroup=ea.id}}O.length&&this.b.raise(O.map(Aa=>Aa.error).join("\n\n"));16<S.length&&this.b.raise(`Too many different token groups (${S.length}) to represent them as a 16-bit bitfield`);
let Ea=[];f=this.precedenceRelations.slice();for(let {a:Aa,b:Ua,soft:Ia}of x)Ia&&f.some(Wa=>Wa.term==Aa)&&f.some(Wa=>Wa.term==Ua)&&(0>Ia&&([Aa,Ua]=[Ua,Aa]),za(f,Ua,[Aa]),za(f,Aa,[]));a:for(;f.length;){for(x=0;x<f.length;x++)if(B=f[x],B.after.every(Aa=>Ea.includes(Aa.id))){Ea.push(B.term.id);if(1==f.length)break a;f[x]=f.pop();continue a}this.b.raise(`Cyclic token precedence relation between ${f.map(Aa=>Aa.term).join(", ")}`)}Ea=Ea.filter(Aa=>n.some(Ua=>!Ua.soft&&(Ua.a.id==Aa||Ua.b.id==Aa)));return{tokenGroups:S,
tokenPrec:Ea,tokenData:k.toArray(D(S),Ea)}}}const ad={asciiLetter:[[65,91],[97,123]],asciiLowercase:[[97,123]],asciiUppercase:[[65,91]],digit:[[48,58]],whitespace:[[9,14],[32,33],[133,134],[160,161],[5760,5761],[8192,8203],[8232,8234],[8239,8240],[8287,8288],[12288,12289]]};class bd{constructor(c,f){this.b=c;this.ast=f;this.tokens=Ha(c,f.tokens);for(let k in this.tokens)this.b.tokenOrigins[this.tokens[k].name]={external:this}}getToken(c){return Ja(this.b,this.tokens,c)}}class Tc{constructor(c,f){this.b=
c;this.ast=f;this.term=null;this.tokens=Ha(c,f.tokens)}finish(){let c=this.b.normalizeExpr(this.ast.token);1==c.length&&1==c[0].terms.length&&c[0].terms[0].terminal||this.b.raise(`The token expression to '@external ${this.ast.type}' must resolve to a token`,this.ast.token.start);this.term=c[0].terms[0];for(let f in this.tokens)this.b.tokenOrigins[this.tokens[f].name]={spec:this.term,external:this}}getToken(c){return Ja(this.b,this.tokens,c)}}const Ic="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this const class extends export import super enum implements interface let package private protected public static yield".split(" ");
F.GenError=Tb;F.buildParser=function(c,f={}){return(new Sb(c,f)).getParser()};F.buildParserFile=function(c,f={}){return(new Sb(c,f)).getParserFile()}};
shadow$provide[16]=function(qa,Oa,kb,F){Object.defineProperty(F,"__esModule",{value:!0});qa=Oa(14);var Ma=Oa(1);Oa=Ma.NodeProp.flag();kb=Ma.NodeProp.flag();const Na=Ma.NodeProp.flag(),Ba=Ma.NodeProp.flag(),Pa=Ma.NodeProp.flag();Ma=Object.freeze({__proto__:null,prefixColl:Oa,coll:kb,prefixEdge:Na,sameEdge:Ba,prefixContainer:Pa});const Fa={__proto__:null,true:132,false:132,nil:134,def:143,defn:143,"defn-":143,defmacro:143,definline:143,defonce:143,deftest:143,defcard:143};qa=qa.Parser.deserialize({version:12,
states:",rQ]QPOOP!pOPOOOOQO'#Dj'#DjQ]QPOOO!uQPO'#CeO!|QPO'#ChO#TOPO'#C`OOQO'#Ci'#CiOOQO'#Ck'#CkO]QPO'#ClO]QPO'#CnO]QPO'#CpO]QPO'#CrO]QPO'#CtO]OPO'#C}O]OPO'#DPO#]OQO'#DVO${QPO'#CzO%SOSO'#D[O#WOPO'#D]O%eOPO'#D`O%jOPO'#DbO%rOSO'#DeO]QPO'#DhOOQO'#Dn'#DnP%wQPO'#C^POOO)C?b)C?bOOQO-E7h-E7hO'[QPO,59POOQO,59P,59PO'cQPO,59SOOQO,59S,59SOOQO,58z,58zOOQO,59W,59WOOQO,59Y,59YOOQO,59[,59[OOQO,59^,59^OOQO,59`,59`OOQO,59i,59iOOQO,59k,59kOOQO,59q,59qO'jOPO,59qO'oQPO'#DwOOQO'#C{'#C{O#eQPO'#C|OOQO'#Dt'#DtO'vQPO'#DsOOQO'#DX'#DXOOQO'#Dx'#DxO'oQPO'#DwOOQO'#Dr'#DrO(RQPO,59fOOQO,59v,59vOOQO,59x,59xOOQO,59y,59yOOQO,5:R,5:RO)nQPO,58{OOQO,59w,59wOOQO,59z,59zOOQO,59|,59|OOQO,5:P,5:POOQO,5:S,5:SPOOO,58x,58xOOQO1G.k1G.kOOQO1G.n1G.nOOQO1G/]1G/]OOQO,59h,59hOOQO,59t,59tOOQO'#DR'#DRO'vQPO'#DSOOQO'#Dv'#DvO*OQPO,5:_O*VQPO,5:cOOQO1G/Q1G/QP(WOPO,58{OOQO,59n,59nO*^QPO1G/yO*eQPO'#DTO]QPO1G/yO+{QPO7+%eP%wQPO'#ClP%wQPO'#CnP%wQPO'#CpP%wQPO'#CrP%wQPO'#CtP%wOPO'#C}P%wOPO'#DPP,SOSO'#D[P,eOPO'#DbP%wQPO'#Dh",
stateData:",p~O!aOSPOSRPQ~OUbOWSOZTO^hOaXOcYOeZOg[Oi]OjhOkhOmaOr^Ot_Ox`O}hO!TdO!VeO!YfO!dVO!eWO~ORiO~OVmO~P]OYoO~P]OWSOZTO~OxxOzyO~OUbOWSOZTO^!POaXOcYOeZOg[Oi]OjhOkhOmaOr^Ot_Ox`O}hO!TdO!VeO!YfO!dVO!eWO!i{O~Ol!kP~P#eOZTOmaOx`O!c!YO!m!VO~O^![O~OaXOmaO~O!c!^O~OU!yOWSOZTO^hOa!rOc!sOe!tOg!uOi!vOjhOkhOmaOr!wOt!xOx`O}hO!TdO!V!zO!YfO!dVO!eWO~OV!aO~P]OY!bO~P]Ox!cO~Ol!kX~P]O^!fOr^Ot_O~Ol!kO~OU!WaWTaZTa^!Waa!Wac!Wae!Wag!Wai!Waj!Wak!Wam!War!Wat!Wax!Wa}!Wa!T!Wa!V!Wa!Y!Wa!_!Wa!d!Wa!e!Wa~OV!WaY!Wal!Wa!i!Wa~P(WOl!ga~P]Ol!ka~P]Ol!gi~P]OUwXWwXZwX^wXawXcwXewXgwXiwXjwXkwXl!bXmwXrwXtwXxwX}wX!TwX!VwX!YwX!dwX!ewX~Ol!gq~P]OZTOmaOx`O!c!lO!m!VO~Oa!rOmaO~Oj^~",
goto:",w!mPP!nP!q#ePPP$XPP%O!qP!q%|P!qP!qP!qP!qPPPPP\x26t'p'p'tP'tP(p(p(tP(wP)q)qP!q!q)u!q!qP!qP!q!qP!q!qP*iPPP+XPPP,_,b,eP,k,b,qRjP!chORSTXYZ[]^_agilnz|!R!i!j!n!p!q!r!s!t!u!v!w!x!{!cUORSTXYZ[]^_agilnz|!R!i!j!n!p!q!r!s!t!u!v!w!x!{!bhORSTXYZ[]^_agilnz|!R!i!j!n!p!q!r!s!t!u!v!w!x!{RpU!bhORSTXYZ[]^_agilnz|!R!i!j!n!p!q!r!s!t!u!v!w!x!{QpUS!Ub!yR!Zc!bhORSTXYZ[]^_agilnz|!R!i!j!n!p!q!r!s!t!u!v!w!x!{T!]e!z!bhORSTXYZ[]^_agilnz|!R!i!j!n!p!q!r!s!t!u!v!w!x!{S!Xb!yT!]e!zT}a|zgORSTXYZ[]^_glnz!R!i!j!n!p!qS|a|S!g!O!gc!{i!r!s!t!u!v!w!x!{T!h!O!gR!p!i!`hORSTXYZ[]^_agilnz|!R!j!n!p!q!r!s!t!u!v!w!x!{S!Wb!yR!o!iT!Qa|!ccORSTXYZ[]^_agilnz|!R!i!j!n!p!q!r!s!t!u!v!w!x!{QRO^kRlnz!j!n!qQlSQnTQzaQ!j!RQ!n!iR!q!plQORSTalnz!R!i!j!n!p!qSqX!rSrY!sSsZ!tSt[!uSu]!vSv^!wSw_!xU!_g|!{R!`iR!TaR!SaQ!OaR!d|Q!i!OR!m!gQ!RaR!e|",
nodeNames:"âš  LineComment Discard #_ Constructor ConstructorPrefix # ] [ Vector } { Map Boolean Symbol Nil Deref @ Quote ' SyntaxQuote ` Unquote ~ UnquoteSplice ~@ Number Keyword ) ( List DefLike Meta Metadata ^ ReaderMetadata #^ VarName Meta DocString \" String StringContent Operator Meta Character Set NamespacedMap KeywordPrefix RegExp Var #' ReaderConditional #? DataLiteral SymbolicValue ## AnonymousFunction Meta Program",maxTerm:75,nodeProps:[[Na,-14,3,5,6,17,19,21,23,25,34,36,48,51,53,56,""],
[Oa,-14,4,16,18,20,22,24,33,35,46,47,49,50,52,57,""],[qa.NodeProp.openedBy,7,"[",10,"{",28,"(",40,'"'],[qa.NodeProp.closedBy,8,"]",11,"}",29,")",40,'"'],[kb,-3,9,12,30,""],[Pa,-4,32,38,44,58,""],[Ba,40,""]],skippedNodes:[0,1,2,3],repeatNodeCount:1,tokenData:"!Cc~R![OX$wX^%n^p$wpq%nqr'grs)tst)ytu'guv'gvw'gwx,yxy-^yz-qz{'g{|.U|}%n}!O.U!O!P0f!P!Q'g!Q!R!%W!R![!+p![!]!0l!]!^!7X!^!_'g!_!`'g!`!a'g!a!b'g!b!c!8n!c!}'g!}#O!9R#O#P!9f#P#Q!@b#Q#R!@u#R#S'g#S#T!AY#T#o'g#o#p!Am#p#q$w#q#r!BQ#r#s!Be#s#y$w#y#z%n#z$f$w$f$g%n$g##l'g##l#BY$w#BY#BZ%n#BZ$IS$w$IS$I_%n$I_$I|$w$I|$JO%n$JO$JT$w$JT$JU%n$JU$KV$w$KV$KW%n$KW\x26FU$w\x26FU\x26FV%n\x26FV~$wQ$|SzQOr$ws#O$w#O#P%Y#P~$wQ%_TzQOr$wrs$ws#O$w#O#P%Y#P~$wR%ujzQ!aPOX$wX^%n^p$wpq%nqr$ws|$w|}%n}#O$w#O#P%Y#P#y$w#y#z%n#z$f$w$f$g%n$g#BY$w#BY#BZ%n#BZ$IS$w$IS$I_%n$I_$I|$w$I|$JO%n$JO$JT$w$JT$JU%n$JU$KV$w$KV$KW%n$KW\x26FU$w\x26FU\x26FV%n\x26FV~$wV'ppzQ!cS^POq$wqr'gst'gtu'guv'gvw'gwx'gxz$wz{'g{|'g|}$w}!O'g!O!P'g!P!Q'g!Q!['g![!]'g!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#o'g#o$g$w$g##l'g##l~$w~)yOx~R*Q[UPzQOr$wst*vtw$wwx+Zx!a$w!a!b+n!b#O$w#O#P%Y#P#Q$w#Q#R,R#R#S,f#S~$wR*}S!YPzQOr$ws#O$w#O#P%Y#P~$wR+bS!TPzQOr$ws#O$w#O#P%Y#P~$wR+uS!VPzQOr$ws#O$w#O#P%Y#P~$wR,YStPzQOr$ws#O$w#O#P%Y#P~$wR,mSRPzQOr$ws#O$w#O#P%Y#P~$wR-QScPzQOr$ws#O$w#O#P%Y#P~$wV-eSmTzQOr$ws#O$w#O#P%Y#P~$wR-xSlPzQOr$ws#O$w#O#P%Y#P~$wV._qzQ!cS^POq$wqr'gst'gtu'guv'gvw'gwx'gxz$wz{'g{|'g|}$w}!O'g!O!P0f!P!Q'g!Q!R\x3ep!R![Kh![!]'g!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#o'g#o$g$w$g##l'g##l~$wV0opzQ!cS^POq$wqr'gst'gtu'guv'gvw'gwx'gxz$wz{'g{|'g|}$w}!O'g!O!P'g!P!Q'g!Q![2s![!]'g!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#o'g#o$g$w$g##l'g##l~$wV3OtzQ!cSjP^POq$wqr'gst'gtu'guv'gvw'gwx'gxz$wz{'g{|'g|}$w}!O'g!O!P'g!P!Q'g!Q![2s![!]'g!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!g'g!g!h5`!h!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#X'g#X#Y5`#Y#o'g#o$g$w$g##l'g##l~$wV5ipzQ!cS^POq$wqr'gst'gtu'guv'gvw'gwx'gxz$wz{'g{|7m|}$w}!O7m!O!P'g!P!Q'g!Q![9z![!]'g!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#o'g#o$g$w$g##l'g##l~$wV7vpzQ!cS^POq$wqr'gst'gtu'guv'gvw'gwx'gxz$wz{'g{|'g|}$w}!O'g!O!P'g!P!Q'g!Q![9z![!]'g!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#o'g#o$g$w$g##l'g##l~$wV:VrzQ!cSjP^POq$wqr'gst'gtu'guv'gvw'gwx'gxz$wz{'g{|'g|}$w}!O'g!O!P'g!P!Q'g!Q![9z![!]'g!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!o'g!o!p\x3ca!p!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#o'g#o$g$w$g##l'g##l~$wV\x3clpzQ!cSjP^POq$wqr'gst'gtu'guv'gvw'gwx'gxz$wz{'g{|'g|}$w}!O'g!O!P'g!P!Q'g!Q!['g![!]'g!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#o'g#o$g$w$g##l'g##l~$wV\x3e{yzQ!cSjP^POq$wqr'gst'gtu'guv'gvw'gwx'gxz$wz{'g{|'g|}$w}!O'g!O!PAl!P!QFz!Q![Kh![!]'g!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!g'g!g!h5`!h!o'g!o!p\x3ca!p!q\x3ca!q!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#X'g#X#Y5`#Y#l'g#l#mN^#m#o'g#o$g$w$g##l'g##l~$wVAwvzQ!cSjP^POq$wqr'gst'gtu'guv'gvw'gwx'gxz$wz{'g{|'g|}$w}!O'g!O!P'g!P!Q'g!Q![Al![!]'g!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!g'g!g!h5`!h!o'g!o!pD_!p!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#X'g#X#Y5`#Y#o'g#o$g$w$g##l'g##l~$wVDjtzQ!cSjP^POq$wqr'gst'gtu'guv'gvw'gwx'gxz$wz{'g{|'g|}$w}!O'g!O!P'g!P!Q'g!Q!['g![!]'g!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!g'g!g!h5`!h!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#X'g#X#Y5`#Y#o'g#o$g$w$g##l'g##l~$wVGTpzQ!cS^POq$wqr'gst'gtu'guv'gvw'gwx'gxz$wz{'g{|'g|}$w}!O'g!O!P'g!P!Q'g!Q![IX![!]'g!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#o'g#o$g$w$g##l'g##l~$wVIdpzQ!cSjP^POq$wqr'gst'gtu'guv'gvw'gwx'gxz$wz{'g{|'g|}$w}!O'g!O!P'g!P!Q'g!Q![IX![!]'g!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#o'g#o$g$w$g##l'g##l~$wVKswzQ!cSjP^POq$wqr'gst'gtu'guv'gvw'gwx'gxz$wz{'g{|'g|}$w}!O'g!O!PAl!P!QFz!Q![Kh![!]'g!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!g'g!g!h5`!h!o'g!o!p\x3ca!p!q\x3ca!q!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#X'g#X#Y5`#Y#o'g#o$g$w$g##l'g##l~$wVNgrzQ!cS^POq$wqr'gst'gtu'guv'gvw'gwx'gxz$wz{'g{|'g|}$w}!O'g!O!P'g!P!Q'g!Q![!!q![!]'g!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!i!!q!i!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#Z!!q#Z#o'g#o$g$w$g##l'g##l~$wV!!|rzQ!cSjP^POq$wqr'gst'gtu'guv'gvw'gwx'gxz$wz{'g{|'g|}$w}!O'g!O!P'g!P!Q'g!Q![!!q![!]'g!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!i!!q!i!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#Z!!q#Z#o'g#o$g$w$g##l'g##l~$wR!%_ezQjPOr$ws!O$w!O!P!\x26p!P!Q!*n!Q![!+p![!g$w!g!h!'m!h!o$w!o!p!)j!p!q!)j!q#O$w#O#P%Y#P#U$w#U#V!,v#V#X$w#X#Y!'m#Y#c$w#c#d!.O#d#l$w#l#m!/Q#m~$wR!\x26w[zQjPOr$ws!Q$w!Q![!\x26p![!g$w!g!h!'m!h!o$w!o!p!)}!p#O$w#O#P%Y#P#X$w#X#Y!'m#Y~$wR!'rYzQOr$ws{$w{|!(b|}$w}!O!(b!O!Q$w!Q![!(y![#O$w#O#P%Y#P~$wR!(gUzQOr$ws!Q$w!Q![!(y![#O$w#O#P%Y#P~$wR!)QWzQjPOr$ws!Q$w!Q![!(y![!o$w!o!p!)j!p#O$w#O#P%Y#P~$wR!)qSzQjPOr$ws#O$w#O#P%Y#P~$wR!*UWzQjPOr$ws!g$w!g!h!'m!h#O$w#O#P%Y#P#X$w#X#Y!'m#Y~$wR!*sUzQOr$ws!Q$w!Q![!+V![#O$w#O#P%Y#P~$wR!+^UzQjPOr$ws!Q$w!Q![!+V![#O$w#O#P%Y#P~$wR!+w_zQjPOr$ws!O$w!O!P!\x26p!P!Q!*n!Q![!+p![!g$w!g!h!'m!h!o$w!o!p!)j!p!q!)j!q#O$w#O#P%Y#P#X$w#X#Y!'m#Y~$wR!,{VzQOr$ws!Q$w!Q!R!-b!R!S!-b!S#O$w#O#P%Y#P~$wR!-iVzQjPOr$ws!Q$w!Q!R!-b!R!S!-b!S#O$w#O#P%Y#P~$wR!.TUzQOr$ws!Q$w!Q!Y!.g!Y#O$w#O#P%Y#P~$wR!.nUzQjPOr$ws!Q$w!Q!Y!.g!Y#O$w#O#P%Y#P~$wR!/VYzQOr$ws!Q$w!Q![!/u![!c$w!c!i!/u!i#O$w#O#P%Y#P#T$w#T#Z!/u#Z~$wR!/|YzQjPOr$ws!Q$w!Q![!/u![!c$w!c!i!/u!i#O$w#O#P%Y#P#T$w#T#Z!/u#Z~$wV!0uokPzQ!mSOq$wqr!2vst$wtu!2vuv!2vvw!2vwz$wz{!2v{|!2v|}$w}!O!2v!O!P!2v!P!Q!2v!Q![$w![!]!5T!]!^$w!^!_!2v!_!`!2v!`!a!2v!a!b!2v!b!c$w!c!}!2v!}#O$w#O#P%Y#P#R$w#R#S!2v#S#T$w#T#o!2v#o$g$w$g##l!2v##l~$wV!3PpkPzQ!mSOq$wqr!2vst!2vtu!2vuv!2vvw!2vwx!2vxz$wz{!2v{|!2v|}$w}!O!2v!O!P!2v!P!Q!2v!Q![!2v![!]!2v!]!^$w!^!_!2v!_!`!2v!`!a!2v!a!b!2v!b!c$w!c!}!2v!}#O$w#O#P%Y#P#R$w#R#S!2v#S#T$w#T#o!2v#o$g$w$g##l!2v##l~$wV!5^mkPzQ!mSOq$wqr!2vst$wtu!2vuv!2vvw!2vwz$wz{!2v{|!2v|}$w}!O!2v!O!P!2v!P!Q!2v!Q!^$w!^!_!2v!_!`!2v!`!a!2v!a!b!2v!b!c$w!c!}!2v!}#O$w#O#P%Y#P#R$w#R#S!2v#S#T$w#T#o!2v#o$g$w$g##l!2v##l~$wR!7`VPPzQOY!7XYZ$wZr!7Xrs!7us#O!7X#O#P!8Q#P~!7XP!7zQPPOY!7uZ~!7uR!8XVPPzQOY!7XYZ$wZr!7Xrs!7Xs#O!7X#O#P!8Q#P~!7XR!8uSaPzQOr$ws#O$w#O#P%Y#P~$wR!9YSWPzQOr$ws#O$w#O#P%Y#P~$wR!9kczQOY!:vYZ$wZ]!:v]^$w^r!:vrs!:vs!c!:v!c!}!;Z!}#O!:v#O#P!\x3ck#P#T!:v#T#c!;Z#c#d!\x3dR#d#g!;Z#g#h!\x3ec#h#i!;Z#i#j!?Q#j#o!;Z#o~!:vR!:}S}PzQOr$ws#O$w#O#P%Y#P~$wR!;bW}PzQOr$ws!c$w!c!}!;z!}#O$w#O#P%Y#P#T$w#T#o!;z#o~$wR!\x3cRW}PzQOr$ws!c$w!c!}!;z!}#O$w#O#P%Y#P#T$w#T#o!;z#o~$wR!\x3crT}PzQOr$wrs$ws#O$w#O#P%Y#P~$wR!\x3dYY}PzQOr$ws!Q$w!Q![!\x3dx![!c$w!c!}!;z!}#O$w#O#P%Y#P#T$w#T#o!;z#o~$wR!\x3ePU}PzQOr$ws!Q$w!Q![!\x3dx![#O$w#O#P%Y#P~$wR!\x3ehWzQOr$ws!c$w!c!}!;z!}#O$w#O#P%Y#P#T$w#T#o!;z#o~$wR!?XY}PzQOr$ws!Q$w!Q![!?w![!c$w!c!}!;z!}#O$w#O#P%Y#P#T$w#T#o!;z#o~$wR!@OU}PzQOr$ws!Q$w!Q![!?w![#O$w#O#P%Y#P~$wR!@iSVPzQOr$ws#O$w#O#P%Y#P~$wR!@|SrPzQOr$ws#O$w#O#P%Y#P~$wR!AaSePzQOr$ws#O$w#O#P%Y#P~$wV!AtSZTzQOr$ws#O$w#O#P%Y#P~$wR!BXSYPzQOr$ws#O$w#O#P%Y#P~$wR!BlUgPzQOr$ws!b$w!b!c!CO!c#O$w#O#P%Y#P~$wR!CVSiPzQOr$ws#O$w#O#P%Y#P~$w",
tokenizers:[0,1,2],topRules:{Program:[0,59]},dynamicPrecedences:{31:1},specialized:[{term:14,get:sa=>Fa[sa]||-1}],tokenPrec:535});F.parser=qa;F.props=Ma};
shadow$provide[17]=function(qa,Oa,kb,F){function Ma(ya,Ga,fa){var ca=ya.prop(0>Ga?Fa.NodeProp.openedBy:Fa.NodeProp.closedBy);return ca?ca:1==ya.name.length&&(ya=fa.indexOf(ya.name),-1<ya&&ya%2==(0>Ga?1:0))?[fa[ya+Ga]]:null}function Na(ya,Ga,fa){var ca=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},la=ca.maxScanDistance||sa;ca=ca.brackets||xa;var ka=ya.tree,H=ka.resolve(Ga,fa),y;if(y=Ma(H.type,fa,ca)){a:{var t=H.parent;la={from:H.from,to:H.to};ka=0;if((t=null===t||void 0===t?void 0:t.cursor)&&
(0>fa?t.childBefore(H.from):t.childAfter(H.to))){do if(0>fa?t.to<=H.from:t.from>=H.to)if(0==ka&&-1<y.indexOf(t.type.name)){ca={start:la,end:{from:t.from,to:t.to},matched:!0};break a}else if(Ma(t.type,fa,ca))ka++;else if(Ma(t.type,-fa,ca)&&(ka--,0==ka)){ca={start:la,end:{from:t.from,to:t.to},matched:!1};break a}while(0>fa?t.prevSibling():t.nextSibling())}ca={start:la,matched:!1}}return ca}a:if(H=H.type,y=0>fa?ya.sliceDoc(Ga-1,Ga):ya.sliceDoc(Ga,Ga+1),y=ca.indexOf(y),0>y||0==y%2!=0<fa)ca=null;else{t=
{from:0>fa?Ga-1:Ga,to:0<fa?Ga+1:Ga};for(var z=ya.doc.iterRange(Ga,0<fa?ya.doc.length:0),J=0,R=0;!z.next().done&&R<=la;){var I=z.value;0>fa&&(R+=I.length);for(var r=Ga+R*fa,v=0<fa?0:I.length-1,p=0<fa?I.length:-1;v!=p;v+=fa){var h=ca.indexOf(I[v]);if(!(0>h||ka.resolve(r+v,1).type!=H))if(0==h%2==0<fa)J++;else if(1==J){ca={start:t,end:{from:r+v,to:r+v+1},matched:h>>1==y>>1};break a}else J--}0<fa&&(R+=I.length)}ca=z.done?{start:t,matched:!1}:null}return ca}Object.defineProperty(F,"__esModule",{value:!0});
F.bracketMatching=function(){return[Qa.of(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}),ta]};F.matchBrackets=Na;var Ba=Oa(2),Pa=Oa(6),Fa=Oa(1);qa=Pa.EditorView.baseTheme({$matchingBracket:{color:"#0b0"},$nonmatchingBracket:{color:"#a22"}});var sa=1E4,xa="()[]{}",Qa=Ba.Facet.define({combine:function(ya){return(0,Ba.combineConfig)(ya,{afterCursor:!0,brackets:xa,maxScanDistance:sa})}}),na=Pa.Decoration.mark({"class":(0,Pa.themeClass)("matchingBracket")}),Sa=Pa.Decoration.mark({"class":(0,
Pa.themeClass)("nonmatchingBracket")}),ta=[Ba.StateField.define({create:function(){return Pa.Decoration.none},update:function(ya,Ga){if(!Ga.docChanged&&!Ga.selection)return ya;ya=[];var fa=Ga.state.facet(Qa),ca=!0,la=!1,ka=void 0;try{for(var H=Ga.state.selection.ranges[Symbol.iterator](),y;!(ca=(y=H.next()).done);ca=!0){var t=y.value;if(t.empty){var z=Na(Ga.state,t.head,-1,fa)||0<t.head&&Na(Ga.state,t.head-1,1,fa)||fa.afterCursor&&(Na(Ga.state,t.head,1,fa)||t.head<Ga.state.doc.length&&Na(Ga.state,
t.head+1,-1,fa));if(z){var J=z.matched?na:Sa;ya.push(J.range(z.start.from,z.start.to));z.end&&ya.push(J.range(z.end.from,z.end.to))}}}}catch(R){la=!0,ka=R}finally{try{if(!ca&&null!=H["return"])H["return"]()}finally{if(la)throw ka;}}return Pa.Decoration.set(ya,!0)},provide:[Pa.EditorView.decorations]}),qa]};
shadow$provide[18]=function(qa,Oa,kb,F){function Ma(A,Y){return R.EditorSelection.create(A.ranges.map(Y),A.primaryIndex)}function Na(A,Y){return A.update({selection:Y,scrollIntoView:!0,annotations:R.Transaction.userEvent.of("keyboardselection")})}function Ba(A,Y){var wa=A.state;A=A.dispatch;Y=Ma(wa.selection,Y);if(Y.eq(wa.selection))return!1;A(Na(wa,Y));return!0}function Pa(A,Y){return R.EditorSelection.cursor(Y?A.to:A.from)}function Fa(A,Y){return Ba(A,function(wa){return wa.empty?A.moveByChar(wa,
Y):Pa(wa,Y)})}function sa(A,Y){return Ba(A,function(wa){return wa.empty?A.moveByGroup(wa,Y):Pa(wa,Y)})}function xa(A,Y,wa){var oa=A.tree.resolve(Y.head),ra=wa?p.NodeProp.closedBy:p.NodeProp.openedBy;for(Y=Y.head;;){var pa=wa?oa.childAfter(Y):oa.childBefore(Y);if(!pa)break;var Ka=A;var bb=pa;if(bb.type.prop(ra))Ka=!0;else{var fb=bb.to-bb.from;Ka=fb&&(2<fb||/[^\s,.;:]/.test(Ka.sliceDoc(bb.from,bb.to)))||bb.firstChild}Ka?oa=pa:Y=wa?pa.to:pa.from}var db;A=oa.type.prop(ra)&&(db=wa?(0,v.matchBrackets)(A,
oa.from,1):(0,v.matchBrackets)(A,oa.to,-1))&&db.matched?wa?db.end.to:db.end.from:wa?oa.to:oa.from;return R.EditorSelection.cursor(A,wa?-1:1)}function Qa(A,Y){return Ba(A,function(wa){return wa.empty?A.moveVertically(wa,Y):Pa(wa,Y)})}function na(A,Y){return Ba(A,function(wa){return wa.empty?A.moveVertically(wa,Y,A.dom.clientHeight):Pa(wa,Y)})}function Sa(A,Y,wa){var oa=A.visualLineAt(Y.head),ra=A.moveToLineBoundary(Y,wa);ra.head==Y.head&&ra.head!=(wa?oa.to:oa.from)&&(ra=A.moveToLineBoundary(Y,wa,!1));
!wa&&ra.head==oa.from&&oa.length&&(A=/^\s*/.exec(A.state.sliceDoc(oa.from,Math.min(oa.from+100,oa.to)))[0].length)&&Y.head>oa.from+A&&(ra=R.EditorSelection.cursor(oa.from+A));return ra}function ta(A,Y,wa){var oa=!1,ra=Ma(A.selection,function(pa){var Ka=(0,v.matchBrackets)(A,pa.head,-1)||(0,v.matchBrackets)(A,pa.head,1)||0<pa.head&&(0,v.matchBrackets)(A,pa.head-1,1)||pa.head<A.doc.length&&(0,v.matchBrackets)(A,pa.head+1,-1);if(!Ka||!Ka.end)return pa;oa=!0;Ka=Ka.start.from==pa.head?Ka.end.to:Ka.end.from;
return wa?R.EditorSelection.range(pa.anchor,Ka):R.EditorSelection.cursor(Ka)});if(!oa)return!1;Y(Na(A,ra));return!0}function ya(A,Y){var wa=Ma(A.state.selection,function(oa){var ra=Y(oa);return R.EditorSelection.range(oa.anchor,ra.head,ra.goalColumn)});if(wa.eq(A.state.selection))return!1;A.dispatch(Na(A.state,wa));return!0}function Ga(A,Y){return ya(A,function(wa){return A.moveByChar(wa,Y)})}function fa(A,Y){return ya(A,function(wa){return A.moveByGroup(wa,Y)})}function ca(A,Y){return ya(A,function(wa){return A.moveVertically(wa,
Y)})}function la(A,Y){return ya(A,function(wa){return A.moveVertically(wa,Y,A.dom.clientHeight)})}function ka(A,Y){var wa=A.state.changeByRange(function(oa){var ra=oa.from,pa=oa.to;if(ra==pa){var Ka=Y(ra);ra=Math.min(ra,Ka);pa=Math.max(pa,Ka)}return ra==pa?{range:oa}:{changes:{from:ra,to:pa},range:R.EditorSelection.cursor(ra)}});if(wa.changes.empty)return!1;A.dispatch(wa,{scrollIntoView:!0,annotations:R.Transaction.userEvent.of("delete")});return!0}function H(A){var Y=[],wa=-1,oa=!0,ra=!1,pa=void 0;
try{for(var Ka=A.selection.ranges[Symbol.iterator](),bb;!(oa=(bb=Ka.next()).done);oa=!0){var fb=bb.value,db=A.doc.lineAt(fb.from),Ob=A.doc.lineAt(fb.to);wa==db.number?Y[Y.length-1].to=Ob.to:Y.push({from:db.from,to:Ob.to});wa=Ob.number}}catch(ec){ra=!0,pa=ec}finally{try{if(!oa&&null!=Ka["return"])Ka["return"]()}finally{if(ra)throw pa;}}return Y}function y(A,Y,wa){var oa=[],ra=!0,pa=!1,Ka=void 0;try{for(var bb=H(A)[Symbol.iterator](),fb;!(ra=(fb=bb.next()).done);ra=!0){var db=fb.value;if(wa?db.to!=
A.doc.length:0!=db.from){var Ob=A.doc.lineAt(wa?db.to+1:db.from-1);wa?oa.push({from:db.to,to:Ob.to},{from:db.from,insert:Ob.slice()+A.lineBreak}):oa.push({from:Ob.from,to:db.from},{from:db.to,insert:A.lineBreak+Ob.slice()})}}}catch(ec){pa=!0,Ka=ec}finally{try{if(!ra&&null!=bb["return"])bb["return"]()}finally{if(pa)throw Ka;}}if(!oa.length)return!1;Y(A.update({changes:oa,scrollIntoView:!0}));return!0}function t(A,Y,wa){var oa=[],ra=!0,pa=!1,Ka=void 0;try{for(var bb=H(A)[Symbol.iterator](),fb;!(ra=
(fb=bb.next()).done);ra=!0){var db=fb.value;wa?oa.push({from:db.from,insert:A.doc.slice(db.from,db.to)+A.lineBreak}):oa.push({from:db.to,insert:A.lineBreak+A.doc.slice(db.from,db.to)})}}catch(Ob){pa=!0,Ka=Ob}finally{try{if(!ra&&null!=bb["return"])bb["return"]()}finally{if(pa)throw Ka;}}Y(A.update({changes:oa,scrollIntoView:!0}));return!0}function z(A,Y){var wa=!0,oa=!1,ra=void 0;try{for(var pa=A.state.facet(R.EditorState.indentation)[Symbol.iterator](),Ka;!(wa=(Ka=pa.next()).done);wa=!0){var bb=Ka.value,
fb=bb(A,Y);if(-1<fb)return fb}}catch(db){oa=!0,ra=db}finally{try{if(!wa&&null!=pa["return"])pa["return"]()}finally{if(oa)throw ra;}}return-1}function J(A,Y){var wa=-1;return A.changeByRange(function(oa){for(var ra=[],pa=A.doc.lineAt(oa.from);;){pa.number>wa&&(Y(pa,ra,oa),wa=pa.number);if(oa.to<=pa.to)break;pa=A.doc.lineAt(pa.to+1)}pa=A.changes(ra);return{changes:ra,range:R.EditorSelection.range(pa.mapPos(oa.anchor,1),pa.mapPos(oa.head,1))}})}Object.defineProperty(F,"__esModule",{value:!0});F.transposeChars=
F.standardKeymap=F.splitLine=F.simplifySelection=F.selectSyntaxRight=F.selectSyntaxLeft=F.selectParentSyntax=F.selectPageUp=F.selectPageDown=F.selectMatchingBracket=F.selectLineUp=F.selectLineStart=F.selectLineEnd=F.selectLineDown=F.selectLineBoundaryForward=F.selectLineBoundaryBackward=F.selectLine=F.selectGroupRight=F.selectGroupLeft=F.selectGroupForward=F.selectGroupBackward=F.selectDocStart=F.selectDocEnd=F.selectCharRight=F.selectCharLeft=F.selectCharForward=F.selectCharBackward=F.selectAll=
F.moveLineUp=F.moveLineDown=F.insertNewlineAndIndent=F.insertNewline=F.indentSelection=F.indentMore=F.indentLess=F.emacsStyleKeymap=F.deleteTrailingWhitespace=F.deleteToLineEnd=F.deleteLine=F.deleteGroupForward=F.deleteGroupBackward=F.deleteCodePointForward=F.deleteCodePointBackward=F.deleteCharForward=F.deleteCharBackward=F.defaultKeymap=F.cursorSyntaxRight=F.cursorSyntaxLeft=F.cursorPageUp=F.cursorPageDown=F.cursorMatchingBracket=F.cursorLineUp=F.cursorLineStart=F.cursorLineEnd=F.cursorLineDown=
F.cursorLineBoundaryForward=F.cursorLineBoundaryBackward=F.cursorGroupRight=F.cursorGroupLeft=F.cursorGroupForward=F.cursorGroupBackward=F.cursorDocStart=F.cursorDocEnd=F.cursorCharRight=F.cursorCharLeft=F.cursorCharForward=F.cursorCharBackward=F.copyLineUp=F.copyLineDown=void 0;var R=Oa(2),I=Oa(0),r=Oa(6),v=Oa(17),p=Oa(1),h=function(A){return Fa(A,A.textDirection!=r.Direction.LTR)};F.cursorCharLeft=h;var q=function(A){return Fa(A,A.textDirection==r.Direction.LTR)};F.cursorCharRight=q;F.cursorCharForward=
function(A){return Fa(A,!0)};F.cursorCharBackward=function(A){return Fa(A,!1)};var u=function(A){return sa(A,A.textDirection!=r.Direction.LTR)};F.cursorGroupLeft=u;var L=function(A){return sa(A,A.textDirection==r.Direction.LTR)};F.cursorGroupRight=L;var E=function(A){return sa(A,!0)};F.cursorGroupForward=E;var C=function(A){return sa(A,!1)};F.cursorGroupBackward=C;qa=function(A){return Ba(A,function(Y){return xa(A.state,Y,A.textDirection!=r.Direction.LTR)})};F.cursorSyntaxLeft=qa;Oa=function(A){return Ba(A,
function(Y){return xa(A.state,Y,A.textDirection==r.Direction.LTR)})};F.cursorSyntaxRight=Oa;var G=function(A){return Qa(A,!1)};F.cursorLineUp=G;var Q=function(A){return Qa(A,!0)};F.cursorLineDown=Q;var U=function(A){return na(A,!1)};F.cursorPageUp=U;var ba=function(A){return na(A,!0)};F.cursorPageDown=ba;var ha=function(A){return Ba(A,function(Y){return Sa(A,Y,!0)})};F.cursorLineBoundaryForward=ha;var ua=function(A){return Ba(A,function(Y){return Sa(A,Y,!1)})};F.cursorLineBoundaryBackward=ua;var La=
function(A){return Ba(A,function(Y){return R.EditorSelection.cursor(A.visualLineAt(Y.head).from,1)})};F.cursorLineStart=La;var Ra=function(A){return Ba(A,function(Y){return R.EditorSelection.cursor(A.visualLineAt(Y.head).to,-1)})};F.cursorLineEnd=Ra;kb=function(A){return ta(A.state,A.dispatch,!1)};F.cursorMatchingBracket=kb;F.selectMatchingBracket=function(A){return ta(A.state,A.dispatch,!0)};var gb=function(A){return Ga(A,A.textDirection!=r.Direction.LTR)};F.selectCharLeft=gb;var cb=function(A){return Ga(A,
A.textDirection==r.Direction.LTR)};F.selectCharRight=cb;F.selectCharForward=function(A){return Ga(A,!0)};F.selectCharBackward=function(A){return Ga(A,!1)};var sb=function(A){return fa(A,A.textDirection!=r.Direction.LTR)};F.selectGroupLeft=sb;var zb=function(A){return fa(A,A.textDirection==r.Direction.LTR)};F.selectGroupRight=zb;var pb=function(A){return fa(A,!0)};F.selectGroupForward=pb;var Ib=function(A){return fa(A,!1)};F.selectGroupBackward=Ib;var Bb=function(A){return ya(A,function(Y){return xa(A.state,
Y,A.textDirection!=r.Direction.LTR)})};F.selectSyntaxLeft=Bb;var xb=function(A){return ya(A,function(Y){return xa(A.state,Y,A.textDirection==r.Direction.LTR)})};F.selectSyntaxRight=xb;var tb=function(A){return ca(A,!1)};F.selectLineUp=tb;var vb=function(A){return ca(A,!0)};F.selectLineDown=vb;var Mb=function(A){return la(A,!1)};F.selectPageUp=Mb;var Ab=function(A){return la(A,!0)};F.selectPageDown=Ab;var wb=function(A){return ya(A,function(Y){return Sa(A,Y,!0)})};F.selectLineBoundaryForward=wb;var Nb=
function(A){return ya(A,function(Y){return Sa(A,Y,!1)})};F.selectLineBoundaryBackward=Nb;var oc=function(A){return ya(A,function(Y){return R.EditorSelection.cursor(A.visualLineAt(Y.head).from)})};F.selectLineStart=oc;var bc=function(A){return ya(A,function(Y){return R.EditorSelection.cursor(A.visualLineAt(Y.head).to)})};F.selectLineEnd=bc;var aa=function(A){var Y=A.dispatch;Y(Na(A.state,{anchor:0}));return!0};F.cursorDocStart=aa;var N=function(A){var Y=A.state;A=A.dispatch;A(Na(Y,{anchor:Y.doc.length}));
return!0};F.cursorDocEnd=N;var M=function(A){var Y=A.state;A=A.dispatch;A(Na(Y,{anchor:Y.selection.primary.anchor,head:0}));return!0};F.selectDocStart=M;var D=function(A){var Y=A.state;A=A.dispatch;A(Na(Y,{anchor:Y.selection.primary.anchor,head:Y.doc.length}));return!0};F.selectDocEnd=D;var T=function(A){var Y=A.state;A=A.dispatch;A(Y.update({selection:{anchor:0,head:Y.doc.length},annotations:R.Transaction.userEvent.of("keyboardselection")}));return!0};F.selectAll=T;var W=function(A){var Y=A.state;
A=A.dispatch;var wa=H(Y).map(function(oa){return R.EditorSelection.range(oa.from,Math.min(oa.to+1,Y.doc.length))});A(Y.update({selection:new R.EditorSelection(wa),annotations:R.Transaction.userEvent.of("keyboardselection")}));return!0};F.selectLine=W;var da=function(A){var Y=A.state;A=A.dispatch;var wa=Ma(Y.selection,function(oa){for(var ra,pa=Y.tree.resolve(oa.head,1);!(pa.from<oa.from&&pa.to>=oa.to||pa.to>oa.to&&pa.from<=oa.from)&&(null===(ra=pa.parent)||void 0===ra?0:ra.parent);)pa=pa.parent;return R.EditorSelection.range(pa.to,
pa.from)});A(Na(Y,wa));return!0};F.selectParentSyntax=da;var ma=function(A){var Y=A.state;A=A.dispatch;var wa=Y.selection,oa=null;1<wa.ranges.length?oa=new R.EditorSelection([wa.primary]):wa.primary.empty||(oa=new R.EditorSelection([R.EditorSelection.cursor(wa.primary.head)]));if(!oa)return!1;A(Na(Y,oa));return!0};F.simplifySelection=ma;var Ca=function(A,Y,wa){return ka(A,function(oa){var ra=A.state,pa=ra.doc.lineAt(oa),Ka;if(!Y&&oa>pa.from&&oa<pa.from+200&&!/[^ \t]/.test(Ka=pa.slice(0,oa-pa.from))){if("\t"==
Ka[Ka.length-1])return oa-1;ra=(0,I.countColumn)(Ka,0,ra.tabSize)%ra.indentUnit||ra.indentUnit;for(pa=0;pa<ra&&" "==Ka[Ka.length-1-pa];pa++)oa--;return oa}wa?(Ka=(Ka=pa.slice(oa-pa.from+(Y?0:-2),oa-pa.from+(Y?2:0)))?(0,I.codePointSize)((0,I.codePointAt)(Ka,0)):1,Ka=Y?Math.min(ra.doc.length,oa+Ka):Math.max(0,oa-Ka)):Ka=pa.findClusterBreak(oa-pa.from,Y)+pa.from;Ka==oa&&pa.number!=(Y?ra.doc.lines:1)&&(Ka+=Y?1:-1);return Ka})},Ha=function(A){return Ca(A,!1,!0)};F.deleteCodePointBackward=Ha;F.deleteCodePointForward=
function(A){return Ca(A,!0,!0)};var Ja=function(A){return Ca(A,!1,!1)};F.deleteCharBackward=Ja;var za=function(A){return Ca(A,!0,!1)};F.deleteCharForward=za;var Ta=function(A,Y){return ka(A,function(wa){for(var oa=A.state,ra=oa.doc.lineAt(wa),pa=oa.charCategorizer(wa),Ka=null;;){if(wa==(Y?ra.to:ra.from)){if(ra.number==(Y?oa.doc.lines:1))break;ra=oa.doc.line(ra.number+(Y?1:-1));var bb=Y?ra.from:ra.to;var fb="\n"}else bb=ra.findClusterBreak(wa-ra.from,Y)+ra.from,fb=ra.slice(Math.min(wa,bb)-ra.from,
Math.max(wa,bb)-ra.from);fb=pa(fb);if(null!=Ka&&fb!=Ka)break;fb!=R.CharCategory.Space&&(Ka=fb);wa=bb}return wa})},Va=function(A){return Ta(A,!1)};F.deleteGroupBackward=Va;var $a=function(A){return Ta(A,!0)};F.deleteGroupForward=$a;var eb=function(A){return ka(A,function(Y){var wa=A.visualLineAt(Y).to;return Y<wa?wa:Math.max(A.state.doc.length,Y+1)})};F.deleteToLineEnd=eb;F.deleteTrailingWhitespace=function(A){var Y=A.state;A=A.dispatch;for(var wa=[],oa=0,ra=Y.doc.iterLines();!ra.next().done;){var pa=
ra.value.search(/\s+$/);-1<pa&&wa.push({from:oa+pa,to:oa+ra.value.length});oa+=ra.value.length+1}if(!wa.length)return!1;A(Y.update({changes:wa}));return!0};var ab=function(A){var Y=A.state;A=A.dispatch;var wa=Y.changeByRange(function(oa){return{changes:{from:oa.from,to:oa.to,insert:I.Text.of(["",""])},range:R.EditorSelection.cursor(oa.from)}});A(Y.update(wa,{scrollIntoView:!0,annotations:R.Transaction.userEvent.of("input")}));return!0};F.splitLine=ab;var nb=function(A){var Y=A.state;A=A.dispatch;
var wa=Y.changeByRange(function(oa){if(!oa.empty||0==oa.from||oa.from==Y.doc.length)return{range:oa};oa=oa.from;var ra=Y.doc.lineAt(oa),pa=oa==ra.from?oa-1:ra.findClusterBreak(oa-ra.from,!1)+ra.from;ra=oa==ra.to?oa+1:ra.findClusterBreak(oa-ra.from,!0)+ra.from;return{changes:{from:pa,to:ra,insert:Y.doc.slice(oa,ra).append(Y.doc.slice(pa,oa))},range:R.EditorSelection.cursor(ra)}});if(wa.changes.empty)return!1;A(Y.update(wa,{scrollIntoView:!0}));return!0};F.transposeChars=nb;var lb=function(A){return y(A.state,
A.dispatch,!1)};F.moveLineUp=lb;var Dc=function(A){return y(A.state,A.dispatch,!0)};F.moveLineDown=Dc;var ub=function(A){return t(A.state,A.dispatch,!1)};F.copyLineUp=ub;var hc=function(A){return t(A.state,A.dispatch,!0)};F.copyLineDown=hc;var ic=function(A){var Y=A.state,wa=Y.changes(H(Y).map(function(ra){var pa=ra.from;ra=ra.to;0<pa?pa--:ra<Y.doc.length&&ra++;return{from:pa,to:ra}})),oa=Ma(Y.selection,function(ra){return A.moveVertically(ra,!0)}).map(wa);A.dispatch({changes:wa,selection:oa,scrollIntoView:!0});
return!0};F.deleteLine=ic;F.insertNewline=function(A){var Y=A.state;A=A.dispatch;A(Y.update(Y.replaceSelection(Y.lineBreak),{scrollIntoView:!0}));return!0};var cc=function(A){var Y=A.state;A=A.dispatch;var wa=Y.changeByRange(function(oa){var ra=oa.from;oa=oa.to;var pa;if(pa=ra==oa)if(pa=ra,/\(\)|\[\]|\{\}/.test(Y.sliceDoc(pa-1,pa+1)))pa={from:pa,to:pa};else{var Ka=Y.tree.resolve(pa),bb=Ka.childBefore(pa);Ka=Ka.childAfter(pa);var fb;pa=bb&&Ka&&bb.to<=pa&&Ka.from>=pa&&(fb=bb.type.prop(p.NodeProp.closedBy))&&
-1<fb.indexOf(Ka.name)?{from:bb.to,to:Ka.from}:null}fb=pa;pa=new R.IndentContext(Y,{simulateBreak:ra,simulateDoubleBreak:!!fb});bb=z(pa,ra);0>bb&&(bb=/^\s*/.exec(Y.doc.lineAt(ra).slice(0,50))[0].length);for(Ka=Y.doc.lineAt(ra);oa<Ka.to&&/\s/.test(Ka.slice(oa-Ka.from,oa+1-Ka.from));)oa++;fb?(ra=fb.from,oa=fb.to):ra>Ka.from&&ra<Ka.from+100&&!/\S/.test(Ka.slice(0,ra))&&(ra=Ka.from);var db=["",Y.indentString(bb)];fb&&db.push(Y.indentString(pa.lineIndent(Ka)));return{changes:{from:ra,to:oa,insert:I.Text.of(db)},
range:R.EditorSelection.cursor(ra+1+bb)}});A(Y.update(wa,{scrollIntoView:!0}));return!0};F.insertNewlineAndIndent=cc;var wc=function(A){var Y=A.state;A=A.dispatch;var wa=Object.create(null),oa=new R.IndentContext(Y,{overrideIndentation:function(pa){pa=wa[pa];return null==pa?-1:pa}}),ra=J(Y,function(pa,Ka,bb){var fb=z(oa,pa.from);if(!(0>fb)){var db=/^\s*/.exec(pa.slice(0,Math.min(pa.length,200)))[0],Ob=Y.indentString(fb);if(db!=Ob||bb.from<pa.from+db.length)wa[pa.from]=fb,Ka.push({from:pa.from,to:pa.from+
db.length,insert:Ob})}});ra.changes.empty||A(Y.update(ra));return!0};F.indentSelection=wc;var xc=function(A){var Y=A.state;A=A.dispatch;A(Y.update(J(Y,function(wa,oa){oa.push({from:wa.from,insert:Y.facet(R.EditorState.indentUnit)})})));return!0};F.indentMore=xc;var lc=function(A){var Y=A.state;A=A.dispatch;A(Y.update(J(Y,function(wa,oa){var ra=wa.slice(0,Math.min(wa.length,200));if(ra=/^\s*/.exec(ra)[0]){var pa=(0,I.countColumn)(ra,0,Y.tabSize);pa=Y.indentString(Math.max(0,pa-Y.indentUnit));for(var Ka=
0;Ka<ra.length&&Ka<pa.length&&ra.charCodeAt(Ka)==pa.charCodeAt(Ka);)Ka++;oa.push({from:wa.from+Ka,to:wa.from+ra.length,insert:pa.slice(Ka)})}})));return!0};F.indentLess=lc;E=[{key:"Ctrl-b",run:h,shift:gb},{key:"Ctrl-f",run:q,shift:cb},{key:"Ctrl-p",run:G,shift:tb},{key:"Ctrl-n",run:Q,shift:vb},{key:"Ctrl-a",run:La,shift:oc},{key:"Ctrl-e",run:Ra,shift:bc},{key:"Ctrl-d",run:za},{key:"Ctrl-h",run:Ja},{key:"Ctrl-k",run:eb},{key:"Alt-d",run:$a},{key:"Ctrl-Alt-h",run:Va},{key:"Ctrl-o",run:ab},{key:"Ctrl-t",
run:nb},{key:"Alt-f",run:E,shift:pb},{key:"Alt-b",run:C,shift:Ib},{key:"Alt-\x3c",run:aa},{key:"Alt-\x3e",run:N},{key:"Ctrl-v",run:ba},{key:"Alt-v",run:U}];F.emacsStyleKeymap=E;h=[{key:"ArrowLeft",run:h,shift:gb},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:u,shift:sb},{mac:"Cmd-ArrowLeft",run:La,shift:oc},{key:"ArrowRight",run:q,shift:cb},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:L,shift:zb},{mac:"Cmd-ArrowRight",run:Ra,shift:bc},{key:"ArrowUp",run:G,shift:tb},{mac:"Cmd-ArrowUp",run:aa,shift:M},
{mac:"Ctrl-ArrowUp",run:U,shift:Mb},{key:"ArrowDown",run:Q,shift:vb},{mac:"Cmd-ArrowDown",run:N,shift:D},{mac:"Ctrl-ArrowDown",run:ba,shift:Ab},{key:"PageUp",run:U,shift:Mb},{key:"PageDown",run:ba,shift:Ab},{key:"Home",run:ua,shift:Nb},{key:"Mod-Home",run:aa,shift:M},{key:"End",run:ha,shift:wb},{key:"Mod-End",run:N,shift:D},{key:"Enter",run:cc},{key:"Mod-a",run:T},{key:"Backspace",run:Ha},{key:"Delete",run:za},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Va},{key:"Mod-Delete",mac:"Alt-Delete",run:$a}].concat(E.map(function(A){return{mac:A.key,
run:A.run,shift:A.shift}}));F.standardKeymap=h;qa=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:qa,shift:Bb},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Oa,shift:xb},{key:"Alt-ArrowUp",run:lb},{key:"Shift-Alt-ArrowUp",run:ub},{key:"Alt-ArrowDown",run:Dc},{key:"Shift-Alt-ArrowDown",run:hc},{key:"Escape",run:ma},{key:"Mod-l",run:W},{key:"Mod-i",run:da},{key:"Mod-[",run:lc},{key:"Mod-]",run:xc},{key:"Mod-Alt-\\",run:wc},{key:"Shift-Mod-k",run:ic},{key:"Shift-Mod-\\",run:kb}].concat(h);F.defaultKeymap=
qa};
var k,aa=this||self;
function q(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==
b&&"undefined"==typeof a.call)return"object";return b}var ba="closure_uid_"+(1E9*Math.random()>>>0),ca=0;function ea(a,b){a.sort(b||fa)}function ha(a,b){for(var c=Array(a.length),d=0;d<a.length;d++)c[d]={index:d,value:a[d]};var e=b||fa;ea(c,function(f,g){return e(f.value,g.value)||f.index-g.index});for(d=0;d<a.length;d++)a[d]=c[d].value}function fa(a,b){return a>b?1:a<b?-1:0};function ia(a){const b=[];let c=0;for(const d in a)b[c++]=d;return b};function ja(a,b){null!=a&&this.append.apply(this,arguments)}k=ja.prototype;k.xa="";k.set=function(a){this.xa=""+a};k.append=function(a,b,c){this.xa+=String(a);if(null!=b)for(let d=1;d<arguments.length;d++)this.xa+=arguments[d];return this};k.clear=function(){this.xa=""};k.toString=function(){return this.xa};var ka={},la={},ma,t={},na=null;function oa(){return new v(null,5,[pa,!0,qa,!0,ra,!1,sa,!1,ta,null],null)}function w(a){return null!=a&&!1!==a}function ua(a){return a instanceof Array}function va(a){return null==a?!0:!1===a?!0:!1}function wa(a){return null!=a}function x(a,b){return a[q(null==b?null:b)]?!0:a._?!0:!1}function y(a,b){var c=null==b?null:b.constructor;c=w(w(c)?c.Ab:c)?c.lb:q(b);return Error(["No protocol method ",a," defined for type ",c,": ",b].join(""))}
function ya(a){var b=a.lb;return w(b)?b:z.c(a)}var za="undefined"!==typeof Symbol&&"function"===q(Symbol)?Symbol.iterator:"@@iterator";function Aa(a){for(var b=a.length,c=Array(b),d=0;;)if(d<b)c[d]=a[d],d+=1;else break;return c}function Ba(a){function b(d,e){d.push(e);return d}var c=[];return Ca?Ca(b,c,a):Da.call(null,b,c,a)}function Ea(a){return"symbol"===q(a)||"undefined"!==typeof Symbol&&a instanceof Symbol}function Fa(){}
function Ga(a){if(null!=a&&null!=a.V)a=a.V(a);else{var b=Ga[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=Ga._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("ICounted.-count",a);}return a}function Ha(){}function Ia(a){if(null!=a&&null!=a.W)a=a.W(a);else{var b=Ia[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=Ia._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("IEmptyableCollection.-empty",a);}return a}function Ja(){}
function Ka(a,b){if(null!=a&&null!=a.Y)a=a.Y(a,b);else{var c=Ka[q(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=Ka._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw y("ICollection.-conj",a);}return a}function La(){}
var Oa=function(){function a(d,e,f){var g=Na[q(null==d?null:d)];if(null!=g)return g.l?g.l(d,e,f):g.call(null,d,e,f);g=Na._;if(null!=g)return g.l?g.l(d,e,f):g.call(null,d,e,f);throw y("IIndexed.-nth",d);}function b(d,e){var f=Na[q(null==d?null:d)];if(null!=f)return f.g?f.g(d,e):f.call(null,d,e);f=Na._;if(null!=f)return f.g?f.g(d,e):f.call(null,d,e);throw y("IIndexed.-nth",d);}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+
arguments.length);};c.g=b;c.l=a;return c}(),Na=function Na(a){switch(arguments.length){case 2:return Na.g(arguments[0],arguments[1]);case 3:return Na.l(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length)].join(""));}};Na.g=function(a,b){return null!=a&&null!=a.R?a.R(a,b):Oa(a,b)};Na.l=function(a,b,c){return null!=a&&null!=a.ma?a.ma(a,b,c):Oa(a,b,c)};Na.F=3;
function A(a){if(null!=a&&null!=a.X)a=a.X(a);else{var b=A[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=A._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("ISeq.-first",a);}return a}function Pa(a){if(null!=a&&null!=a.da)a=a.da(a);else{var b=Pa[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=Pa._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("ISeq.-rest",a);}return a}function Qa(){}function Ra(){}
var Ta=function(){function a(d,e,f){var g=Sa[q(null==d?null:d)];if(null!=g)return g.l?g.l(d,e,f):g.call(null,d,e,f);g=Sa._;if(null!=g)return g.l?g.l(d,e,f):g.call(null,d,e,f);throw y("ILookup.-lookup",d);}function b(d,e){var f=Sa[q(null==d?null:d)];if(null!=f)return f.g?f.g(d,e):f.call(null,d,e);f=Sa._;if(null!=f)return f.g?f.g(d,e):f.call(null,d,e);throw y("ILookup.-lookup",d);}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+
arguments.length);};c.g=b;c.l=a;return c}(),Sa=function Sa(a){switch(arguments.length){case 2:return Sa.g(arguments[0],arguments[1]);case 3:return Sa.l(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length)].join(""));}};Sa.g=function(a,b){return null!=a&&null!=a.ka?a.ka(a,b):Ta(a,b)};Sa.l=function(a,b,c){return null!=a&&null!=a.K?a.K(a,b,c):Ta(a,b,c)};Sa.F=3;
function Ua(a,b,c){if(null!=a&&null!=a.va)a=a.va(a,b,c);else{var d=Ua[q(null==a?null:a)];if(null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else if(d=Ua._,null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else throw y("IAssociative.-assoc",a);}return a}function Va(a,b){if(null!=a&&null!=a.Ya)a=a.Ya(a,b);else{var c=Va[q(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=Va._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw y("IFind.-find",a);}return a}function Wa(){}
function Xa(a,b){if(null!=a&&null!=a.rb)a=a.rb(a,b);else{var c=Xa[q(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=Xa._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw y("IMap.-dissoc",a);}return a}function Ya(a){if(null!=a&&null!=a.Kb)a=a.key;else{var b=Ya[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=Ya._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("IMapEntry.-key",a);}return a}
function Za(a){if(null!=a&&null!=a.Lb)a=a.O;else{var b=Za[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=Za._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("IMapEntry.-val",a);}return a}function $a(){}function ab(){}function bb(a){if(null!=a&&null!=a.qb)a=a.qb(a);else{var b=bb[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=bb._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("IDeref.-deref",a);}return a}function cb(){}
function db(a){if(null!=a&&null!=a.S)a=a.S(a);else{var b=db[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=db._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("IMeta.-meta",a);}return a}function eb(a,b){if(null!=a&&null!=a.U)a=a.U(a,b);else{var c=eb[q(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=eb._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw y("IWithMeta.-with-meta",a);}return a}function fb(){}
var hb=function(){function a(d,e,f){var g=gb[q(null==d?null:d)];if(null!=g)return g.l?g.l(d,e,f):g.call(null,d,e,f);g=gb._;if(null!=g)return g.l?g.l(d,e,f):g.call(null,d,e,f);throw y("IReduce.-reduce",d);}function b(d,e){var f=gb[q(null==d?null:d)];if(null!=f)return f.g?f.g(d,e):f.call(null,d,e);f=gb._;if(null!=f)return f.g?f.g(d,e):f.call(null,d,e);throw y("IReduce.-reduce",d);}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+
arguments.length);};c.g=b;c.l=a;return c}(),gb=function gb(a){switch(arguments.length){case 2:return gb.g(arguments[0],arguments[1]);case 3:return gb.l(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length)].join(""));}};gb.g=function(a,b){return null!=a&&null!=a.ba?a.ba(a,b):hb(a,b)};gb.l=function(a,b,c){return null!=a&&null!=a.ca?a.ca(a,b,c):hb(a,b,c)};gb.F=3;function ib(){}
function jb(a,b,c){if(null!=a&&null!=a.jb)a=a.jb(a,b,c);else{var d=jb[q(null==a?null:a)];if(null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else if(d=jb._,null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else throw y("IKVReduce.-kv-reduce",a);}return a}function kb(a,b){if(null!=a&&null!=a.P)a=a.P(a,b);else{var c=kb[q(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=kb._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw y("IEquiv.-equiv",a);}return a}
function lb(a){if(null!=a&&null!=a.T)a=a.T(a);else{var b=lb[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=lb._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("IHash.-hash",a);}return a}function mb(){}function nb(a){if(null!=a&&null!=a.M)a=a.M(a);else{var b=nb[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=nb._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("ISeqable.-seq",a);}return a}function ob(){}function pb(){}function qb(){}function rb(){}
function sb(a){if(null!=a&&null!=a.kb)a=a.kb(a);else{var b=sb[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=sb._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("IReversible.-rseq",a);}return a}function tb(a,b){if(null!=a&&null!=a.zb)a=a.zb(a,b);else{var c=tb[q(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=tb._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw y("IWriter.-write",a);}return a}function ub(){}
function vb(a,b,c){if(null!=a&&null!=a.N)a=a.N(a,b,c);else{var d=vb[q(null==a?null:a)];if(null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else if(d=vb._,null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else throw y("IPrintWithWriter.-pr-writer",a);}return a}function wb(a){if(null!=a&&null!=a.Sa)a=a.Sa(a);else{var b=wb[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=wb._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("IEditableCollection.-as-transient",a);}return a}
function xb(a,b){if(null!=a&&null!=a.Ua)a=a.Ua(a,b);else{var c=xb[q(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=xb._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw y("ITransientCollection.-conj!",a);}return a}function yb(a){if(null!=a&&null!=a.$a)a=a.$a(a);else{var b=yb[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=yb._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("ITransientCollection.-persistent!",a);}return a}
function zb(a,b,c){if(null!=a&&null!=a.Ta)a=a.Ta(a,b,c);else{var d=zb[q(null==a?null:a)];if(null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else if(d=zb._,null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else throw y("ITransientAssociative.-assoc!",a);}return a}function Ab(){}function Bb(a,b){if(null!=a&&null!=a.Ra)a=a.Ra(a,b);else{var c=Bb[q(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=Bb._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw y("IComparable.-compare",a);}return a}
function Cb(a){if(null!=a&&null!=a.vb)a=a.vb(a);else{var b=Cb[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=Cb._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("IChunk.-drop-first",a);}return a}function Db(a){if(null!=a&&null!=a.pb)a=a.pb(a);else{var b=Db[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=Db._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("IChunkedSeq.-chunked-first",a);}return a}
function Eb(a){if(null!=a&&null!=a.ib)a=a.ib(a);else{var b=Eb[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=Eb._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("IChunkedSeq.-chunked-rest",a);}return a}function Fb(a,b){if(null!=a&&null!=a.Pb)a=a.Pb(a,b);else{var c=Fb[q(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=Fb._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw y("IReset.-reset!",a);}return a}
var Hb=function(){function a(f,g,h,l,m){var n=Gb[q(null==f?null:f)];if(null!=n)return n.ja?n.ja(f,g,h,l,m):n.call(null,f,g,h,l,m);n=Gb._;if(null!=n)return n.ja?n.ja(f,g,h,l,m):n.call(null,f,g,h,l,m);throw y("ISwap.-swap!",f);}function b(f,g,h,l){var m=Gb[q(null==f?null:f)];if(null!=m)return m.I?m.I(f,g,h,l):m.call(null,f,g,h,l);m=Gb._;if(null!=m)return m.I?m.I(f,g,h,l):m.call(null,f,g,h,l);throw y("ISwap.-swap!",f);}function c(f,g,h){var l=Gb[q(null==f?null:f)];if(null!=l)return l.l?l.l(f,g,h):l.call(null,
f,g,h);l=Gb._;if(null!=l)return l.l?l.l(f,g,h):l.call(null,f,g,h);throw y("ISwap.-swap!",f);}function d(f,g){var h=Gb[q(null==f?null:f)];if(null!=h)return h.g?h.g(f,g):h.call(null,f,g);h=Gb._;if(null!=h)return h.g?h.g(f,g):h.call(null,f,g);throw y("ISwap.-swap!",f);}var e=null;e=function(f,g,h,l,m){switch(arguments.length){case 2:return d.call(this,f,g);case 3:return c.call(this,f,g,h);case 4:return b.call(this,f,g,h,l);case 5:return a.call(this,f,g,h,l,m)}throw Error("Invalid arity: "+arguments.length);
};e.g=d;e.l=c;e.I=b;e.ja=a;return e}(),Gb=function Gb(a){switch(arguments.length){case 2:return Gb.g(arguments[0],arguments[1]);case 3:return Gb.l(arguments[0],arguments[1],arguments[2]);case 4:return Gb.I(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return Gb.ja(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",z.c(arguments.length)].join(""));}};Gb.g=function(a,b){return null!=a&&null!=a.Rb?a.Rb(a,b):Hb(a,b)};
Gb.l=function(a,b,c){return null!=a&&null!=a.Sb?a.Sb(a,b,c):Hb(a,b,c)};Gb.I=function(a,b,c,d){return null!=a&&null!=a.Tb?a.Tb(a,b,c,d):Hb(a,b,c,d)};Gb.ja=function(a,b,c,d,e){return null!=a&&null!=a.Ub?a.Ub(a,b,c,d,e):Hb(a,b,c,d,e)};Gb.F=5;function Ib(){}function Jb(a){if(null!=a&&null!=a.na)a=a.na(a);else{var b=Jb[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=Jb._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("IIterable.-iterator",a);}return a}
function Kb(a){this.Yb=a;this.j=1073741824;this.A=0}Kb.prototype.zb=function(a,b){return this.Yb.append(b)};function Lb(a){var b=new ja;a.N(null,new Kb(b),oa());return z.c(b)}var Mb="undefined"!==typeof Math&&"undefined"!==typeof Math.imul&&0!==Math.imul(4294967295,5)?function(a,b){return Math.imul(a,b)}:function(a,b){var c=a&65535,d=b&65535;return c*d+((a>>>16&65535)*d+c*(b>>>16&65535)<<16>>>0)|0};function Nb(a){a=Mb(a|0,-862048943);return Mb(a<<15|a>>>-15,461845907)}
function Ob(a,b){a=(a|0)^(b|0);return Mb(a<<13|a>>>-13,5)+-430675100|0}function Pb(a,b){a=(a|0)^b;a=Mb(a^a>>>16,-2048144789);a=Mb(a^a>>>13,-1028477387);return a^a>>>16}function Qb(a){a:{var b=1;for(var c=0;;)if(b<a.length)c=Ob(c,Nb(a.charCodeAt(b-1)|a.charCodeAt(b)<<16)),b+=2;else{b=c;break a}}return Pb(1===(a.length&1)?b^Nb(a.charCodeAt(a.length-1)):b,Mb(2,a.length))}var Rb={},Sb=0;
function Tb(a){255<Sb&&(Rb={},Sb=0);if(null==a)return 0;var b=Rb[a];if("number"===typeof b)a=b;else{a:if(null!=a)if(b=a.length,0<b)for(var c=0,d=0;;)if(c<b)d=Mb(31,d)+a.charCodeAt(c),c+=1;else{b=d;break a}else b=0;else b=0;Rb[a]=b;Sb+=1;a=b}return a}
function Ub(a){if(null!=a&&(a.j&4194304||t===a.dc))return a.T(null)^0;if("number"===typeof a){if(w(isFinite(a)))return Math.floor(a)%2147483647;switch(a){case Infinity:return 2146435072;case -Infinity:return-1048576;default:return 2146959360}}else return!0===a?a=1231:!1===a?a=1237:"string"===typeof a?(a=Tb(a),a=0===a?a:Pb(Ob(0,Nb(a)),4)):a=a instanceof Date?a.valueOf()^0:null==a?0:lb(a)^0,a}function Vb(a,b){return a^b+2654435769+(a<<6)+(a>>2)}
function Wb(a,b){if(a.str===b.str)return 0;if(w(va(a.ha)?b.ha:!1))return-1;if(w(a.ha)){if(va(b.ha))return 1;var c=fa(a.ha,b.ha);return 0===c?fa(a.name,b.name):c}return fa(a.name,b.name)}function Xb(a,b,c,d,e){this.ha=a;this.name=b;this.str=c;this.Qa=d;this.ta=e;this.j=2154168321;this.A=4096}k=Xb.prototype;k.toString=function(){return this.str};k.P=function(a,b){return b instanceof Xb?this.str===b.str:!1};
k.call=function(a){switch(arguments.length-1){case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length-1)].join(""));}};k.apply=function(a,b){return this.call.apply(this,[this].concat(Aa(b)))};k.c=function(a){return C.g?C.g(a,this):C.call(null,a,this)};k.g=function(a,b){return C.l?C.l(a,this,b):C.call(null,a,this,b)};k.S=function(){return this.ta};
k.U=function(a,b){return new Xb(this.ha,this.name,this.str,this.Qa,b)};k.T=function(){var a=this.Qa;return null!=a?a:this.Qa=a=Vb(Qb(this.name),Tb(this.ha))};k.N=function(a,b){return tb(b,this.str)};var Yb=function Yb(a){switch(arguments.length){case 1:return Yb.c(arguments[0]);case 2:return Yb.g(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",z.c(arguments.length)].join(""));}};
Yb.c=function(a){for(;;){if(a instanceof Xb)return a;if("string"===typeof a){var b=a.indexOf("/");return 1>b?Yb.g(null,a):Yb.g(a.substring(0,b),a.substring(b+1,a.length))}if(a instanceof E)a=a.oa;else throw Error("no conversion to symbol");}};Yb.g=function(a,b){var c=null!=a?[z.c(a),"/",z.c(b)].join(""):b;return new Xb(a,b,c,null,null)};Yb.F=2;function Zb(a){return null!=a?a.A&131072||t===a.ec?!0:a.A?!1:x(Ib,a):x(Ib,a)}
function G(a){if(null==a)return null;if(null!=a&&(a.j&8388608||t===a.Qb))return a.M(null);if(ua(a)||"string"===typeof a)return 0===a.length?null:new H(a,0,null);if(null!=a&&null!=a[za])return a=(null!==a&&za in a?a[za]:void 0).call(a),$b.c?$b.c(a):$b.call(null,a);if(x(mb,a))return nb(a);throw Error([z.c(a)," is not ISeqable"].join(""));}function I(a){if(null==a)return null;if(null!=a&&(a.j&64||t===a.u))return a.X(null);a=G(a);return null==a?null:A(a)}
function ac(a){return null!=a?null!=a&&(a.j&64||t===a.u)?a.da(null):(a=G(a))?a.da(null):J:J}function K(a){return null==a?null:null!=a&&(a.j&128||t===a.Za)?a.aa():G(ac(a))}var M=function M(a){switch(arguments.length){case 1:return M.c(arguments[0]);case 2:return M.g(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return M.s(arguments[0],arguments[1],new H(c.slice(2),0,null))}};M.c=function(){return!0};
M.g=function(a,b){return null==a?null==b:a===b||kb(a,b)};M.s=function(a,b,c){for(;;)if(M.g(a,b))if(K(c))a=b,b=I(c),c=K(c);else return M.g(b,I(c));else return!1};M.C=function(a){var b=I(a),c=K(a);a=I(c);c=K(c);return this.s(b,a,c)};M.F=2;function bc(a){this.D=a}bc.prototype.next=function(){if(null!=this.D){var a=I(this.D);this.D=K(this.D);return{value:a,done:!1}}return{value:null,done:!0}};function cc(a){return new bc(G(a))}
function dc(a,b){this.value=a;this.Wa=b;this.nb=null;this.j=8388672;this.A=0}dc.prototype.M=function(){return this};dc.prototype.X=function(){return this.value};dc.prototype.da=function(){null==this.nb&&(this.nb=$b.c?$b.c(this.Wa):$b.call(null,this.Wa));return this.nb};function $b(a){var b=a.next();return w(b.done)?null:new dc(b.value,a)}function ec(a){var b=0,c=1;for(a=G(a);;)if(null!=a)b+=1,c=Mb(31,c)+Ub(I(a))|0,a=K(a);else return Pb(Ob(0,Nb(c)),b)}var fc=Pb(Ob(0,Nb(1)),0);
function gc(a){var b=0,c=0;for(a=G(a);;)if(null!=a)b+=1,c=c+Ub(I(a))|0,a=K(a);else return Pb(Ob(0,Nb(c)),b)}var hc=Pb(Ob(0,Nb(0)),0);Fa["null"]=!0;Ga["null"]=function(){return 0};Date.prototype.P=function(a,b){return b instanceof Date&&this.valueOf()===b.valueOf()};Date.prototype.Xa=t;Date.prototype.Ra=function(a,b){if(b instanceof Date)return fa(this.valueOf(),b.valueOf());throw Error(["Cannot compare ",z.c(this)," to ",z.c(b)].join(""));};kb.number=function(a,b){return a===b};cb["function"]=!0;
db["function"]=function(){return null};lb._=function(a){return a[ba]||(a[ba]=++ca)};function ic(a){this.O=a;this.j=32768;this.A=0}ic.prototype.qb=function(){return this.O};function jc(a){return a instanceof ic}function kc(a){return bb(a)}function lc(a,b){var c=a.length;if(0===a.length)return b.B?b.B():b.call(null);for(var d=a[0],e=1;;)if(e<c){var f=a[e];d=b.g?b.g(d,f):b.call(null,d,f);if(jc(d))return bb(d);e+=1}else return d}
function mc(a,b,c){var d=a.length,e=c;for(c=0;;)if(c<d){var f=a[c];e=b.g?b.g(e,f):b.call(null,e,f);if(jc(e))return bb(e);c+=1}else return e}function nc(a,b,c,d){for(var e=a.length;;)if(d<e){var f=a[d];c=b.g?b.g(c,f):b.call(null,c,f);if(jc(c))return bb(c);d+=1}else return c}function oc(a){return null!=a?a.j&2||t===a.Db?!0:a.j?!1:x(Fa,a):x(Fa,a)}function pc(a){return null!=a?a.j&16||t===a.xb?!0:a.j?!1:x(La,a):x(La,a)}
function N(a,b,c){var d=O.c?O.c(a):O.call(null,a);if(c>=d)return-1;!(0<c)&&0>c&&(c+=d,c=0>c?0:c);for(;;)if(c<d){if(M.g(qc?qc(a,c):rc.call(null,a,c),b))return c;c+=1}else return-1}function P(a,b,c){var d=O.c?O.c(a):O.call(null,a);if(0===d)return-1;0<c?(--d,c=d<c?d:c):c=0>c?d+c:c;for(;;)if(0<=c){if(M.g(qc?qc(a,c):rc.call(null,a,c),b))return c;--c}else return-1}function sc(a,b){this.h=a;this.i=b}sc.prototype.fa=function(){return this.i<this.h.length};
sc.prototype.next=function(){var a=this.h[this.i];this.i+=1;return a};function H(a,b,c){this.h=a;this.i=b;this.meta=c;this.j=166592766;this.A=139264}k=H.prototype;k.toString=function(){return Lb(this)};k.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
k.lastIndexOf=function(){function a(c){return P(this,c,O.c?O.c(this):O.call(null,this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return P(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return P(this,c,d)};return b}();k.R=function(a,b){a=b+this.i;if(0<=a&&a<this.h.length)return this.h[a];throw Error("Index out of bounds");};k.ma=function(a,b,c){a=b+this.i;return 0<=a&&a<this.h.length?this.h[a]:c};
k.na=function(){return new sc(this.h,this.i)};k.S=function(){return this.meta};k.aa=function(){return this.i+1<this.h.length?new H(this.h,this.i+1,null):null};k.V=function(){var a=this.h.length-this.i;return 0>a?0:a};k.kb=function(){var a=this.V(null);return 0<a?new tc(this,a-1,null):null};k.T=function(){return ec(this)};k.P=function(a,b){return uc.g?uc.g(this,b):uc.call(null,this,b)};k.W=function(){return J};k.ba=function(a,b){return nc(this.h,b,this.h[this.i],this.i+1)};
k.ca=function(a,b,c){return nc(this.h,b,c,this.i)};k.X=function(){return this.h[this.i]};k.da=function(){return this.i+1<this.h.length?new H(this.h,this.i+1,null):J};k.M=function(){return this.i<this.h.length?this:null};k.U=function(a,b){return b===this.meta?this:new H(this.h,this.i,b)};k.Y=function(a,b){return Q.g?Q.g(b,this):Q.call(null,b,this)};H.prototype[za]=function(){return cc(this)};function vc(a){return 0<a.length?new H(a,0,null):null}
function tc(a,b,c){this.hb=a;this.i=b;this.meta=c;this.j=32374990;this.A=8192}k=tc.prototype;k.toString=function(){return Lb(this)};k.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
k.lastIndexOf=function(){function a(c){return P(this,c,O.c?O.c(this):O.call(null,this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return P(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return P(this,c,d)};return b}();k.S=function(){return this.meta};k.aa=function(){return 0<this.i?new tc(this.hb,this.i-1,null):null};k.V=function(){return this.i+1};k.T=function(){return ec(this)};
k.P=function(a,b){return uc.g?uc.g(this,b):uc.call(null,this,b)};k.W=function(){return J};k.ba=function(a,b){return wc?wc(b,this):xc.call(null,b,this)};k.ca=function(a,b,c){return yc?yc(b,c,this):xc.call(null,b,c,this)};k.X=function(){return Na(this.hb,this.i)};k.da=function(){return 0<this.i?new tc(this.hb,this.i-1,null):J};k.M=function(){return this};k.U=function(a,b){return b===this.meta?this:new tc(this.hb,this.i,b)};k.Y=function(a,b){return Q.g?Q.g(b,this):Q.call(null,b,this)};
tc.prototype[za]=function(){return cc(this)};function zc(a){for(;;){var b=K(a);if(null!=b)a=b;else return I(a)}}kb._=function(a,b){return a===b};var Ac=function Ac(a){switch(arguments.length){case 0:return Ac.B();case 1:return Ac.c(arguments[0]);case 2:return Ac.g(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Ac.s(arguments[0],arguments[1],new H(c.slice(2),0,null))}};Ac.B=function(){return Bc};Ac.c=function(a){return a};
Ac.g=function(a,b){return null!=a?Ka(a,b):new Cc(null,b,null,1,null)};Ac.s=function(a,b,c){for(;;)if(w(c))a=Ac.g(a,b),b=I(c),c=K(c);else return Ac.g(a,b)};Ac.C=function(a){var b=I(a),c=K(a);a=I(c);c=K(c);return this.s(b,a,c)};Ac.F=2;
function O(a){if(null!=a)if(null!=a&&(a.j&2||t===a.Db))a=a.V(null);else if(ua(a))a=a.length;else if("string"===typeof a)a=a.length;else if(null!=a&&(a.j&8388608||t===a.Qb))a:{a=G(a);for(var b=0;;){if(oc(a)){a=b+Ga(a);break a}a=K(a);b+=1}}else a=Ga(a);else a=0;return a}function Dc(a,b,c){for(;;){if(null==a)return c;if(0===b)return G(a)?I(a):c;if(pc(a))return Na(a,b,c);if(G(a))a=K(a),--b;else return c}}
function rc(a){switch(arguments.length){case 2:return qc(arguments[0],arguments[1]);case 3:return S(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length)].join(""));}}
function qc(a,b){if("number"!==typeof b)throw Error("Index argument to nth must be a number");if(null==a)return a;if(null!=a&&(a.j&16||t===a.xb))return a.R(null,b);if(ua(a)){if(-1<b&&b<a.length)return a[b|0];throw Error("Index out of bounds");}if("string"===typeof a){if(-1<b&&b<a.length)return a.charAt(b|0);throw Error("Index out of bounds");}if(null!=a&&(a.j&64||t===a.u)||null!=a&&(a.j&16777216||t===a.yb)){if(0>b)throw Error("Index out of bounds");a:for(;;){if(null==a)throw Error("Index out of bounds");
if(0===b){if(G(a)){a=I(a);break a}throw Error("Index out of bounds");}if(pc(a)){a=Na(a,b);break a}if(G(a))a=K(a),--b;else throw Error("Index out of bounds");}return a}if(x(La,a))return Na(a,b);throw Error(["nth not supported on this type ",z.c(ya(null==a?null:a.constructor))].join(""));}
function S(a,b,c){if("number"!==typeof b)throw Error("Index argument to nth must be a number.");if(null==a)return c;if(null!=a&&(a.j&16||t===a.xb))return a.ma(null,b,c);if(ua(a))return-1<b&&b<a.length?a[b|0]:c;if("string"===typeof a)return-1<b&&b<a.length?a.charAt(b|0):c;if(null!=a&&(a.j&64||t===a.u)||null!=a&&(a.j&16777216||t===a.yb))return 0>b?c:Dc(a,b,c);if(x(La,a))return Na(a,b,c);throw Error(["nth not supported on this type ",z.c(ya(null==a?null:a.constructor))].join(""));}
var C=function C(a){switch(arguments.length){case 2:return C.g(arguments[0],arguments[1]);case 3:return C.l(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length)].join(""));}};C.g=function(a,b){return null==a?null:null!=a&&(a.j&256||t===a.Jb)?a.ka(null,b):ua(a)?null!=b&&b<a.length?a[b|0]:null:"string"===typeof a?null!=b&&-1<b&&b<a.length?a.charAt(b|0):null:x(Ra,a)?Sa(a,b):null};
C.l=function(a,b,c){return null!=a?null!=a&&(a.j&256||t===a.Jb)?a.K(null,b,c):ua(a)?null!=b&&-1<b&&b<a.length?a[b|0]:c:"string"===typeof a?null!=b&&-1<b&&b<a.length?a.charAt(b|0):c:x(Ra,a)?Sa(a,b,c):c:c};C.F=3;var Ec=function Ec(a){switch(arguments.length){case 3:return Ec.l(arguments[0],arguments[1],arguments[2]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Ec.s(arguments[0],arguments[1],arguments[2],new H(c.slice(3),0,null))}};
Ec.l=function(a,b,c){if(null!=a&&(a.j&512||t===a.ac))a=a.va(null,b,c);else if(null!=a)a=Ua(a,b,c);else{a=[b,c];b=[];for(c=0;;)if(c<a.length){var d=a[c],e=a[c+1],f=Fc(b,d);-1===f?(f=b,f.push(d),f.push(e)):b[f+1]=e;c+=2}else break;a=new v(null,b.length/2,b,null)}return a};Ec.s=function(a,b,c,d){for(;;)if(a=Ec.l(a,b,c),w(d))b=I(d),c=I(K(d)),d=K(K(d));else return a};Ec.C=function(a){var b=I(a),c=K(a);a=I(c);var d=K(c);c=I(d);d=K(d);return this.s(b,a,c,d)};Ec.F=3;
var Gc=function Gc(a){switch(arguments.length){case 1:return Gc.c(arguments[0]);case 2:return Gc.g(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Gc.s(arguments[0],arguments[1],new H(c.slice(2),0,null))}};Gc.c=function(a){return a};Gc.g=function(a,b){return null==a?null:Xa(a,b)};Gc.s=function(a,b,c){for(;;){if(null==a)return null;a=Gc.g(a,b);if(w(c))b=I(c),c=K(c);else return a}};
Gc.C=function(a){var b=I(a),c=K(a);a=I(c);c=K(c);return this.s(b,a,c)};Gc.F=2;function Hc(a,b){this.o=a;this.meta=b;this.j=393217;this.A=0}k=Hc.prototype;k.S=function(){return this.meta};k.U=function(a,b){return new Hc(this.o,b)};
k.call=function(a){switch(arguments.length-1){case 0:return this.B();case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);case 3:return this.l(arguments[1],arguments[2],arguments[3]);case 4:return this.I(arguments[1],arguments[2],arguments[3],arguments[4]);case 5:return this.ja(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 6:return this.Ja(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);case 7:return this.Ka(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);case 8:return this.La(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8]);case 9:return this.Ma(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]);case 10:return this.ya(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10]);
case 11:return this.za(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]);case 12:return this.Aa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12]);case 13:return this.Ba(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],
arguments[11],arguments[12],arguments[13]);case 14:return this.Ca(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14]);case 15:return this.Da(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15]);case 16:return this.Ea(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16]);case 17:return this.Fa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17]);case 18:return this.Ga(arguments[1],arguments[2],
arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18]);case 19:return this.Ha(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19]);case 20:return this.Ia(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20]);case 21:var b=arguments[1],c=arguments[2],d=arguments[3],e=arguments[4],f=arguments[5],g=arguments[6],h=arguments[7],l=arguments[8],m=arguments[9],n=arguments[10],p=arguments[11],r=arguments[12],u=arguments[13],B=arguments[14],F=arguments[15],
D=arguments[16],R=arguments[17],X=arguments[18],da=arguments[19],xa=arguments[20],Ma=arguments[21];return Ic.Ib?Ic.Ib(this.o,b,c,d,e,f,g,h,l,m,n,p,r,u,B,F,D,R,X,da,xa,Ma):Ic.call(null,this.o,b,c,d,e,f,g,h,l,m,n,p,r,u,B,F,D,R,X,da,xa,Ma);default:throw Error(["Invalid arity: ",z.c(arguments.length-1)].join(""));}};k.apply=function(a,b){return this.call.apply(this,[this].concat(Aa(b)))};k.B=function(){return this.o.B?this.o.B():this.o.call(null)};
k.c=function(a){return this.o.c?this.o.c(a):this.o.call(null,a)};k.g=function(a,b){return this.o.g?this.o.g(a,b):this.o.call(null,a,b)};k.l=function(a,b,c){return this.o.l?this.o.l(a,b,c):this.o.call(null,a,b,c)};k.I=function(a,b,c,d){return this.o.I?this.o.I(a,b,c,d):this.o.call(null,a,b,c,d)};k.ja=function(a,b,c,d,e){return this.o.ja?this.o.ja(a,b,c,d,e):this.o.call(null,a,b,c,d,e)};k.Ja=function(a,b,c,d,e,f){return this.o.Ja?this.o.Ja(a,b,c,d,e,f):this.o.call(null,a,b,c,d,e,f)};
k.Ka=function(a,b,c,d,e,f,g){return this.o.Ka?this.o.Ka(a,b,c,d,e,f,g):this.o.call(null,a,b,c,d,e,f,g)};k.La=function(a,b,c,d,e,f,g,h){return this.o.La?this.o.La(a,b,c,d,e,f,g,h):this.o.call(null,a,b,c,d,e,f,g,h)};k.Ma=function(a,b,c,d,e,f,g,h,l){return this.o.Ma?this.o.Ma(a,b,c,d,e,f,g,h,l):this.o.call(null,a,b,c,d,e,f,g,h,l)};k.ya=function(a,b,c,d,e,f,g,h,l,m){return this.o.ya?this.o.ya(a,b,c,d,e,f,g,h,l,m):this.o.call(null,a,b,c,d,e,f,g,h,l,m)};
k.za=function(a,b,c,d,e,f,g,h,l,m,n){return this.o.za?this.o.za(a,b,c,d,e,f,g,h,l,m,n):this.o.call(null,a,b,c,d,e,f,g,h,l,m,n)};k.Aa=function(a,b,c,d,e,f,g,h,l,m,n,p){return this.o.Aa?this.o.Aa(a,b,c,d,e,f,g,h,l,m,n,p):this.o.call(null,a,b,c,d,e,f,g,h,l,m,n,p)};k.Ba=function(a,b,c,d,e,f,g,h,l,m,n,p,r){return this.o.Ba?this.o.Ba(a,b,c,d,e,f,g,h,l,m,n,p,r):this.o.call(null,a,b,c,d,e,f,g,h,l,m,n,p,r)};
k.Ca=function(a,b,c,d,e,f,g,h,l,m,n,p,r,u){return this.o.Ca?this.o.Ca(a,b,c,d,e,f,g,h,l,m,n,p,r,u):this.o.call(null,a,b,c,d,e,f,g,h,l,m,n,p,r,u)};k.Da=function(a,b,c,d,e,f,g,h,l,m,n,p,r,u,B){return this.o.Da?this.o.Da(a,b,c,d,e,f,g,h,l,m,n,p,r,u,B):this.o.call(null,a,b,c,d,e,f,g,h,l,m,n,p,r,u,B)};k.Ea=function(a,b,c,d,e,f,g,h,l,m,n,p,r,u,B,F){return this.o.Ea?this.o.Ea(a,b,c,d,e,f,g,h,l,m,n,p,r,u,B,F):this.o.call(null,a,b,c,d,e,f,g,h,l,m,n,p,r,u,B,F)};
k.Fa=function(a,b,c,d,e,f,g,h,l,m,n,p,r,u,B,F,D){return this.o.Fa?this.o.Fa(a,b,c,d,e,f,g,h,l,m,n,p,r,u,B,F,D):this.o.call(null,a,b,c,d,e,f,g,h,l,m,n,p,r,u,B,F,D)};k.Ga=function(a,b,c,d,e,f,g,h,l,m,n,p,r,u,B,F,D,R){return this.o.Ga?this.o.Ga(a,b,c,d,e,f,g,h,l,m,n,p,r,u,B,F,D,R):this.o.call(null,a,b,c,d,e,f,g,h,l,m,n,p,r,u,B,F,D,R)};
k.Ha=function(a,b,c,d,e,f,g,h,l,m,n,p,r,u,B,F,D,R,X){return this.o.Ha?this.o.Ha(a,b,c,d,e,f,g,h,l,m,n,p,r,u,B,F,D,R,X):this.o.call(null,a,b,c,d,e,f,g,h,l,m,n,p,r,u,B,F,D,R,X)};k.Ia=function(a,b,c,d,e,f,g,h,l,m,n,p,r,u,B,F,D,R,X,da){return this.o.Ia?this.o.Ia(a,b,c,d,e,f,g,h,l,m,n,p,r,u,B,F,D,R,X,da):this.o.call(null,a,b,c,d,e,f,g,h,l,m,n,p,r,u,B,F,D,R,X,da)};function Jc(a,b){return"function"==q(a)?new Hc(a,b):null==a?null:eb(a,b)}
function Kc(a){return null!=a&&(null!=a?a.j&131072||t===a.Mb||(a.j?0:x(cb,a)):x(cb,a))?db(a):null}function Lc(a){return null==a?!1:null!=a?a.j&4096||t===a.mc?!0:a.j?!1:x($a,a):x($a,a)}function Mc(a){return null!=a?a.j&16777216||t===a.yb?!0:a.j?!1:x(ob,a):x(ob,a)}function Nc(a){return null==a?!1:null!=a?a.j&1024||t===a.ic?!0:a.j?!1:x(Wa,a):x(Wa,a)}function Oc(a){return null!=a?a.j&67108864||t===a.kc?!0:a.j?!1:x(qb,a):x(qb,a)}
function Pc(a){return null!=a?a.j&16384||t===a.nc?!0:a.j?!1:x(ab,a):x(ab,a)}function Qc(a){return null!=a?a.A&512||t===a.bc?!0:!1:!1}function Rc(a,b,c,d,e){for(;0!==e;)c[d]=a[b],d+=1,--e,b+=1}var Sc={};function Tc(a){return null==a?!1:!1===a?!1:!0}function Uc(a,b){return C.l(a,b,Sc)===Sc?!1:!0}
function Vc(a,b){if(a===b)return 0;if(null==a)return-1;if(null==b)return 1;if("number"===typeof a){if("number"===typeof b)return fa(a,b);throw Error(["Cannot compare ",z.c(a)," to ",z.c(b)].join(""));}if(null!=a?a.A&2048||t===a.Xa||(a.A?0:x(Ab,a)):x(Ab,a))return Bb(a,b);if("string"!==typeof a&&!ua(a)&&!0!==a&&!1!==a||(null==a?null:a.constructor)!==(null==b?null:b.constructor))throw Error(["Cannot compare ",z.c(a)," to ",z.c(b)].join(""));return fa(a,b)}
function Wc(a,b){var c=O(a),d=O(b);if(c<d)a=-1;else if(c>d)a=1;else if(0===c)a=0;else a:for(d=0;;){var e=Vc(qc(a,d),qc(b,d));if(0===e&&d+1<c)d+=1;else{a=e;break a}}return a}function Xc(a){return M.g(a,Vc)?Vc:function(b,c){var d=a.g?a.g(b,c):a.call(null,b,c);return"number"===typeof d?d:w(d)?-1:w(a.g?a.g(c,b):a.call(null,c,b))?1:0}}function Yc(a,b){return G(b)?(b=Zc.c?Zc.c(b):Zc.call(null,b),ha(b,Xc(a)),G(b)):J}
function $c(){return Yc(function(a,b){a=I.c?I.c(a):I.call(null,a);b=I.c?I.c(b):I.call(null,b);var c=Xc(Vc);return c.g?c.g(a,b):c.call(null,a,b)},ad)}function xc(a){switch(arguments.length){case 2:return wc(arguments[0],arguments[1]);case 3:return yc(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length)].join(""));}}function wc(a,b){var c=G(b);return c?(b=I(c),c=K(c),Ca?Ca(a,b,c):Da.call(null,a,b,c)):a.B?a.B():a.call(null)}
function yc(a,b,c){for(c=G(c);;)if(c){var d=I(c);b=a.g?a.g(b,d):a.call(null,b,d);if(jc(b))return bb(b);c=K(c)}else return b}function bd(a,b){a=Jb(a);if(w(a.fa()))for(var c=a.next();;)if(a.fa()){var d=a.next();c=b.g?b.g(c,d):b.call(null,c,d);if(jc(c))return bb(c)}else return c;else return b.B?b.B():b.call(null)}function cd(a,b,c){for(a=Jb(a);;)if(a.fa()){var d=a.next();c=b.g?b.g(c,d):b.call(null,c,d);if(jc(c))return bb(c)}else return c}
function Da(a){switch(arguments.length){case 2:return dd(arguments[0],arguments[1]);case 3:return Ca(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length)].join(""));}}function dd(a,b){return null!=b&&(b.j&524288||t===b.Ob)?b.ba(null,a):ua(b)?lc(b,a):"string"===typeof b?lc(b,a):x(fb,b)?gb(b,a):Zb(b)?bd(b,a):wc(a,b)}
function Ca(a,b,c){return null!=c&&(c.j&524288||t===c.Ob)?c.ca(null,a,b):ua(c)?mc(c,a,b):"string"===typeof c?mc(c,a,b):x(fb,c)?gb(c,a,b):Zb(c)?cd(c,a,b):yc(a,b,c)}function ed(a,b,c){return null!=c?jb(c,a,b):b}function fd(a){return a}function gd(a,b,c,d){a=a.c?a.c(b):a.call(null,b);c=Ca(a,c,d);return a.c?a.c(c):a.call(null,c)}function hd(a){a=(a-a%2)/2;return 0<=a?Math.floor(a):Math.ceil(a)}
function id(a){a-=a>>1&1431655765;a=(a&858993459)+(a>>2&858993459);return 16843009*(a+(a>>4)&252645135)>>24}function jd(a){return 0>a}var z=function z(a){switch(arguments.length){case 0:return z.B();case 1:return z.c(arguments[0]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return z.s(arguments[0],new H(c.slice(1),0,null))}};z.B=function(){return""};z.c=function(a){return null==a?"":[a].join("")};
z.s=function(a,b){for(a=new ja(z.c(a));;)if(w(b))a=a.append(z.c(I(b))),b=K(b);else return a.toString()};z.C=function(a){var b=I(a);a=K(a);return this.s(b,a)};z.F=1;function uc(a,b){if(Mc(b))if(oc(a)&&oc(b)&&O(a)!==O(b))a=!1;else a:for(a=G(a),b=G(b);;){if(null==a){a=null==b;break a}if(null!=b&&M.g(I(a),I(b)))a=K(a),b=K(b);else{a=!1;break a}}else a=null;return Tc(a)}function Cc(a,b,c,d,e){this.meta=a;this.first=b;this.rest=c;this.count=d;this.v=e;this.j=65937646;this.A=8192}k=Cc.prototype;
k.toString=function(){return Lb(this)};k.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
k.lastIndexOf=function(){function a(c){return P(this,c,this.count)}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return P(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return P(this,c,d)};return b}();k.S=function(){return this.meta};k.aa=function(){return 1===this.count?null:this.rest};k.V=function(){return this.count};k.T=function(){var a=this.v;return null!=a?a:this.v=a=ec(this)};k.P=function(a,b){return uc(this,b)};
k.W=function(){return eb(J,this.meta)};k.ba=function(a,b){return wc(b,this)};k.ca=function(a,b,c){return yc(b,c,this)};k.X=function(){return this.first};k.da=function(){return 1===this.count?J:this.rest};k.M=function(){return this};k.U=function(a,b){return b===this.meta?this:new Cc(b,this.first,this.rest,this.count,this.v)};k.Y=function(a,b){return new Cc(this.meta,b,this,this.count+1,null)};Cc.prototype[za]=function(){return cc(this)};function kd(a){this.meta=a;this.j=65937614;this.A=8192}k=kd.prototype;
k.toString=function(){return Lb(this)};k.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
k.lastIndexOf=function(){function a(c){return P(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return P(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return P(this,c,d)};return b}();k.S=function(){return this.meta};k.aa=function(){return null};k.V=function(){return 0};k.T=function(){return fc};k.P=function(a,b){return(null!=b?b.j&33554432||t===b.hc||(b.j?0:x(pb,b)):x(pb,b))||Mc(b)?null==G(b):!1};k.W=function(){return this};
k.ba=function(a,b){return wc(b,this)};k.ca=function(a,b,c){return yc(b,c,this)};k.X=function(){return null};k.da=function(){return J};k.M=function(){return null};k.U=function(a,b){return b===this.meta?this:new kd(b)};k.Y=function(a,b){return new Cc(this.meta,b,null,1,null)};var J=new kd(null);kd.prototype[za]=function(){return cc(this)};function ld(a){return(null!=a?a.j&134217728||t===a.lc||(a.j?0:x(rb,a)):x(rb,a))?(a=sb(a))?a:J:Ca(Ac,J,a)}
function md(a,b,c,d){this.meta=a;this.first=b;this.rest=c;this.v=d;this.j=65929452;this.A=8192}k=md.prototype;k.toString=function(){return Lb(this)};k.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
k.lastIndexOf=function(){function a(c){return P(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return P(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return P(this,c,d)};return b}();k.S=function(){return this.meta};k.aa=function(){return null==this.rest?null:G(this.rest)};k.T=function(){var a=this.v;return null!=a?a:this.v=a=ec(this)};k.P=function(a,b){return uc(this,b)};k.W=function(){return J};
k.ba=function(a,b){return wc(b,this)};k.ca=function(a,b,c){return yc(b,c,this)};k.X=function(){return this.first};k.da=function(){return null==this.rest?J:this.rest};k.M=function(){return this};k.U=function(a,b){return b===this.meta?this:new md(b,this.first,this.rest,this.v)};k.Y=function(a,b){return new md(null,b,this,null)};md.prototype[za]=function(){return cc(this)};
function Q(a,b){return null==b?new Cc(null,a,null,1,null):null!=b&&(b.j&64||t===b.u)?new md(null,a,b,null):new md(null,a,G(b),null)}function nd(a,b){if(a.oa===b.oa)return 0;if(w(va(a.ha)?b.ha:!1))return-1;if(w(a.ha)){if(va(b.ha))return 1;var c=fa(a.ha,b.ha);return 0===c?fa(a.name,b.name):c}return fa(a.name,b.name)}function E(a,b,c,d){this.ha=a;this.name=b;this.oa=c;this.Qa=d;this.j=2153775105;this.A=4096}k=E.prototype;k.toString=function(){return[":",z.c(this.oa)].join("")};
k.P=function(a,b){return b instanceof E?this.oa===b.oa:!1};k.call=function(a){switch(arguments.length-1){case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length-1)].join(""));}};k.apply=function(a,b){return this.call.apply(this,[this].concat(Aa(b)))};k.c=function(a){return C.g(a,this)};k.g=function(a,b){return C.l(a,this,b)};
k.T=function(){var a=this.Qa;return null!=a?a:this.Qa=a=Vb(Qb(this.name),Tb(this.ha))+2654435769|0};k.N=function(a,b){return tb(b,[":",z.c(this.oa)].join(""))};function od(a){if(null!=a&&(a.A&4096||t===a.Nb))return a.ha;throw Error(["Doesn't support namespace: ",z.c(a)].join(""));}var pd=function pd(a){switch(arguments.length){case 1:return pd.c(arguments[0]);case 2:return pd.g(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",z.c(arguments.length)].join(""));}};
pd.c=function(a){if(a instanceof E)return a;if(a instanceof Xb)return new E(od(a),qd.c?qd.c(a):qd.call(null,a),a.str,null);if(M.g("/",a))return new E(null,a,a,null);if("string"===typeof a){var b=a.split("/");return 2===b.length?new E(b[0],b[1],a,null):new E(null,b[0],a,null)}return null};
pd.g=function(a,b){a=a instanceof E?qd.c?qd.c(a):qd.call(null,a):a instanceof Xb?qd.c?qd.c(a):qd.call(null,a):a;b=b instanceof E?qd.c?qd.c(b):qd.call(null,b):b instanceof Xb?qd.c?qd.c(b):qd.call(null,b):b;return new E(a,b,[w(a)?[z.c(a),"/"].join(""):null,z.c(b)].join(""),null)};pd.F=2;function rd(a,b,c){this.meta=a;this.ab=b;this.D=null;this.v=c;this.j=32374988;this.A=1}k=rd.prototype;k.toString=function(){return Lb(this)};
function sd(a){null!=a.ab&&(a.D=a.ab.B?a.ab.B():a.ab.call(null),a.ab=null);return a.D}k.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
k.lastIndexOf=function(){function a(c){return P(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return P(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return P(this,c,d)};return b}();k.S=function(){return this.meta};k.aa=function(){this.M(null);return null==this.D?null:K(this.D)};k.T=function(){var a=this.v;return null!=a?a:this.v=a=ec(this)};k.P=function(a,b){return uc(this,b)};
k.W=function(){return eb(J,this.meta)};k.ba=function(a,b){return wc(b,this)};k.ca=function(a,b,c){return yc(b,c,this)};k.X=function(){this.M(null);return null==this.D?null:I(this.D)};k.da=function(){this.M(null);return null!=this.D?ac(this.D):J};k.M=function(){sd(this);if(null==this.D)return null;for(var a=this.D;;)if(a instanceof rd)a=sd(a);else return this.D=a,G(this.D)};k.U=function(a,b){var c=this;return b===this.meta?c:new rd(b,function(){return c.M(null)},this.v)};
k.Y=function(a,b){return Q(b,this)};rd.prototype[za]=function(){return cc(this)};function td(a){this.ob=a;this.end=0;this.j=2;this.A=0}td.prototype.add=function(a){this.ob[this.end]=a;return this.end+=1};td.prototype.chunk=function(){var a=new ud(this.ob,0,this.end);this.ob=null;return a};td.prototype.V=function(){return this.end};function ud(a,b,c){this.h=a;this.off=b;this.end=c;this.j=524306;this.A=0}k=ud.prototype;k.V=function(){return this.end-this.off};
k.R=function(a,b){return this.h[this.off+b]};k.ma=function(a,b,c){return 0<=b&&b<this.end-this.off?this.h[this.off+b]:c};k.vb=function(){if(this.off===this.end)throw Error("-drop-first of empty chunk");return new ud(this.h,this.off+1,this.end)};k.ba=function(a,b){return nc(this.h,b,this.h[this.off],this.off+1)};k.ca=function(a,b,c){return nc(this.h,b,c,this.off)};function vd(a,b,c,d){this.chunk=a;this.ra=b;this.meta=c;this.v=d;this.j=31850732;this.A=1536}k=vd.prototype;k.toString=function(){return Lb(this)};
k.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
k.lastIndexOf=function(){function a(c){return P(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return P(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return P(this,c,d)};return b}();k.S=function(){return this.meta};k.aa=function(){return 1<Ga(this.chunk)?new vd(Cb(this.chunk),this.ra,null,null):null==this.ra?null:nb(this.ra)};k.T=function(){var a=this.v;return null!=a?a:this.v=a=ec(this)};
k.P=function(a,b){return uc(this,b)};k.W=function(){return J};k.X=function(){return Na(this.chunk,0)};k.da=function(){return 1<Ga(this.chunk)?new vd(Cb(this.chunk),this.ra,null,null):null==this.ra?J:this.ra};k.M=function(){return this};k.pb=function(){return this.chunk};k.ib=function(){return null==this.ra?J:this.ra};k.U=function(a,b){return b===this.meta?this:new vd(this.chunk,this.ra,b,this.v)};k.Y=function(a,b){return Q(b,this)};k.wb=function(){return null==this.ra?null:this.ra};
vd.prototype[za]=function(){return cc(this)};function wd(a,b){return 0===Ga(a)?b:new vd(a,b,null,null)}function xd(a,b){a.add(b)}function Zc(a){var b=[];for(a=G(a);;)if(null!=a)b.push(I(a)),a=K(a);else return b}function yd(a,b){if(oc(b))return O(b);var c=0;for(b=G(b);;)if(null!=b&&c<a)c+=1,b=K(b);else return c}
var zd=function zd(a){if(null==a)return null;var c=K(a);return null==c?G(I(a)):Q(I(a),zd.c?zd.c(c):zd.call(null,c))},Ad=function Ad(a){switch(arguments.length){case 0:return Ad.B();case 1:return Ad.c(arguments[0]);case 2:return Ad.g(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Ad.s(arguments[0],arguments[1],new H(c.slice(2),0,null))}};Ad.B=function(){return new rd(null,function(){return null},null)};
Ad.c=function(a){return new rd(null,function(){return a},null)};Ad.g=function(a,b){return new rd(null,function(){var c=G(a);return c?Qc(c)?wd(Db(c),Ad.g(Eb(c),b)):Q(I(c),Ad.g(ac(c),b)):b},null)};Ad.s=function(a,b,c){return function g(e,f){return new rd(null,function(){var h=G(e);return h?Qc(h)?wd(Db(h),g(Eb(h),f)):Q(I(h),g(ac(h),f)):w(f)?g(I(f),K(f)):null},null)}(Ad.g(a,b),c)};Ad.C=function(a){var b=I(a),c=K(a);a=I(c);c=K(c);return this.s(b,a,c)};Ad.F=2;
var Bd=function Bd(a){switch(arguments.length){case 0:return Bd.B();case 1:return Bd.c(arguments[0]);case 2:return Bd.g(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Bd.s(arguments[0],arguments[1],new H(c.slice(2),0,null))}};Bd.B=function(){return wb(Bc)};Bd.c=function(a){return a};Bd.g=function(a,b){return xb(a,b)};Bd.s=function(a,b,c){for(;;)if(a=xb(a,b),w(c))b=I(c),c=K(c);else return a};
Bd.C=function(a){var b=I(a),c=K(a);a=I(c);c=K(c);return this.s(b,a,c)};Bd.F=2;
function Cd(a,b,c){var d=G(c);if(0===b)return a.B?a.B():a.call(null);c=A(d);var e=Pa(d);if(1===b)return a.c?a.c(c):a.call(null,c);d=A(e);var f=Pa(e);if(2===b)return a.g?a.g(c,d):a.call(null,c,d);e=A(f);var g=Pa(f);if(3===b)return a.l?a.l(c,d,e):a.call(null,c,d,e);f=A(g);var h=Pa(g);if(4===b)return a.I?a.I(c,d,e,f):a.call(null,c,d,e,f);g=A(h);var l=Pa(h);if(5===b)return a.ja?a.ja(c,d,e,f,g):a.call(null,c,d,e,f,g);h=A(l);var m=Pa(l);if(6===b)return a.Ja?a.Ja(c,d,e,f,g,h):a.call(null,c,d,e,f,g,h);l=
A(m);var n=Pa(m);if(7===b)return a.Ka?a.Ka(c,d,e,f,g,h,l):a.call(null,c,d,e,f,g,h,l);m=A(n);var p=Pa(n);if(8===b)return a.La?a.La(c,d,e,f,g,h,l,m):a.call(null,c,d,e,f,g,h,l,m);n=A(p);var r=Pa(p);if(9===b)return a.Ma?a.Ma(c,d,e,f,g,h,l,m,n):a.call(null,c,d,e,f,g,h,l,m,n);p=A(r);var u=Pa(r);if(10===b)return a.ya?a.ya(c,d,e,f,g,h,l,m,n,p):a.call(null,c,d,e,f,g,h,l,m,n,p);r=A(u);var B=Pa(u);if(11===b)return a.za?a.za(c,d,e,f,g,h,l,m,n,p,r):a.call(null,c,d,e,f,g,h,l,m,n,p,r);u=A(B);var F=Pa(B);if(12===
b)return a.Aa?a.Aa(c,d,e,f,g,h,l,m,n,p,r,u):a.call(null,c,d,e,f,g,h,l,m,n,p,r,u);B=A(F);var D=Pa(F);if(13===b)return a.Ba?a.Ba(c,d,e,f,g,h,l,m,n,p,r,u,B):a.call(null,c,d,e,f,g,h,l,m,n,p,r,u,B);F=A(D);var R=Pa(D);if(14===b)return a.Ca?a.Ca(c,d,e,f,g,h,l,m,n,p,r,u,B,F):a.call(null,c,d,e,f,g,h,l,m,n,p,r,u,B,F);D=A(R);var X=Pa(R);if(15===b)return a.Da?a.Da(c,d,e,f,g,h,l,m,n,p,r,u,B,F,D):a.call(null,c,d,e,f,g,h,l,m,n,p,r,u,B,F,D);R=A(X);var da=Pa(X);if(16===b)return a.Ea?a.Ea(c,d,e,f,g,h,l,m,n,p,r,u,B,
F,D,R):a.call(null,c,d,e,f,g,h,l,m,n,p,r,u,B,F,D,R);X=A(da);var xa=Pa(da);if(17===b)return a.Fa?a.Fa(c,d,e,f,g,h,l,m,n,p,r,u,B,F,D,R,X):a.call(null,c,d,e,f,g,h,l,m,n,p,r,u,B,F,D,R,X);da=A(xa);var Ma=Pa(xa);if(18===b)return a.Ga?a.Ga(c,d,e,f,g,h,l,m,n,p,r,u,B,F,D,R,X,da):a.call(null,c,d,e,f,g,h,l,m,n,p,r,u,B,F,D,R,X,da);xa=A(Ma);Ma=Pa(Ma);if(19===b)return a.Ha?a.Ha(c,d,e,f,g,h,l,m,n,p,r,u,B,F,D,R,X,da,xa):a.call(null,c,d,e,f,g,h,l,m,n,p,r,u,B,F,D,R,X,da,xa);var ig=A(Ma);Pa(Ma);if(20===b)return a.Ia?
a.Ia(c,d,e,f,g,h,l,m,n,p,r,u,B,F,D,R,X,da,xa,ig):a.call(null,c,d,e,f,g,h,l,m,n,p,r,u,B,F,D,R,X,da,xa,ig);throw Error("Only up to 20 arguments supported on functions");}function Dd(a){return null!=a&&(a.j&128||t===a.Za)?a.aa():G(ac(a))}function Ed(a,b,c){return null==c?a.c?a.c(b):a.call(a,b):Fd(a,b,A(c),Dd(c))}function Fd(a,b,c,d){return null==d?a.g?a.g(b,c):a.call(a,b,c):Gd(a,b,c,A(d),Dd(d))}function Gd(a,b,c,d,e){return null==e?a.l?a.l(b,c,d):a.call(a,b,c,d):Hd(a,b,c,d,A(e),Dd(e))}
function Hd(a,b,c,d,e,f){if(null==f)return a.I?a.I(b,c,d,e):a.call(a,b,c,d,e);var g=A(f),h=K(f);if(null==h)return a.ja?a.ja(b,c,d,e,g):a.call(a,b,c,d,e,g);f=A(h);var l=K(h);if(null==l)return a.Ja?a.Ja(b,c,d,e,g,f):a.call(a,b,c,d,e,g,f);h=A(l);var m=K(l);if(null==m)return a.Ka?a.Ka(b,c,d,e,g,f,h):a.call(a,b,c,d,e,g,f,h);l=A(m);var n=K(m);if(null==n)return a.La?a.La(b,c,d,e,g,f,h,l):a.call(a,b,c,d,e,g,f,h,l);m=A(n);var p=K(n);if(null==p)return a.Ma?a.Ma(b,c,d,e,g,f,h,l,m):a.call(a,b,c,d,e,g,f,h,l,m);
n=A(p);var r=K(p);if(null==r)return a.ya?a.ya(b,c,d,e,g,f,h,l,m,n):a.call(a,b,c,d,e,g,f,h,l,m,n);p=A(r);var u=K(r);if(null==u)return a.za?a.za(b,c,d,e,g,f,h,l,m,n,p):a.call(a,b,c,d,e,g,f,h,l,m,n,p);r=A(u);var B=K(u);if(null==B)return a.Aa?a.Aa(b,c,d,e,g,f,h,l,m,n,p,r):a.call(a,b,c,d,e,g,f,h,l,m,n,p,r);u=A(B);var F=K(B);if(null==F)return a.Ba?a.Ba(b,c,d,e,g,f,h,l,m,n,p,r,u):a.call(a,b,c,d,e,g,f,h,l,m,n,p,r,u);B=A(F);var D=K(F);if(null==D)return a.Ca?a.Ca(b,c,d,e,g,f,h,l,m,n,p,r,u,B):a.call(a,b,c,d,
e,g,f,h,l,m,n,p,r,u,B);F=A(D);var R=K(D);if(null==R)return a.Da?a.Da(b,c,d,e,g,f,h,l,m,n,p,r,u,B,F):a.call(a,b,c,d,e,g,f,h,l,m,n,p,r,u,B,F);D=A(R);var X=K(R);if(null==X)return a.Ea?a.Ea(b,c,d,e,g,f,h,l,m,n,p,r,u,B,F,D):a.call(a,b,c,d,e,g,f,h,l,m,n,p,r,u,B,F,D);R=A(X);var da=K(X);if(null==da)return a.Fa?a.Fa(b,c,d,e,g,f,h,l,m,n,p,r,u,B,F,D,R):a.call(a,b,c,d,e,g,f,h,l,m,n,p,r,u,B,F,D,R);X=A(da);var xa=K(da);if(null==xa)return a.Ga?a.Ga(b,c,d,e,g,f,h,l,m,n,p,r,u,B,F,D,R,X):a.call(a,b,c,d,e,g,f,h,l,m,
n,p,r,u,B,F,D,R,X);da=A(xa);var Ma=K(xa);if(null==Ma)return a.Ha?a.Ha(b,c,d,e,g,f,h,l,m,n,p,r,u,B,F,D,R,X,da):a.call(a,b,c,d,e,g,f,h,l,m,n,p,r,u,B,F,D,R,X,da);xa=A(Ma);Ma=K(Ma);if(null==Ma)return a.Ia?a.Ia(b,c,d,e,g,f,h,l,m,n,p,r,u,B,F,D,R,X,da,xa):a.call(a,b,c,d,e,g,f,h,l,m,n,p,r,u,B,F,D,R,X,da,xa);b=[b,c,d,e,g,f,h,l,m,n,p,r,u,B,F,D,R,X,da,xa];for(c=Ma;;)if(c)b.push(A(c)),c=K(c);else break;return a.apply(a,b)}
function Ic(a){switch(arguments.length){case 2:return T(arguments[0],arguments[1]);case 3:return Id(arguments[0],arguments[1],arguments[2]);case 4:return Jd(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return Kd(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:for(var b=[],c=arguments.length,d=0;;)if(d<c)b.push(arguments[d]),d+=1;else break;c=arguments[0];d=arguments[1];var e=arguments[2],f=arguments[3],g=arguments[4];b=new H(b.slice(5),0,null);c.C?(b=zd(b),
d=Q(d,Q(e,Q(f,Q(g,b)))),e=c.F,b=4+yd(e-3,b),c=b<=e?Cd(c,b,d):c.C(d)):c=Hd(c,d,e,f,g,zd(b));return c}}function T(a,b){if(a.C){var c=a.F,d=yd(c+1,b);return d<=c?Cd(a,d,b):a.C(b)}b=G(b);return null==b?a.B?a.B():a.call(a):Ed(a,A(b),Dd(b))}function Id(a,b,c){if(a.C){b=Q(b,c);var d=a.F;c=yd(d,c)+1;return c<=d?Cd(a,c,b):a.C(b)}return Ed(a,b,G(c))}function Jd(a,b,c,d){return a.C?(b=Q(b,Q(c,d)),c=a.F,d=2+yd(c-1,d),d<=c?Cd(a,d,b):a.C(b)):Fd(a,b,c,G(d))}
function Kd(a,b,c,d,e){return a.C?(b=Q(b,Q(c,Q(d,e))),c=a.F,e=3+yd(c-2,e),e<=c?Cd(a,e,b):a.C(b)):Gd(a,b,c,d,G(e))}
function Ld(){if("undefined"===typeof ka||"undefined"===typeof la||"undefined"===typeof ma)ma=function(a){this.Xb=a;this.j=393216;this.A=0},ma.prototype.U=function(a,b){return new ma(b)},ma.prototype.S=function(){return this.Xb},ma.prototype.fa=function(){return!1},ma.prototype.next=function(){return Error("No such element")},ma.prototype.remove=function(){return Error("Unsupported operation")},ma.oc=function(){return new U(null,1,5,V,[Md],null)},ma.Ab=!0,ma.lb="cljs.core/t_cljs$core19718",ma.Vb=
function(a){return tb(a,"cljs.core/t_cljs$core19718")};return new ma(Nd)}function Od(a,b){for(;;){if(null==G(b))return!0;var c=I(b);c=a.c?a.c(c):a.call(null,c);if(w(c))b=K(b);else return!1}}function Pd(a,b){for(;;)if(b=G(b)){var c=I(b);c=a.c?a.c(c):a.call(null,c);if(w(c))return c;b=K(b)}else return null}
function Qd(a){return function(){function b(g,h){return va(a.g?a.g(g,h):a.call(null,g,h))}function c(g){return va(a.c?a.c(g):a.call(null,g))}function d(){return va(a.B?a.B():a.call(null))}var e=null,f=function(){function g(l,m,n){var p=null;if(2<arguments.length){p=0;for(var r=Array(arguments.length-2);p<r.length;)r[p]=arguments[p+2],++p;p=new H(r,0,null)}return h.call(this,l,m,p)}function h(l,m,n){return va(Jd(a,l,m,n))}g.F=2;g.C=function(l){var m=I(l);l=K(l);var n=I(l);l=ac(l);return h(m,n,l)};
g.s=h;return g}();e=function(g,h,l){switch(arguments.length){case 0:return d.call(this);case 1:return c.call(this,g);case 2:return b.call(this,g,h);default:var m=null;if(2<arguments.length){m=0;for(var n=Array(arguments.length-2);m<n.length;)n[m]=arguments[m+2],++m;m=new H(n,0,null)}return f.s(g,h,m)}throw Error("Invalid arity: "+arguments.length);};e.F=2;e.C=f.C;e.B=d;e.c=c;e.g=b;e.s=f.s;return e}()}
function Rd(a){return function(){function b(c){if(0<arguments.length)for(var d=0,e=Array(arguments.length-0);d<e.length;)e[d]=arguments[d+0],++d;return a}b.F=0;b.C=function(c){G(c);return a};b.s=function(){return a};return b}()}function Sd(a){this.state=a;this.Cb=this.$b=this.meta=null;this.A=16386;this.j=6455296}Sd.prototype.P=function(a,b){return this===b};Sd.prototype.qb=function(){return this.state};Sd.prototype.S=function(){return this.meta};
Sd.prototype.T=function(){return this[ba]||(this[ba]=++ca)};
function Td(a,b){if(a instanceof Sd){var c=a.$b;if(null!=c&&!w(c.c?c.c(b):c.call(null,b)))throw Error("Validator rejected reference state");c=a.state;a.state=b;if(null!=a.Cb)a:for(var d=G(a.Cb),e=null,f=0,g=0;;)if(g<f){var h=e.R(null,g),l=S(h,0,null);h=S(h,1,null);h.I?h.I(l,a,c,b):h.call(null,l,a,c,b);g+=1}else if(d=G(d))Qc(d)?(e=Db(d),d=Eb(d),l=e,f=O(e),e=l):(e=I(d),l=S(e,0,null),h=S(e,1,null),h.I?h.I(l,a,c,b):h.call(null,l,a,c,b),d=K(d),e=null,f=0),g=0;else break a;return b}return Fb(a,b)}
var Ud=function Ud(a){switch(arguments.length){case 2:return Ud.g(arguments[0],arguments[1]);case 3:return Ud.l(arguments[0],arguments[1],arguments[2]);case 4:return Ud.I(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Ud.s(arguments[0],arguments[1],arguments[2],arguments[3],new H(c.slice(4),0,null))}};
Ud.g=function(a,b){if(a instanceof Sd){var c=a.state;b=b.c?b.c(c):b.call(null,c);a=Td(a,b)}else a=Gb(a,b);return a};Ud.l=function(a,b,c){if(a instanceof Sd){var d=a.state;b=b.g?b.g(d,c):b.call(null,d,c);a=Td(a,b)}else a=Gb(a,b,c);return a};Ud.I=function(a,b,c,d){if(a instanceof Sd){var e=a.state;b=b.l?b.l(e,c,d):b.call(null,e,c,d);a=Td(a,b)}else a=Gb(a,b,c,d);return a};Ud.s=function(a,b,c,d,e){return a instanceof Sd?Td(a,Kd(b,a.state,c,d,e)):Gb(a,b,c,d,e)};
Ud.C=function(a){var b=I(a),c=K(a);a=I(c);var d=K(c);c=I(d);var e=K(d);d=I(e);e=K(e);return this.s(b,a,c,d,e)};Ud.F=4;
function Vd(a){return function(){function b(g,h,l){g=a.c?a.c(g):a.call(null,g);w(g)?(h=a.c?a.c(h):a.call(null,h),l=w(h)?a.c?a.c(l):a.call(null,l):h):l=g;return Tc(l)}function c(g,h){g=a.c?a.c(g):a.call(null,g);h=w(g)?a.c?a.c(h):a.call(null,h):g;return Tc(h)}function d(g){return Tc(a.c?a.c(g):a.call(null,g))}var e=null,f=function(){function g(l,m,n,p){var r=null;if(3<arguments.length){r=0;for(var u=Array(arguments.length-3);r<u.length;)u[r]=arguments[r+3],++r;r=new H(u,0,null)}return h.call(this,l,
m,n,r)}function h(l,m,n,p){l=e.l(l,m,n);p=w(l)?Od(a,p):l;return Tc(p)}g.F=3;g.C=function(l){var m=I(l);l=K(l);var n=I(l);l=K(l);var p=I(l);l=ac(l);return h(m,n,p,l)};g.s=h;return g}();e=function(g,h,l,m){switch(arguments.length){case 0:return!0;case 1:return d.call(this,g);case 2:return c.call(this,g,h);case 3:return b.call(this,g,h,l);default:var n=null;if(3<arguments.length){n=0;for(var p=Array(arguments.length-3);n<p.length;)p[n]=arguments[n+3],++n;n=new H(p,0,null)}return f.s(g,h,l,n)}throw Error("Invalid arity: "+
arguments.length);};e.F=3;e.C=f.C;e.B=function(){return!0};e.c=d;e.g=c;e.l=b;e.s=f.s;return e}()}
function Wd(a,b){return function(){function c(h,l,m){return Tc(function(){var n=a.c?a.c(h):a.call(null,h);return w(n)?(n=a.c?a.c(l):a.call(null,l),w(n)?(n=a.c?a.c(m):a.call(null,m),w(n)?(n=b.c?b.c(h):b.call(null,h),w(n)?(n=b.c?b.c(l):b.call(null,l),w(n)?b.c?b.c(m):b.call(null,m):n):n):n):n):n}())}function d(h,l){return Tc(function(){var m=a.c?a.c(h):a.call(null,h);return w(m)?(m=a.c?a.c(l):a.call(null,l),w(m)?(m=b.c?b.c(h):b.call(null,h),w(m)?b.c?b.c(l):b.call(null,l):m):m):m}())}function e(h){var l=
a.c?a.c(h):a.call(null,h);h=w(l)?b.c?b.c(h):b.call(null,h):l;return Tc(h)}var f=null,g=function(){function h(m,n,p,r){var u=null;if(3<arguments.length){u=0;for(var B=Array(arguments.length-3);u<B.length;)B[u]=arguments[u+3],++u;u=new H(B,0,null)}return l.call(this,m,n,p,u)}function l(m,n,p,r){return Tc(function(){var u=f.l(m,n,p);return w(u)?Od(function(B){var F=a.c?a.c(B):a.call(null,B);return w(F)?b.c?b.c(B):b.call(null,B):F},r):u}())}h.F=3;h.C=function(m){var n=I(m);m=K(m);var p=I(m);m=K(m);var r=
I(m);m=ac(m);return l(n,p,r,m)};h.s=l;return h}();f=function(h,l,m,n){switch(arguments.length){case 0:return!0;case 1:return e.call(this,h);case 2:return d.call(this,h,l);case 3:return c.call(this,h,l,m);default:var p=null;if(3<arguments.length){p=0;for(var r=Array(arguments.length-3);p<r.length;)r[p]=arguments[p+3],++p;p=new H(r,0,null)}return g.s(h,l,m,p)}throw Error("Invalid arity: "+arguments.length);};f.F=3;f.C=g.C;f.B=function(){return!0};f.c=e;f.g=d;f.l=c;f.s=g.s;return f}()}
function Xd(a,b){return function(){function c(h,l,m){var n=a.c?a.c(h):a.call(null,h);if(w(n))return n;n=a.c?a.c(l):a.call(null,l);if(w(n))return n;n=a.c?a.c(m):a.call(null,m);if(w(n))return n;h=b.c?b.c(h):b.call(null,h);if(w(h))return h;l=b.c?b.c(l):b.call(null,l);return w(l)?l:b.c?b.c(m):b.call(null,m)}function d(h,l){var m=a.c?a.c(h):a.call(null,h);if(w(m))return m;m=a.c?a.c(l):a.call(null,l);if(w(m))return m;h=b.c?b.c(h):b.call(null,h);return w(h)?h:b.c?b.c(l):b.call(null,l)}function e(h){var l=
a.c?a.c(h):a.call(null,h);return w(l)?l:b.c?b.c(h):b.call(null,h)}var f=null,g=function(){function h(m,n,p,r){var u=null;if(3<arguments.length){u=0;for(var B=Array(arguments.length-3);u<B.length;)B[u]=arguments[u+3],++u;u=new H(B,0,null)}return l.call(this,m,n,p,u)}function l(m,n,p,r){m=f.l(m,n,p);return w(m)?m:Pd(function(u){var B=a.c?a.c(u):a.call(null,u);return w(B)?B:b.c?b.c(u):b.call(null,u)},r)}h.F=3;h.C=function(m){var n=I(m);m=K(m);var p=I(m);m=K(m);var r=I(m);m=ac(m);return l(n,p,r,m)};h.s=
l;return h}();f=function(h,l,m,n){switch(arguments.length){case 0:return null;case 1:return e.call(this,h);case 2:return d.call(this,h,l);case 3:return c.call(this,h,l,m);default:var p=null;if(3<arguments.length){p=0;for(var r=Array(arguments.length-3);p<r.length;)r[p]=arguments[p+3],++p;p=new H(r,0,null)}return g.s(h,l,m,p)}throw Error("Invalid arity: "+arguments.length);};f.F=3;f.C=g.C;f.B=function(){return null};f.c=e;f.g=d;f.l=c;f.s=g.s;return f}()}
var Yd=function Yd(a){switch(arguments.length){case 1:return Yd.c(arguments[0]);case 2:return Yd.g(arguments[0],arguments[1]);case 3:return Yd.l(arguments[0],arguments[1],arguments[2]);case 4:return Yd.I(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Yd.s(arguments[0],arguments[1],arguments[2],arguments[3],new H(c.slice(4),0,null))}};
Yd.c=function(a){return function(b){return function(){function c(h,l){l=a.c?a.c(l):a.call(null,l);return b.g?b.g(h,l):b.call(null,h,l)}function d(h){return b.c?b.c(h):b.call(null,h)}function e(){return b.B?b.B():b.call(null)}var f=null,g=function(){function h(m,n,p){var r=null;if(2<arguments.length){r=0;for(var u=Array(arguments.length-2);r<u.length;)u[r]=arguments[r+2],++r;r=new H(u,0,null)}return l.call(this,m,n,r)}function l(m,n,p){n=Id(a,n,p);return b.g?b.g(m,n):b.call(null,m,n)}h.F=2;h.C=function(m){var n=
I(m);m=K(m);var p=I(m);m=ac(m);return l(n,p,m)};h.s=l;return h}();f=function(h,l,m){switch(arguments.length){case 0:return e.call(this);case 1:return d.call(this,h);case 2:return c.call(this,h,l);default:var n=null;if(2<arguments.length){n=0;for(var p=Array(arguments.length-2);n<p.length;)p[n]=arguments[n+2],++n;n=new H(p,0,null)}return g.s(h,l,n)}throw Error("Invalid arity: "+arguments.length);};f.F=2;f.C=g.C;f.B=e;f.c=d;f.g=c;f.s=g.s;return f}()}};
Yd.g=function(a,b){return new rd(null,function(){var c=G(b);if(c){if(Qc(c)){for(var d=Db(c),e=O(d),f=new td(Array(e)),g=0;;)if(g<e)xd(f,function(){var h=Na(d,g);return a.c?a.c(h):a.call(null,h)}()),g+=1;else break;return wd(f.chunk(),Yd.g(a,Eb(c)))}return Q(function(){var h=I(c);return a.c?a.c(h):a.call(null,h)}(),Yd.g(a,ac(c)))}return null},null)};
Yd.l=function(a,b,c){return new rd(null,function(){var d=G(b),e=G(c);if(d&&e){var f=I(d);var g=I(e);f=a.g?a.g(f,g):a.call(null,f,g);d=Q(f,Yd.l(a,ac(d),ac(e)))}else d=null;return d},null)};Yd.I=function(a,b,c,d){return new rd(null,function(){var e=G(b),f=G(c),g=G(d);if(e&&f&&g){var h=I(e);var l=I(f),m=I(g);h=a.l?a.l(h,l,m):a.call(null,h,l,m);e=Q(h,Yd.I(a,ac(e),ac(f),ac(g)))}else e=null;return e},null)};
Yd.s=function(a,b,c,d,e){return Yd.g(function(f){return T(a,f)},function h(g){return new rd(null,function(){var l=Yd.g(G,g);return Od(fd,l)?Q(Yd.g(I,l),h(Yd.g(ac,l))):null},null)}(Ac.s(e,d,vc([c,b]))))};Yd.C=function(a){var b=I(a),c=K(a);a=I(c);var d=K(c);c=I(d);var e=K(d);d=I(e);e=K(e);return this.s(b,a,c,d,e)};Yd.F=4;function Zd(a,b){return new rd(null,function(){if(0<a){var c=G(b);return c?Q(I(c),Zd(a-1,ac(c))):null}return null},null)}
function $d(a,b){return new rd(null,function(){a:for(var c=a,d=b;;)if(d=G(d),0<c&&d)--c,d=ac(d);else break a;return d},null)}var ae={};function be(a,b,c,d,e){this.meta=a;this.f=b;this.tb=c;this.mb=d;this.next=e;this.j=26083532;this.A=1}k=be.prototype;k.toString=function(){return Lb(this)};k.S=function(){return this.meta};k.aa=function(){return this.da(null)};k.W=function(){return J};
k.ba=function(a,b){a=this.X(null);var c=this.f.c?this.f.c(a):this.f.call(null,a);for(a=b.g?b.g(a,c):b.call(null,a,c);;){if(jc(a))return bb(a);c=this.f.c?this.f.c(c):this.f.call(null,c);a=b.g?b.g(a,c):b.call(null,a,c)}};k.ca=function(a,b,c){a=this.X(null);for(c=b.g?b.g(c,a):b.call(null,c,a);;){if(jc(c))return bb(c);a=this.f.c?this.f.c(a):this.f.call(null,a);c=b.g?b.g(c,a):b.call(null,c,a)}};k.X=function(){ae===this.mb&&(this.mb=this.f.c?this.f.c(this.tb):this.f.call(null,this.tb));return this.mb};
k.da=function(){null==this.next&&(this.next=new be(null,this.f,this.X(null),ae,null));return this.next};k.M=function(){return this};k.U=function(a,b){return b===this.meta?this:new be(b,this.f,this.tb,this.mb,this.next)};k.Y=function(a,b){return Q(b,this)};function ce(a,b){return new be(null,a,null,b,null)}function de(a,b){return T(Ad,Id(Yd,a,b))}
function ee(a,b){return new rd(null,function(){var c=G(b);if(c){if(Qc(c)){for(var d=Db(c),e=O(d),f=new td(Array(e)),g=0;;)if(g<e){var h=Na(d,g);h=a.c?a.c(h):a.call(null,h);w(h)&&(h=Na(d,g),f.add(h));g+=1}else break;return wd(f.chunk(),ee(a,Eb(c)))}d=I(c);c=ac(c);return w(a.c?a.c(d):a.call(null,d))?Q(d,ee(a,c)):ee(a,c)}return null},null)}function fe(a,b){return ee(Qd(a),b)}
var ge=function ge(a){switch(arguments.length){case 0:return ge.B();case 1:return ge.c(arguments[0]);case 2:return ge.g(arguments[0],arguments[1]);case 3:return ge.l(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length)].join(""));}};ge.B=function(){return Bc};ge.c=function(a){return a};ge.g=function(a,b){return null!=a?null!=a&&(a.A&4||t===a.Eb)?eb(yb(Ca(xb,wb(a),b)),Kc(a)):Ca(Ka,a,b):Ca(Ac,a,b)};
ge.l=function(a,b,c){return null!=a&&(a.A&4||t===a.Eb)?eb(yb(gd(b,Bd,wb(a),c)),Kc(a)):gd(b,Ac,a,c)};ge.F=3;function he(a,b,c){return new rd(null,function(){var d=G(c);if(d){var e=Zd(a,d);return a===O(e)?Q(e,he(a,b,$d(b,d))):null}return null},null)}function ie(a,b){this.H=a;this.h=b}function je(a){return new ie(a,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null])}
function ke(a){a=a.m;return 32>a?0:a-1>>>5<<5}function le(a,b,c){for(;;){if(0===b)return c;var d=je(a);d.h[0]=c;c=d;b-=5}}var me=function me(a,b,c,d){var f=new ie(c.H,Aa(c.h)),g=a.m-1>>>b&31;5===b?f.h[g]=d:(c=c.h[g],null!=c?(b-=5,a=me.I?me.I(a,b,c,d):me.call(null,a,b,c,d)):a=le(null,b-5,d),f.h[g]=a);return f};function ne(a,b){if(b>=ke(a))return a.ia;var c=a.root;for(a=a.shift;;)if(0<a){var d=a-5;c=c.h[b>>>a&31];a=d}else return c.h}
function oe(a,b){if(0<=b&&b<a.m)b=ne(a,b);else throw a=a.m,Error(["No item ",z.c(b)," in vector of length ",z.c(a)].join(""));return b}var pe=function pe(a,b,c,d,e){var g=new ie(c.H,Aa(c.h));if(0===b)g.h[d&31]=e;else{var h=d>>>b&31;b-=5;c=c.h[h];a=pe.ja?pe.ja(a,b,c,d,e):pe.call(null,a,b,c,d,e);g.h[h]=a}return g};function qe(a,b,c){this.base=this.i=0;this.h=a;this.Zb=b;this.start=0;this.end=c}qe.prototype.fa=function(){return this.i<this.end};
qe.prototype.next=function(){32===this.i-this.base&&(this.h=ne(this.Zb,this.i),this.base+=32);var a=this.h[this.i&31];this.i+=1;return a};function re(a,b,c,d){return c<d?se(a,b,qc(a,c),c+1,d):b.B?b.B():b.call(null)}function se(a,b,c,d,e){var f=c;c=d;for(d=ne(a,d);;)if(c<e){var g=c&31;d=0===g?ne(a,c):d;g=d[g];f=b.g?b.g(f,g):b.call(null,f,g);if(jc(f))return bb(f);c+=1}else return f}
function U(a,b,c,d,e,f){this.meta=a;this.m=b;this.shift=c;this.root=d;this.ia=e;this.v=f;this.j=167666463;this.A=139268}k=U.prototype;k.Ya=function(a,b){return 0<=b&&b<this.m?new te(b,ne(this,b)[b&31]):null};k.toString=function(){return Lb(this)};k.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
k.lastIndexOf=function(){function a(c){return P(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return P(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return P(this,c,d)};return b}();k.ka=function(a,b){return this.K(null,b,null)};k.K=function(a,b,c){return"number"===typeof b?this.ma(null,b,c):c};
k.jb=function(a,b,c){a=0;for(var d=c;;)if(a<this.m){var e=ne(this,a);c=e.length;a:for(var f=0;;)if(f<c){var g=f+a,h=e[f];d=b.l?b.l(d,g,h):b.call(null,d,g,h);if(jc(d)){e=d;break a}f+=1}else{e=d;break a}if(jc(e))return bb(e);a+=c;d=e}else return d};k.R=function(a,b){return oe(this,b)[b&31]};k.ma=function(a,b,c){return 0<=b&&b<this.m?ne(this,b)[b&31]:c};
k.sb=function(a,b){if(0<=a&&a<this.m){if(ke(this)<=a){var c=Aa(this.ia);c[a&31]=b;return new U(this.meta,this.m,this.shift,this.root,c,null)}return new U(this.meta,this.m,this.shift,pe(this,this.shift,this.root,a,b),this.ia,null)}if(a===this.m)return this.Y(null,b);throw Error(["Index ",z.c(a)," out of bounds  [0,",z.c(this.m),"]"].join(""));};k.na=function(){var a=this.m;return new qe(0<O(this)?ne(this,0):null,this,a)};k.S=function(){return this.meta};k.V=function(){return this.m};
k.kb=function(){return 0<this.m?new tc(this,this.m-1,null):null};k.T=function(){var a=this.v;return null!=a?a:this.v=a=ec(this)};k.P=function(a,b){if(b instanceof U)if(this.m===O(b))for(a=this.na(null),b=b.na(null);;)if(a.fa()){var c=a.next(),d=b.next();if(!M.g(c,d))return!1}else return!0;else return!1;else return uc(this,b)};k.Sa=function(){return new ue(this.m,this.shift,ve.c?ve.c(this.root):ve.call(null,this.root),we.c?we.c(this.ia):we.call(null,this.ia))};k.W=function(){return eb(Bc,this.meta)};
k.ba=function(a,b){return re(this,b,0,this.m)};k.ca=function(a,b,c){a=0;for(var d=c;;)if(a<this.m){var e=ne(this,a);c=e.length;a:for(var f=0;;)if(f<c){var g=e[f];d=b.g?b.g(d,g):b.call(null,d,g);if(jc(d)){e=d;break a}f+=1}else{e=d;break a}if(jc(e))return bb(e);a+=c;d=e}else return d};k.va=function(a,b,c){if("number"===typeof b)return this.sb(b,c);throw Error("Vector's key for assoc must be a number.");};
k.M=function(){if(0===this.m)return null;if(32>=this.m)return new H(this.ia,0,null);a:{var a=this.root;for(var b=this.shift;;)if(0<b)b-=5,a=a.h[0];else{a=a.h;break a}}return xe?xe(this,a,0,0):ye.call(null,this,a,0,0)};k.U=function(a,b){return b===this.meta?this:new U(b,this.m,this.shift,this.root,this.ia,this.v)};
k.Y=function(a,b){if(32>this.m-ke(this)){a=this.ia.length;for(var c=Array(a+1),d=0;;)if(d<a)c[d]=this.ia[d],d+=1;else break;c[a]=b;return new U(this.meta,this.m+1,this.shift,this.root,c,null)}a=(c=this.m>>>5>1<<this.shift)?this.shift+5:this.shift;c?(c=je(null),c.h[0]=this.root,d=le(null,this.shift,new ie(null,this.ia)),c.h[1]=d):c=me(this,this.shift,this.root,new ie(null,this.ia));return new U(this.meta,this.m+1,a,c,[b],null)};
k.call=function(a){switch(arguments.length-1){case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length-1)].join(""));}};k.apply=function(a,b){return this.call.apply(this,[this].concat(Aa(b)))};k.c=function(a){return this.R(null,a)};k.g=function(a,b){return this.ma(null,a,b)};
var V=new ie(null,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]),Bc=new U(null,0,5,V,[],fc);U.prototype[za]=function(){return cc(this)};
function ze(a){if(w(Ae.c?Ae.c(a):Ae.call(null,a)))a=new U(null,2,5,V,[Be.c?Be.c(a):Be.call(null,a),Ce.c?Ce.c(a):Ce.call(null,a)],null);else if(Pc(a))a=Jc(a,null);else if(ua(a))a:{var b=a.length;if(32>b)a=new U(null,b,5,V,a,null);else for(var c=32,d=(new U(null,32,5,V,a.slice(0,32),null)).Sa(null);;)if(c<b){var e=c+1;d=Bd.g(d,a[c]);c=e}else{a=yb(d);break a}}else a=yb(Ca(xb,wb(Bc),a));return a}
function De(a,b,c,d,e){this.la=a;this.node=b;this.i=c;this.off=d;this.meta=e;this.v=null;this.j=32375020;this.A=1536}k=De.prototype;k.toString=function(){return Lb(this)};k.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
k.lastIndexOf=function(){function a(c){return P(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return P(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return P(this,c,d)};return b}();k.S=function(){return this.meta};k.aa=function(){if(this.off+1<this.node.length){var a=this.la;var b=this.node,c=this.i,d=this.off+1;a=xe?xe(a,b,c,d):ye.call(null,a,b,c,d);return null==a?null:a}return this.wb()};
k.T=function(){var a=this.v;return null!=a?a:this.v=a=ec(this)};k.P=function(a,b){return uc(this,b)};k.W=function(){return J};k.ba=function(a,b){return re(this.la,b,this.i+this.off,O(this.la))};k.ca=function(a,b,c){return se(this.la,b,c,this.i+this.off,O(this.la))};k.X=function(){return this.node[this.off]};k.da=function(){if(this.off+1<this.node.length){var a=this.la;var b=this.node,c=this.i,d=this.off+1;a=xe?xe(a,b,c,d):ye.call(null,a,b,c,d);return null==a?J:a}return this.ib(null)};k.M=function(){return this};
k.pb=function(){var a=this.node;return new ud(a,this.off,a.length)};k.ib=function(){var a=this.i+this.node.length;if(a<Ga(this.la)){var b=this.la,c=ne(this.la,a);return xe?xe(b,c,a,0):ye.call(null,b,c,a,0)}return J};k.U=function(a,b){return b===this.meta?this:Ee?Ee(this.la,this.node,this.i,this.off,b):ye.call(null,this.la,this.node,this.i,this.off,b)};k.Y=function(a,b){return Q(b,this)};
k.wb=function(){var a=this.i+this.node.length;if(a<Ga(this.la)){var b=this.la,c=ne(this.la,a);return xe?xe(b,c,a,0):ye.call(null,b,c,a,0)}return null};De.prototype[za]=function(){return cc(this)};
function ye(a){switch(arguments.length){case 3:var b=arguments[0],c=arguments[1],d=arguments[2];return new De(b,oe(b,c),c,d,null);case 4:return xe(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return Ee(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",z.c(arguments.length)].join(""));}}function xe(a,b,c,d){return new De(a,b,c,d,null)}function Ee(a,b,c,d,e){return new De(a,b,c,d,e)}
function Fe(a,b){return a===b.H?b:new ie(a,Aa(b.h))}function ve(a){return new ie({},Aa(a.h))}function we(a){var b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];Rc(a,0,b,0,a.length);return b}var Ge=function Ge(a,b,c,d){c=Fe(a.root.H,c);var f=a.m-1>>>b&31;if(5===b)a=d;else{var g=c.h[f];null!=g?(b-=5,a=Ge.I?Ge.I(a,b,g,d):Ge.call(null,a,b,g,d)):a=le(a.root.H,b-5,d)}c.h[f]=a;return c};
function ue(a,b,c,d){this.m=a;this.shift=b;this.root=c;this.ia=d;this.A=88;this.j=275}k=ue.prototype;
k.Ua=function(a,b){if(this.root.H){if(32>this.m-ke(this))this.ia[this.m&31]=b;else{a=new ie(this.root.H,this.ia);var c=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];c[0]=b;this.ia=c;this.m>>>5>1<<this.shift?(b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],c=this.shift+
5,b[0]=this.root,b[1]=le(this.root.H,this.shift,a),this.root=new ie(this.root.H,b),this.shift=c):this.root=Ge(this,this.shift,this.root,a)}this.m+=1;return this}throw Error("conj! after persistent!");};k.$a=function(){if(this.root.H){this.root.H=null;var a=this.m-ke(this),b=Array(a);Rc(this.ia,0,b,0,a);return new U(null,this.m,this.shift,this.root,b,null)}throw Error("persistent! called twice");};
k.Ta=function(a,b,c){if("number"===typeof b)return He(this,b,c);throw Error("TransientVector's key for assoc! must be a number.");};
function He(a,b,c){if(a.root.H){if(0<=b&&b<a.m){if(ke(a)<=b)a.ia[b&31]=c;else{var d=function h(f,g){g=Fe(a.root.H,g);if(0===f)g.h[b&31]=c;else{var l=b>>>f&31;f=h(f-5,g.h[l]);g.h[l]=f}return g}(a.shift,a.root);a.root=d}return a}if(b===a.m)return a.Ua(null,c);throw Error(["Index ",z.c(b)," out of bounds for TransientVector of length",z.c(a.m)].join(""));}throw Error("assoc! after persistent!");}k.V=function(){if(this.root.H)return this.m;throw Error("count after persistent!");};
k.R=function(a,b){if(this.root.H)return oe(this,b)[b&31];throw Error("nth after persistent!");};k.ma=function(a,b,c){return 0<=b&&b<this.m?this.R(null,b):c};k.ka=function(a,b){return this.K(null,b,null)};k.K=function(a,b,c){if(this.root.H)return"number"===typeof b?this.ma(null,b,c):c;throw Error("lookup after persistent!");};
k.call=function(a){switch(arguments.length-1){case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length-1)].join(""));}};k.apply=function(a,b){return this.call.apply(this,[this].concat(Aa(b)))};k.c=function(a){return this.ka(null,a)};k.g=function(a,b){return this.K(null,a,b)};function Ie(){this.j=2097152;this.A=0}Ie.prototype.P=function(){return!1};var Je=new Ie;
function Ke(a,b){return Tc(Nc(b)&&!Oc(b)?O(a)===O(b)?(null!=a?a.j&1048576||t===a.fc||(a.j?0:x(ib,a)):x(ib,a))?ed(function(c,d,e){return M.g(C.l(b,d,Je),e)?!0:new ic(!1)},!0,a):Od(function(c){return M.g(C.l(b,I(c),Je),I(K(c)))},a):null:null)}function Le(a){this.D=a}Le.prototype.next=function(){if(null!=this.D){var a=I(this.D),b=S(a,0,null);a=S(a,1,null);this.D=K(this.D);return{value:[b,a],done:!1}}return{value:null,done:!0}};function Me(a){this.D=a}
Me.prototype.next=function(){if(null!=this.D){var a=I(this.D);this.D=K(this.D);return{value:[a,a],done:!1}}return{value:null,done:!0}};
function Fc(a,b){if(b instanceof E)a:{var c=a.length;b=b.oa;for(var d=0;;){if(c<=d){a=-1;break a}if(a[d]instanceof E&&b===a[d].oa){a=d;break a}d+=2}}else if("string"==typeof b||"number"===typeof b)a:for(c=a.length,d=0;;){if(c<=d){a=-1;break a}if(b===a[d]){a=d;break a}d+=2}else if(b instanceof Xb)a:for(c=a.length,b=b.str,d=0;;){if(c<=d){a=-1;break a}if(a[d]instanceof Xb&&b===a[d].str){a=d;break a}d+=2}else if(null==b)a:for(b=a.length,c=0;;){if(b<=c){a=-1;break a}if(null==a[c]){a=c;break a}c+=2}else a:for(c=
a.length,d=0;;){if(c<=d){a=-1;break a}if(M.g(b,a[d])){a=d;break a}d+=2}return a}function te(a,b){this.key=a;this.O=b;this.v=null;this.j=166619935;this.A=0}k=te.prototype;k.Ya=function(a,b){switch(b){case 0:return new te(0,this.key);case 1:return new te(1,this.O);default:return null}};
k.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
k.lastIndexOf=function(){function a(c){return P(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return P(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return P(this,c,d)};return b}();k.ka=function(a,b){return this.ma(null,b,null)};k.K=function(a,b,c){return this.ma(null,b,c)};k.R=function(a,b){if(0===b)return this.key;if(1===b)return this.O;throw Error("Index out of bounds");};
k.ma=function(a,b,c){return 0===b?this.key:1===b?this.O:c};k.sb=function(a,b){return(new U(null,2,5,V,[this.key,this.O],null)).sb(a,b)};k.S=function(){return null};k.V=function(){return 2};k.Kb=function(){return this.key};k.Lb=function(){return this.O};k.kb=function(){return new H([this.O,this.key],0,null)};k.T=function(){var a=this.v;return null!=a?a:this.v=a=ec(this)};k.P=function(a,b){return uc(this,b)};k.W=function(){return null};
k.ba=function(a,b){a:if(a=this.V(null),0===a)b=b.B?b.B():b.call(null);else for(var c=this.R(null,0),d=1;;)if(d<a){var e=this.R(null,d);c=b.g?b.g(c,e):b.call(null,c,e);if(jc(c)){b=bb(c);break a}d+=1}else{b=c;break a}return b};k.ca=function(a,b,c){a:{a=this.V(null);var d=c;for(c=0;;)if(c<a){var e=this.R(null,c);d=b.g?b.g(d,e):b.call(null,d,e);if(jc(d)){b=bb(d);break a}c+=1}else{b=d;break a}}return b};k.va=function(a,b,c){return Ec.l(new U(null,2,5,V,[this.key,this.O],null),b,c)};
k.M=function(){return new H([this.key,this.O],0,null)};k.U=function(a,b){return Jc(new U(null,2,5,V,[this.key,this.O],null),b)};k.Y=function(a,b){return new U(null,3,5,V,[this.key,this.O,b],null)};k.call=function(a){switch(arguments.length-1){case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length-1)].join(""));}};k.apply=function(a,b){return this.call.apply(this,[this].concat(Aa(b)))};
k.c=function(a){return this.R(null,a)};k.g=function(a,b){return this.ma(null,a,b)};function Ae(a){return null!=a?a.j&2048||t===a.jc?!0:!1:!1}function Ne(a,b,c){this.h=a;this.i=b;this.ta=c;this.j=32374990;this.A=0}k=Ne.prototype;k.toString=function(){return Lb(this)};
k.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
k.lastIndexOf=function(){function a(c){return P(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return P(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return P(this,c,d)};return b}();k.S=function(){return this.ta};k.aa=function(){return this.i<this.h.length-2?new Ne(this.h,this.i+2,null):null};k.V=function(){return(this.h.length-this.i)/2};k.T=function(){return ec(this)};
k.P=function(a,b){return uc(this,b)};k.W=function(){return J};k.ba=function(a,b){return wc(b,this)};k.ca=function(a,b,c){return yc(b,c,this)};k.X=function(){return new te(this.h[this.i],this.h[this.i+1])};k.da=function(){return this.i<this.h.length-2?new Ne(this.h,this.i+2,null):J};k.M=function(){return this};k.U=function(a,b){return b===this.ta?this:new Ne(this.h,this.i,b)};k.Y=function(a,b){return Q(b,this)};Ne.prototype[za]=function(){return cc(this)};
function Oe(a,b){this.h=a;this.i=0;this.m=b}Oe.prototype.fa=function(){return this.i<this.m};Oe.prototype.next=function(){var a=new te(this.h[this.i],this.h[this.i+1]);this.i+=2;return a};function v(a,b,c,d){this.meta=a;this.m=b;this.h=c;this.v=d;this.j=16647951;this.A=139268}k=v.prototype;k.Ya=function(a,b){a=Fc(this.h,b);return-1===a?null:new te(this.h[a],this.h[a+1])};k.toString=function(){return Lb(this)};k.keys=function(){return cc(Pe.c?Pe.c(this):Pe.call(null,this))};k.entries=function(){return new Le(G(G(this)))};
k.values=function(){return cc(Qe.c?Qe.c(this):Qe.call(null,this))};k.has=function(a){return Uc(this,a)};k.get=function(a,b){return this.K(null,a,b)};k.forEach=function(a){for(var b=G(this),c=null,d=0,e=0;;)if(e<d){var f=c.R(null,e),g=S(f,0,null);f=S(f,1,null);a.g?a.g(f,g):a.call(null,f,g);e+=1}else if(b=G(b))Qc(b)?(c=Db(b),b=Eb(b),g=c,d=O(c),c=g):(c=I(b),g=S(c,0,null),f=S(c,1,null),a.g?a.g(f,g):a.call(null,f,g),b=K(b),c=null,d=0),e=0;else return null};k.ka=function(a,b){return this.K(null,b,null)};
k.K=function(a,b,c){a=Fc(this.h,b);return-1===a?c:this.h[a+1]};k.jb=function(a,b,c){a=this.h.length;for(var d=0;;)if(d<a){var e=this.h[d],f=this.h[d+1];c=b.l?b.l(c,e,f):b.call(null,c,e,f);if(jc(c))return bb(c);d+=2}else return c};k.na=function(){return new Oe(this.h,2*this.m)};k.S=function(){return this.meta};k.V=function(){return this.m};k.T=function(){var a=this.v;return null!=a?a:this.v=a=gc(this)};
k.P=function(a,b){if(Nc(b)&&!Oc(b))if(a=this.h.length,this.m===b.V(null))for(var c=0;;)if(c<a){var d=b.K(null,this.h[c],Sc);if(d!==Sc)if(M.g(this.h[c+1],d))c+=2;else return!1;else return!1}else return!0;else return!1;else return!1};k.Sa=function(){return new Re(this.h.length,Aa(this.h))};k.W=function(){return eb(Nd,this.meta)};k.ba=function(a,b){return bd(this,b)};k.ca=function(a,b,c){return cd(this,b,c)};
k.rb=function(a,b){if(0<=Fc(this.h,b)){a=this.h.length;var c=a-2;if(0===c)return this.W(null);c=Array(c);for(var d=0,e=0;;){if(d>=a)return new v(this.meta,this.m-1,c,null);M.g(b,this.h[d])?d+=2:(c[e]=this.h[d],c[e+1]=this.h[d+1],e+=2,d+=2)}}else return this};
k.va=function(a,b,c){a=Fc(this.h,b);if(-1===a){if(this.m<Se){a=this.h;for(var d=a.length,e=Array(d+2),f=0;;)if(f<d)e[f]=a[f],f+=1;else break;e[d]=b;e[d+1]=c;return new v(this.meta,this.m+1,e,null)}return eb(Ua(ge.g(Te,this),b,c),this.meta)}if(c===this.h[a+1])return this;b=Aa(this.h);b[a+1]=c;return new v(this.meta,this.m,b,null)};k.M=function(){var a=this.h;return 0<=a.length-2?new Ne(a,0,null):null};k.U=function(a,b){return b===this.meta?this:new v(b,this.m,this.h,this.v)};
k.Y=function(a,b){if(Pc(b))return this.va(null,Na(b,0),Na(b,1));a=this;for(b=G(b);;){if(null==b)return a;var c=I(b);if(Pc(c))a=Ua(a,Na(c,0),Na(c,1)),b=K(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};k.call=function(a){switch(arguments.length-1){case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length-1)].join(""));}};k.apply=function(a,b){return this.call.apply(this,[this].concat(Aa(b)))};
k.c=function(a){return this.ka(null,a)};k.g=function(a,b){return this.K(null,a,b)};var Nd=new v(null,0,[],hc),Se=8;v.prototype[za]=function(){return cc(this)};function Re(a,b){this.Va={};this.len=a;this.h=b;this.j=259;this.A=56}k=Re.prototype;k.V=function(){if(this.Va)return hd(this.len);throw Error("count after persistent!");};k.ka=function(a,b){return this.K(null,b,null)};k.K=function(a,b,c){if(this.Va)return a=Fc(this.h,b),-1===a?c:this.h[a+1];throw Error("lookup after persistent!");};
k.Ua=function(a,b){if(this.Va){if(Ae(b))return this.Ta(null,Be.c?Be.c(b):Be.call(null,b),Ce.c?Ce.c(b):Ce.call(null,b));if(Pc(b))return this.Ta(null,b.c?b.c(0):b.call(null,0),b.c?b.c(1):b.call(null,1));a=G(b);for(b=this;;){var c=I(a);if(w(c))a=K(a),b=zb(b,Be.c?Be.c(c):Be.call(null,c),Ce.c?Ce.c(c):Ce.call(null,c));else return b}}else throw Error("conj! after persistent!");};k.$a=function(){if(this.Va)return this.Va=!1,new v(null,hd(this.len),this.h,null);throw Error("persistent! called twice");};
k.Ta=function(a,b,c){if(this.Va){a=Fc(this.h,b);if(-1===a){if(this.len+2<=2*Se)return this.len+=2,this.h.push(b),this.h.push(c),this;a=Ue.g?Ue.g(this.len,this.h):Ue.call(null,this.len,this.h);return zb(a,b,c)}c!==this.h[a+1]&&(this.h[a+1]=c);return this}throw Error("assoc! after persistent!");};k.call=function(a){switch(arguments.length-1){case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length-1)].join(""));}};
k.apply=function(a,b){return this.call.apply(this,[this].concat(Aa(b)))};k.c=function(a){return this.K(null,a,null)};k.g=function(a,b){return this.K(null,a,b)};function Ue(a,b){for(var c=wb(Te),d=0;;)if(d<a)c=zb(c,b[d],b[d+1]),d+=2;else return c}function Ve(){this.O=!1}function We(a,b){return a===b?!0:a===b||a instanceof E&&b instanceof E&&a.oa===b.oa?!0:M.g(a,b)}function Xe(a,b,c){a=Aa(a);a[b]=c;return a}
function Ye(a,b){var c=Array(a.length-2);Rc(a,0,c,0,2*b);Rc(a,2*(b+1),c,2*b,c.length-2*b);return c}function Ze(a,b,c,d){a=a.Na(b);a.h[c]=d;return a}function $e(a,b,c){for(var d=a.length,e=0,f=c;;)if(e<d){c=a[e];if(null!=c){var g=a[e+1];c=b.l?b.l(f,c,g):b.call(null,f,c,g)}else c=a[e+1],c=null!=c?c.fb(b,f):f;if(jc(c))return c;e+=2;f=c}else return f}function af(a){this.h=a;this.i=0;this.sa=this.gb=null}
af.prototype.advance=function(){for(var a=this.h.length;;)if(this.i<a){var b=this.h[this.i],c=this.h[this.i+1];null!=b?b=this.gb=new te(b,c):null!=c?(b=Jb(c),b=b.fa()?this.sa=b:!1):b=!1;this.i+=2;if(b)return!0}else return!1};af.prototype.fa=function(){var a=null!=this.gb;return a?a:(a=null!=this.sa)?a:this.advance()};
af.prototype.next=function(){if(null!=this.gb){var a=this.gb;this.gb=null;return a}if(null!=this.sa)return a=this.sa.next(),this.sa.fa()||(this.sa=null),a;if(this.advance())return this.next();throw Error("No such element");};af.prototype.remove=function(){return Error("Unsupported operation")};function bf(a,b,c){this.H=a;this.J=b;this.h=c;this.A=131072;this.j=0}k=bf.prototype;
k.Na=function(a){if(a===this.H)return this;var b=id(this.J),c=Array(0>b?4:2*(b+1));Rc(this.h,0,c,0,2*b);return new bf(a,this.J,c)};k.cb=function(){return cf?cf(this.h):df.call(null,this.h)};k.fb=function(a,b){return $e(this.h,a,b)};k.Oa=function(a,b,c,d){var e=1<<(b>>>a&31);if(0===(this.J&e))return d;var f=id(this.J&e-1);e=this.h[2*f];f=this.h[2*f+1];return null==e?f.Oa(a+5,b,c,d):We(c,e)?f:d};
k.qa=function(a,b,c,d,e,f){var g=1<<(c>>>b&31),h=id(this.J&g-1);if(0===(this.J&g)){var l=id(this.J);if(2*l<this.h.length){a=this.Na(a);b=a.h;f.O=!0;c=2*(l-h);f=2*h+(c-1);for(l=2*(h+1)+(c-1);0!==c;)b[l]=b[f],--l,--c,--f;b[2*h]=d;b[2*h+1]=e;a.J|=g;return a}if(16<=l){h=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];h[c>>>b&31]=ef.qa(a,b+5,c,d,e,f);for(e=d=0;;)if(32>d)0===(this.J>>>d&1)?
d+=1:(h[d]=null!=this.h[e]?ef.qa(a,b+5,Ub(this.h[e]),this.h[e],this.h[e+1],f):this.h[e+1],e+=2,d+=1);else break;return new ff(a,l+1,h)}b=Array(2*(l+4));Rc(this.h,0,b,0,2*h);b[2*h]=d;b[2*h+1]=e;Rc(this.h,2*h,b,2*(h+1),2*(l-h));f.O=!0;a=this.Na(a);a.h=b;a.J|=g;return a}l=this.h[2*h];g=this.h[2*h+1];if(null==l)return l=g.qa(a,b+5,c,d,e,f),l===g?this:Ze(this,a,2*h+1,l);if(We(d,l))return e===g?this:Ze(this,a,2*h+1,e);f.O=!0;f=b+5;d=gf?gf(a,f,l,g,c,d,e):hf.call(null,a,f,l,g,c,d,e);e=2*h;h=2*h+1;a=this.Na(a);
a.h[e]=null;a.h[h]=d;return a};
k.pa=function(a,b,c,d,e){var f=1<<(b>>>a&31),g=id(this.J&f-1);if(0===(this.J&f)){var h=id(this.J);if(16<=h){g=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];g[b>>>a&31]=ef.pa(a+5,b,c,d,e);for(d=c=0;;)if(32>c)0===(this.J>>>c&1)?c+=1:(g[c]=null!=this.h[d]?ef.pa(a+5,Ub(this.h[d]),this.h[d],this.h[d+1],e):this.h[d+1],d+=2,c+=1);else break;return new ff(null,h+1,g)}a=Array(2*(h+1));Rc(this.h,
0,a,0,2*g);a[2*g]=c;a[2*g+1]=d;Rc(this.h,2*g,a,2*(g+1),2*(h-g));e.O=!0;return new bf(null,this.J|f,a)}var l=this.h[2*g];f=this.h[2*g+1];if(null==l)return h=f.pa(a+5,b,c,d,e),h===f?this:new bf(null,this.J,Xe(this.h,2*g+1,h));if(We(c,l))return d===f?this:new bf(null,this.J,Xe(this.h,2*g+1,d));e.O=!0;e=this.J;h=this.h;a+=5;a=jf?jf(a,l,f,b,c,d):hf.call(null,a,l,f,b,c,d);c=2*g;g=2*g+1;d=Aa(h);d[c]=null;d[g]=a;return new bf(null,e,d)};
k.bb=function(a,b,c,d){var e=1<<(b>>>a&31);if(0===(this.J&e))return d;var f=id(this.J&e-1);e=this.h[2*f];f=this.h[2*f+1];return null==e?f.bb(a+5,b,c,d):We(c,e)?new te(e,f):d};k.eb=function(a,b,c){var d=1<<(b>>>a&31);if(0===(this.J&d))return this;var e=id(this.J&d-1),f=this.h[2*e],g=this.h[2*e+1];return null==f?(a=g.eb(a+5,b,c),a===g?this:null!=a?new bf(null,this.J,Xe(this.h,2*e+1,a)):this.J===d?null:new bf(null,this.J^d,Ye(this.h,e))):We(c,f)?new bf(null,this.J^d,Ye(this.h,e)):this};k.na=function(){return new af(this.h)};
var ef=new bf(null,0,[]);function kf(a){this.h=a;this.i=0;this.sa=null}kf.prototype.fa=function(){for(var a=this.h.length;;){if(null!=this.sa&&this.sa.fa())return!0;if(this.i<a){var b=this.h[this.i];this.i+=1;null!=b&&(this.sa=Jb(b))}else return!1}};kf.prototype.next=function(){if(this.fa())return this.sa.next();throw Error("No such element");};kf.prototype.remove=function(){return Error("Unsupported operation")};function ff(a,b,c){this.H=a;this.m=b;this.h=c;this.A=131072;this.j=0}k=ff.prototype;
k.Na=function(a){return a===this.H?this:new ff(a,this.m,Aa(this.h))};k.cb=function(){return lf?lf(this.h):mf.call(null,this.h)};k.fb=function(a,b){for(var c=this.h.length,d=0;;)if(d<c){var e=this.h[d];if(null!=e){b=e.fb(a,b);if(jc(b))return b;d+=1}else d+=1}else return b};k.Oa=function(a,b,c,d){var e=this.h[b>>>a&31];return null!=e?e.Oa(a+5,b,c,d):d};
k.qa=function(a,b,c,d,e,f){var g=c>>>b&31,h=this.h[g];if(null==h)return a=Ze(this,a,g,ef.qa(a,b+5,c,d,e,f)),a.m+=1,a;b=h.qa(a,b+5,c,d,e,f);return b===h?this:Ze(this,a,g,b)};k.pa=function(a,b,c,d,e){var f=b>>>a&31,g=this.h[f];if(null==g)return new ff(null,this.m+1,Xe(this.h,f,ef.pa(a+5,b,c,d,e)));a=g.pa(a+5,b,c,d,e);return a===g?this:new ff(null,this.m,Xe(this.h,f,a))};k.bb=function(a,b,c,d){var e=this.h[b>>>a&31];return null!=e?e.bb(a+5,b,c,d):d};
k.eb=function(a,b,c){var d=b>>>a&31,e=this.h[d];if(null!=e){a=e.eb(a+5,b,c);if(a===e)d=this;else if(null==a)if(8>=this.m)a:{e=this.h;a=e.length;b=Array(2*(this.m-1));c=0;for(var f=1,g=0;;)if(c<a)c!==d&&null!=e[c]?(b[f]=e[c],f+=2,g|=1<<c,c+=1):c+=1;else{d=new bf(null,g,b);break a}}else d=new ff(null,this.m-1,Xe(this.h,d,a));else d=new ff(null,this.m,Xe(this.h,d,a));return d}return this};k.na=function(){return new kf(this.h)};
function nf(a,b,c){b*=2;for(var d=0;;)if(d<b){if(We(c,a[d]))return d;d+=2}else return-1}function of(a,b,c,d){this.H=a;this.ua=b;this.m=c;this.h=d;this.A=131072;this.j=0}k=of.prototype;k.Na=function(a){if(a===this.H)return this;var b=Array(2*(this.m+1));Rc(this.h,0,b,0,2*this.m);return new of(a,this.ua,this.m,b)};k.cb=function(){return cf?cf(this.h):df.call(null,this.h)};k.fb=function(a,b){return $e(this.h,a,b)};
k.Oa=function(a,b,c,d){a=nf(this.h,this.m,c);return 0>a?d:We(c,this.h[a])?this.h[a+1]:d};
k.qa=function(a,b,c,d,e,f){if(c===this.ua){b=nf(this.h,this.m,d);if(-1===b){if(this.h.length>2*this.m)return b=2*this.m,c=2*this.m+1,a=this.Na(a),a.h[b]=d,a.h[c]=e,f.O=!0,a.m+=1,a;c=this.h.length;b=Array(c+2);Rc(this.h,0,b,0,c);b[c]=d;b[c+1]=e;f.O=!0;d=this.m+1;a===this.H?(this.h=b,this.m=d,a=this):a=new of(this.H,this.ua,d,b);return a}return this.h[b+1]===e?this:Ze(this,a,b+1,e)}return(new bf(a,1<<(this.ua>>>b&31),[null,this,null,null])).qa(a,b,c,d,e,f)};
k.pa=function(a,b,c,d,e){return b===this.ua?(a=nf(this.h,this.m,c),-1===a?(a=2*this.m,b=Array(a+2),Rc(this.h,0,b,0,a),b[a]=c,b[a+1]=d,e.O=!0,new of(null,this.ua,this.m+1,b)):M.g(this.h[a+1],d)?this:new of(null,this.ua,this.m,Xe(this.h,a+1,d))):(new bf(null,1<<(this.ua>>>a&31),[null,this])).pa(a,b,c,d,e)};k.bb=function(a,b,c,d){a=nf(this.h,this.m,c);return 0>a?d:We(c,this.h[a])?new te(this.h[a],this.h[a+1]):d};
k.eb=function(a,b,c){a=nf(this.h,this.m,c);return-1===a?this:1===this.m?null:new of(null,this.ua,this.m-1,Ye(this.h,hd(a)))};k.na=function(){return new af(this.h)};function hf(a){switch(arguments.length){case 6:return jf(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 7:return gf(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);default:throw Error(["Invalid arity: ",z.c(arguments.length)].join(""));}}
function jf(a,b,c,d,e,f){var g=Ub(b);if(g===d)return new of(null,g,2,[b,c,e,f]);var h=new Ve;return ef.pa(a,g,b,c,h).pa(a,d,e,f,h)}function gf(a,b,c,d,e,f,g){var h=Ub(c);if(h===e)return new of(null,h,2,[c,d,f,g]);var l=new Ve;return ef.qa(a,b,h,c,d,l).qa(a,b,e,f,g,l)}function pf(a,b,c,d,e){this.meta=a;this.nodes=b;this.i=c;this.D=d;this.v=e;this.j=32374988;this.A=0}k=pf.prototype;k.toString=function(){return Lb(this)};
k.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
k.lastIndexOf=function(){function a(c){return P(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return P(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return P(this,c,d)};return b}();k.S=function(){return this.meta};k.aa=function(){if(null==this.D){var a=this.nodes,b=this.i+2;return qf?qf(a,b,null):df.call(null,a,b,null)}a=this.nodes;b=this.i;var c=K(this.D);return qf?qf(a,b,c):df.call(null,a,b,c)};
k.T=function(){var a=this.v;return null!=a?a:this.v=a=ec(this)};k.P=function(a,b){return uc(this,b)};k.W=function(){return J};k.ba=function(a,b){return wc(b,this)};k.ca=function(a,b,c){return yc(b,c,this)};k.X=function(){return null==this.D?new te(this.nodes[this.i],this.nodes[this.i+1]):I(this.D)};
k.da=function(){var a=this,b=null==a.D?function(){var c=a.nodes,d=a.i+2;return qf?qf(c,d,null):df.call(null,c,d,null)}():function(){var c=a.nodes,d=a.i,e=K(a.D);return qf?qf(c,d,e):df.call(null,c,d,e)}();return null!=b?b:J};k.M=function(){return this};k.U=function(a,b){return b===this.meta?this:new pf(b,this.nodes,this.i,this.D,this.v)};k.Y=function(a,b){return Q(b,this)};pf.prototype[za]=function(){return cc(this)};
function df(a){switch(arguments.length){case 1:return cf(arguments[0]);case 3:return qf(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length)].join(""));}}function cf(a){return qf(a,0,null)}function qf(a,b,c){if(null==c)for(c=a.length;;)if(b<c){if(null!=a[b])return new pf(null,a,b,null,null);var d=a[b+1];if(w(d)&&(d=d.cb(),w(d)))return new pf(null,a,b+2,d,null);b+=2}else return null;else return new pf(null,a,b,c,null)}
function rf(a,b,c,d,e){this.meta=a;this.nodes=b;this.i=c;this.D=d;this.v=e;this.j=32374988;this.A=0}k=rf.prototype;k.toString=function(){return Lb(this)};k.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
k.lastIndexOf=function(){function a(c){return P(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return P(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return P(this,c,d)};return b}();k.S=function(){return this.meta};k.aa=function(){var a=this.nodes,b=this.i,c=K(this.D);return sf?sf(a,b,c):mf.call(null,a,b,c)};k.T=function(){var a=this.v;return null!=a?a:this.v=a=ec(this)};
k.P=function(a,b){return uc(this,b)};k.W=function(){return J};k.ba=function(a,b){return wc(b,this)};k.ca=function(a,b,c){return yc(b,c,this)};k.X=function(){return I(this.D)};k.da=function(){var a=this.nodes;var b=this.i,c=K(this.D);a=sf?sf(a,b,c):mf.call(null,a,b,c);return null!=a?a:J};k.M=function(){return this};k.U=function(a,b){return b===this.meta?this:new rf(b,this.nodes,this.i,this.D,this.v)};k.Y=function(a,b){return Q(b,this)};rf.prototype[za]=function(){return cc(this)};
function mf(a){switch(arguments.length){case 1:return lf(arguments[0]);case 3:return sf(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length)].join(""));}}function lf(a){return sf(a,0,null)}function sf(a,b,c){if(null==c)for(c=a.length;;)if(b<c){var d=a[b];if(w(d)&&(d=d.cb(),w(d)))return new rf(null,a,b+1,d,null);b+=1}else return null;else return new rf(null,a,b,c,null)}function tf(a,b){this.ea=a;this.Bb=b;this.ub=!1}
tf.prototype.fa=function(){return!this.ub||this.Bb.fa()};tf.prototype.next=function(){if(this.ub)return this.Bb.next();this.ub=!0;return new te(null,this.ea)};tf.prototype.remove=function(){return Error("Unsupported operation")};function uf(a,b,c,d,e,f){this.meta=a;this.m=b;this.root=c;this.ga=d;this.ea=e;this.v=f;this.j=16123663;this.A=139268}k=uf.prototype;k.Ya=function(a,b){return null==b?this.ga?new te(null,this.ea):null:null==this.root?null:this.root.bb(0,Ub(b),b,null)};k.toString=function(){return Lb(this)};
k.keys=function(){return cc(Pe.c?Pe.c(this):Pe.call(null,this))};k.entries=function(){return new Le(G(G(this)))};k.values=function(){return cc(Qe.c?Qe.c(this):Qe.call(null,this))};k.has=function(a){return Uc(this,a)};k.get=function(a,b){return this.K(null,a,b)};
k.forEach=function(a){for(var b=G(this),c=null,d=0,e=0;;)if(e<d){var f=c.R(null,e),g=S(f,0,null);f=S(f,1,null);a.g?a.g(f,g):a.call(null,f,g);e+=1}else if(b=G(b))Qc(b)?(c=Db(b),b=Eb(b),g=c,d=O(c),c=g):(c=I(b),g=S(c,0,null),f=S(c,1,null),a.g?a.g(f,g):a.call(null,f,g),b=K(b),c=null,d=0),e=0;else return null};k.ka=function(a,b){return this.K(null,b,null)};k.K=function(a,b,c){return null==b?this.ga?this.ea:c:null==this.root?c:this.root.Oa(0,Ub(b),b,c)};
k.jb=function(a,b,c){a=this.ga?b.l?b.l(c,null,this.ea):b.call(null,c,null,this.ea):c;jc(a)?b=bb(a):null!=this.root?(b=this.root.fb(b,a),b=jc(b)?kc.c?kc.c(b):kc.call(null,b):b):b=a;return b};k.na=function(){var a=this.root?Jb(this.root):Ld();return this.ga?new tf(this.ea,a):a};k.S=function(){return this.meta};k.V=function(){return this.m};k.T=function(){var a=this.v;return null!=a?a:this.v=a=gc(this)};k.P=function(a,b){return Ke(this,b)};k.Sa=function(){return new vf(this.root,this.m,this.ga,this.ea)};
k.W=function(){return eb(Te,this.meta)};k.rb=function(a,b){if(null==b)return this.ga?new uf(this.meta,this.m-1,this.root,!1,null,null):this;if(null==this.root)return this;a=this.root.eb(0,Ub(b),b);return a===this.root?this:new uf(this.meta,this.m-1,a,this.ga,this.ea,null)};
k.va=function(a,b,c){if(null==b)return this.ga&&c===this.ea?this:new uf(this.meta,this.ga?this.m:this.m+1,this.root,!0,c,null);a=new Ve;b=(null==this.root?ef:this.root).pa(0,Ub(b),b,c,a);return b===this.root?this:new uf(this.meta,a.O?this.m+1:this.m,b,this.ga,this.ea,null)};k.M=function(){if(0<this.m){var a=null!=this.root?this.root.cb():null;return this.ga?Q(new te(null,this.ea),a):a}return null};k.U=function(a,b){return b===this.meta?this:new uf(b,this.m,this.root,this.ga,this.ea,this.v)};
k.Y=function(a,b){if(Pc(b))return this.va(null,Na(b,0),Na(b,1));a=this;for(b=G(b);;){if(null==b)return a;var c=I(b);if(Pc(c))a=Ua(a,Na(c,0),Na(c,1)),b=K(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};k.call=function(a){switch(arguments.length-1){case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length-1)].join(""));}};k.apply=function(a,b){return this.call.apply(this,[this].concat(Aa(b)))};
k.c=function(a){return this.ka(null,a)};k.g=function(a,b){return this.K(null,a,b)};var Te=new uf(null,0,null,!1,null,hc);function wf(a,b){for(var c=a.length,d=0,e=wb(Te);;)if(d<c){var f=d+1;e=zb(e,a[d],b[d]);d=f}else return yb(e)}uf.prototype[za]=function(){return cc(this)};function vf(a,b,c,d){this.H={};this.root=a;this.count=b;this.ga=c;this.ea=d;this.j=259;this.A=56}
function xf(a,b,c){if(a.H){if(null==b)a.ea!==c&&(a.ea=c),a.ga||(a.count+=1,a.ga=!0);else{var d=new Ve;b=(null==a.root?ef:a.root).qa(a.H,0,Ub(b),b,c,d);b!==a.root&&(a.root=b);d.O&&(a.count+=1)}return a}throw Error("assoc! after persistent!");}k=vf.prototype;k.V=function(){if(this.H)return this.count;throw Error("count after persistent!");};k.ka=function(a,b){return null==b?this.ga?this.ea:null:null==this.root?null:this.root.Oa(0,Ub(b),b)};
k.K=function(a,b,c){return null==b?this.ga?this.ea:c:null==this.root?c:this.root.Oa(0,Ub(b),b,c)};k.Ua=function(a,b){a:if(this.H)if(Ae(b))a=xf(this,Be.c?Be.c(b):Be.call(null,b),Ce.c?Ce.c(b):Ce.call(null,b));else if(Pc(b))a=xf(this,b.c?b.c(0):b.call(null,0),b.c?b.c(1):b.call(null,1));else for(a=G(b),b=this;;){var c=I(a);if(w(c))a=K(a),b=xf(b,Be.c?Be.c(c):Be.call(null,c),Ce.c?Ce.c(c):Ce.call(null,c));else{a=b;break a}}else throw Error("conj! after persistent");return a};
k.$a=function(){if(this.H){this.H=null;var a=new uf(null,this.count,this.root,this.ga,this.ea,null)}else throw Error("persistent! called twice");return a};k.Ta=function(a,b,c){return xf(this,b,c)};k.call=function(a){switch(arguments.length-1){case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length-1)].join(""));}};k.apply=function(a,b){return this.call.apply(this,[this].concat(Aa(b)))};
k.c=function(a){return this.ka(null,a)};k.g=function(a,b){return this.K(null,a,b)};var W=function W(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return W.s(0<c.length?new H(c.slice(0),0,null):null)};W.s=function(a){for(var b=G(a),c=wb(Te);;)if(b){a=K(K(b));var d=I(b);b=I(K(b));c=zb(c,d,b);b=a}else return yb(c)};W.F=0;W.C=function(a){return this.s(G(a))};function yf(a,b){this.G=a;this.ta=b;this.j=32374988;this.A=0}k=yf.prototype;k.toString=function(){return Lb(this)};
k.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
k.lastIndexOf=function(){function a(c){return P(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return P(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return P(this,c,d)};return b}();k.S=function(){return this.ta};k.aa=function(){var a=(null!=this.G?this.G.j&128||t===this.G.Za||(this.G.j?0:x(Qa,this.G)):x(Qa,this.G))?this.G.aa():K(this.G);return null==a?null:new yf(a,null)};k.T=function(){return ec(this)};
k.P=function(a,b){return uc(this,b)};k.W=function(){return J};k.ba=function(a,b){return wc(b,this)};k.ca=function(a,b,c){return yc(b,c,this)};k.X=function(){return this.G.X(null).key};k.da=function(){var a=(null!=this.G?this.G.j&128||t===this.G.Za||(this.G.j?0:x(Qa,this.G)):x(Qa,this.G))?this.G.aa():K(this.G);return null!=a?new yf(a,null):J};k.M=function(){return this};k.U=function(a,b){return b===this.ta?this:new yf(this.G,b)};k.Y=function(a,b){return Q(b,this)};yf.prototype[za]=function(){return cc(this)};
function Pe(a){return(a=G(a))?new yf(a,null):null}function Be(a){return Ya(a)}function zf(a,b){this.G=a;this.ta=b;this.j=32374988;this.A=0}k=zf.prototype;k.toString=function(){return Lb(this)};k.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
k.lastIndexOf=function(){function a(c){return P(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return P(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return P(this,c,d)};return b}();k.S=function(){return this.ta};k.aa=function(){var a=(null!=this.G?this.G.j&128||t===this.G.Za||(this.G.j?0:x(Qa,this.G)):x(Qa,this.G))?this.G.aa():K(this.G);return null==a?null:new zf(a,null)};k.T=function(){return ec(this)};
k.P=function(a,b){return uc(this,b)};k.W=function(){return J};k.ba=function(a,b){return wc(b,this)};k.ca=function(a,b,c){return yc(b,c,this)};k.X=function(){return this.G.X(null).O};k.da=function(){var a=(null!=this.G?this.G.j&128||t===this.G.Za||(this.G.j?0:x(Qa,this.G)):x(Qa,this.G))?this.G.aa():K(this.G);return null!=a?new zf(a,null):J};k.M=function(){return this};k.U=function(a,b){return b===this.ta?this:new zf(this.G,b)};k.Y=function(a,b){return Q(b,this)};zf.prototype[za]=function(){return cc(this)};
function Qe(a){return(a=G(a))?new zf(a,null):null}function Ce(a){return Za(a)}function Af(a){this.Wa=a}Af.prototype.fa=function(){return this.Wa.fa()};Af.prototype.next=function(){if(this.Wa.fa())return this.Wa.next().key;throw Error("No such element");};Af.prototype.remove=function(){return Error("Unsupported operation")};function Bf(a,b,c){this.meta=a;this.wa=b;this.v=c;this.j=15077647;this.A=139268}k=Bf.prototype;k.toString=function(){return Lb(this)};k.keys=function(){return cc(G(this))};
k.entries=function(){return new Me(G(G(this)))};k.values=function(){return cc(G(this))};k.has=function(a){return Uc(this,a)};k.forEach=function(a){for(var b=G(this),c=null,d=0,e=0;;)if(e<d){var f=c.R(null,e),g=S(f,0,null);f=S(f,1,null);a.g?a.g(f,g):a.call(null,f,g);e+=1}else if(b=G(b))Qc(b)?(c=Db(b),b=Eb(b),g=c,d=O(c),c=g):(c=I(b),g=S(c,0,null),f=S(c,1,null),a.g?a.g(f,g):a.call(null,f,g),b=K(b),c=null,d=0),e=0;else return null};k.ka=function(a,b){return this.K(null,b,null)};
k.K=function(a,b,c){a=Va(this.wa,b);return w(a)?Ya(a):c};k.na=function(){return new Af(Jb(this.wa))};k.S=function(){return this.meta};k.V=function(){return Ga(this.wa)};k.T=function(){var a=this.v;return null!=a?a:this.v=a=gc(this)};k.P=function(a,b){if(Lc(b))if(O(this)===O(b))try{return ed(function(c,d){return(c=Uc(b,d))?c:new ic(!1)},!0,this.wa)}catch(c){if(c instanceof Error)return!1;throw c;}else return!1;else return!1};k.Sa=function(){return new Cf(wb(this.wa))};k.W=function(){return eb(Df,this.meta)};
k.M=function(){return Pe(this.wa)};k.U=function(a,b){return b===this.meta?this:new Bf(b,this.wa,this.v)};k.Y=function(a,b){return new Bf(this.meta,Ec.l(this.wa,b,null),null)};k.call=function(a){switch(arguments.length-1){case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length-1)].join(""));}};k.apply=function(a,b){return this.call.apply(this,[this].concat(Aa(b)))};k.c=function(a){return this.ka(null,a)};
k.g=function(a,b){return this.K(null,a,b)};var Df=new Bf(null,Nd,hc);Bf.prototype[za]=function(){return cc(this)};function Cf(a){this.Pa=a;this.A=136;this.j=259}k=Cf.prototype;k.Ua=function(a,b){this.Pa=zb(this.Pa,b,null);return this};k.$a=function(){return new Bf(null,yb(this.Pa),null)};k.V=function(){return O(this.Pa)};k.ka=function(a,b){return this.K(null,b,null)};k.K=function(a,b,c){return Sa(this.Pa,b,Sc)===Sc?c:b};
k.call=function(a){switch(arguments.length-1){case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length-1)].join(""));}};k.apply=function(a,b){return this.call.apply(this,[this].concat(Aa(b)))};k.c=function(a){return Sa(this.Pa,a,Sc)===Sc?null:a};k.g=function(a,b){return Sa(this.Pa,a,Sc)===Sc?b:a};
function qd(a){if(null!=a&&(a.A&4096||t===a.Nb))return a.name;if("string"===typeof a)return a;throw Error(["Doesn't support name: ",z.c(a)].join(""));}function Ef(a,b){return new rd(null,function(){var c=G(b);if(c){var d=I(c);d=a.c?a.c(d):a.call(null,d);c=w(d)?Q(I(c),Ef(a,ac(c))):null}else c=null;return c},null)}
function Ff(){var a=Gf;return function(){function b(h,l,m){return new U(null,2,5,V,[a.l?a.l(h,l,m):a.call(null,h,l,m),fd.l?fd.l(h,l,m):fd.call(null,h,l,m)],null)}function c(h,l){return new U(null,2,5,V,[a.g?a.g(h,l):a.call(null,h,l),fd.g?fd.g(h,l):fd.call(null,h,l)],null)}function d(h){return new U(null,2,5,V,[a.c?a.c(h):a.call(null,h),fd.c?fd.c(h):fd.call(null,h)],null)}function e(){return new U(null,2,5,V,[a.B?a.B():a.call(null),fd.B?fd.B():fd.call(null)],null)}var f=null,g=function(){function h(m,
n,p,r){var u=null;if(3<arguments.length){u=0;for(var B=Array(arguments.length-3);u<B.length;)B[u]=arguments[u+3],++u;u=new H(B,0,null)}return l.call(this,m,n,p,u)}function l(m,n,p,r){return new U(null,2,5,V,[Kd(a,m,n,p,r),Kd(fd,m,n,p,r)],null)}h.F=3;h.C=function(m){var n=I(m);m=K(m);var p=I(m);m=K(m);var r=I(m);m=ac(m);return l(n,p,r,m)};h.s=l;return h}();f=function(h,l,m,n){switch(arguments.length){case 0:return e.call(this);case 1:return d.call(this,h);case 2:return c.call(this,h,l);case 3:return b.call(this,
h,l,m);default:var p=null;if(3<arguments.length){p=0;for(var r=Array(arguments.length-3);p<r.length;)r[p]=arguments[p+3],++p;p=new H(r,0,null)}return g.s(h,l,m,p)}throw Error("Invalid arity: "+arguments.length);};f.F=3;f.C=g.C;f.B=e;f.c=d;f.g=c;f.l=b;f.s=g.s;return f}()}
var Hf=function Hf(a,b){var d=a.exec(b);if(null==d)return null;var e=d[0],f=1===d.length?e:ze(d);return Q(f,new rd(null,function(){var g=e.length;g=d.index+(1>g?1:g);return g<=b.length?(g=b.substring(g),Hf.g?Hf.g(a,g):Hf.call(null,a,g)):null},null))};
function If(a,b,c,d,e,f,g){var h=na;na=null==na?null:na-1;try{if(null!=na&&0>na)return tb(a,"#");tb(a,c);if(0===ta.c(f))G(g)&&tb(a,function(){var u=Jf.c(f);return w(u)?u:"..."}());else{if(G(g)){var l=I(g);b.l?b.l(l,a,f):b.call(null,l,a,f)}for(var m=K(g),n=ta.c(f)-1;;)if(!m||null!=n&&0===n){G(m)&&0===n&&(tb(a,d),tb(a,function(){var u=Jf.c(f);return w(u)?u:"..."}()));break}else{tb(a,d);var p=I(m);c=a;g=f;b.l?b.l(p,c,g):b.call(null,p,c,g);var r=K(m);c=n-1;m=r;n=c}}return tb(a,e)}finally{na=h}}
function Kf(a,b){b=G(b);for(var c=null,d=0,e=0;;)if(e<d){var f=c.R(null,e);tb(a,f);e+=1}else if(b=G(b))c=b,Qc(c)?(b=Db(c),d=Eb(c),c=b,f=O(b),b=d,d=f):(f=I(c),tb(a,f),b=K(c),c=null,d=0),e=0;else return null}var Lf={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};function Mf(a){return['"',z.c(a.replace(/[\\"\b\f\n\r\t]/g,function(b){return Lf[b]})),'"'].join("")}function Nf(a,b){return Tc(C.g(a,ra))?null!=b&&(b.j&131072||t===b.Mb)?null!=Kc(b):!1:!1}
function Of(a,b,c){if(null==a)return tb(b,"nil");if(Nf(c,a)){tb(b,"^");var d=Kc(a);Pf.l?Pf.l(d,b,c):Pf.call(null,d,b,c);tb(b," ")}if(a.Ab)return a.Vb(b);if(null!=a?a.j&2147483648||t===a.Z||(a.j?0:x(ub,a)):x(ub,a))return vb(a,b,c);if(!0===a||!1===a)return tb(b,z.c(a));if("number"===typeof a)return tb(b,isNaN(a)?"##NaN":a===Number.POSITIVE_INFINITY?"##Inf":a===Number.NEGATIVE_INFINITY?"##-Inf":z.c(a));if(null!=a&&a.constructor===Object)return tb(b,"#js "),d=Yd.g(function(f){var g=/[A-Za-z_\*\+\?!\-'][\w\*\+\?!\-']*/;
if("string"===typeof f)g=g.exec(f),g=null!=g&&M.g(g[0],f)?1===g.length?g[0]:ze(g):null;else throw new TypeError("re-matches must match against a string.");return new te(null!=g?pd.c(f):f,a[f])},ia(a)),Qf.I?Qf.I(d,Pf,b,c):Qf.call(null,d,Pf,b,c);if(ua(a))return If(b,Pf,"#js ["," ","]",c,a);if("string"==typeof a)return w(qa.c(c))?tb(b,Mf(a)):tb(b,a);if("function"==q(a)){var e=a.name;c=w(function(){var f=null==e;return f?f:/^[\s\xa0]*$/.test(e)}())?"Function":e;return Kf(b,vc(["#object[",c,w(!1)?[' "',
z.c(a),'"'].join(""):"","]"]))}if(a instanceof Date)return c=function(f,g){for(f=z.c(f);;)if(f.length<g)f=["0",f].join("");else return f},Kf(b,vc(['#inst "',z.c(a.getUTCFullYear()),"-",c(a.getUTCMonth()+1,2),"-",c(a.getUTCDate(),2),"T",c(a.getUTCHours(),2),":",c(a.getUTCMinutes(),2),":",c(a.getUTCSeconds(),2),".",c(a.getUTCMilliseconds(),3),"-",'00:00"']));if(a instanceof RegExp)return Kf(b,vc(['#"',a.source,'"']));if(Ea(a))return Kf(b,vc(["#object[",a.toString(),"]"]));if(w(function(){var f=null==
a?null:a.constructor;return null==f?null:f.lb}()))return Kf(b,vc(["#object[",a.constructor.lb.replace(/\//g,"."),"]"]));e=function(){var f=null==a?null:a.constructor;return null==f?null:f.name}();c=w(function(){var f=null==e;return f?f:/^[\s\xa0]*$/.test(e)}())?"Object":e;return null==a.constructor?Kf(b,vc(["#object[",c,"]"])):Kf(b,vc(["#object[",c," ",z.c(a),"]"]))}function Pf(a,b,c){var d=Rf.c(c);return w(d)?(c=Ec.l(c,Sf,Of),d.l?d.l(a,b,c):d.call(null,a,b,c)):Of(a,b,c)}
function Tf(a,b){var c=new ja;a:{var d=new Kb(c);Pf(I(a),d,b);a=G(K(a));for(var e=null,f=0,g=0;;)if(g<f){var h=e.R(null,g);tb(d," ");Pf(h,d,b);g+=1}else if(a=G(a))e=a,Qc(e)?(a=Db(e),f=Eb(e),e=a,h=O(a),a=f,f=h):(h=I(e),tb(d," "),Pf(h,d,b),a=K(e),e=null,f=0),g=0;else break a}return c}function Uf(a){return a instanceof Xb?Yb.g(null,qd(a)):pd.g(null,qd(a))}
function Vf(a){if(w(!1)){var b=G(a),c=G(b),d=I(c);K(c);S(d,0,null);S(d,1,null);c=null==a?null:null!=a&&(a.j&4||t===a.Fb)?a.W(null):(null!=a?a.j&4||t===a.Fb||(a.j?0:x(Ha,a)):x(Ha,a))?Ia(a):null;for(a=null;;){d=a;b=G(b);a=I(b);var e=K(b),f=a;a=S(f,0,null);b=S(f,1,null);if(w(f))if(a instanceof E||a instanceof Xb)if(w(d))if(M.g(d,od(a)))c=Ec.l(c,Uf(a),b),a=d,b=e;else return null;else if(d=od(a),w(d))c=Ec.l(c,Uf(a),b),a=d,b=e;else return null;else return null;else return new U(null,2,5,V,[d,c],null)}}else return null}
function Wf(a,b,c,d,e){return If(d,function(f,g,h){var l=Ya(f);c.l?c.l(l,g,h):c.call(null,l,g,h);tb(g," ");f=Za(f);return c.l?c.l(f,g,h):c.call(null,f,g,h)},[z.c(a),"{"].join(""),", ","}",e,G(b))}function Qf(a,b,c,d){var e=Nc(a)?Vf(a):null,f=S(e,0,null);e=S(e,1,null);return w(f)?Wf(["#:",z.c(f)].join(""),e,b,c,d):Wf(null,a,b,c,d)}H.prototype.Z=t;H.prototype.N=function(a,b,c){return If(b,Pf,"("," ",")",c,this)};rd.prototype.Z=t;rd.prototype.N=function(a,b,c){return If(b,Pf,"("," ",")",c,this)};
te.prototype.Z=t;te.prototype.N=function(a,b,c){return If(b,Pf,"["," ","]",c,this)};pf.prototype.Z=t;pf.prototype.N=function(a,b,c){return If(b,Pf,"("," ",")",c,this)};Ne.prototype.Z=t;Ne.prototype.N=function(a,b,c){return If(b,Pf,"("," ",")",c,this)};dc.prototype.Z=t;dc.prototype.N=function(a,b,c){return If(b,Pf,"("," ",")",c,this)};De.prototype.Z=t;De.prototype.N=function(a,b,c){return If(b,Pf,"("," ",")",c,this)};md.prototype.Z=t;md.prototype.N=function(a,b,c){return If(b,Pf,"("," ",")",c,this)};
be.prototype.Z=t;be.prototype.N=function(a,b,c){return If(b,Pf,"("," ",")",c,this)};tc.prototype.Z=t;tc.prototype.N=function(a,b,c){return If(b,Pf,"("," ",")",c,this)};uf.prototype.Z=t;uf.prototype.N=function(a,b,c){return Qf(this,Pf,b,c)};rf.prototype.Z=t;rf.prototype.N=function(a,b,c){return If(b,Pf,"("," ",")",c,this)};Bf.prototype.Z=t;Bf.prototype.N=function(a,b,c){return If(b,Pf,"#{"," ","}",c,this)};vd.prototype.Z=t;vd.prototype.N=function(a,b,c){return If(b,Pf,"("," ",")",c,this)};
Sd.prototype.Z=t;Sd.prototype.N=function(a,b,c){tb(b,"#object[cljs.core.Atom ");Pf(new v(null,1,[Xf,this.state],null),b,c);return tb(b,"]")};zf.prototype.Z=t;zf.prototype.N=function(a,b,c){return If(b,Pf,"("," ",")",c,this)};U.prototype.Z=t;U.prototype.N=function(a,b,c){return If(b,Pf,"["," ","]",c,this)};kd.prototype.Z=t;kd.prototype.N=function(a,b){return tb(b,"()")};v.prototype.Z=t;v.prototype.N=function(a,b,c){return Qf(this,Pf,b,c)};yf.prototype.Z=t;
yf.prototype.N=function(a,b,c){return If(b,Pf,"("," ",")",c,this)};Cc.prototype.Z=t;Cc.prototype.N=function(a,b,c){return If(b,Pf,"("," ",")",c,this)};Xb.prototype.Xa=t;Xb.prototype.Ra=function(a,b){if(b instanceof Xb)return Wb(this,b);throw Error(["Cannot compare ",z.c(this)," to ",z.c(b)].join(""));};E.prototype.Xa=t;E.prototype.Ra=function(a,b){if(b instanceof E)return nd(this,b);throw Error(["Cannot compare ",z.c(this)," to ",z.c(b)].join(""));};U.prototype.Xa=t;
U.prototype.Ra=function(a,b){if(Pc(b))return Wc(this,b);throw Error(["Cannot compare ",z.c(this)," to ",z.c(b)].join(""));};te.prototype.Xa=t;te.prototype.Ra=function(a,b){if(Pc(b))return Wc(this,b);throw Error(["Cannot compare ",z.c(this)," to ",z.c(b)].join(""));};function Yf(){}
function Zf(a){if(null!=a&&null!=a.Hb)a=a.Hb(a);else{var b=Zf[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=Zf._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("IEncodeJS.-clj-\x3ejs",a);}return a}function $f(a,b){(null!=a?t===a.Gb||(a.Wb?0:x(Yf,a)):x(Yf,a))?a=Zf(a):"string"===typeof a||"number"===typeof a||a instanceof E||a instanceof Xb?a=b.c?b.c(a):b.call(null,a):(a=vc([a]),b=oa(),a=null==a||va(G(a))?"":z.c(Tf(a,b)));return a}
var ag=function ag(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return ag.s(arguments[0],1<c.length?new H(c.slice(1),0,null):null)};
ag.s=function(a,b){b=null!=b&&(b.j&64||t===b.u)?T(W,b):b;var c=C.l(b,bg,qd),d=function g(f){if(null==f)return null;if(null!=f?t===f.Gb||(f.Wb?0:x(Yf,f)):x(Yf,f))return Zf(f);if(f instanceof E)return c.c?c.c(f):c.call(null,f);if(f instanceof Xb)return z.c(f);if(Nc(f)){var h={};f=G(f);for(var l=null,m=0,n=0;;)if(n<m){var p=l.R(null,n),r=S(p,0,null);p=S(p,1,null);r=$f(r,d);p=g(p);h[r]=p;n+=1}else if(f=G(f))Qc(f)?(m=Db(f),f=Eb(f),l=m,m=O(m)):(m=I(f),l=S(m,0,null),m=S(m,1,null),l=$f(l,d),m=g(m),h[l]=m,
f=K(f),l=null,m=0),n=0;else break;return h}if(null==f?0:null!=f?f.j&8||t===f.cc||(f.j?0:x(Ja,f)):x(Ja,f)){h=[];f=G(Yd.g(g,f));l=null;for(n=m=0;;)if(n<m)r=l.R(null,n),h.push(r),n+=1;else if(f=G(f))l=f,Qc(l)?(f=Db(l),n=Eb(l),l=f,m=O(f),f=n):(f=I(l),h.push(f),f=K(l),l=null,m=0),n=0;else break;return h}return f};return d(a)};ag.F=1;ag.C=function(a){var b=I(a);a=K(a);return this.s(b,a)};var cg=new E(null,"cursorGroupBackward","cursorGroupBackward",-1004717331),dg=new E("cursor","mapped","cursor/mapped",1625530272),eg=new E(null,"slurp-forward","slurp-forward",-866284566),fg=new E(null,"selection-return","selection-return",267226206),gg=new E(null,"selectGroupForward","selectGroupForward",1344873433),hg=new E(null,"table","table",-564943036),Xf=new E(null,"val","val",128701612),jg=new E(null,"doc","doc",1913296891),kg=new E(null,"selectLineEnd","selectLineEnd",-1578526086),lg=new E(null,
"cursorDocStart","cursorDocStart",2008312830),ra=new E(null,"meta","meta",1499536964),mg=new E(null,"barf-backward","barf-backward",434854195),ng=new E(null,"cursorPageDown","cursorPageDown",-1143253131),og=new E(null,"mac","mac",-1879391650),pg=new E(null,"barf-forward","barf-forward",1278612337),qg=new E(null,"from","from",1815293044),rg=new E(null,"selectPageDown","selectPageDown",226562613),sg=new E(null,"deleteCharBackward","deleteCharBackward",-618312025),tg=new E(null,"cursorPageUp","cursorPageUp",
-716828715),ug=new E(null,"selectCharLeft","selectCharLeft",1894248154),vg=new E(null,"spec","spec",347520401),wg=new E(null,"nav-left","nav-left",845947876),xg=new E(null,"class","class",-2030961996),yg=new E(null,"cursorLineDown","cursorLineDown",180576864),zg=new E(null,"range","range",1639692286),Ag=new E(null,"selectDocEnd","selectDocEnd",496449813),Bg=new E(null,"cursor","cursor",1011937484),Cg=new E(null,"nav-right","nav-right",591041267),Dg=new E(null,"shift","shift",997140064),Md=new Xb(null,
"meta19719","meta19719",1333101962,null),Rf=new E(null,"alt-impl","alt-impl",670969595),Eg=new E(null,"selectDocStart","selectDocStart",-217268371),Fg=new E(null,"deleteCharForward","deleteCharForward",823474956),Gg=new E(null,"deleteGroupBackward","deleteGroupBackward",616768113),Hg=new E(null,"selectLineUp","selectLineUp",-255594686),Ig=new E(null,"selectAll","selectAll",869127842),Jg=new E(null,"cursorDocEnd","cursorDocEnd",-1298653903),sa=new E(null,"dup","dup",556298533),Kg=new E(null,"cursorGroupForward",
"cursorGroupForward",1231480632),Lg=new E(null,"nav-select-right","nav-select-right",-455278613),Mg=new E(null,"cellpadding","cellpadding",-1752450238),ta=new E(null,"print-length","print-length",1931866356),Ng=new E(null,"unwrap","unwrap",-1399175462),Og=new E(null,"selectLineDown","selectLineDown",1741100604),pa=new E(null,"flush-on-newline","flush-on-newline",-151457939),Pg=new E(null,"selectGroupBackward","selectGroupBackward",1569543117),Qg=new E(null,"nav-select-left","nav-select-left",-1033285138),
Rg=new E(null,"selection-grow","selection-grow",1627169352),Sg=new E(null,"cursorLineUp","cursorLineUp",-1375841219),Tg=new E(null,"selectCharRight","selectCharRight",1049825195),Y=new E(null,"key","key",-1516042587),Ug=new E(null,"tr","tr",-1424774646),Vg=new E(null,"selectLineBoundaryForward","selectLineBoundaryForward",904508598),Wg=new E(null,"to","to",192099007),Xg=new E(null,"b","b",1482224470),Yg=new E(null,"selectPageUp","selectPageUp",152840428),Zg=new E(null,"splitLine","splitLine",-1338533189),
$g=new E(null,"td","td",1479933353),ah=new E(null,"run","run",-1821166653),bh=new E(null,"cursorLineBoundaryForward","cursorLineBoundaryForward",-1283359997),ch=new E(null,"changes","changes",1492088),dh=new E(null,"enter-and-indent","enter-and-indent",-1825406873),eh=new E(null,"cursorLineBoundaryBackward","cursorLineBoundaryBackward",1373049802),fh=new E(null,"kill","kill",-12335575),gh=new E(null,"div","div",1057191632),Sf=new E(null,"fallback-impl","fallback-impl",-1501286995),hh=new E(null,"insertNewlineAndIndent",
"insertNewlineAndIndent",-542382007),ih=new E(null,"preventDefault","preventDefault",-1714933772),qa=new E(null,"readably","readably",1129599760),jh=new E(null,"deleteGroupForward","deleteGroupForward",596007091),kh=new E(null,"selectLineBoundaryBackward","selectLineBoundaryBackward",-1443564123),bg=new E(null,"keyword-fn","keyword-fn",-64566675),lh=new E(null,"cursorCharRight","cursorCharRight",-739900583),mh=new E(null,"transposeChars","transposeChars",1566260285),nh=new E(null,"cursorCharLeft",
"cursorCharLeft",-1572589780),oh=new E(null,"indent","indent",-148200125),ph=new E(null,"insert","insert",1286475395),qh=new E(null,"cursorLineStart","cursorLineStart",-1505072960),rh=new E(null,"slurp-backward","slurp-backward",-1615745159),sh=new E(null,"undoSelection","undoSelection",628691449),th=new E(null,"from-to","from-to",-640428401),uh=new E(null,"cursorLineEnd","cursorLineEnd",-234219178),vh=new E(null,"selectLineStart","selectLineStart",1211557745),Jf=new E(null,"more-marker","more-marker",
-14717935);var wh={},xh={},yh=[];function zh(a,b){var c=xh[a];if(void 0!==c)return c;try{yh.push(a);var d=wh[a],e=shadow$provide[a];if(void 0===d){if(void 0===e)throw"Module not provided: "+a;d={exports:{}};wh[a]=d}if(e){delete shadow$provide[a];try{e.call(d,aa,zh,d,d.exports)}catch(g){throw console.warn("shadow-cljs - failed to load",a),g;}if(b){var f=b.globals;if(f)for(a=0;a<f.length;a++)window[f[a]]=d.exports}}}finally{yh.pop()}return d.exports}zh.cache={};zh.resolve=function(a){return a};
function Ah(a){return zh(a,{})};Ah(0);var Bh=Ah(1);var Ch=Ah(2);Ah(5);var Dh=Ah(6);Ah(7);var Eh=Ah(8);var Fh=Ah(9);var Gh=Ah(10);var Hh=Ah(11);var Ih=Ah(12);Ah(14);var Jh=Ah(15);function Kh(a){return a instanceof E?qd(a):a};function Lh(a,b){var c=G(b);I(c);c=K(c);I(c);for(K(c);;){c=G(b);b=I(c);c=K(c);var d=I(c);c=K(c);a[Kh(b)]=d;if(c)b=c;else break}}var Mh=function Mh(a){switch(arguments.length){case 1:return Mh.c(arguments[0]);case 2:return Mh.g(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Mh.s(arguments[0],arguments[1],new H(c.slice(2),0,null))}};Mh.c=function(a){return a};
Mh.g=function(a,b){a=null!=a?a:{};if(null!=b)for(var c=G(ia(b)),d=null,e=0,f=0;;)if(f<e){var g=d.R(null,f);Lh(a,vc([g,b[Kh(g)]]));f+=1}else if(c=G(c))d=c,Qc(d)?(c=Db(d),f=Eb(d),d=c,e=O(c),c=f):(c=I(d),Lh(a,vc([c,b[Kh(c)]])),c=K(d),d=null,e=0),f=0;else break;return a};Mh.s=function(a,b,c){return Ca(Mh,Mh.g(a,b),c)};Mh.C=function(a){var b=I(a),c=K(a);a=I(c);c=K(c);return this.s(b,a,c)};Mh.F=2;var Nh=Ah(16);function Oh(a,b){b=0<b?b:0;a=a.doc.length;return b<a?b:a};function Ph(a,b){return w(b.c?b.c(a):b.call(null,a))?a:null}function Qh(a,b){return a>b?{from:b,to:a}:{from:a,to:b}}function Rh(a,b){return w(b)?(a.dispatch(b),!0):!1}function Kj(a,b,c){return new v(null,2,[ch,new v(null,3,[ph,c,qg,a,Wg,b],null),Bg,a+c.length],null)}function Lj(a,b){M.g(a,b)&&(--a,a=0>a?0:a);return new v(null,2,[Bg,a,ch,new v(null,2,[qg,a,Wg,b],null)],null)}function Sh(a,b){return Th(a,null,b)}
function Th(a,b,c){return a.update(Mh.g(a.changeByRange(function(d){var e=c.c?c.c(d):c.call(null,d);if(null==e)e=null;else{e=Ph(e,Nc);e=null!=e&&(e.j&64||t===e.u)?T(W,e):e;var f=C.g(e,dg),g=C.g(e,Bg),h=C.g(e,th),l=C.g(e,zg);e=C.g(e,ch);e=w(e)?a.changes(ag(e)):null;w(l)?h=l:(w(f)?h=Ch.EditorSelection.cursor(e.mapPos(f)):w(g)?h=Ch.EditorSelection.cursor(g):w(h)?(f=h.c?h.c(0):h.call(null,0),h=h.c?h.c(1):h.call(null,1),h=Ch.EditorSelection.range(f,h)):h=null,h=w(h)?h:d);h={range:h};w(e)&&(h.changes=e);
e=h}return w(e)?e:{range:d}}),b))}function Uh(a){for(var b=[],c=arguments.length,d=0;;)if(d<c)b.push(arguments[d]),d+=1;else break;return Vh(arguments[0],arguments[1],2<b.length?new H(b.slice(2),0,null):null)}
function Vh(a,b,c){c=S(c,0,null);c=null!=c&&(c.j&64||t===c.u)?T(W,c):c;var d=C.l(c,qg,0),e=C.g(c,Wg);c=C.g(c,vg);for(var f=a.doc.iterLines(0),g=f.next(),h=[],l=d,m=1;;){var n=g,p=null!=n&&(n.j&64||t===n.u)?T(W,n):n,r=function(){var D=p;if(null!=D&&"done"in D)return D.done}(),u=function(){var D=p;if(null!=D&&"value"in D)return D.value}();if(w(function(){var D=r;return w(D)?D:d>e}()))return a.update(Mh.g({changes:a.changes(h)},c));g=f.next();n=function(){var D=b.l?b.l(l,u,m):b.call(null,l,u,m);if(w(D)){var R=
h;R.push(D);return R}return h}();var B=l+1+u.length,F=m+1;h=n;l=B;m=F}}
function Wh(a,b){var c=new Sd(-1),d=a.doc;return a.changeByRange(function(e){var f=null!=e&&(e.j&64||t===e.u)?T(W,e):e;var g=null!=f&&"from"in f?f.from:void 0;var h=null!=f&&"to"in f?f.to:void 0;var l=null!=f&&"anchor"in f?f.anchor:void 0;var m=null!=f&&"head"in f?f.head:void 0;for(var n=[],p=d.lineAt(g);;){var r=p,u=null!=r&&(r.j&64||t===r.u)?T(W,r):r,B=function(){var D=u;if(null!=D&&"number"in D)return D.number}(),F=function(){var D=u;if(null!=D&&"to"in D)return D.to}();p.number>bb(c)&&(Td(c,B),
b.l?b.l(p,n,f):b.call(null,p,n,f));p=h>F?Ph(d.lineAt(F+1),function(D,R,X,da){return function(xa){return xa.number>da}}(p,r,u,B,F,n,e,f,f,g,h,l,m,c,d)):!1;if(!w(p))return e=a.changes(n),{changes:n,range:Ch.EditorSelection.range(e.mapPos(l,1),e.mapPos(m,1))}}})}
function Xh(a,b){var c=null!=a&&(a.j&64||t===a.u)?T(W,a):a;a=null!=c&&"state"in c?c.state:void 0;var d=null!=a&&(a.j&64||t===a.u)?T(W,a):a;var e=null!=d&&"doc"in d?d.doc:void 0;var f=null!=c&&"changes"in c?c.changes:void 0;a=null!=c&&"effects"in c?c.effects:void 0;var g=null!=c&&"selection"in c?c.selection:void 0;var h=new Sd(-1),l=[];f.iterChanges(function(p,r,u,B){p=e.lineAt(u);u=null!=p&&(p.j&64||t===p.u)?T(W,p):p;p=null!=u&&"number"in u?u.number:void 0;r=null!=u&&"to"in u?u.to:void 0;for(;;){p>
bb(h)&&(Td(h,p),b.g?b.g(u,l):b.call(null,u,l));if(B<=r)return null;var F=e.lineAt(r+1),D=F;if(w(w(D)?F.number>u.number:D))u=F;else return null}});var m=d.changes(l);if(G(l)){var n=function(){if(null!=c){var p={};"annotations"in c&&(p.annotations=c.annotations);"scrollIntoView"in c&&(p.scrollIntoView=c.scrollIntoView);"reconfigure"in c&&(p.reconfigure=c.reconfigure)}else p={};p=null!=p?p:{};p.changes=f.compose(m);return p}();g=w(g)?function(){var p=null!=n?n:{};p.selection=d.selection.map(m);return p}():
n;return w(a)?(g=null!=g?g:{},g.effects=Ch.StateEffect.mapEffects(a,m),g):g}return c}function Yh(a){a=null!=a&&(a.j&64||t===a.u)?T(W,a):a;a=null!=a&&"selection"in a?a.selection:void 0;a=null!=a&&(a.j&64||t===a.u)?T(W,a):a;a=null!=a&&"ranges"in a?a.ranges:void 0;return!Od(function(b){return b.empty},a)};var Zh=Nh.props.coll,$h=Nh.props.prefixColl,ai=Nh.props.prefixEdge,bi=Nh.props.prefixContainer,ci=Bh.NodeProp.closedBy,di=Bh.NodeProp.openedBy,ei=Nh.props.sameEdge;function fi(a){for(var b=0;;){a=a.parent;if(null==a)return b;b+=1}}function gi(a){return a.parent.childBefore(a.from)}function hi(a){return a.parent.childAfter(a.to)}function ii(a){return a.type.prop(ai)}function ji(a){return a.type.prop(bi)}function ki(a){return a.type.prop(ci)}function li(a){return a.type.prop(di)}
function mi(a){a=a.type;return a.prop(ci)||a.prop(ei)||a.prop(ai)}function ni(a){return a.prop(di)||a.prop(ei)}function oi(a){a=a.type.prop(Bh.NodeProp.closedBy);return null==a?null:a[0]}function pi(a){a=a.type.prop(Bh.NodeProp.openedBy);return null==a?null:a[0]}function qi(a){return a.type.isTop}function ri(a){return"String"===a.name}function si(a){return"LineComment"===a.name}function ti(a){return a.type.prop(Zh)}
function ui(a){return a.isTop?!1:w(a.prop($h))?!1:w(a.prop(Zh))?!1:"Meta"===a.name?!1:!0}function vi(a){var b=null!=a&&(a.j&64||t===a.u)?T(W,a):a;a=null!=b&&"firstChild"in b?b.firstChild:void 0;b=null!=b&&"lastChild"in b?b.lastChild:void 0;var c=oi(a);return w(c)?M.g(c,b.name)&&!M.g(a.to,b.to):!0}var wi=function wi(a){var c=a.parent;return null==c?null:Q(c,new rd(null,function(){return wi.c?wi.c(c):wi.call(null,c)},null))};
function xi(a,b){return w(b.c?b.c(a):b.call(null,a))?a:Ca(function(c,d){return w(b.c?b.c(d):b.call(null,d))?new ic(d):null},null,wi(a))}function yi(a,b){return Ca(function(c,d){return w(b.c?b.c(d):b.call(null,d))?d:new ic(c)},null,Q(a,wi(a)))}
function zi(a,b,c){a:switch(c){case 1:var d=a.childAfter(b);break a;case -1:d=a.childBefore(b);break a;default:throw Error(["No matching clause: ",z.c(c)].join(""));}return null==d?null:Q(d,new rd(null,function(){var e=zi;a:switch(c){case 1:var f=d.to;break a;case -1:f=d.from;break a;default:throw Error(["No matching clause: ",z.c(c)].join(""));}return e(a,f,c)},null))}function Ai(a,b){return a.from===b.from&&a.to===b.to&&fi(a)===fi(b)}function Ci(a){return{from:a.from,to:a.to}}
function Di(a,b){return Tc(a.from<=b.from&&a.to>=b.to&&fi(a)<fi(b))}function Ei(a,b){if(Ai(a,b))return null;var c=Vc(b.from,a.from);switch(c){case 0:return Di(b,a)?a.parent:Di(a,b)?a.firstChild:null;case -1:if(Di(a,b))return a.lastChild;b=gi(a);return w(b)?b:a.parent;case 1:if(Di(a,b))return a.firstChild;b=hi(a);return w(b)?b:a.parent;default:throw Error(["No matching clause: ",z.c(c)].join(""));}}function Fi(a,b){return Ef(fd,ce(function(c){return Ei(c,b)},a))}
function Gi(a){var b=ti(a);return w(b)?b:ri(a)||"RegExp"===a.name}function Hi(a){switch(arguments.length){case 1:return arguments[0].tree;case 2:return arguments[0].tree.resolve(arguments[1]);case 3:return arguments[0].tree.resolve(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length)].join(""));}}
function Ii(a){switch(arguments.length){case 1:return arguments[0].cursor();case 2:return arguments[0].cursor(arguments[1]);case 3:return arguments[0].cursor(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length)].join(""));}}function Ji(a){var b=a.from,c=yi(a,function(d){return M.g(b,d.from)});return w(c)?c:a}
function Ki(a,b,c){a=Ji(Ii(a,b,1).node).cursor;for(b=Bc;;){var d=a.type;if(a.from>c)return b;if(ui(d)||d.isError){if(b=Ac.g(b,{type:d,from:a.from,to:a.to}),a.lastChild(),!w(a.next()))return b}else if(!w(a.next()))return b}}
function Li(a,b,c){c=Yc(Vc,new U(null,2,5,V,[b,c],null));b=S(c,0,null);c=S(c,1,null);var d=Hi(a,b,1),e=Hi(a,c,-1);a=w(Gi(d))?d.from:b;b=w(Gi(e))?e.to:c;b=Ca(function(f,g){var h=S(f,0,null);f=S(f,1,null);return new U(null,2,5,V,[Di(g,d)?g.from:h,Di(g,e)?g.to:f],null)},new U(null,2,5,V,[a,b],null),Yd.g(function(f){var g=f.type;return g.prop(ci)||g.prop(di)||g.prop(ei)||g.prop($h)?f.parent:f},Fi(d,e)));a=S(b,0,null);b=S(b,1,null);return Ch.EditorSelection.range(a,b)}
function Gf(a){a=null!=a&&(a.j&64||t===a.u)?T(W,a):a;var b=null!=a&&"firstChild"in a?a.firstChild:void 0;var c=null!=a&&"lastChild"in a?a.lastChild:void 0;return{from:mi(b)?b.to:a.from,to:ni(c.type)?c.from:a.to}}function Mi(a){a=a.parent;if(null==a)return null;var b=Ph(a,ji);return w(b)?b:Ph(a.firstChild,ii)}function Ni(a,b){return[z.c(function(){var c=Mi(b);return null==c?null:a.doc.slice(c.from,c.to)}()),b.firstChild.name].join("")}function Oi(a){return w(Mi(a))?a.parent:a}
function Bi(a,b){a=Hi(a,b,-1);return null==a?null:Ph(a,function(c){return M.g(b,c.to)})};(function(a){if(Lc(a))return Jc(a,null);a=G(a);if(null==a)return Df;if(a instanceof H&&0===a.i){a=a.h;for(var b=a.length,c=wb(Df),d=0;;)if(d<b)xb(c,a[d]),d+=1;else break;return yb(c)}for(c=wb(Df);;)if(null!=a)b=K(a),c=xb(c,A(a)),a=b;else return yb(c)})(Yd.g(function(a){return a.charCodeAt(0)},new U(null,4,5,V,[" ","n","r",","],null)));var Z=Ah(18);var Pi=Ih.indentNodeProp.add(function(a){var b=null!=a&&(a.j&64||t===a.u)?T(W,a):a;var c=null!=b&&"name"in b?b.name:void 0;return function(d){d=null!=d&&(d.j&64||t===d.u)?T(W,d):d;var e=null!=d&&"node"in d?d.node:void 0;if(M.g("Program",c))return 0;if(w(b.prop(Zh))){d=d.column(e.firstChild.to);if(M.g("List",c)){e=null==e?null:e.firstChild;e=null==e?null:hi(e);e=null==e?null:e.name;var f=new Bf(null,new v(null,2,["DefLike",null,"Operator",null],null),null);e=f.c?f.c(e):f.call(null,e)}else e=!1;return w(e)?
d+1:d}return-1}});function Qi(a,b){return Ca(function(c,d){d=d.g?d.g(a,b):d.call(null,a,b);return-1<d?new ic(d):c},-1,a.state.facet(Ch.EditorState.indentation))}
function Ri(a,b,c){var d=ld(ee(function(e){return b<=e.from&&e.from<=c||b<=e.to&&e.to<=c},Ki(a.tree,b,c)));a=function(){var e=I(d);e=null==e?null:e.to;return null==e?null:e<c}();return Ca(function(e,f){var g=S(f,0,null),h=null!=g&&(g.j&64||t===g.u)?T(W,g):g;g=null!=h&&"type"in h?h.type:void 0;h=null!=h&&"from"in h?h.from:void 0;f=S(f,1,null);var l=null!=f&&(f.j&64||t===f.u)?T(W,f):f;f=null!=l&&"to"in l?l.to:void 0;l=null!=l&&"type"in l?l.type:void 0;g=l.prop(ci)||l.prop(ai)||g.prop(di)||g.prop(ei)?
0:1;switch(Vc(h-f,g)){case 0:return e;case 1:return e.push({from:0===g?f:f+1,to:h}),e;case -1:return e.push({from:f,insert:" "}),e;default:return e}},w(a)?[{from:I(d).to,to:c}]:[],he(2,1,d))}function Si(a,b){b=G(b);for(var c=null,d=0,e=0;;)if(e<d){var f=c.R(null,e);a.push(f);e+=1}else if(b=G(b))c=b,Qc(c)?(b=Db(c),e=Eb(c),c=b,d=O(b),b=e):(b=I(c),a.push(b),b=K(c),c=null,d=0),e=0;else break;return a}
function Ti(a,b,c,d,e){var f=/^\s*/.exec(d)[0].length,g=Ph(Qi(b,c),Qd(jd));b=w(g)?function(){var h=Vc(g,f);switch(h){case 0:return null;case 1:return{from:c+f,insert:a.indentString(g-f)};case -1:return{from:c+g,to:c+f};default:throw Error(["No matching clause: ",z.c(h)].join(""));}}():null;d=w(!0)?Ri(a,c+f,c+O(d)):null;e=w(d)?Si(e,d):e;w(b)&&e.push(b);return e}
function Ui(a){var b=new Ch.IndentContext(a);return Wh(a,function(c,d){var e=null!=c&&(c.j&64||t===c.u)?T(W,c):c;c=null!=e&&"from"in e?e.from:void 0;e=null!=e&&"content"in e?e.content:void 0;return Ti(a,b,c,e,d)})}function Vi(a){var b=new Ch.IndentContext(a);return Uh(a,function(c,d){return Ti(a,b,c,d,[])})};function Wi(){var a=Xi,b=new U(null,2,5,V,["",Bc],null);a:{var c=Hf(/\||<[^>]*?>|[^<>|]+/,'(defn lezer-clojure\n  "This is a showcase for `lezer-clojure`, a grammar for Clojure/Script to enable a decent editor experience in the browser."\n  {:added "0.1"}\n  [demo]\n  nil ;; nil\n  (+ 1 1.0 1/5 1E3 042 +042 -042) ;; numbers\n  :hi :hi/ho ::ho :*+!-_? :abc:def:ghi ;; keywords\n  true false ;; booleans\n  :hello #_ :ignored ;; ignore next form\n  #"[A-Z]" ;; regex\n  ^{:meta/data \'is-data} \'too\n  (if (test? \x3cdemo\x3e)\n    (inc demo)|\n    (dec demo)))\n  #\n    [ ]\n    #"a"\na b(c|)d e');
break a;throw new TypeError("re-seq must match against a string.");}c=Ca(function(d,e){var f=S(d,0,null);d=S(d,1,null);if(M.g(e,"|"))e=new U(null,2,5,V,[f,Ac.g(d,Ch.EditorSelection.cursor(f.length))],null);else if(0==e.lastIndexOf("\x3c",0)){var g=V,h=O(e)-1;e=new U(null,2,5,g,[[f,e.substring(1,h)].join(""),Ac.g(d,Ch.EditorSelection.range(f.length,f.length+(O(e)-2)))],null)}else e=new U(null,2,5,V,[[f,z.c(e)].join(""),d],null);return e},b,c);b=S(c,0,null);c=S(c,1,null);return Ch.EditorState.create({doc:b,
selection:G(c)?Ch.EditorSelection.create(Zc(c)):void 0,extensions:function(){var d=[Ch.EditorState.allowMultipleSelections.of(!0)];w(a)&&d.push(a);return d}()})};function Yi(a){return Pd(function(b){return va(b.empty)},a.ranges)}
var Zi=Ch.StateField.define({create:Rd(J),update:function(a,b){b=null!=b&&(b.j&64||t===b.u)?T(W,b):b;var c=null!=b&&"state"in b?b.state:void 0;c=null!=c&&(c.j&64||t===c.u)?T(W,c):c;var d=null!=c&&"selection"in c?c.selection:void 0;b=null!=b&&"docChanged"in b?b.docChanged:void 0;return w(b)?J:va(Yi(d))?new Cc(null,d,null,1,null):w(function(){var e=null==a?null:I(K(a));return null==e?null:e.eq(d)}())?$d(1,a):w(function(){var e=null==a?null:I(a);return null==e?null:e.eq(d)}())?a:Ac.g(a,d)}});function $i(a){return function(b){var c=null!=b&&(b.j&64||t===b.u)?T(W,b):b;b=null!=c&&"state"in c?c.state:void 0;c=null!=c&&"dispatch"in c?c.dispatch:void 0;b=a.c?a.c(b):a.call(null,b);null!=b&&(c.c?c.c(b):c.call(null,b));return!0}}
function aj(a){var b=document;b=null!=b&&"activeElement"in b?b.activeElement:void 0;var c=document.createElement("input");c.setAttribute("class","clipboard-input");c.setAttribute("value",a);document.body.appendChild(c);c.focus();c.select();document.execCommand("copy");document.body.removeChild(c);b.focus()}
function bj(a,b,c){var d=function(){var e=xi(Hi(a,b),function(g){var h=ti(g);return w(h)?h:ri(g)||qi(g)});e=null==e?null:zi(e,b,c);e=null==e?null:I(e);if(null==e)return null;a:switch(c){case -1:var f=qg;break a;case 1:f=Wg;break a;default:throw Error(["No matching clause: ",z.c(c)].join(""));}f=Kh(f);if(null!=e&&f in e)return e[f]}();return w(d)?d:Oh(a,b+c)}
function cj(a){return function(b){return Sh(b,function(c){var d=null!=c&&(c.j&64||t===c.u)?T(W,c):c;c=null!=d&&"from"in d?d.from:void 0;var e=null!=d&&"to"in d?d.to:void 0;d=null!=d&&"empty"in d?d.empty:void 0;if(w(d))c=new v(null,1,[Bg,bj(b,c,a)],null);else{c=Qh(c,e);b:switch(a){case -1:e=qg;break b;case 1:e=Wg;break b;default:throw Error(["No matching clause: ",z.c(a)].join(""));}e=Kh(e);c=null!=c&&e in c?c[e]:void 0;c=new v(null,1,[Bg,c],null)}return c})}}
function dj(a){return function(b){return Sh(b,function(c){var d=null!=c&&(c.j&64||t===c.u)?T(W,c):c;c=null!=d&&"from"in d?d.from:void 0;var e=null!=d&&"to"in d?d.to:void 0;d=null!=d&&"empty"in d?d.empty:void 0;if(w(d))c=new v(null,1,[zg,Li(b,c,bj(b,c,a))],null);else{a:switch(c=Qh(c,e),e=null!=c&&(c.j&64||t===c.u)?T(W,c):c,c=null!=e&&"from"in e?e.from:void 0,e=null!=e&&"to"in e?e.to:void 0,a){case 1:c=Li(b,c,bj(b,e,a));break a;case -1:c=Li(b,bj(b,c,a),e);break a;default:throw Error(["No matching clause: ",
z.c(a)].join(""));}c=new v(null,1,[zg,c],null)}return c})}}function ej(a,b){var c=function(){var g=Hi(a,b,-1);return null==g?null:Ph(g,function(h){h=null!=h&&(h.j&64||t===h.u)?T(W,h):h;h=null!=h&&"to"in h?h.to:void 0;return M.g(b,h)})}(),d=function(){var g=Hi(a,b,1);return null==g?null:Ph(g,function(h){h=null!=h&&(h.j&64||t===h.u)?T(W,h):h;h=null!=h&&"from"in h?h.from:void 0;return M.g(b,h)})}(),e=Hi(a,b);var f=Ph(c,Wd(wa,Qd(mi)));return w(f)?f:w(d)?d:w(c)?c:e}
function fj(a,b,c){a=ej(a,c);return I(ee(function(d){var e=null!=d&&(d.j&64||t===d.u)?T(W,d):d;d=null!=e&&"from"in e?e.from:void 0;e=null!=e&&"to"in e?e.to:void 0;return d<=b&&e>=c&&!(d===b&&e===c)},Q(a,de(Ff(),vc([wi(a)])))))}
function gj(a){return function(b){return Sh(b,function(c){var d=null!=c&&(c.j&64||t===c.u)?T(W,c):c;c=null!=d&&"from"in d?d.from:void 0;d=null!=d&&"empty"in d?d.empty:void 0;if(w(d)){var e=xi(Hi(b,c),Wd(ti,function(g){a:switch(a){case 1:g=null==g?null:Oi(g);g=null==g?null:hi(g);g=null==g?null:li(g);break a;case -1:g=null==g?null:Oi(g);g=null==g?null:gi(g);g=null==g?null:ki(g);break a;default:throw Error(["No matching clause: ",z.c(a)].join(""));}return va(g)}));if(w(e)){a:switch(a){case 1:var f=I(fe(si,
Ef(fd,ce(hi,hi(Oi(e))))));break a;case -1:f=I(fe(si,Ef(fd,ce(gi,gi(Oi(e))))));break a;default:throw Error(["No matching clause: ",z.c(a)].join(""));}return w(f)?new v(null,2,[dg,c,ch,function(){switch(a){case 1:var g=e.lastChild,h=V,l=new v(null,2,[qg,f.to,ph,g.name],null);g=Ci(g);g=null!=g?g:{};g.insert=" ";return new U(null,2,5,h,[l,g],null);case -1:return g=Ni(b,e),h=Oi(e).from,new U(null,2,5,V,[new v(null,3,[qg,h,Wg,h+g.length,ph," "],null),new v(null,2,[qg,f.from,ph,g],null)],null);default:throw Error(["No matching clause: ",
z.c(a)].join(""));}}()],null):null}}return null})}}
function hj(a){return function(b){return Sh(b,function(c){c=null!=c&&(c.j&64||t===c.u)?T(W,c):c;var d=null!=c&&"from"in c?c.from:void 0;c=null!=c&&"empty"in c?c.empty:void 0;if(w(c)){var e=xi(Hi(b,d),ti);if(w(e))switch(a){case 1:c=function(){var l=e.lastChild;l=null==l?null:Ef(fd,ce(gi,gi(l)));l=null==l?null:fe(si,l);l=null==l?null:$d(1,l);return null==l?null:I(l)}();if(w(c)){var f=c;return new v(null,2,[Bg,function(){var l=f.to;return l<d?l:d}(),ch,new U(null,2,5,V,[new v(null,2,[qg,f.to,ph,e.lastChild.name],
null),function(){var l=Ci(e.lastChild);l=null!=l?l:{};l.insert=" ";return l}()],null)],null)}return null;case -1:c=function(){var l=e.firstChild;l=null==l?null:Ef(fd,ce(hi,hi(l)));l=null==l?null:fe(si,l);l=null==l?null:$d(1,l);return null==l?null:I(l)}();if(w(c)){var g=c,h=Ni(b,e);c=Oi(e).from;return new v(null,2,[Bg,function(){var l=g.from+(h.length+1);return d>l?d:l}(),ch,new U(null,2,5,V,[new v(null,2,[qg,g.from,ph,[" ",h].join("")],null),new v(null,3,[qg,c,Wg,c+h.length,ph,b.indentString(h.length)],
null)],null)],null)}return null;default:throw Error(["No matching clause: ",z.c(a)].join(""));}else return null}else return null})}}
var ij=wf([qh,yg,Ig,Hg,bh,kh,sg,hh,eh,Tg,Yg,Fg,nh,cg,Eg,Pg,Jg,Gg,vh,jh,Ag,rg,ng,tg,Vg,uh,Kg,lh,gg,kg,ug,Zg,Og,mh,Sg,lg],[Z.cursorLineStart,Z.cursorLineDown,Z.selectAll,Z.selectLineUp,Z.cursorLineBoundaryForward,Z.selectLineBoundaryBackward,Z.deleteCharBackward,Z.insertNewlineAndIndent,Z.cursorLineBoundaryBackward,Z.selectCharRight,Z.selectPageUp,Z.deleteCharForward,Z.cursorCharLeft,Z.cursorGroupBackward,Z.selectDocStart,Z.selectGroupBackward,Z.cursorDocEnd,Z.deleteGroupBackward,Z.selectLineStart,
Z.deleteGroupForward,Z.selectDocEnd,Z.selectPageDown,Z.cursorPageDown,Z.cursorPageUp,Z.selectLineBoundaryForward,Z.cursorLineEnd,Z.cursorGroupForward,Z.cursorCharRight,Z.selectGroupForward,Z.selectLineEnd,Z.selectCharLeft,Z.splitLine,Z.selectLineDown,Z.transposeChars,Z.cursorLineUp,Z.cursorDocStart]),jj=wf([oh,wg,dh,Rg,fh,eg,Lg,Qg,pg,mg,Cg,rh,Ng,fg],[$i(function(a){return Yh(a)?a.update(Ui(a)):Vi(a)}),$i(cj(-1)),$i(function(a){var b=new Ch.IndentContext(a);return Sh(a,function(c){var d=null!=c&&(c.j&
64||t===c.u)?T(W,c):c;c=null!=d&&"from"in d?d.from:void 0;d=null!=d&&"to"in d?d.to:void 0;var e=Gf(xi(Hi(a,c),Xd(ti,qi))).from;e=Qi(b,e);e=["\n",z.c(a.indentString(e))].join("");return new v(null,2,[Bg,c+e.length,ch,new U(null,1,5,V,[new v(null,3,[qg,c,Wg,d,ph,e],null)],null)],null)})}),$i(function(a){return Sh(a,function(b){var c=null!=b&&(b.j&64||t===b.u)?T(W,b):b;var d=null!=c&&"from"in c?c.from:void 0;var e=null!=c&&"to"in c?c.to:void 0;b=null!=c&&"empty"in c?c.empty:void 0;return w(b)?new v(null,
1,[zg,function(){var f=ej(a,d);f=null==f?null:Li(a,f.from,f.to);return w(f)?f:c}()],null):new v(null,1,[zg,function(){var f=fj(a,d,e);f=null==f?null:Ch.EditorSelection.range(f.from,f.to);return w(f)?f:c}()],null)})}),$i(function(a){return Sh(a,function(b){var c=null!=b&&(b.j&64||t===b.u)?T(W,b):b;var d=null!=c&&"from"in c?c.from:void 0;b=null!=c&&"to"in c?c.to:void 0;c=null!=c&&"empty"in c?c.empty:void 0;if(w(c)){b=Hi(a,d);var e=xi(b,function(h){var l=ti(h);return w(l)?l:ri(h)||qi(h)}),f=a.doc.lineAt(d).to,
g=w(e)?zi(e,d,1):null;b=w(e)?function(){var h=null==g?null:Ef(Vd(function(l){return l.from<=f}),g);return null==h?null:zc(h)}():null;b=ri(e)?function(){var h=z.c(a.doc.slice(e.from,e.to)).substring(d-e.from).indexOf("\n");return 0>h?e.to-1:d+h+1}():w(b)?li(b)?b.from:b.to:w(function(){var h=I(g);h=null==h?null:h.from;return null==h?null:h>f}())?I(g).from:null;aj(a.doc.slice(d,b));return w(b)?new v(null,2,[Bg,d,ch,new v(null,2,[qg,d,Wg,b],null)],null):null}aj(a.doc.slice(d,b));return new v(null,2,[Bg,
d,ch,Qh(d,b)],null)})}),$i(gj(1)),$i(dj(1)),$i(dj(-1)),$i(hj(1)),$i(hj(-1)),$i(cj(1)),$i(gj(-1)),$i(function(a){return Sh(a,function(b){var c=null!=b&&(b.j&64||t===b.u)?T(W,b):b;b=null!=c&&"from"in c?c.from:void 0;c=null!=c&&"empty"in c?c.empty:void 0;return w(c)?(c=Hi(a,b,-1),c=null==c?null:xi(c,ti),c=null==c?null:Ph(c,vi),w(c)?new v(null,2,[Bg,b-1,ch,new U(null,2,5,V,[Ci(c.firstChild),Ci(c.lastChild)],null)],null):null):null})}),$i(function(a){var b=I(K(a.field(Zi)));return w(b)?a.update({selection:b}):
Sh(a,function(c){return new v(null,1,[Bg,c.from],null)})})]),kj=function(a){return w(Pd(fd,a))?dd(function(b,c){return Ac.g(w(b)?b:Nd,c)},a):null}(vc([ij,jj]));ed(function(a,b,c){return Ec.l(a,c,b)},Nd,kj);function Mj(a,b){a=Hi(a,b).name;b=new Bf(null,new v(null,2,["StringContent",null,"String",null],null),null);return b.c?b.c(a):b.call(null,a)}
function lj(a){var b=null!=a&&(a.j&64||t===a.u)?T(W,a):a;return w(M.g(1,b.selection.ranges.length)?function(){var c=null!=b&&"selection"in b?b.selection:void 0;c=null!=c&&"ranges"in c?c.ranges:void 0;c=null!=c&&0 in c?c[0]:void 0;var d=c.empty;return w(d)?M.g(0,c.from):d}():!1)?null:Th(b,{annotations:Ch.Transaction.userEvent.of("delete")},function(c){var d=null!=c&&(c.j&64||t===c.u)?T(W,c):c;var e=null!=d&&"empty"in d?d.empty:void 0;c=null!=d&&"head"in d?d.head:void 0;d=null!=d&&"anchor"in d?d.anchor:
void 0;c=Qh(c,d);d=null!=c&&(c.j&64||t===c.u)?T(W,c):c;c=null!=d&&"from"in d?d.from:void 0;d=null!=d&&"to"in d?d.to:void 0;var f=b.tree.resolve(c,-1),g=f.parent;e=va(e);e||(e=(e=M.g("StringContent",Hi(b,c,-1).name))?e:w(g)?!vi(g)&&mi(f):g);w(e)?c=Lj(c,d):ni(f.type)&&c===g.to?c=new v(null,1,[Bg,c-1],null):(ki(f)||f.type.prop(ei))&&f.from===g.from?(d=f.parent,e=d.name,c=(w(ti(d))?Ai(hi(d.firstChild),d.lastChild):M.g("String",e)&&d.firstChild.to===d.lastChild.from)?new v(null,2,[Bg,g.from,ch,new U(null,
1,5,V,[Qh(g.from,g.to)],null)],null):new v(null,1,[Bg,c],null)):(e=Bi(b,c-1),e=null==e?null:Ph(e,si),w(e)&&(e=b.doc,e=e.lineAt.call(e,c),e=e.slice.call(e),e=!/^[\s\xa0]*$/.test(null==e?"":String(e))),c=w(e)?new v(null,1,[Bg,c-1],null):Lj(c,d));return c})}var mj=new v(null,4,'()[]{}""'.split(""),null);
function nj(a,b){var c=mj.c?mj.c(b):mj.call(null,b);return Sh(a,function(d){var e=null!=d&&(d.j&64||t===d.u)?T(W,d):d;d=null!=e&&"from"in e?e.from:void 0;var f=null!=e&&"to"in e?e.to:void 0;var g=null!=e&&"head"in e?e.head:void 0;var h=null!=e&&"anchor"in e?e.anchor:void 0;e=null!=e&&"empty"in e?e.empty:void 0;return w(Mj(a,d))?M.g(b,'"')?Kj(g,g,'\\"'):Kj(d,f,b):w(e)?new v(null,2,[ch,new v(null,2,[ph,[b,c].join(""),qg,g],null),Bg,g+b.length],null):new v(null,2,[ch,new U(null,2,5,V,[new v(null,2,[ph,
b,qg,d],null),new v(null,2,[ph,c,qg,f],null)],null),th,new U(null,2,5,V,[h+b.length,g+b.length],null)],null)})}
function oj(a,b){return Sh(a,function(c){var d=null!=c&&(c.j&64||t===c.u)?T(W,c):c;c=null!=d&&"empty"in d?d.empty:void 0;var e=null!=d&&"head"in d?d.head:void 0;var f=null!=d&&"from"in d?d.from:void 0;d=null!=d&&"to"in d?d.to:void 0;if(w(Mj(a,f)))return Kj(f,d,b);if(w(c)){c=function(){var g=function(){var m=Hi(a,e,-1);m=null==m?null:wi(m);m=null==m?null:ee(Wd(ti,Qd(vi)),m);return null==m?null:I(m)}(),h=function(){var m=null==g?null:g.firstChild;return null==m?null:oi(m)}(),l=null==g?null:g.to;return w(w(h)?
M.g(h,b):h)?new v(null,2,[ch,new v(null,2,[qg,l,ph,h],null),Bg,l+1],null):null}();if(w(c))return c;c=function(){var g=function(){a:{var h=Hi(a);for(var l=e;;){var m=Ii(h,l,1);if(m.type.isTop){h=null;break a}if(ui(m.type)){h=m;break a}l=1+l}}if(w(h))for(;;){if(ni(h.type))return h.to;if(!w(h.next()))return null}else return null}();return w(g)?new v(null,1,[Bg,g],null):null}();return w(c)?c:new v(null,1,[Bg,e],null)}return null})}
function pj(a){return function(b){b=null!=b&&(b.j&64||t===b.u)?T(W,b):b;var c=null!=b&&"state"in b?b.state:void 0;return Rh(b,nj(c,a))}}function qj(a){return function(b){b=null!=b&&(b.j&64||t===b.u)?T(W,b):b;var c=null!=b&&"state"in b?b.state:void 0;return Rh(b,oj(c,a))}};var rj=Dh.EditorView.baseTheme({$matchingBracket:{color:"#0b0"},$nonmatchingBracket:{color:"#a22"}}),sj=Dh.Decoration.mark({"class":Dh.themeClass("matchingBracket")}),tj=Dh.Decoration.mark({"class":Dh.themeClass("nonmatchingBracket")});function uj(a,b){return b.range(a.from,a.to)}
var vj=Ch.StateField.define({create:Rd(Dh.Decoration.none),update:function(a,b){var c=null!=b&&(b.j&64||t===b.u)?T(W,b):b;var d=null!=c&&"state"in c?c.state:void 0;b=null!=c&&"docChanged"in c?c.docChanged:void 0;var e=null!=c&&"selection"in c?c.selection:void 0;return w(w(b)?b:e)?(a=Ca(function(f,g){g=null!=g&&(g.j&64||t===g.u)?T(W,g):g;var h=null!=g&&"head"in g?g.head:void 0;var l=null!=g&&"empty"in g?g.empty:void 0;g=function(){var m=w(l)?I(ee(Xd(ki,li),new U(null,2,5,V,[Hi(d,h,-1),Hi(d,h,1)],null))):
l;if(w(m)){var n=ki(m)&&M.g(m.from,m.parent.from)?Ph(m.parent.lastChild,function(p){return M.g(p.name,oi(m))}):li(m)&&M.g(m.to,m.parent.to)?Ph(m.parent.firstChild,function(p){return M.g(p.name,pi(m))}):null;return w(n)?Ac.s(f,uj(m,sj),vc([uj(n,sj)])):Ac.g(f,uj(m,tj))}return null}();if(w(g))return g;g=function(){if(va(xi(Hi(d,h),ri))){var m=c.state.doc.slice(h,h+1).toString();var n=new Bf(null,new v(null,3,[")",null,"]",null,"}",null],null),null);m=n.c?n.c(m):n.call(null,m)}else m=!1;return w(m)?Ac.g(f,
uj({from:h,to:h+1},tj)):null}();return w(g)?g:f},Bc,c.state.selection.ranges),Dh.Decoration.set(Ba(a),!0)):a},provide:[Dh.EditorView.decorations]});function wj(a){return ed(function(b,c,d){var e=C.g(b,c);return null==e?Gc.g(b,c):Ec.l(b,c,d.c?d.c(e):d.call(null,e))},a,new v(null,2,[ah,kj,Dg,kj],null))}function xj(a){return ag(ed(function(b,c,d){return ge.g(b,Yd.g(function(e){return wj(Ec.l(e,ah,c))},d))},Bc,a))}
var yj=wf([yg,Ig,bh,sg,eh,Fg,nh,cg,Jg,Gg,jh,ng,tg,uh,Kg,sh,lh,Zg,mh,Sg,lg],[new U(null,2,5,V,[new v(null,2,[Y,"ArrowDown",Dg,Og],null),new v(null,2,[og,"Ctrl-n",Dg,Og],null)],null),new U(null,1,5,V,[new v(null,1,[Y,"Mod-a"],null)],null),new U(null,1,5,V,[new v(null,2,[Y,"End",Dg,Vg],null)],null),new U(null,2,5,V,[new v(null,1,[Y,"Backspace"],null),new v(null,1,[og,"Ctrl-h"],null)],null),new U(null,2,5,V,[new v(null,3,[Y,"Home",Dg,kh,og,"Ctrl-a"],null),new v(null,2,[og,"Cmd-ArrowLeft",Dg,kh],null)],
null),new U(null,2,5,V,[new v(null,1,[Y,"Delete"],null),new v(null,1,[og,"Ctrl-d"],null)],null),new U(null,2,5,V,[new v(null,2,[Y,"ArrowLeft",Dg,ug],null),new v(null,2,[og,"Ctrl-b",Dg,ug],null)],null),new U(null,1,5,V,[new v(null,2,[og,"Alt-b",Dg,Pg],null)],null),new U(null,3,5,V,[new v(null,2,[og,"Cmd-ArrowDown",Dg,Ag],null),new v(null,2,[Y,"Mod-End",Dg,Ag],null),new v(null,1,[og,"Alt-\x3e"],null)],null),new U(null,2,5,V,[new v(null,2,[Y,"Mod-Backspace",og,"Alt-Backspace"],null),new v(null,1,[og,
"Ctrl-Alt-h"],null)],null),new U(null,3,5,V,[new v(null,2,[Y,"Mod-Delete",og,"Ctrl-Alt-Backspace"],null),new v(null,1,[og,"Alt-Delete"],null),new v(null,1,[og,"Alt-d"],null)],null),new U(null,3,5,V,[new v(null,2,[og,"Ctrl-ArrowDown",Dg,rg],null),new v(null,2,[Y,"PageDown",Dg,rg],null),new v(null,1,[og,"Ctrl-v"],null)],null),new U(null,3,5,V,[new v(null,2,[og,"Ctrl-ArrowUp",Dg,Yg],null),new v(null,2,[Y,"PageUp",Dg,Yg],null),new v(null,1,[og,"Alt-v"],null)],null),new U(null,2,5,V,[new v(null,1,[og,
"Cmd-ArrowRight"],null),new v(null,2,[og,"Ctrl-e",Dg,kg],null)],null),new U(null,1,5,V,[new v(null,2,[og,"Alt-f",Dg,gg],null)],null),new U(null,1,5,V,[new v(null,2,[Y,"Mod-u",ih,!0],null)],null),new U(null,2,5,V,[new v(null,2,[Y,"ArrowRight",Dg,Tg],null),new v(null,2,[og,"Ctrl-f",Dg,Tg],null)],null),new U(null,1,5,V,[new v(null,1,[og,"Ctrl-o"],null)],null),new U(null,1,5,V,[new v(null,1,[og,"Ctrl-t"],null)],null),new U(null,2,5,V,[new v(null,2,[Y,"ArrowUp",Dg,Hg],null),new v(null,2,[og,"Ctrl-p",Dg,
Hg],null)],null),new U(null,3,5,V,[new v(null,2,[og,"Cmd-ArrowUp",Dg,Eg],null),new v(null,2,[Y,"Mod-Home",Dg,Eg],null),new v(null,1,[og,"Alt-\x3c"],null)],null)]),ad=wf([oh,wg,dh,Rg,fh,eg,pg,mg,Cg,rh,Ng,fg],[new U(null,1,5,V,[new v(null,2,[Y,"Tab",jg,"Indent document (or selection)"],null)],null),new U(null,1,5,V,[new v(null,4,[Y,"Alt-ArrowLeft",Dg,Qg,jg,"Move cursor one unit to the left (shift: selects this region)",ih,!0],null)],null),new U(null,1,5,V,[new v(null,2,[Y,"Enter",jg,"Insert newline and indent"],
null)],null),new U(null,2,5,V,[new v(null,2,[jg,"Grow selections",Y,"Alt-ArrowUp"],null),new v(null,1,[Y,"Mod-1"],null)],null),new U(null,1,5,V,[new v(null,3,[Y,"Ctrl-k",jg,"Remove all forms from cursor to end of line",ih,!0],null)],null),new U(null,2,5,V,[new v(null,3,[Y,"Ctrl-ArrowRight",jg,"Expand collection to include form to the right",ih,!0],null),new v(null,2,[Y,"Mod-Shift-k",ih,!0],null)],null),new U(null,2,5,V,[new v(null,3,[Y,"Ctrl-ArrowLeft",jg,"Shrink collection forwards by one form",
ih,!0],null),new v(null,2,[Y,"Mod-Shift-j",ih,!0],null)],null),new U(null,1,5,V,[new v(null,2,[jg,"Shrink collection backwards by one form",Y,"Ctrl-Alt-ArrowRight"],null)],null),new U(null,1,5,V,[new v(null,4,[Y,"Alt-ArrowRight",Dg,Lg,jg,"Move cursor one unit to the right (shift: selects this region)",ih,!0],null)],null),new U(null,1,5,V,[new v(null,3,[jg,"Grow collection backwards by one form",Y,"Ctrl-Alt-ArrowLeft",ih,!0],null)],null),new U(null,1,5,V,[new v(null,3,[Y,"Alt-s",jg,"Lift contents of collection into parent",
ih,!0],null)],null),new U(null,2,5,V,[new v(null,2,[jg,"Shrink selections",Y,"Alt-ArrowDown"],null),new v(null,1,[Y,"Mod-2"],null)],null)]),zj=xj(yj),Aj=xj(ad).concat(zj);var Bj=function(){function a(b){return{from:b.from+1,to:b.to-1}}return{Vector:a,Map:a,List:a}}(),Cj=function(){var a=function(){var b=function(){var c=function(){var d=function(){var e=function(){var f=function(){var g=function(){var h={};h[Kh('"')]="string";h.LineComment="lineComment";h["VarName/Symbol"]="variableName definition";h.Boolean="atom";h.Keyword="atom";h.Number="number";return h}();g.DocString="+emphasis";return g}();f.RegExp="regexp";return f}();e.StringContent="string";return e}();d.Discard=
"!comment";return d}();c["Operator/Symbol"]="keyword";return c}();b.DefLike="keyword";return b}();a.Nil="null";return a}(),Dj=[Ih.LezerSyntax.define(Nh.parser.withProps(Pi,Ih.foldNodeProp.add(Bj),Gh.styleTags(Cj)),{languageData:{commentTokens:{line:";;"}}}),Dh.keymap([{key:"Backspace",run:function(a){a=null!=a&&(a.j&64||t===a.u)?T(W,a):a;var b=null!=a&&"state"in a?a.state:void 0;return Rh(a,lj(b))}},{key:"(",run:pj("(")},{key:"[",run:pj("[")},{key:"{",run:pj("{")},{key:'"',run:pj('"')},{key:")",run:qj(")")},
{key:"]",run:qj("]")},{key:"}",run:qj("}")}]),[rj,vj],Zi,Ch.EditorState.transactionFilter.of(function(a){var b=a.annotation(Ch.Transaction.userEvent),c=function(){switch(b){case "input":case "delete":case "keyboardselection":case "pointerselection":case "cut":return null;case "format-selections":return Ui(a.state);default:var d=a.state,e=new Ch.IndentContext(d);return Xh(a,function(f,g){return Ti(d,e,f.from,f.content,g)})}}();return w(c)?a.startState.update(function(){var d=null!=c?c:{};d.filter=
!1;return d}()):a}),Dh.EditorView.lineWrapping];Jh.buildParser('@external prop prefixColl from "./props"\n@external prop coll from "./props"\n@external prop prefixEdge from "./props"\n@external prop sameEdge from "./props"\n@external prop prefixContainer from "./props"\n\n@top Program { expression* }\n\n@skip { whitespace | LineComment | Discard }\nexpression { Constructor | Boolean | Nil | Deref | Quote | SyntaxQuote | Unquote | UnquoteSplice | Symbol | Number | Keyword | List | Vector | Map | String | Character | Set | NamespacedMap | RegExp | Var | ReaderConditional | DataLiteral | SymbolicValue | AnonymousFunction | Meta\x3cexpression\x3e }\nDiscard { "#_" expression }\n@precedence { docString @left, operator @left, meta @right, prefixLiteral @right }\n\nlistContents {\n   defList { defLikeWithMeta varNameWithMeta (DocString expression+ | expression+)? } |\n   anyList { operatorWithMeta? expression* }\n }\n\nDocString { !docString String }\nList[coll] { "(" listContents ")" }\nVector[coll] { "[" expression* "]" }\nMap[coll] { "{" expression* "}" }\nVarName { Symbol }\n\ncoll[@isGroup\x3dColl] {\n  List | Vector | Map\n}\nprefixColl[@isGroup\x3dPrefixColl] {\n  Set |\n  AnonymousFunction |\n  NamespacedMap |\n  Constructor |\n  ReaderConditional |\n  ReaderMetadata |\n  Metadata |\n  Deref |\n  Quote |\n  SyntaxQuote |\n  Unquote |\n  UnquoteSplice\n}\n\nprefixEdge[@isGroup\x3dPrefixEdge] {\n KeywordPrefix |\n ConstructorPrefix |\n "#" |\n "##" |\n "#\'" |\n "#?" |\n "#^" |\n "#_" |\n "\'" |\n "`" |\n "~" |\n "~@" |\n "^" |\n "@"\n}\n\n@skip {} {\n  dataLiteral { "#" ident }\n  DataLiteral { dataLiteral }\n  SymbolicValue { "##" ident }\n  Set[prefixColl] { "#" Map }\n  AnonymousFunction[prefixColl] { "#" List }\n\n  KeywordPrefix[prefixEdge] { "#" keyword }\n  NamespacedMap[prefixColl] { KeywordPrefix Map }\n\n  ConstructorPrefix[prefixEdge] { !prefixLiteral  dataLiteral }\n  Constructor[prefixColl] { ConstructorPrefix (Vector | Map) }\n\n  RegExp[prefixColl] { "#" String }\n  Var[prefixColl] { "#\'" Symbol }\n  ReaderConditional[prefixColl] { "#?" (List | Deref) }\n  ReaderMetadata[prefixColl] { "#^" expression }\n  Metadata[prefixColl] { "^" expression }\n  String { \'"\' StringContent? \'"\' }\n}\n\nMeta[prefixContainer]\x3ct\x3e { (Metadata | ReaderMetadata) !meta t }\n\nDeref[prefixColl] { "@" expression }\nQuote[prefixColl] { "\'" expression }\nSyntaxQuote[prefixColl] { "`" expression }\nUnquote[prefixColl] { "~" expression }\nUnquoteSplice[prefixColl] { "~@" expression }\noperatorWithMeta { Operator | Meta\x3coperatorWithMeta\x3e }\ndefLikeWithMeta { DefLike | Meta\x3cdefLikeWithMeta\x3e }\nvarNameWithMeta { VarName | Meta\x3cvarNameWithMeta\x3e }\n\nOperator { !operator Symbol }\n\n@tokens {\n\n\n  "["\n  "{"\n  "("\n\n  "#"[prefixEdge]\n  "##"[prefixEdge]\n  "#\'"[prefixEdge]\n  "#?"[prefixEdge]\n  "#^"[prefixEdge]\n  "#_"[prefixEdge]\n\n  \'"\'[sameEdge, closedBy\x3d\'"\', openedBy\x3d\'"\']\n  "\'"[prefixEdge]\n  "`"[prefixEdge]\n  "~"[prefixEdge]\n  "~@"[prefixEdge]\n  "^"[prefixEdge]\n  "@"[prefixEdge]\n\n\n  "]"\n  "}"\n  ")"\n\n  whitespace { (std.whitespace | ",")+ }\n\n  LineComment { ";" ![\\n]* }\n\n  identStart { std.asciiLetter | $[\x3c\x3e\x26%._\x3d?!*+\\-$\\u{a1}-\\u{10ff}/] }\n  identChar { identStart | std.digit | ":" | "\'" | "#" | "/"}\n  ident { identStart identChar* }\n  Symbol { ident }\n\n  keyword { ":" ":"? ident? } // the invalid token :: can also be considered as a keyword\n  Keyword { keyword }\n\n  Number {\n    ("+" | "-")? (std.digit+ ("." std.digit* "M"?)? | "." std.digit+) (("e" | "E") ("+" | "-")? std.digit+ "M"?)? |\n    ("+" | "-")? std.digit+ ("M" | "N") |\n    ("+" | "-")? std.digit+ "/" std.digit+ |\n    ("+" | "-")? "0x" (std.digit | $[a-fA-F])+ |\n    "0b" $[01]+ |\n    "0o" $[0-7]+\n  }\n  @precedence { Number, Symbol }\n\n  StringContent {\n    (!["] | "\\\\" _)+\n  }\n\n  Character { "\\\\" (std.asciiLetter | std.digit | "@")+ }\n\n}\n\nBoolean { @specialize\x3cSymbol, "true" | "false"\x3e }\nNil { @specialize\x3cSymbol, "nil"\x3e }\nDefLike[@dynamicPrecedence\x3d1] { @extend\x3cSymbol, "def" | "defn" | "defn-" | "defmacro" | "definline" | "defonce" | "deftest" | "defcard"\x3e }\n\n@detectDelim\n',
{externalProp:function(a){switch(a){case "prefixColl":return $h;case "coll":return Zh;case "prefixEdge":return ai;case "prefixContainer":return bi;case "sameEdge":return ei;default:throw Error(["No matching clause: ",z.c(a)].join(""));}}});var Ej=Dh.EditorView.theme({$content:{"white-space":"pre-wrap"},$$focused:{outline:"none"},$line:{padding:"0 9px","line-height":"1.6","font-size":"16px","font-family":"var(--code-font)"},$matchingBracket:{"border-bottom":"1px solid var(--teal-color)",color:"inherit"},$cursor:{visibility:"hidden"},"$$focused $cursor":{visibility:"visible"}}),Xi=[Dh.EditorView.lineWrapping,Ej,Hh.history(),Gh.defaultHighlighter,Dh.drawSelection(),Eh.lineNumbers(),Fh.foldGutter(),Ch.EditorState.allowMultipleSelections.of(!0),
Dj,Dh.keymap(Aj),Dh.keymap(Hh.historyKeymap)],Fj=new Sd(Bc);function Gj(){var a=Wi();Ud.l(Fj,Ac,new Dh.EditorView({state:a,parent:document.querySelector("#editor")}))}function Hj(a,b){var c=Nc(I(b))?new U(null,2,5,V,[I(b),ac(b)],null):new U(null,2,5,V,[null,b],null);b=S(c,0,null);c=S(c,1,null);return["\x3c",qd(a),z.c(ed(function(d,e,f){return[z.c(d)," ",qd(e),"\x3d'",z.c(f),"'"].join("")},"",b)),"\x3e",z.c(T(z,c)),"\x3c/",qd(a),"\x3e"].join("")}
function Ij(){for(var a=G(bb(Fj)),b=null,c=0,d=0;;)if(d<c){var e=b.R(null,d);e.destroy.call(e);d+=1}else if(a=G(a))b=a,Qc(b)?(a=Db(b),d=Eb(b),b=a,c=O(a),a=d):(a=I(b),a.destroy.call(a),a=K(b),b=null,c=0),d=0;else break;Gj();a=document.getElementById("docs");(null!=a?a:{}).innerHTML=Hj(gh,vc([Hj(hg,vc([new v(null,2,[Mg,0,xg,"w-full"],null),Ca(function(f,g){var h=S(g,0,null);g=S(g,1,null);g=S(g,0,null);var l=null!=g&&(g.j&64||t===g.u)?T(W,g):g;g=C.g(l,Y);var m=C.g(l,Dg);l=C.g(l,jg);return[z.c(f),Hj(Ug,
vc([new v(null,1,[xg,"border-t even:bg-gray-100"],null),Hj($g,vc([new v(null,1,[xg,"px-3 py-1 align-top"],null),Hj(Xg,vc([qd(h)]))])),Hj($g,vc([new v(null,1,[xg,"px-3 py-1 align-top monospace text-sm"],null),g])),Hj($g,vc([new v(null,1,[xg,"px-3 py-1 align-top"],null),l]))])),w(m)?Hj(Ug,vc([new v(null,1,[xg,"border-t even:bg-gray-100"],null),Hj($g,vc([new v(null,1,[xg,"px-3 py-1 align-top"],null),Hj(Xg,vc([qd(m)]))])),Hj($g,vc([new v(null,1,[xg,"px-3 py-1 align-top monospace text-sm"],null),["Shift-",
z.c(g)].join("")])),Hj($g,vc([new v(null,1,[xg,"px-3 py-1 align-top"],null),""]))])):null].join("")},"",$c()),"\x3c/table\x3e"]))]));zc(bb(Fj)).focus()};try{Ij()}catch(a){throw console.error("An error occurred when calling (codemirror-next.clojure.demo/render)"),a;};
}).call(this);